var LinksDropDown={isHandlerSetup:false,$foundLinks:[],$foundOALinks:[],hideMenu:function(d){var a=$(d.target);if(!d.target){a=d.srcElement}if(a.is(".button-ft")){if(a.is(".button-active-nohilite")){$(".popup-full-text").hide();$(".button-ft").removeClass("button-active-nohilite");$("#buttonftIcon").removeClass("fa-caret-up").addClass("fa-caret-down")}else{$(".popup-full-text").hide();a.addClass("button-active-nohilite");$("#buttonftIcon").removeClass("fa-caret-down").addClass("fa-caret-up");var b=a.attr("name");var c=$("#"+b+"_menu");c.show()}}else{if(a.is("#buttonftIcon")){if(a.is(".fa-caret-up")){$(".popup-full-text").hide();$("#buttonftIconSpan").removeClass("button-active-nohilite");$("#buttonftIcon").removeClass("fa-caret-up").addClass("fa-caret-down")}else{$(".popup-full-text").hide();$("#buttonftIconSpan").addClass("button-active-nohilite");$("#buttonftIcon").removeClass("fa-caret-down").addClass("fa-caret-up");var b=$("#buttonftIconSpan").attr("name");var c=$("#"+b+"_menu");c.show()}}else{$(".popup-full-text").hide();$(".button-ft").removeClass("button-active-nohilite");$("#buttonftIcon").removeClass("fa-caret-up").addClass("fa-caret-down")}}},activateHandler:function(){if(!this.isHandlerSetup){this.isHandlerSetup=true;$("body").click(this.hideMenu)}},activateButton:function(b){copy_async_data("tmp_full_text_"+b+"_links","full_text_"+b+"_links");this.$foundOALinks[b]=$("[id^='open'][name='open_url'][is_best='N']");this.$foundLinks[b]=$("#full_text_"+b+"_menu").find("a");var c=this.$foundOALinks[b].length+this.$foundLinks[b].length;if(c==1){var a=$("#full_text_"+b+"_links").html();$("#links_openurl_"+b).hide();$("#links_ncbi_db_"+b).hide();$("#links_opac_"+b).hide();$("#solo_full_text_"+b).html(a);$("#solo_full_text_"+b).show()}else{if(c>0){$("#full_text_"+b).show()}}},replacement_of_full_text_links:function(f,i){var h=getMessageById("full_text_from_scielo_txt");var j=getMessageById("full_text_from_rsci_txt");var t=getMessageById("full_text_from_kjd_txt");var q=getMessageById("full_text_from_scielo_title");var g=getMessageById("full_text_from_rsci_title");var l=getMessageById("full_text_from_kjd_title");var u=getMessageById("open_access_for_"+i);var p="#links_full_text_"+i;var k=$(p);var n="coll_id_"+i;var m=document.getElementById(n);if(k){var d=k.find("A");var r=d.attr("onclick");if(r!=null){if(r.search("link_type=FULL_TEXT")==-1){var b=d.attr("class");var o="FULLTEXTFROMDATA";if(m&&typeof m!=="undefined"){m=m.getAttribute("value");if(f=="UA"&&m=="SCIELO"){if(b.indexOf(o)!=-1&&u=="NO"){d.text(h);d.addClass("oa_icon_neutral");d.attr("title",q)}else{d.remove()}}if(f=="UA"&&m=="RSCI"){if(b.indexOf(o)!=-1){d.text(j);d.attr("title",g)}}if(f=="UA"&&m=="KJD"){if(b.indexOf(o)!=-1){d.text(t);d.attr("title",l)}}}}}}var a="#solo_full_text_"+i;var s=$(a);if(s){var d=s.find("A");var r=d.attr("onclick");if(r&&r.search("link_type=FULL_TEXT")!=-1){if(m&&typeof m!=="undefined"){m=m.getAttribute("value");var b=d.attr("class");var o="FULLTEXTFROMDATA";if(m=="KJD"){if(b.indexOf(o)!=-1){d.text(t);d.attr("title",l)}}if(m=="RSCI"&&b.indexOf(o)!=-1){d.text(j);d.attr("title",g)}if(m=="SCIELO"&&b.indexOf(o)!=-1){if(u=="NO"){d.text(h);d.addClass("oa_icon_neutral");d.attr("title","View "+q)}else{d.remove()}}}}}this.$foundLinks[i]=$("#full_text_"+i+"_menu").find("a");if(this.$foundLinks[i].length>1){if(m&&typeof m!=="undefined"){m=m.getAttribute("value")}var c="#full_text_"+i+"_links";var e=$(c);if(e){$(e.find("A")).each(function(){var w=$(this).attr("onclick");if(w.search("link_type=FULL_TEXT")!=-1&&f=="SCIELO"){$(this).addClass("oa_icon_neutral");$(".popup-ft-list li").first().remove();$("#stnd_aln_fulltext_"+i+"_links").append($(this));$(this).attr("title",q)}if(w.search("link_type=FULL_TEXT")!=-1&&(f=="RSCI"||f=="KJD")){var v=this.className;var x="FULLTEXTFROMDATA";if(v.indexOf(x)!=-1){$("#stnd_aln_fulltext_"+i+"_links").append($(this))}}if(w.search("link_type=FULL_TEXT")!=-1){var v=this.className;var x="FULLTEXTFROMDATA";if(m=="KJD"){if(v.indexOf(x)!=-1){$(this).text(t);$("#stnd_aln_fulltext_"+i+"_links").append($(this));$(this).attr("title",l)}}if(m=="RSCI"&&v.indexOf(x)!=-1){$(this).text(j);$("#stnd_aln_fulltext_"+i+"_links").append($(this));$(this).attr("title",g)}if(m=="SCIELO"&&v.indexOf(x)!=-1){if(u=="NO"){$(this).text(h);$("#stnd_aln_fulltext_"+i+"_links").append($(this));$(this).addClass("oa_icon_neutral");$(this).attr("title","View "+q)}else{$(this).remove()}}}})}}}};function processOAIcon(g,b,h,k){var d="openAccess_"+h;var j=document.getElementById(d);if(j==null){return}if(j.value!=""){var m="#solo_full_text_"+h;var f=$(m);if(f){var a=f.find("A");var c=a.attr("onclick");if(c&&c.search("link_type=FULL_TEXT")!=-1){if(c.search("publisher_id=CASIRgrid")!=-1){a.addClass("openAccess");if(!a.is("."+b+"_link")){a.attr("title",g)}}else{a.remove()}}}var e="#full_text_"+h+"_links";var l=$(e);if(l){$(l.find("A")).each(function(){var o=$(this).attr("onclick");if(o.search("link_type=FULL_TEXT")!=-1){if(o.search("publisher_id=CASIRgrid")!=-1){$(this).addClass("openAccess");if(!$(this).is("."+b+"_link")){$(this).attr("title",g)}}else{$(this).remove()}}})}var i="#links_full_text_"+h;var n=$(i);if(n){var a=n.find("A");var c=a.attr("onclick");if(c!=null){if(c.search("publisher_id=GoogleScholar")==-1){a.remove()}}}if($("#full_text_"+h+"_links").find("a").length==0){$("#full_text_"+h).parent("div").hide()}}}function processDRCIViewData(){var a=document.getElementById("source_url_view_data");if(a!=null){$("#drci_view_data").append(a)}};