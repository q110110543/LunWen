var style="";var emv1="";var targeturl="";var getCountURL="";var validated=false;var reload=false;(function(c){var a=c.noop;if(c.browser.msie){a=function(g){var d=c(g).parent(".ui-dialog");var f=d.innerWidth();if(f){d.css("width",f)}}}var b=c.ui.dialog.prototype._init;c.ui.dialog.prototype._init=function(){if(this.options.width=="auto"){var d=this.options.open;this.options.open=function(){a(this);if(d){d.apply(this)}}}if(c.browser.msie&&this.options.hide=="drop"){this.options.hide="fold"}return b.apply(this)}})(jQuery);$("#csi_error").hide();$("#csi_error_ic").hide();$("#csi_regerror").hide();$("#localsssheader").hide();var checkemailovlstartDialogOpts={autoOpen:false,dialogClass:"ui-dialog-csi",width:"750",height:"auto",modal:true,resizable:false,overlay:{opacity:0.1,background:"#C2C2C2"},close:function(){checkCloseRedirect("csiCheckEmailCloseRedirect");validated=false;$("#checkemailovlstart #checkemail").val("");$("#checkemailovlstart #checkretyemail").val("");$("#checkemailovlstart #csi_regerror").html("");$("#checkemailovlstart #csi_regerror").hide()},open:function(){validated=false;$("#checkEmailValidator1").hide();$("#enterEmailMessage1").hide();$("#enterValidEmailMessage1").hide();$("#checkEmailValidator2").hide();$("#enterEmailMessage2").hide();var a={checkemail1:function(){var c=$("#checkemail");var b=/^([a-zA-Z0-9])(([a-zA-Z0-9])*(['\._-])?([a-zA-Z0-9]))*@(([a-zA-Z0-9\-])+(\.))+([a-zA-Z]{2,4})+$/;if(c.val()==null||c.val()==""){a.emailerror=true;$("#checkEmailValidator1").show();$("#enterEmailMessage1").show();$("#enterValidEmailMessage1").hide();$("#checkEmailValidator2").hide();$("#enterEmailMessage2").hide()}else{if(!b.test(c.val())){a.emailerror=true;$("#checkEmailValidator1").show();$("#enterValidEmailMessage1").show();$("#enterEmailMessage1").hide();$("#checkEmailValidator2").hide();$("#enterEmailMessage2").hide()}else{a.emailerror=false;$("#checkEmailValidator1").hide();$("#enterValidEmailMessage1").hide();$("#enterEmailMessage1").hide()}}},checkemail2:function(){var b=$("#checkemail");var c=$("#checkretyemail");if(b.val()!=""&&a.emailerror==false){if(c.val()==null||c.val()==""){a.checkemailerror=true;$("#checkEmailValidator2").show();$("#enterEmailMessage2").show()}else{a.checkemailerror=false;$("#checkEmailValidator2").hide();$("#enterEmailMessage2").hide()}}},grayOut:function(){var b=$("#checkemailovlstart #checkretyemail");b.prop("disabled",true)},sendForm:function(){$("#checkemailovlstart #csi_regerror").hide();a.checkemail1();a.checkemail2();if(a.emailerror||a.checkemailerror){return false}if($("#checkemail").val()==$("#checkretyemail").val()){validated=true;return checkEmail($("#csiURL").val(),"e1","e2","e3")}$("#checkemailovlstart #csi_regerror").html($("#checkemailovlstart #regEmailUnmatchErrorMessage").val()).show();return false}};$("#checkemailovlstart #continue").click(function(){if(!validated){a.sendForm()}return false});$("#checkemail").keydown(function(b){if(b.keyCode==13){if(!validated){a.sendForm()}return false}});$("#checkretyemail").keydown(function(b){if(b.keyCode==13){if(!validated){a.sendForm()}return false}})}};var csiregistrationovlDialogOpts={autoOpen:false,dialogClass:"ui-dialog-csi",width:"750",height:"auto",modal:true,resizable:false,overlay:{opacity:0.1,background:"#C2C2C2"},close:function(){checkCloseRedirect("csiRegCloseRedirect");$("#checkemailovlstart #checkemail").val("");$("#checkemailovlstart #checkretyemail").val("");$("#csiregistrationovl #csi_regerror").html("");$("#csiregistrationovl #csi_regerror").hide()},open:function(b,c){if($("#emailErrorKey").html()=="Server.registerWithSecondaryEmail"){$("#secondaryEmailValidator").show();$("#registerWithSecondaryEmail").show()}else{$("#secondaryEmailValidator").hide();$("#registerWithSecondaryEmail").hide()}$("#firstNameValidator").hide();$("#enterFirstName").hide();$("#lastNameValidator").hide();$("#enterLastName").hide();$("#passwordValidator1").hide();$("#enterPassword1").hide();$("#passwordValidator2").hide();$("#enterPassword2Empty").hide();$("#enterPassword2NoMatch").hide();$("#roleValidator").hide();$("#selectRole").hide();$("#subjectAreaValidator").hide();$("#selectSubjectArea").hide();$("#rAndRValidator").hide();$("#acceptRAndR").hide();var a={firstname:function(){if($("#firstName").val()==""){$("#firstNameValidator").show();$("#enterFirstName").show();return false}else{$("#firstNameValidator").hide();$("#enterFirstName").hide();return true}},lastname:function(){if($("#lastName").val()==""){$("#lastNameValidator").show();$("#enterLastName").show();return false}else{$("#lastNameValidator").hide();$("#enterLastName").hide();return true}},checkpassword1:function(){var f=$("#passwordreg");var g=$("#retypePass");var d=/^.*(?=.{8,})(?=.*\d)(?=.*[a-zA-Z])(?=.*[!@#$%^*()~`{}[\]|&_]).*$/;if(!d.test(f.val())){a.passerror=true;$("#passwordValidator1").show();$("#enterPassword1").show();$("#passwordValidator2").hide();$("#enterPassword2Empty").hide();$("#enterPassword2NoMatch").hide();return false}else{a.passerror=false;$("#passwordValidator1").hide();$("#enterPassword1").hide()}return true},checkpassword2:function(){var d=$("#passwordreg");var f=$("#retypePass");if($.trim(f.val())==""){a.errors=true;$("#passwordValidator2").show();$("#enterPassword2Empty").show();$("#enterPassword2NoMatch").hide();return false}else{if(d.val()!=(f.val())){a.errors=true;$("#passwordValidator2").show();$("#enterPassword2Empty").hide();$("#enterPassword2NoMatch").show();return false}else{a.errors=false;$("#passwordValidator2").hide();$("#enterPassword2Empty").hide();$("#enterPassword2NoMatch").hide();return true}}},role:function(){if(!$("#role").val().match("^Select")){$("#roleValidator").hide();$("#selectRole").hide();return true}else{$("#roleValidator").show();$("#selectRole").show();return false}},subject:function(){if(!$("#subject").val().match("^Select")){$("#subjectAreaValidator").hide();$("#selectSubjectArea").hide();return true}else{$("#subjectAreaValidator").show();$("#selectSubjectArea").show();return false}},randr:function(){if($("#rAndR").is(":checked")){$("#rAndRValidator").hide();$("#acceptRAndR").hide();return true}else{$("#rAndRValidator").show();$("#acceptRAndR").show();return false}},grayOut:function(){var d=$("#retypePass");d.prop("disabled",true)}};$("#csiregistrationovl #submit_reg").click(function(){var d=true;if(!a.firstname()){d=false}if(!a.lastname()){d=false}if(!a.checkpassword1()){d=false}if(!a.checkpassword2()){d=false}if(!a.role()){d=false}if(!a.subject()){d=false}if(!a.randr()){d=false}if(d){$("#submit_reg").off("click");return submit_regovl()}return false})}};function csicancel(){$("#csiovldialog").dialog("close");$("#csiovldialog-incites").dialog("close")}function csiregcheckemailcancel(){$("#checkemailovlstart").dialog("close")}function csiregcancel(){$("#csiregistrationovl").dialog("close")}function verifyemailClose(){$("#checkemailcode #verifybutton2").hide();$("#checkemailcode #verifybutton1").show();$("#checkemailcode").dialog("close")}function opencsiovlfromreg(){var a=$("#csiCheckEmailCloseRedirect").val();$("#csiCheckEmailCloseRedirect").val("");csiregcheckemailcancel();if(a!=null&&a=="yes"){$("#csiCheckEmailCloseRedirect").val("yes")}csiovl("","")}function csiovl(a,d,b){$("#remember").show();$("#register").show();if($(".nav-item").hasClass("show-subnav")){$(".nav-item").removeClass("show-subnav")}if(b){invokeAutoSubmit()}style=a;csidiag="#csiovldialog";switch(style){case"INCITES":csidiag="#csiovldialog-incites";break;default:break}targeturl=d;$("#s2id_saveToMenu").click();$("#csiovldialog").dialog({title:$("#csiovldialog #csititle").val(),width:750});$("#csiovldialog #localsssheader").html("");$("#csiovldialog #localsssheader").hide();$("#localssstext #localsss").hide();$("#localssstext #localsssopen").hide();$("#localSaveError").html("");$("#csiFrom").val(style);switch(style){case"":case"qoFastSave":$("#styletext").html($("#csigeneraltext").html());break;case"SETTINGS":$("#styletext").html($("#csisettingstext").html());break;case"ChemSearch":$("#styletext").html($("#csichemtext").html());break;case"ENW":$("#styletext").html($("#csienwtext").html());break;case"SAVEENW":$("#styletext").html($("#csienwtext").html());break;case"RID":$("#styletext").html($("#csiridtext").html());break;case"INCITES":$("#remember").hide();$("#register").hide();$("#styletext-incites").html($("#csiincitestext").html());break;case"SSSSave":$("#csiovldialog").dialog({title:$("#csiovldialog #csissssavetitle").val()});$("#csiovldialog #localsssheader").html($("#csissssaveheader").html());$("#csiovldialog #localsssheader").show();$("#styletext").html($("#csissstext").html());$(".CHEMsummImg").hide();$("#localssstext #localsss").show();break;case"SSS":$("#csiovldialog").dialog({title:$("#csiovldialog #csisssopentitle").val()});$("#csiovldialog #localsssheader").html($("#csisssopenheader").html());$("#csiovldialog #localsssheader").show();$("#styletext").html($("#csissstext").html());$("#localssstext #localsssopen").show();$("#localssstext #localsssopen #sssLocalSavedSearchError").hide();break;case"PCT":$("#styletext").html($("#csipcttext").html());break;case"PCTAdd":$("#styletext").html($("#csipcttext").html());break;case"MJL":$("#styletext").html($("#csimjltext").html());break;case"SQC":case"SaveToML":$("#styletext").html($("#csigeneraltext").html());getCountURL=d;targeturl="";break;case"openManage":$("#styletext").html($("#csigeneraltext").html());break;default:$("#styletext").html($("#csisqctext").html());break}$("#csiovldialog-incites").dialog("widget").find(".ui-dialog-titlebar").hide();if($.browser.msie){$(csidiag).dialog({height:"100%"});$(csidiag).dialog("open");$(csidiag).removeAttr("style")}else{$(csidiag).dialog("open")}$(csidiag).dialog("option","position","center");$("body").on("keydown",".csi-dialog-button",function(g){var f=this;if(g.keyCode===$.ui.keyCode.ENTER&&$(document.activeElement).hasClass("csi-dialog-button")){e.preventDefault();$(f).trigger("click");$(f).blur()}});$("body").on("keydown",".csi-dialog-button-file",function(g){var f=this;if(g.keyCode===$.ui.keyCode.ENTER&&$(document.activeElement).hasClass("csi-dialog-button-file")){$(f).trigger("click");$(f).blur()}});var c=$("#invalidFileError").val();if(c!=null&&c=="error"){$("#csiCloseRedirect").val("yes");$("#csiCheckEmailCloseRedirect").val("yes");$("#csiRegCloseRedirect").val("yes")}$(csidiag).show();$(csidiag).on("dialogclose",function(f){$(".CHEMsummImg").show()})}function csiCheckemailovl(b){if(targeturl==null||targeturl.length<=0){targeturl=b}$("#csi_regerror").html("").hide();var a=$("#csiCloseRedirect").val();$("#csiCloseRedirect").val("");if($.browser.msie){$("#checkemailovlstart").dialog(checkemailovlstartDialogOpts).dialog("option",{height:"100%"});$("#csiovldialog").dialog("close");if(a!=null&&a=="yes"){$("#csiCloseRedirect").val("yes");$("#csiCheckEmailCloseRedirect").val("yes")}$("#checkemailovlstart").dialog("open");$("#checkemailovlstart").removeAttr("style")}else{if($("#csiovldialog").hasClass("ui-dialog-content")){$("#csiovldialog").dialog("close")}$("#checkemailovlstart").dialog(checkemailovlstartDialogOpts).dialog("open")}$("#checkemailovlstart").dialog("option","position","center");$("#checkemailovlstart").keydown(function(c){if(c.keyCode==13){return $("#checkemailovlstart #continue").click()}})}function verifyEmail(b){if(b===""){b=emv1}else{emv1=b}var a="SecurityKeyLookup.do?action=generateEmail";$.ajax({type:"POST",url:a,data:{SID:$("#SID").val(),product:"UA",email:b,emailTitle:$("#verifyemailtitle").html(),emailText:$("#verifyemailtext").html()},dataType:"text",crossDomain:false,xhrFields:{withCredentials:true},success:function(c){$("#checkemailcode #verifybutton2").hide();$("#checkemailcode #verifybutton1").show();if(c==="true"){$("#checkemailovlstart").dialog("close");$("#csi_regerror").html("").hide();$("#checkemailcode #codeerror").html("");$("#checkemailcode #emailcode").val("");$("#checkemailcode #email_val").html(b);$("#checkemailcode").dialog("open");$("#checkemailcode").show();$("#checkemailcode").dialog("option","position","center");$("#checkemailcode").keydown(function(d){if(d.keyCode==13){return $("#checkemailcode #email-code-continue").click()}})}else{alert($("#verifyemailerror3").text())}},error:function(c){alert($("#verifyemailerror3").text())}})}function verifyEmailCode(){var c=$("#email_val").val();var b=$("#emailcode").val();if(b.length){var a="SecurityKeyLookup.do?action=validateSecurityKey";$.ajax({type:"POST",url:a,data:{SID:$("#SID").val(),product:"UA",ID:b},dataType:"text",crossDomain:false,xhrFields:{withCredentials:true},success:function(d){if(d.indexOf("true")!=-1){$("#checkemailcode").dialog("close");if($.browser.msie){$("#csi_regerrorpw").hide();$("#csiregistrationovl").dialog({height:"100%"});$("#csiregistrationovl").dialog("open");$("#csiregistrationovl").removeAttr("style");$("#csiregistrationovl").dialog("option","position","center");$("#csiregistrationovl").css("overflow","hidden")}else{$("#csi_regerrorpw").hide();$("#csiregistrationovl").dialog("open");$("#csiregistrationovl").dialog("option","position","center");$("#csiregistrationovl").css("overflow","hidden")}}else{if(d.indexOf("false")!=-1){$("#checkemailcode #codeerror").html($("#verifyemailerror1").text()).show()}else{if(d.indexOf("reject")!=-1){$("#checkemailcode #codeerror").html($("#verifyemailerror2").text()).show();$("#checkemailcode #verifybutton1").hide();$("#checkemailcode #verifybutton2").show();setTimeout(verifyemailClose,5000)}}}},error:function(d){$("#checkemailcode #codeerror").html($("#verifyemailerror3").text()).show();$("#checkemailcode #verifybutton1").hide();$("#checkemailcode #verifybutton2").show()}})}else{$("#checkemailcode #codeerror").html($("#verifyemailerror4").text()).show()}}function convertToJSON(a){a=JSON.stringify(a)}function signIn(a){var k=getMessageById("csisignintext");var h=getMessageById("csisigningintext");$("#signInImageEnabled").hide();$("#signInButton").prop("disabled",true);$("#signInButton").html(h);$("#signInImageDisabled").show();var l=$("#currUrl").val();if(style==="SaveToML"){l=window.location.href}var j="json";var b="";var g=a.replace("csihome.do","signinovl.do");var c=true;var f=$("#email").val();var d=$("#password").val();switch(style){case"qoFastSave":g=$("#csiURL").val().replace("csihome.do","signinovl.do");l=l+"&continueAction=fastSave";break;case"INCITES":f=$("#email_ic").val();d=$("#password_ic").val();break;default:break}if(!$.support.cors){g="OutboundService.do?action=go&mode=csisigninService";c=false}$("#rememberme").attr("value",$("#rememberme").attr("checked")?1:0);$.ajax({type:"POST",url:g&&g.length?g:$("#csiURL").val(),data:{SID:$("#SID").val(),email:f,password:d,product:"UA",rememberme:$("#rememberme").val(),csiFrom:$("#csiFrom").val(),overlay:"yes"},dataType:j,crossDomain:c,xhrFields:{withCredentials:true},success:function(m){$.map(m,function(r,p){if(p=="ERROR"){$("#signInImageEnabled").show();$("#signInButton").prop("disabled",false);$("#signInButton").html(k);$("#signInImageDisabled").hide();$("#csi_error").html(r[0]);$("#csi_error").show();$("#csi_error_ic").html(r[0]);$("#csi_error_ic").show()}else{if(p=="CHECKRANDR"){$("#signInImageEnabled").show();$("#signInButton").prop("disabled",false);$("#signInImageDisabled").hide();$("#signInButton").html(k);var n=r;var o=a.replace("csihome.do","signinTerms.do");o+="?SID="+$("#SID").val()+"&rurl="+encodeURIComponent(l)+"&userID="+n+"&product=Portal";$(location).attr("href",o)}else{if(targeturl==null||targeturl==""){targeturl=location.href}if(targeturl.indexOf("ExcludeIfFromNonInterProduct")>-1){targeturl=targeturl.replace("ExcludeIfFromNonInterProduct","ExcludeIfReload")}if(targeturl.indexOf("ExcludeIfFromFullRecPage")>-1){targeturl=targeturl.replace("EExcludeIfFromFullRecPage","ExcludeIfReload")}if(targeturl.indexOf("excludeEventConfig")==-1){if(targeturl.indexOf("?")==-1){targeturl=targeturl+"?excludeEventConfig=ExcludeIfReload"}else{targeturl=targeturl+"&excludeEventConfig=ExcludeIfReload"}}switch(style){case"":window.location.replace(targeturl);break;case"SETTINGS":$(location).attr("href",l);break;case"ChemSearch":window.location.replace(targeturl);break;case"SAVEENW":$("#enw_signedin").val("true");$("#csiovldialog").dialog("close");var q=jQuery.Event("click");q.val="enw";$(".quickOutputENW.subnav-link").first().trigger(q);break;case"ENW":$(location).attr("href",l);open_location(targeturl,"_ENW_");break;case"RID":$(location).attr("href",l);open_location(targeturl,"_RID_");break;case"SSSSave":l+="&newCurrUrl="+encodeURIComponent(l);$(location).attr("href",l);break;case"PCTAdd":l+="&newCurrUrl="+encodeURIComponent(l);$(location).attr("href",l);break;case"SSS":l=l.replace("&localRunSearchStatus=error","");targeturl+="&rurl="+encodeURIComponent(l);$(location).attr("href",targeturl);break;case"PCT":l=$("#rurl").val();targeturl+="&rurl="+l;$(location).attr("href",targeturl);break;case"MJL":l=$("#rurl").val();targeturl+="&rurl="+l;$(location).attr("href",targeturl);break;case"SQC":l=$("#rurl").val();targeturl+="&rurl="+l;$(location).attr("href",targeturl);break;case"INCITES":$("#incites_signedin").val("true");$("#force_refreshpage").val("true");$("#IncitesEntitled").val("yes");$("#csiovldialog-incites").dialog("close");var q=jQuery.Event("click");q.val="incites";$(".quickOutputIncites.subnav-link").first().trigger(q);break;case"SaveToML":l+="&newMLUrl=true";$(location).attr("href",l);break;case"openManage":targeturl+="&rurl="+l;$(location).attr("href",targeturl);break;case"qoFastSave":$("#fast5K_signedin").val("true");$("#force_refreshpage").val("true");$("#csiovldialog").dialog("close");var q=jQuery.Event("click");q.val="fastSave";$(".quickOutputFastSave.subnav-link").first().trigger(q);break}}}})},error:function(m){$("#signInImageEnabled").show();$("#signInButton").prop("disabled",false);$("#signInImageDisabled").hide();$("#signInButton").html(k);if(!m.responseText){$(location).attr("href",l)}else{$("#csi_error").html(m.responseText);$("#csi_error").show();$("#csi_error_ic").html(m.responseText);$("#csi_error_ic").show()}}})}function set_autocookie(f,d,b,h){var c="json";var g="";var a=f.replace("csihome.do","setautocookie.do");if(!$.support.cors){a+="?jsonp=?";c="jsonp";g="convertToJSON"}$.ajax({type:"POST",url:a,data:{SID:$("#SID").val(),email:d,password:b,rememberme:h,overlay:"yes"},jsonpCallback:g,dataType:c,crossDomain:true,xhrFields:{withCredentials:true},success:function(j){},error:function(j){}})}function inputPasswd(g,d){var f=$("#currUrl").val();var c="json";var b=$("#csiURL").val().replace("csihome.do","signinovl.do");var a=true;if(!$.support.cors){b="OutboundService.do?action=go&mode=csisigninService";a=false}$.ajax({type:"POST",url:b,data:{SID:$("#SID").val(),email:d,password:$("#passwd").val(),product:"UA",overlay:"yes"},dataType:c,crossDomain:a,success:function(h){$.map(h,function(m,l){if(l=="ERROR"){$("#csi_regerrorpw").html(m[0]);$("#csi_regerrorpw").show(0,function(){})}else{if(l=="CHECKRANDR"){var j=m;var k=$("#csiURL").val().replace("csihome.do","signinTerms.do");k+="?SID="+$("#SID").val()+"&rurl="+encodeURIComponent(f)+"&email="+encodeURIComponent(d)+"&password="+encodeURIComponent($("#passwd").val())+"&userID="+j+"&product=Portal";$(location).attr("href",k)}else{switch(style){case"":window.location.reload();break;case"SETTINGS":$("#styletext").html($("#csisettingstext").html());$(location).attr("href",f);break;case"ChemSearch":window.location.reload();break;case"ENW":$(location).attr("href",f);open_location(targeturl,"_ENW_");break;case"RID":$(location).attr("href",f);open_location(targeturl,"_RID_");break;case"SSS":f=$("#rurl").val();case"PCT":f=$("#rurl").val();case"MJL":f=$("#rurl").val();case"SQC":f=$("#rurl").val();default:targeturl+="&rurl="+f;$(location).attr("href",targeturl);break}}}})},error:function(h){if(!h.responseText){$(location).attr("href",f)}else{$("#csiregistrationovl #csi_regerror").html(h.responseText);$("#csiregistrationovl #csi_regerror").show()}}})}function checkEmail(h,d,b,a){var g=$("#currUrl").val();var c="html";var f=$("#checkemailovlstart #checkemail").val();var j="";if($.support.cors&&h){j=h;j=j.replace("csihome.do","checkemailovl.do");checkEmailCORS(g,j,c,f)}if(!j){j="OutboundService.do?action=go&mode=csiceService";checkEmailOutboundService(g,j,c,f)}}function checkEmailCORS(c,d,a,b){$.ajax({type:"POST",url:d,data:{email:b,SID:$("#SID").val(),product:"UA",overlay:"yes"},dataType:a,crossDomain:true,xhrFields:{withCredentials:true},success:function(f){$("#csiCheckEmailCloseRedirect").val("");$("#csiregistrationovl").dialog(csiregistrationovlDialogOpts).html(f);if(f.indexOf("inputPasswd")!=-1){$("#checkemailovlstart").dialog("close");if($.browser.msie){$("#csi_regerrorpw").hide();$("#csiregistrationovl").dialog({height:"100%"});$("#csiregistrationovl").dialog("open");$("#csiregistrationovl").removeAttr("style");$("#csiregistrationovl").dialog("option","position","center");$("#csi_regerrorpw").hide();$("#csiregistrationovl").css("overflow","hidden")}else{$("#csi_regerrorpw").hide();$("#csiregistrationovl").dialog("open");$("#csiregistrationovl").dialog("option","position","center");$("#csi_regerrorpw").hide();$("#csiregistrationovl").css("overflow","hidden")}}else{verifyEmail(b)}},error:function(f){if(!f.responseText){$(location).attr("href",c)}else{$("#csiregistrationovl").dialog(csiregistrationovlDialogOpts).html(f);$("#checkemailovlstart").dialog("close");$("#csiregistrationovl").dialog("open")}}})}function checkEmailOutboundService(c,d,a,b){$.ajax({type:"POST",url:d,data:{email:b,SID:$("#SID").val(),product:"UA",overlay:"yes"},dataType:a,success:function(f){$("#csiCheckEmailCloseRedirect").val("");$("#csiregistrationovl").dialog(csiregistrationovlDialogOpts).html(f);if(f.indexOf("inputPasswd")!=-1){$("#checkemailovlstart").dialog("close");if($.browser.msie){$("#csi_regerrorpw").hide();$("#csiregistrationovl").dialog({height:"100%"});$("#csiregistrationovl").dialog("open");$("#csiregistrationovl").removeAttr("style");$("#csiregistrationovl").dialog("option","position","center");$("#csi_regerrorpw").hide();$("#csiregistrationovl").css("overflow","hidden")}else{$("#csi_regerrorpw").hide();$("#csiregistrationovl").dialog("open");$("#csiregistrationovl").dialog("option","position","center");$("#csi_regerrorpw").hide();$("#csiregistrationovl").css("overflow","hidden")}}else{verifyEmail(b)}},error:function(f){if(!f.responseText){$(location).attr("href",c)}else{$("#csiregistrationovl").dialog(csiregistrationovlDialogOpts).html(f);$("#checkemailovlstart").dialog("close");$("#csiregistrationovl").dialog("open")}}})}function submit_regovl(){var g=document.getElementById("image_url");if(typeof g!=="undefined"&&g!==null){image_urlval=document.getElementById("image_url").value}var f=image_urlval+"/saving_disabled.gif";document.getElementById("submit_reg").src=f;var d=$("#csiURL").val();var c=$("#currUrl").val();c=c.replace("&localRunSearchStatus=error","");if(targeturl==null||targeturl.length<=0){targeturl=c}if(targeturl.indexOf("?")==-1){targeturl=c}else{targeturl=targeturl+"&rurl="+encodeURIComponent(c)}if(style=="SSSSave"||style=="PCTAdd"){targeturl=c+"&newCurrUrl="+encodeURIComponent(c)}if(style=="SaveToML"){c=window.location.href;targeturl=c+"&newMLUrl=true"}var a="html";var b="";if($.support.cors&&d){b=d;b=b.replace("csihome.do","registerovl.do");registerCORS(targeturl,b,a)}if(!b){b="OutboundService.do?action=go&mode=csiregService";registerOutboundService(targeturl,b,a)}}function registerCORS(b,c,a){$.ajax({type:"POST",url:c,data:{SID:$("#SID").val(),product:"UA",rurl:b,email:document.getElementById("regemail").value,fname:document.getElementById("firstName").value,lname:document.getElementById("lastName").value,minitial:document.getElementById("middleInit").value,password:document.getElementById("passwordreg").value,role:document.getElementById("role").value,subject:document.getElementById("subject").value,biblio:document.getElementById("biblio").value,optinout:$("input:radio[name=optinout]:checked").val(),auto:$("input:radio[name=auto]:checked").val(),rAndr:"rAndr",overlay:"yes"},dataType:a,crossDomain:true,xhrFields:{withCredentials:true},success:function(d){if(d.indexOf("Server.objectAlreadyExistsInPlatform")!=-1){$("#csiregistrationovl").dialog("close");$("#associatedemail").dialog("open")}else{$("#csiRegCloseRedirect").val("");$("#csiregistrationovl").dialog("close");$("#csiregistrationovl").html(d);$("#csiRegCloseRedirect").val("yes");if($.browser.msie){$("#csiregistrationovl").dialog("option","height","auto")}$("#csiregistrationovl").dialog("open");$("#csiregistrationovl").dialog("option","width",600);$("#csiregistrationovl").dialog("option","position","center")}},error:function(d){if(!d.responseText){$(location).attr("href",returl)}else{$("#csiregistrationovl").html(d);$("#csiregistrationovl").dialog("option","width",600);$("#csiregistrationovl").dialog("option","position","center")}}})}function registerOutboundService(b,c,a){$.ajax({type:"POST",url:c,data:{SID:$("#SID").val(),product:"UA",rurl:b,email:document.getElementById("regemail").value,fname:document.getElementById("firstName").value,lname:document.getElementById("lastName").value,minitial:document.getElementById("middleInit").value,password:document.getElementById("passwordreg").value,role:document.getElementById("role").value,subject:document.getElementById("subject").value,biblio:document.getElementById("biblio").value,optinout:$("input:radio[name=optinout]:checked").val(),auto:$("input:radio[name=auto]:checked").val(),rAndr:"rAndr",overlay:"yes"},dataType:a,success:function(d){if($("input:radio[name=auto]:checked").val()=="1"){set_autocookie($("#csiURL").val(),document.getElementById("regemail").value,document.getElementById("passwordreg").value,$("input:radio[name=auto]:checked").val())}$("#csiRegCloseRedirect").val("");$("#csiregistrationovl").dialog("close");$("#csiregistrationovl").html(d);$("#csiRegCloseRedirect").val("yes");if($.browser.msie){$("#csiregistrationovl").dialog("option","height","auto")}$("#csiregistrationovl").dialog("open");$("#csiregistrationovl").dialog("option","width",600);$("#csiregistrationovl").dialog("option","position","center")},error:function(d){if(!d.responseText){$(location).attr("href",returl)}else{$("#csiregistrationovl").html(d);$("#csiregistrationovl").dialog("option","width",600);$("#csiregistrationovl").dialog("option","position","center")}}})}function checkEmail_cors(a,g,d,c){var k=$("#currUrl").val();var h="json";var b="";var j=a.replace("csihome.do","checkemailovl.do");if(!$.support.cors){j+="?jsonp=?";h="jsonp";b="convertToJSON"}var f=$("#checkemailovlstart #checkemail").val();$.ajax({type:"POST",url:j,data:{email:f,SID:$("#SID").val(),product:"UA",rurl:"rurl",overlay:"yes"},jsonpCallback:b,dataType:h,crossDomain:true,contentType:"application/json; charset=utf-8",success:function(l){},error:function(l){if(!l.responseText){$(location).attr("href",k)}else{$("#csiregistrationovl").html(l.responseText);$("#checkemailovlstart").dialog("close");$("#csiregistrationovl").dialog("open")}}})}function submit_regovl_cors(){var d=$("#currUrl").val();var a="json";var f="";var c=$("#csiURL").val();var b=c.replace("csihome.do","registerovl.do");if(!$.support.cors){b+="?jsonp=?";a="jsonp";f="convertToJSON"}$.ajax({type:"POST",url:b,data:{SID:$("#SID").val(),email:document.getElementById("regemail").value,fname:document.getElementById("firstName").value,lname:document.getElementById("lastName").value,minitial:document.getElementById("middleInit").value,password:document.getElementById("passwordreg").value,role:document.getElementById("role").value,subject:document.getElementById("subject").value,biblio:document.getElementById("biblio").value,optinout:$("input:radio[name=optinout]:checked").val(),auto:$("input:radio[name=auto]:checked").val(),rAndr:"rAndr",overlay:"yes"},jsonpCallback:f,dataType:a,crossDomain:true,success:function(g){alert("success")},error:function(g){alert("error");if(!g.responseText){$(location).attr("href",d)}else{$("#csiregistrationovl").html(g.responseText)}}})}function validateLocalSSSFileName(d){if(d==null||$.trim(d)==""){$("#localssstext #localsssopen #sssLocalSavedSearchError").show();return false}var a=$("#subscribedProductsList").val();a=a.replace(/[\[0-9\]']+/g,"");var c=a.split(";");for(i=0;i<c.length;i++){c[i]=c[i].trim()}var b=d.split(".").pop().toLocaleUpperCase();if(!c.includes(b)){$("#localssstext #localsssopen #sssLocalSavedSearchError").show();return false}return true}function closeAssocDialog(){$("#associatedemail").dialog("close")}function closeKopernioDialog(){$("#kopernioconfirmdialog").dialog("close")}function openKopernioDialog(){$("#kopernioconfirmdialog").dialog("open")}function checkAndDisplayOpenSSSFileError(a){var b=$("#invalidFileError").val();if(b!=null&&b=="error"){csiovl("SSS",a);$("#localssstext #localsssopen #sssLocalSavedSearchError").show();$("#csiCloseRedirect").val("yes");$("#csiCheckEmailCloseRedirect").val("yes");$("#csiRegCloseRedirect").val("yes")}}function checkCloseRedirect(c){var b=$("#"+c).val();if(b!=null&&b!=""&&b=="yes"){var a=$("#currUrl").val();a=a.replace("&localRunSearchStatus=error","");$(location).attr("href",a)}};