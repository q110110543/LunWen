var E$o=void 0,E$p=!0,E$q=null,E$s=!1;function E$aa(){return function(){}}function E$ba(e){return function(){return e}}var E$v;"undefined"===typeof console&&(console={log:E$aa()});var E$B;E$B=DHTMLSuite.Eh?DHTMLSuite.Eh():new DHTMLSuite.contextMenu;E$B.Ma=1;E$B.G=1;E$B.zc=E$q;var E$C="icons/",E$ca="",E$da=E$q,E$ea=E$s,E$ga="object"==typeof process;E$ga&&(process.Di!=E$o&&process.Di["node-webkit"]!=E$o?console.log("in node-webkit v"+process.Di["node-webkit"]):console.log("in node-webkit UNKNOWN VERSION"));"undefined"==typeof global&&(global={});var E$ha=E$ga,E$ia=E$ha;console&&console.log("isCustomContainer="+E$ha+"  noTopLeftElementalIcon="+E$ia);window.Db&&(console&&console.log("CORRECTLY found external clipboard"),E$ea=window.Db,E$ha=E$p,console&&console.log("isCustomContainer = "+E$ha+"   ExternalClipboard="+E$ea));var E$ja=10000;E$ha&&(E$ja=900);var E$ka=(/MSIE/.test(navigator.userAgent)||/Trident/.test(navigator.userAgent))&&!window.opera,E$la=/MSIE 6.0/.test(navigator.userAgent)&&!window.opera&&window.DD_belatedPNG,E$ma=E$s;/Android/i.test(navigator.userAgent)&&/wv/.test(navigator.userAgent)?E$ma=E$p:/iPad|iPhone/i.test(navigator.userAgent)&&!/Safari/i.test(navigator.userAgent)&&(E$ma=E$p);if(window.isTouchDevice=E$ma){E$B.Ma=13/11,E$B.G=18/14}console&&console.log("isApp = "+E$ma);var E$na=E$s,E$qa=E$q;if(E$ka&&(document.documentMode?(E$qa=document.documentMode,5==E$qa&&(E$na=E$p)):(E$qa=5,E$na=E$p,document.compatMode&&("BackCompat"!=document.compatMode&&(E$na=E$s),"CSS1Compat"==document.compatMode&&(E$qa=7))),!window.tk)){for(var E$ra=E$q,E$sa=document.getElementsByTagName("script"),E$ta=E$sa.length-1;0<=E$ta;E$ta--){if(E$sa[E$ta].src&&(-1!=E$sa[E$ta].src.indexOf("elemental-obf.js")||-1!=E$sa[E$ta].src.indexOf("elemental.js"))){E$ra=E$sa[E$ta].src;break}}if(E$ra){var E$ta=E$ra.lastIndexOf("/"),E$ua="";-1!=E$ta&&(E$ua=E$ra.substring(0,E$ta+1));if(window.CanvasEmulation&&(-1!=window.CanvasEmulation.indexOf("flash")||-1!=window.CanvasEmulation.indexOf("Flash")||-1!=window.CanvasEmulation.indexOf("FLASH"))){var E$xa=E$s;try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(E$xa=E$p)}catch(E$za){navigator.mimeTypes["application/x-shockwave-flash"]!=E$o&&(E$xa=E$p)}E$xa?document.write('<script type="text/javascript" src="'+E$ua+'flashcanvas.js"><\/script>'):(document.write('<script type="text/javascript" src="'+E$ua+'excanvas.js"><\/script>'),document.write('<script type="text/javascript" src="'+E$ua+'canvas.text.js"><\/script>'),document.write('<script type="text/javascript" src="'+E$ua+'font.js"><\/script>'))}else{document.write('<script type="text/javascript" src="'+E$ua+'excanvas.js"><\/script>'),document.write('<script type="text/javascript" src="'+E$ua+'canvas.text.js"><\/script>'),document.write('<script type="text/javascript" src="'+E$ua+'font.js"><\/script>')}}}var E$Aa=/Firefox/.test(navigator.userAgent),E$Ba=E$ga,E$Ca=/Opera/.test(navigator.userAgent),E$Da=E$s,E$Ea=E$s;window.devicePixelRatio||(window.devicePixelRatio=1);var E$Fa=0==window.location.pathname.indexOf("/browser/")||0==window.location.pathname.indexOf("/bioregister/");function E$D(r,q,p){if(E$ha){this.version=global.zk}else{this.version="2018.7.75411";this.rk="--WILL_BE_REPLACED_BY_SVNDATE--"}this.qj=E$p;r.innerHTML="";if(r.style.width==""){r.style.width="400px"}if(r.style.height==""){r.style.height="300px"}this.width_=parseInt(r.style.width,10);this.height_=parseInt(r.style.height,10);if(r.style.width.indexOf("%")==r.style.width.length-1){this.width_=r.clientWidth}if(r.style.height.indexOf("%")==r.style.height.length-1){this.height_=r.clientHeight}r.unselectable="on";r.onselectstart=function(e){E$Ga(e);return E$s};r.onmouseup=E$ba(E$s);r.ondragend=E$ba(E$s);r.ondragstart=E$ba(E$s);r.onselectend=E$ba(E$s);r.ondrop=E$ba(E$s);r.oncontextmenu=function(e){return e&&(e.target==this.a.mi||e.srcElement==this.a.mi)?E$p:E$s};this.z=r;q==E$q&&(q=new E$Ha);this.p=E$q;var o=new Image;E$Ia=1;E$Ja=2;E$Ka=3;E$La=4;E$Ma=0;E$Na=1;E$Pa=2;this.GRID_NONE=E$Ma;this.GRID_RECTANGULAR=E$Na;this.GRID_HEX=E$Pa;this.UI_DEFAULT=E$Ia;this.UI_ISISDRAW=E$Ja;this.UI_CHEMDRAW=E$Ka;this.UI_LEGACY=E$La;this.Gi={uiTheme:E$Ka,uiSelectNewAtoms:E$s,uiSelectNewSproutAtoms:E$s,uiDragToolAsSingleBondTool:E$s,uiLiveLasso:E$p,uiDrawCloseLasso:E$p,uiLassoClickSelects:E$p,uiEraseOnEraserDrag:E$p,uiEraserDragSelectRegangle:E$s,uiEraserReducesBondOrder:E$p,uiSelectionCTRLselectsFragment:E$s,uiSelectionCTRLallowsAddition:E$s,uiSelectionSHIFTallowsAddition:E$p,uiSelectionClickSelectedUnselects:E$p,uiSelectionDblClickSelectFragment:E$p,uiDoubleClickAtomBondContextMenu:E$s,uiClearSelectionOnToolSelection:E$p,uiIncludeSelectionWithHighlightedWhenMakingPropChanges:E$p,uiIncludeHighlightedAndSelectionForContextMenu:E$p,livePropertyCalcs:E$p,uiESCCancelsSelection:E$p,buttonBorderRadius:"0%",uiLeftToolbarColumns:2,autoSizeButtons:[10,16],valenceWarningColor:"red",uiRxnArrowAlsoMovesAndPlus:E$s,uiRxnArrowAlsoAtomAtomMaps:E$s};this.Hi={uiTheme:E$Ja,uiSelectNewAtoms:E$p,uiSelectNewSproutAtoms:E$p,uiDragToolAsSingleBondTool:E$s,uiLiveLasso:E$p,uiDrawCloseLasso:E$p,uiLassoClickSelects:E$p,uiEraseOnEraserDrag:E$s,uiEraserDragSelectRegangle:E$p,uiEraserReducesBondOrder:E$s,uiSelectionCTRLselectsFragment:E$p,uiSelectionCTRLallowsAddition:E$s,uiSelectionSHIFTallowsAddition:E$p,uiSelectionClickSelectedUnselects:E$p,uiSelectionDblClickSelectFragment:E$s,uiDoubleClickAtomBondContextMenu:E$p,uiClearSelectionOnToolSelection:E$p,uiIncludeSelectionWithHighlightedWhenMakingPropChanges:E$p,uiIncludeHighlightedAndSelectionForContextMenu:E$p,uiRightClickOnAtomOrBondClearsSelection:E$p,livePropertyCalcs:E$p,uiESCCancelsSelection:E$s,buttonBorderRadius:"10%",uiLeftToolbarColumns:1,autoSizeButtons:[20.5,11],valenceWarningColor:"blue",uiRxnArrowAlsoMovesAndPlus:E$s,uiRxnArrowAlsoAtomAtomMaps:E$s};this.Zi={uiTheme:E$Ia,uiSelectNewAtoms:E$s,uiSelectNewSproutAtoms:E$s,uiDragToolAsSingleBondTool:E$s,uiLiveLasso:E$p,uiDrawCloseLasso:E$p,uiLassoClickSelects:E$p,uiEraseOnEraserDrag:E$s,uiEraserDragSelectRegangle:E$s,uiEraserReducesBondOrder:E$s,uiSelectionCTRLallowsAddition:E$p,uiSelectionCTRLselectsFragment:E$s,uiSelectionSHIFTallowsAddition:E$p,uiSelectionClickSelectedUnselects:E$p,uiSelectionDblClickSelectFragment:E$p,uiDoubleClickAtomBondContextMenu:E$s,uiClearSelectionOnToolSelection:E$s,uiIncludeSelectionWithHighlightedWhenMakingPropChanges:E$p,uiIncludeHighlightedAndSelectionForContextMenu:E$p,uiESCCancelsSelection:E$p,buttonBorderRadius:"14%",uiLeftToolbarColumns:1,valenceWarningColor:"purple",uiRxnArrowAlsoMovesAndPlus:E$p,uiRxnArrowAlsoAtomAtomMaps:E$p};this.Aj={uiTheme:E$La,uiSelectNewAtoms:E$s,uiSelectNewSproutAtoms:E$s,uiDragToolAsSingleBondTool:E$s,uiLiveLasso:E$s,uiDrawCloseLasso:E$s,uiLassoClickSelects:E$s,uiEraseOnEraserDrag:E$s,uiEraserDragSelectRegangle:E$s,uiEraserReducesBondOrder:E$s,uiSelectionCTRLselectsFragment:E$s,uiSelectionCTRLallowsAddition:E$p,uiSelectionSHIFTallowsAddition:E$s,uiSelectionClickSelectedUnselects:E$s,uiSelectionDblClickSelectFragment:E$s,uiDoubleClickAtomBondContextMenu:E$s,uiClearSelectionOnToolSelection:E$s,uiIncludeSelectionWithHighlightedWhenMakingPropChanges:E$p,uiIncludeHighlightedAndSelectionForContextMenu:E$p,livePropertyCalcs:E$s,uiESCCancelsSelection:E$s,buttonBorderRadius:"20%",uiLeftToolbarColumns:1,valenceWarningColor:"purple",uiRxnArrowAlsoMovesAndPlus:E$p,uiRxnArrowAlsoAtomAtomMaps:E$p};this.i={debugPerpendiculars:E$s,debug:E$s,ui:E$p,templateUI:E$s,uiThemeable:E$p,uiTheme:E$Ia,uiSelectNewAtoms:E$s,uiSelectNewSproutAtoms:E$p,uiDragToolAsSingleBondTool:E$p,uiLiveLasso:E$p,uiDrawCloseLasso:E$p,uiLassoClickSelects:E$p,uiEraseOnEraserDrag:E$s,uiEraserDragSelectRegangle:E$s,uiEraserReducesBondOrder:E$s,uiSelectionCTRLselectsFragment:E$s,uiSelectionCTRLallowsAddition:E$s,uiSelectionSHIFTallowsAddition:E$p,uiSelectionClickSelectedUnselects:E$p,uiSelectionDblClickSelectFragment:E$p,uiDoubleClickAtomBondContextMenu:E$s,uiClearSelectionOnToolSelection:E$s,uiIncludeSelectionWithHighlightedWhenMakingPropChanges:E$p,uiIncludeHighlightedAndSelectionForContextMenu:E$p,livePropertyCalcs:E$p,uiMouseCursorChange:E$p,gridStyle:E$Ma,drawRuler:E$p,snapToGrid:E$s,uiObjectSupport:E$s,uiESCCancelsSelection:E$p,uiEasyTemplateNavigation:E$p,uiEnhancedMouseWheel:E$p,uiLeftToolbarColumns:1,query:E$p,rxnQuery:E$s,stereoCare:E$s,summary:E$s,molBondWidth:2,molBondColor:"black",templateBondWidth:2,templateBondColor:"#aaa",arrowWidth:1.5,arrowColor:"black",highlightColor:"green",selectColor:"blue",valenceWarningColor:"yellow",bondPixels:22,autoScaleFraction:0.9,doubleBondFraction:0.18,tripleBondFraction:0.15,stereoBondFraction:0.1,stereoDownBondStep:0.2,stereoEitherBondStep:0.1,symbolBorderFraction:0.07,aromaticSteps:3,aromaticStep:3,aromaticGap:2,aromaticWidth:1.5,singleOrAromaticSteps:4,singleOrAromaticStep:1,singleOrAromaticGap:1,singleOrAromaticWidth:1,doubleOrAromaticSteps:2,doubleOrAromaticStep:3,doubleOrAromaticGap:1,doubleOrAromaticWidth:2,anyBondSteps:4,anyBondGap:1,anyBondStep:1,dashedDoubleSteps:5,dashedDoubleStep:1,dashedDoubleGap:1,dashedDoubleWidth:1,bondHighlightFraction:E$ma?0.2:0.15,atomHighlightFraction:E$ma?0.25:0.22,bondHighlightShortening:0.25,showExceededValence:E$p,textFraction:0.5,selectRegionColor:"rgba(160, 160, 255, 0.5)",zoom:E$ma?2:E$ha?1.25:1,menuStripColor:"rgb(242, 242, 242)",buttonBackground:"rgb(232, 232, 232)",pressedButtonBackground:"rgb(190, 190, 190)",buttonBorderColor:"#aaa",pressedButtonBorderColor:"#aaa",templateRows:3,templateCols:4,templateSnap:15,templateFile:E$q,elementIcons:["C","N","O","S","H","F","Cl","Br"],iconDir:"",path:"",displayAtomNumbers:E$s,subElemental:E$s,handler:E$q,menu:E$q,labelOffset:0.6,labelHeight:13,labelColor:"black",labelFont:"Arial, Helvetiker, sans-serif",fixedTextHeight:13,textBoxColor:"black",templateTextBoxColor:"#aaa",textBoxFont:"Arial, Helvetiker, sans-serif",textBoxSpacing:1.2,buttonSize:E$Ba?32:"auto",buttonSpacing:2,buttonExtraWidth:0,buttonBorderWidth:1,buttonBorderRadius:"14%",borderlessButtons:E$s,stringBorder:0.1,hDisplay:E$Qa,rxnLayoutOnRead:E$ha?E$s:E$p,sdfGrid:E$s,bw:E$s,reaxysGenerics:E$s,rgSupport:E$s,atomQuerySupport:["aromatic","ringBonds","substitutions","hCount","unsaturated","list","notList","queryTypes"],bondQuerySupport:["aromatic","singleDouble","singleAromatic","doubleAromatic","any","topology"],autoAddAttachments:E$p,saveReactionLayout:E$ha?E$p:E$s,allowMultipleArrows:E$ha||E$Fa?E$p:E$s,showTips:E$p,showShortcutTipDiv:E$s,coordBondSupport:E$p,buttonPanel:E$s,buttonPanelDraggable:E$s,buttonPanelHeight:10,buttonPanelOpen:E$s,periodicTable:E$p,calcDecimalPoints:5,writeRecursiveSmartsForPotentialHs:E$s,molfileVersionSetting:E$ha?E$p:E$s,defaultMolFormat:"v2000",colorEnhancedStereoChemicalLabels:E$p,extendedSmilesOut:E$s,sgroupEdit:E$p,getMolURL:E$q,delaySubElementals:E$p,toRgroup:E$s,noTextBox:this.qj?E$p:E$s,includeRsInSmiles:E$p};if(p!=E$q){for(var n in p){E$ha&&console.log("Args i="+n+"  value="+p[n]);this.i[n]=p[n]}}p=this.i.atomQuerySupport;if(p instanceof Array){var m={};for(n=0;n<p.length;n++){m[p[n]]=E$p}this.i.atomQuerySupport=m}p=this.i.bondQuerySupport;if(p instanceof Array){m={};for(n=0;n<p.length;n++){m[p[n]]=E$p}this.i.bondQuerySupport=m}this.i.buttonPanelDraggable&&(this.i.buttonPanel=E$p);this.i.buttonPanel&&(this.i.uiThemeable=E$s);if(!this.i.uiTheme||this.i.uiTheme>E$La||this.i.uiTheme<E$Ia){this.i.uiTheme=E$Ia}this.i.subElemental?this.i.getMolURL=E$q:this.i.getMolURL==E$q&&E$Fa&&(this.i.getMolURL="/browser/custom/smi2mol.jsp?smiles=");if(this.i.path){n=this.i.path;n.charAt(n.length-1)!="/"&&(n=n+"/");this.i.templateFile==E$q&&(this.i.templateFile=E$Fa?[n+"templates.sdf",n+"custom_templates.sdf"]:n+"templates.sdf");this.i.iconDir||(this.i.iconDir=n+"icons/")}else{this.i.iconDir||(this.i.iconDir="icons/");this.i.templateFile==E$q&&(this.i.templateFile=E$Fa?["templates.sdf","custom_templates.sdf"]:"templates.sdf")}this.ug=o;r.style.fontFamily="Arial, sans-serif";!E$na&&!E$ha&&E$Ra(r);this.Ae="\n";E$Sa=-1;E$Ta=this.i.uiTheme;E$Va(this.i.uiThemeable);E$Wa=this.i.includeRsInSmiles;this.i.uiTheme=E$Ta;try{E$Xa(this)}catch(l){console.log("EXCEPTION Caught theme change error")}if(!this.zb){E$Ya=this.i.hDisplay;E$Za=Number(this.i.showExceededValence);E$$a=Number(this.i.displayAtomNumbers);E$ab=Number(this.i.bw);E$cb=this.i.defaultMolFormat;E$db=this.i.molfileVersionSetting;E$eb=Number(this.i.autoAddAttachments);E$jb=Number(this.i.showTips);E$kb=this.i.colorEnhancedStereoChemicalLabels;E$lb=this.i.extendedSmilesOut;E$mb=this.i.writeRecursiveSmartsForPotentialHs;E$Va(this.i.uiThemeable);E$nb=this.i.uiRxnArrowAlsoAtomAtomMaps;E$ob=this.i.uiRxnArrowAlsoMovesAndPlus;if(!r.style.border){r.style.border="1px solid #aaa"}r.style.background=this.Wa;E$C=this.i.iconDir;E$C.charAt(E$C.length-1)!="/"&&(E$C=E$C+"/");E$B.a=this;E$B.md=E$s;n=E$C.substring(0,E$C.length-1).lastIndexOf("/");n>-1&&(E$ca=E$C.substring(0,n)+"/")}o.src=E$C+E$pb;if(this.zb||E$Fa||E$qb(E$C+E$pb)!=E$q){o=1;this.Tf&&o++;this.D=E$rb(this,r);this.D.style.zIndex=o++;if(this.pc){if(this.Tf){this.Wb=E$rb(this,r,E$p);this.Wb.style.zIndex=1;this.Bc=E$rb(this,r,E$p);this.Bc.style.zIndex=o++;this.Bc.a=this;this.Wb.a=this;this.Wb.style.background="white";this.Bc.style.background="transparent"}else{this.Wb=this.Bc=E$s}if(!this.zb){this.vc=E$rb(this,r,E$p);this.vc.style.zIndex=o++}this.mc=E$rb(this,r,E$p);this.mc.style.zIndex=o++;E$sb(this.mc,this.D)}this.D.a=this;this.D.style.background=this.Tf?"transparent":"white";E$tb(this,q);this.qc=[];this.ge=[];this.rf=0;this.Ca=this.sa=this.fg=E$q;r.a=this;if(E$ka&&E$da==E$q){E$da=document.createElement("TEXTAREA");E$da.id="clipboard";E$E(E$da,this.height_-8,this.width_-8,1,1);r.appendChild(E$da);E$da.style.overflow="hidden"}if(E$ub()){if(!this.zb&&this.pc){if(E$Sa!=-1&&!isNaN(E$Sa)&&E$Sa<this.ub.length){this.ub[E$Sa].onclick()}else{if(this.O!=E$q&&this.O.onclick!=E$q){this.O.onclick()}}this.Oc=E$vb(r,"atomMenuDiv");this.Pc=E$vb(r,"bondMenuDiv");this.dd=E$vb(r,"textBoxMenuDiv");this.od=E$vb(r,"sgroupMenuDiv");this.kc=E$vb(r,"generalMenuDiv");this.Oc.a=this;this.Pc.a=this;this.dd.a=this;this.kc.a=this;this.od.a=this;E$B.Zg=E$B.Ti(this.i);E$B.dh=E$B.Ui(this.i);E$B.ik=E$B.Wi(this);E$B.If=E$B.uh(this);E$B.li=E$B.Vi(this);E$B.setWidth(130*E$B.Ma);E$B.attachTo(this.Oc,E$B.Zg);E$B.attachTo(this.Pc,E$B.dh);E$B.attachTo(this.dd,E$B.ik);E$B.attachTo(this.kc,E$B.If);E$B.attachTo(this.od,E$B.li)}else{if(this.zb){this.i.handler&&E$G(this,this.i.handler);if(this.i.menu){this.mf=E$vb(r,"subElementalMenuDiv");E$B.attachTo(this.mf,this.i.menu)}}else{if(!this.pc){this.kc=E$vb(r,"generalMenuDiv");this.kc.a=this;E$B.If=E$B.uh(this);E$B.setWidth(110);E$B.attachTo(this.kc,E$B.If)}}}if(!this.zb&&this.pc){this.Kc=this.da(r,"","");this.Kc.style.visibility="hidden";this.Kc.style.background=this.Wa;E$E(this.Kc,0,0,this.width_,this.height_);this.aa=new E$wb(this.Kc,this);this.Kc.style.zIndex=E$ha?E$ja-100:1000}if(!this.zb&&this.i.sdfGrid){this.oc=this.da(r,"","");this.oc.style.display="none";this.oc.style.background=this.Wa;E$E(this.oc,0,0,this.width_,this.height_);this.Ha=new E$wb(this.oc,this,E$p);this.oc.style.zIndex=1000;if(E$Da||E$Ea){q=this.da(this.z,"","");q.innerHTML="<center><br><B>Please wait...</B><br><br>";q.style.zIndex=10000;q.style.display="none";q.style.fontSize="13px";q.style.border="1px solid #aaa";E$E(q,this.height_/2-60,this.width_/2-135,270,120);q.style.width="270px";q.style.background=this.Wa;this.Ha.Ei=q}}if(!this.zb&&this.pc){window.Vf?window.Vf.indexOf(".css")==-1?DHTMLSuite.commonObj.loadCSS(window.Vf+".css",E$p):DHTMLSuite.commonObj.loadCSS(window.Vf,E$p):E$ma||(this.height_<300?DHTMLSuite.commonObj.loadCSS("smaller.css",E$p):this.height_<350&&DHTMLSuite.commonObj.loadCSS("small.css",E$p));E$B.__createDivs(E$p);E$B.__setReference(E$B);E$B.__hideContextMenu()}r.onmousedown=function(e){E$ma&&E$M(this.a,e)};r.onmouseout=function(){this.a.vc&&!this.a.n instanceof E$xb&&this.a.vc.getContext("2d").clearRect(0,0,this.a.D.width,this.a.D.height)};E$yb(this,r);if(E$ma&&(this.pc||this.zb)){this.D.ontouchstart=function(g){clearTimeout(window.mousedown_timeout);g.preventDefault();if(!window.Nd&&window.ze){this.a.qf();window.ze=E$s;window.Nd=E$s;window.Bh=E$p}else{this.a.n instanceof E$zb||!window.Nd&&g.touches.length==1&&(window.mousedown_timeout=setTimeout(function(){E$Ab(g,"mousemove");E$Ab(g,"mousedown");window.Nd=E$p;if(window.ze){E$Ab(g,"mouseup");E$Ab(g,"click");window.ze=E$s;window.Nd=E$s}},300));if(g.touches.length==2){var f={};f.clientX=g.touches[0].clientX;f.clientY=g.touches[0].clientY;window.Nb=E$M(this.a,f);window.oi=g.touches[0].clientX;window.qi=g.touches[0].clientY;window.pi=g.touches[1].clientX;window.ri=g.touches[1].clientY;window.$j=Math.sqrt(Math.pow(window.oi-window.pi,2)+Math.pow(window.qi-window.ri,2));window.Rg=E$p;window.Uf=E$s;window.Cg=1}}};this.D.ontouchend=function(e){e.preventDefault();if(e.touches.length==0){if(this.a.n instanceof E$zb&&!window.Rg){E$Ab(e,"mousemove");E$Ab(e,"mousedown");E$Ab(e,"mouseup");window.Nd=E$s;window.ze=E$s}else{if(window.Nd){E$Ab(e,"mouseup");E$Ab(e,"click");window.Nd=E$s;window.ze=E$s}else{if(window.Bh||window.Rg){window.Bh=E$s;window.Rg=E$s;window.Uf=E$s}else{window.ze=E$p}}}}else{if(e.touches.length==1){window.Uf=E$s}}};this.D.ontouchmove=function(u){u.preventDefault();if(u.touches.length==1){window.Nd&&E$Ab(u,"mousemove")}else{if(u.touches.length==2){var t=u.touches[0].clientX-window.oi,s=u.touches[0].clientY-window.qi,k=u.touches[1].clientX-window.pi,i=u.touches[1].clientY-window.ri;if(!window.Uf&&Math.abs(t-k)<20&&Math.abs(s-i)<20){t={};t.clientX=u.touches[0].clientX;t.clientY=u.touches[0].clientY;t=E$M(this.a,t);s=t.x-window.Nb.x;k=t.y-window.Nb.y;if(s*s+k*k>1){s=t.ha-E$Bb(this.a,window.Nb.x);k=t.ia-E$Cb(this.a,window.Nb.y);this.a.origin.x=this.a.origin.x-s;this.a.origin.y=this.a.origin.y-k;E$N(this.a,E$p);window.Nb=t;E$Eb(this.a,u.scale)}}else{u.scale?E$Eb(this.a,u.scale):E$Eb(this.a,Math.sqrt(Math.pow(u.touches[0].clientX-u.touches[1].clientX,2)+Math.pow(u.touches[0].clientY-u.touches[1].clientY,2))/window.$j);window.Uf=E$p}}}}}E$N(this)}}}var E$Ia,E$Ja,E$Ka,E$La,E$Ma,E$Na,E$Pa,E$Sa,E$Ta,E$Wa,E$Ya,E$Za,E$$a,E$ab,E$cb,E$db,E$eb,E$jb,E$kb,E$lb,E$mb,E$nb,E$ob,E$Fb,E$Gb;function E$yb(g,f){f.ondblclick=g.i.uiSelectionDblClickSelectFragment||g.i.uiDoubleClickAtomBondContextMenu?function(l){var k=E$M(this.a,l);if(this.a.i.uiSelectionDblClickSelectFragment&&!this.a.Gh){var i=E$s;if(this.a.i.uiSelectionSHIFTallowsAddition&&l.shiftKey||this.a.i.uiSelectionCTRLallowsAddition&&l.ctrlKey){i=E$p}i=i&&this.a.i.uiSelectionClickSelectedUnselects;if(this.a.n instanceof E$Hb){i=this.a.n.tg;if(i!=E$q){if(E$Mb(i,k)<3){(k=this.a.n.Ff)&&E$Ob(this.a.e,k);E$M(this.a,l);E$N(this.a,E$p)}this.a.n.tg=E$q;this.a.n.Ff=E$q}}else{if(this.a.q!=E$q){this.a.q.selected=!i?1:this.a.q.selected>0?0:1;E$Pb(this.a.e,this.a.q,!this.a.q.selected)}else{if(this.a.t!=E$q){l=this.a.t.j.selected&&this.a.t.k.selected;this.a.t.selected=!i?1:l||this.a.t.selected>0?0:1;E$Pb(this.a.e,this.a.t,!this.a.t.selected);this.a.t.selected=0}}}}else{if(this.a.i.uiDoubleClickAtomBondContextMenu){if(this.a.q!=E$q&&this.a.Oc){E$B.Ue=this.a;E$B.fireEvent(this.a.Oc,"mousedown",l);E$B.fireEvent(this.a.D,"contextmenu",l);E$Ga(l)}else{if(this.a.t!=E$q&&this.a.Pc){E$B.Ue=this.a;E$B.fireEvent(this.a.Pc,"mousedown",l);E$B.fireEvent(this.a.D,"contextmenu",l);E$Ga(l)}else{if(this.a.fa!=E$q&&this.a.dd){E$B.Ue=this.a;E$B.fireEvent(this.a.dd,"mousedown",l);E$B.fireEvent(this.a.D,"contextmenu",l);E$Ga(l)}}}}}}:E$o}function E$Xa(i){var h=E$q;switch(E$Ta){case E$Ia:h=i.Zi;break;case E$Ja:h=i.Hi;break;case E$Ka:h=i.Gi;break;case E$La:h=i.Aj}for(var g in h){i.i[g]=h[g]}i.zoom=i.i.zoom*window.devicePixelRatio;i.pc=i.i.ui;i.zb=i.i.subElemental;i.Wa=i.i.menuStripColor;i.Xc=i.i.buttonBackground;i.J=i.i.pressedButtonBackground;h=document.createElement("div");h.style.background=i.J;i.$h=h.style.backgroundColor;i.Aa=E$Qb(i.i.buttonBorderRadius)?i.i.buttonBorderRadius.replace("px",""):i.i.buttonBorderRadius;if(i.hc==E$o&&i.i.buttonSize!=E$o){i.hc=E$Qb(i.i.buttonSize)?i.i.buttonSize.replace("px",""):i.i.buttonSize}i.ga=i.i.buttonBorderWidth;i.qe=i.i.buttonBorderColor;i.P=i.i.pressedButtonBorderColor;if(i.i.borderlessButtons){i.ga=0}i.ck=i.i.stringBorder;i.Tf=i.i.uiObjectSupport;i.Tb=i.i.uiSelectNewAtoms;i.Ud=i.i.uiSelectNewSproutAtoms;if(!i.zb){E$Ya=i.i.hDisplay;E$Za=Number(i.i.showExceededValence);E$$a=Number(i.i.displayAtomNumbers);E$ab=Number(i.i.bw);E$cb=i.i.defaultMolFormat;E$db=i.i.molfileVersionSetting;console&&console.log("Elemental.defaultMolFormat="+E$cb);E$eb=Number(i.i.autoAddAttachments);E$jb=Number(i.i.showTips);E$Ta=Number(i.i.uiTheme);E$nb=i.i.uiRxnArrowAlsoAtomAtomMaps;E$ob=i.i.uiRxnArrowAlsoMovesAndPlus}}E$D.prototype.Ug=function(i){if(this.i.buttonPanelDraggable||this.i.buttonPanel){i=E$Ia}E$Ta=i;if(E$Fb!=E$Ta){var h=this.i.uiLeftToolbarColumns;E$Xa(this);E$yb(this,this.z);var g=this.i.uiLeftToolbarColumns;E$Rb(this);this.bh();if(!E$ha||g!=h){this.re=this.fh*this.i.uiLeftToolbarColumns;E$ha||E$Sb(this);E$Tb(this,this.D);E$Tb(this,this.Wb);E$Tb(this,this.Bc);E$Tb(this,this.vc);E$Tb(this,this.mc);this.Lc.style.left=this.re+10+"px";h=this.D.top+this.D.height-this.Lc.offsetHeight-2;this.Lc.style.top=h+"px";this.Lc.top=h;E$tb(this,this.e);E$N(this)}E$Ta!=i&&console.log("Error in ChangeToNewTheme() Elemental.uiTheme = "+E$Ta+"  should be "+i);E$Ub(this,this.z,this.hc,this.Kk,this.wf);E$Vb()}E$Fb=i};function E$Ab(l,k){if(!(l.touches.length>1)){l.preventDefault();var i=l.changedTouches[0],h=document.createEvent("MouseEvents");h.initMouseEvent(k,E$p,E$p,window,1,i.screenX,i.screenY,i.clientX,i.clientY,E$s,E$s,E$s,E$s,0,E$q);l.target.dispatchEvent(h)}}var E$Wb=Math.abs,E$Xb=Math.max,E$Yb=Math.min,E$Zb=Math.sqrt,E$$b=Math.cos,E$ac=Math.sin,E$bc=Math.atan2,E$cc=Math.round,E$fc=Math.PI;E$v=E$D.prototype;E$v.hj=function(){if(E$ub()){return this.e}};E$v.ej=function(){return this.D};E$v.oj=function(){return E$gc(this.e)};E$v.tj=function(){return E$B.zc==E$q};E$v.wj=function(){return this.e.v.length>0||this.e.F.length>0?E$p:E$s};E$v.we=function(){return this.z};E$v.$e=function(){return this.oc&&this.oc.style.display=="inline"};E$v.ij=function(g){if(!this.Ha){console.log("ERROR sdfGui is null in getNumberOfSdfEntries");return 0}if(!this.Ha.Fa){console.log("ERROR this.sdfGui.templates is null in getNumberOfSdfEntries");return 0}var f=this.Ha.Fa.length;if(g){this.Ha.Fa.push(this.e.copy());g=activeElemental.Ha;g.page=Math.floor(f/g.de);E$hc(g);this.Ha.load=E$p}return f};E$v.sk=function(){if(this.e.Pb==E$o){this.e.Pb=this.Ha.Fa.length;this.Ha.load=E$p}this.Ha.Fa[this.e.Pb]=this.e.copy();var e=E$ic(this.Ha.Fa[this.e.Pb]),e=e+E$jc(this.Ha.Fa[this.e.Pb]),e=e.replace(/\n/g,this.Ae);this.Ha.Fa[this.e.Pb].ye=e;e=this.Ha;e.page=Math.floor(this.e.Pb/e.de);E$hc(e)};E$v.write=function(i){if(E$ub()){if(i=="sdfEntry"){if(this.e.Pb==E$o){this.e.Pb=this.Ha.Fa.length}i="";this.Ha.Fa[this.e.Pb]=this.e.copy();var h=E$ic(this.Ha.Fa[this.e.Pb]),h=h+E$jc(this.Ha.Fa[this.e.Pb]),h=h.replace(/\n/g,this.Ae);this.Ha.Fa[this.e.Pb].ye=h;for(var h=0,g=this.Ha.Fa.length;h<g;h++){i=i+this.Ha.Fa[h].ye;i=i+"$$$$\n"}E$hc(this.Ha);return i}this.e.a=this;i=this.e.write(i);return i=i.replace(/\n/g,this.Ae)}};E$v.Dc=function(i,h){this.save();var g;if(i.f&&i.g){g=i;E$kc(g)}else{g=E$lc(i)}if(g&&g.f.length>0){E$G(this,new E$mc(E$q,E$q,E$q,g,E$q),E$p);if(!h){if(this.ce){h={clientX:this.ce.clientX,clientY:this.ce.clientY,shiftKey:E$s,ctrlKey:E$s}}else{g=E$nc(this.z)+this.height_/2;h={clientX:E$oc(this.z)+this.width_/2,clientY:g,shiftKey:E$s,ctrlKey:E$s}}}this.n.onmousemove(h)}};E$v.load=function(z,y){this.dg();this.Ae="\n";if(z.indexOf("\r\n")!=-1){this.Ae="\r\n"}else{if(z.indexOf("\r")!=-1){this.Ae="\r"}}var z=z.replace(/\r/g,""),x;if(y=="rxn-raw"){x=E$pc(this,z,E$s)}else{if(y=="rxn-layout"){x=E$pc(this,z,E$p)}else{if(z.indexOf("$RXN")==0||y=="rxn"){x=E$pc(this,z,this.i.rxnLayoutOnRead)}else{if(z.indexOf("$$$$")>0||y=="sdf"){x=E$qc(z);if(x.length==1){x=x[0]}else{for(var w=new E$Ha,v=0,s=0,r=x.length;s<r;s++){var q=x[s];E$vc(w,E$p);E$vc(q,E$p);for(var p=0,o=q.f.length;p<o;p++){var B=q.f[p];B.b.x=B.b.x+(w.I-q.$+2);B.b.y=B.b.y+(0.5*(w.wa+w.ra)-0.5*(q.ra+q.wa))}E$wc(w,q);v++}x=w}}else{if(z.indexOf("$MDL")==0||y=="rg"){a:{v=z;if(!v.indexOf("$MOL")!=-1){q=v.indexOf("$HDR");s=v.indexOf("$END HDR",q);if(!(q==-1||s==-1)){p=v.split("\n");w=p[1];q=v.indexOf("$CTAB",s);s=v.indexOf("$END CTAB",q);if(!(!q==-1||s==-1)){q=E$lc(v.substr(q,s-q),E$p,E$p);r=E$p;x=[];for(x.push(q);r;){q=v.indexOf("$RGP",s);s=v.indexOf("$END RGP",q);if(q==-1||s==-1){r=E$s}else{for(var q=v.substr(q,s-q),A=q.indexOf("$CTAB"),p=q.substr(0,A).split("\n"),p=parseInt(p[1]),o=E$p,B=0;o;){A=q.indexOf("$CTAB",B);B=q.indexOf("$END CTAB",A);if(A==-1||B==-1){o=E$s}else{A=E$lc(q.substr(A,B-A),E$p,E$p);A.Rd(p);x.push(A)}}}}v=new E$Ha;v.name=w;v.Ta=[];for(w=0;w<x.length;w++){E$wc(v,x[w]);if(x[w].Ta){for(s=0;s<x[w].Ta.length;s++){v.Ta.push(x[w].Ta[s])}}}E$xc(v);x=v;break a}}}x=E$o}}else{x=E$lc(z)}}}}}E$tb(this,x);E$N(this)};E$v.save=function(){this.qc.push(this.e.copy());if(this.za&&this.za.disabled){this.za.disabled=E$s;this.za.Ac.style.display="none";this.za.Cc.style.display="inline"}this.ge.length=0;if(this.ya&&!this.ya.disabled){this.ya.disabled=E$p;this.ya.Cc.style.display="none";this.ya.Ac.style.display="inline"}window.Nc&&window.Nc(this);this.ic=E$p};E$v.Mi=function(){return this.ge.length>0};E$v.Eg=function(){if(this.ge.length>0){this.qc.push(this.e.copy());if(this.za&&this.za.disabled){this.za.disabled=E$s;this.za.Ac.style.display="none";this.za.Cc.style.display="inline"}var e=this.ge.pop();if(this.ya&&this.ge.length==0&&!this.ya.disabled){this.ya.disabled=E$p;this.ya.Cc.style.display="none";this.ya.Ac.style.display="inline"}window.Nc&&window.Nc(this);this.e=e;this.n.e=this.e;this.ic=E$p;E$N(this,E$p)}};E$v.Ni=function(){return this.qc.length>0};E$v.qf=function(){if(this.qc.length>0){this.ge.push(this.e.copy());if(this.ya&&this.ya.disabled){this.ya.disabled=E$s;this.ya.Ac.style.display="none";this.ya.Cc.style.display="inline"}var e=this.qc.pop();if(this.za&&this.qc.length==0&&!this.za.disabled){this.za.disabled=E$p;this.za.Ac.style.display="inline";this.za.Cc.style.display="none"}window.Nc&&window.Nc(this);this.e=e;this.n.e=this.e;this.ic=E$p;E$N(this,E$p)}};E$v.xj=function(){this.dg();this.rf=this.qc.length};E$v.Qj=function(){this.rf=this.qc.length};E$v.dg=function(){this.qc.length=0;this.rf=this.ge.length=0;if(this.za){this.za.disabled=E$p;this.za.Ac.style.display="inline";this.za.Cc.style.display="none"}if(this.ya){this.ya.disabled=E$p;this.ya.Ac.style.display="inline";this.ya.Cc.style.display="none"}window.Nc&&window.Nc(this)};E$v.Hd=function(e){if(E$yc()){this.zoom=this.zoom*e;E$N(this,E$p)}};function E$Eb(g,f){if(Math.abs(f-window.Cg)>0.01){g.zoom=g.zoom*(f/window.Cg);window.Cg=f;E$N(g,E$p)}}function E$zc(g){g.vc&&g.vc.getContext("2d").clearRect(0,0,g.D.width,g.D.height);if(g.Tf){if(g.Wb){var f=g.Wb.getContext("2d");f.clearRect(0,0,g.D.width,g.D.height)}if(g.Bc){f=g.Bc.getContext("2d");f.clearRect(0,0,g.D.width,g.D.height)}E$Ac(g)}}function E$G(n,m,l){if(n.zb||E$yc()){n.i.uiClearSelectionOnToolSelection&&(m instanceof E$Bc||(m instanceof E$Cc||m instanceof E$xb)||E$kc(n.e));if(m instanceof E$Hb){var k="url("+E$C+"eraser.png) 4 11, default";n.we().style.cursor=k;n.mc.style.cursor=k}else{n.we().style.cursor="default";n.mc.style.cursor="default"}if(n.n!=E$q&&n.n instanceof E$xb){n.qc.pop();!n.n.eb&&n.n.a.e&&E$kc(n.n.a.e);E$kc(n.e);n.ac=E$s}E$Dc(n);if(l){m.Gj=E$p}n.Of=E$q;if(n.ub){for(var k=0,i=n.ub.length;k<i;k++){if(l&&n.ub[k].style.backgroundColor==n.$h&&n.Of==E$q){n.Of=n.ub[k]}n.ub[k].style.background=n.Xc;n.ub[k].style.borderColor=n.qe}}n.p=E$q;E$zc(n);n.n=m;n.n.a=n;n.n.e=n.e;if(n.n!=E$q&&(n.n instanceof E$mc||n.n instanceof E$Ec)){n.p=n.n.p}n.Gh=n.n instanceof E$mc||n.n instanceof E$Fc||n.n instanceof E$zb||n.n instanceof E$Gc||n.n instanceof E$Hc||n.n instanceof E$Ic||n.n instanceof E$Kc?E$p:E$s;E$N(n,E$p)}}function E$Dc(l,k){if(l.ed){for(var i=0,h=l.ed.length;i<h;i++){l[l.ed[i]].style.display="none"}}if(l.gb!=E$q){l.gb.style.display="none"}if(l.lc!=E$q){l.lc.style.display="none"}if(l.fb!=E$q){l.fb.style.display="none"}E$Pc(l);k&&E$B.fireEvent(document.documentElement,"click",k)}function E$Qc(r,q,p){for(var o=0,n=r.ed.length;o<n;o++){var m=r.ed[o],l=r[m];if(q==m){if(l.style.display=="inline"){if(!p){l.style.display="none"}}else{l.style.display="inline"}}else{l.style.display="none"}}}function E$E(n,m,l,k,i){n.style.position="absolute";k&&i&&E$Rc(n,k,i);n.top=m;n.left=l;n.style.top=m+"px";n.style.left=l+"px"}function E$Rc(i,h,g){if(i.nodeName=="CANVAS"){i.width=h*window.devicePixelRatio;i.height=g*window.devicePixelRatio}else{i.width=h;i.height=g}i.yk=h;i.xk=g;i.style.width=h+"px";i.style.height=g+"px"}E$v.da=function(r,q,p,o,n){var m=document.createElement("DIV");m.style.fontSize=E$ma?"16px":this.hc<20?"12px":"14px";m.style.lineHeight="16px";var l=E$s;if(q.match(/<img/)){l=q.match(".png");m.innerHTML=q}else{m.innerHTML=o?q:"<center>"+q+"</center>"}if(n||n==0){q=document.createElement("div");q.style.cursor="pointer";if(p!=E$q){q.title=p}q.appendChild(m);p=n;if(E$na){p=p-this.ga;n=n-this.ga}E$E(m,p,n,16,16);r.appendChild(q);E$la&&l&&DD_belatedPNG.fixPng(m.childNodes[0]);q.c=this;q.style.border="solid "+this.ga+"px "+this.qe;E$Sc(q,this.Aa,this.Aa,this.Aa,this.Aa);return q}m.style.cursor="pointer";if(p!=E$q){m.title=p}m.c=this;r.appendChild(m);E$la&&l&&DD_belatedPNG.fixPng(m.childNodes[0]);return m};function E$vb(i,h){var g=document.createElement("DIV");g.id=h;i.appendChild(g);return g}E$v.toString=E$ba("Elemental");function E$Tc(g,f){E$G(g,new E$Fc(E$Uc[f][2]));g.gb.style.display="none";g.Bg.style.background=g.J;g.Bg.style.borderColor=g.P}function E$Vc(g,f){E$G(g,new E$Fc("Gen="+f));g.lc.style.display="none";g.lg.style.background=g.J;g.lg.style.borderColor=g.P}function E$Wc(v,u){var t=E$Xc(E$B.srcElement.a.e);t.length==0&&t.push(E$B.srcElement.s);for(var s=0,r=t.length;s<r;s++){for(var q=t[s],p=E$s,o=0,n=q.U.length;o<n;o++){if(q.U[o]==u){E$Yc(q.U,u);p=E$p}}p||q.U.push(u)}v.Ka=E$p;v.ic=E$p}function E$Ub(aZ,aU,aT,aS,aR){function aP(){E$B.a=this.c;E$B.Ue=this.c;E$B.Ag()}function aK(){E$B.a=this.c;E$B.Ue=this.c;E$B.copy()}function aJ(){E$B.a=this.c;E$B.Ue=this.c;E$B.gg()}function aI(){if(E$ha){E$ca="";window.Pd?window.Pd(E$ca+"docs/Elemental.pdf"):global.Pd&&global.Pd(E$ca+"docs/Elemental.pdf")}else{window.open(E$ca+"docs/Elemental.pdf","ElementalHelp")}}function aE(){E$Zc?E$G(this.c,new E$mc(E$q,E$q,E$q,E$Zc,E$$c,E$ad)):E$G(this.c,new E$mc([2,1,2,1,2,1],E$q,90));this.style.background=this.c.J;this.style.borderColor=this.c.P}function aA(g,f){this.c.uf.Wd=f;this.c.uf.innerHTML=this.innerHTML;this.c.uf.title=this.title;E$la&&DD_belatedPNG.fixPng(this.c.O.childNodes[this.c.O.childNodes.length-1]);this.c.uf.Xa()}function az(){E$G(this.c,new E$bd(this.Wd));this.style.background=this.c.J;this.style.borderColor=this.c.P;if(this.Z){this.Z.style.borderColor=this.c.P;this.Z.style.background=this.c.J}}function ax(){E$Pc(this.c);E$G(this.c,new E$cd);this.style.background=this.c.J;this.style.borderColor=this.c.P}function aw(){E$Pc(this.c);E$B.Dh()}function bA(){E$Pc(this.c);E$B.Xg(E$p)}function br(g,f){this.c.Ee.wg=f;this.c.Ee.innerHTML=this.innerHTML;this.c.Ee.title=this.title;E$la&&DD_belatedPNG.fixPng(this.c.Ee.childNodes[this.c.Ee.childNodes.length-1]);this.c.Ee.Xa()}function bq(){this.wg==1?E$G(this.c,new E$dd):this.wg==2&&E$G(this.c,new E$ed);this.style.background=this.c.J;this.style.borderColor=this.c.P;if(this.Z){this.Z.style.borderColor=this.c.P;this.Z.style.background=this.c.J}}function bp(){E$G(this.c,new E$bd);this.style.background=this.c.J;this.style.borderColor=this.c.P}function at(){E$G(this.c,new E$fd);this.style.background=this.c.J;this.style.borderColor=this.c.P}function bD(){E$Pc(this.c);E$gd(this.c);this.c.Kc.style.display="inline"}function bK(){this.c.La.pf=[1,1,1,1,1,1,1,1];this.c.La.of=22.5;this.c.La.innerHTML=this.innerHTML;this.c.La.title=this.title;this.c.La.style.lineHeight=this.c.La.style.height;if(E$la){this.c.La.style.visibility="visible"}this.c.La.Xa()}function a0(){this.c.La.pf=[1,1,1,1,1,1,1];this.c.La.of=90;this.c.La.innerHTML=this.innerHTML;this.c.La.title=this.title;this.c.La.style.lineHeight=this.c.La.style.height;if(E$la){this.c.La.style.visibility="visible"}this.c.La.Xa()}function a7(){this.c.La.pf=[1,1,1,1];this.c.La.of=45;this.c.La.innerHTML=this.innerHTML;this.c.La.title=this.title;this.c.La.style.lineHeight=E$q;E$la&&DD_belatedPNG.fixPng(this.c.La.childNodes[this.c.La.childNodes.length-1]);this.c.La.Xa()}function a8(){this.c.La.pf=[1,1,1];this.c.La.of=90;this.c.La.innerHTML=this.innerHTML;this.c.La.title=this.title;this.c.La.style.lineHeight=E$q;E$la&&DD_belatedPNG.fixPng(this.c.La.childNodes[this.c.La.childNodes.length-1]);this.c.La.Xa()}function bC(){E$G(this.c,new E$mc(this.pf,E$q,this.of));this.style.background=this.c.J;this.style.borderColor=this.c.P;if(this.Z){this.Z.style.borderColor=this.c.P;this.Z.style.background=this.c.J}}function a5(){var e=E$hd(this.c.aa,"Cyclohexane-Left").copy();E$G(this.c,new E$mc(E$q,E$q,E$q,e,3,4));this.style.background=this.c.J;this.style.borderColor=this.c.P}function bj(){var e=E$hd(this.c.aa,"Cyclohexane-Right").copy();E$G(this.c,new E$mc(E$q,E$q,E$q,e,3,4));this.style.background=this.c.J;this.style.borderColor=this.c.P}function W(){E$G(this.c,new E$mc([1,2,1,2,1],E$q,-90));this.style.background=this.c.J;this.style.borderColor=this.c.P}function b0(){E$G(this.c,new E$mc([1,2,1,2,1],E$q,90));this.style.background=this.c.J;this.style.borderColor=this.c.P}function aB(){var e=E$hd(this.c.aa,"Cyclopentane-Down").copy();E$G(this.c,new E$mc(E$q,E$q,E$q,e,3,4));this.style.background=this.c.J;this.style.borderColor=this.c.P}function aa(){var e=E$hd(this.c.aa,"Cyclopentane-Up").copy();E$G(this.c,new E$mc(E$q,E$q,E$q,e,1,2));this.style.background=this.c.J;this.style.borderColor=this.c.P}function bn(){E$G(this.c,new E$mc([1,1,1,1,1,1,1,1],E$q,22.5));this.style.background=this.c.J;this.style.borderColor=this.c.P}function bL(){E$G(this.c,new E$mc([1,1,1,1,1,1,1],E$q,90));this.style.background=this.c.J;this.style.borderColor=this.c.P}function aM(){E$G(this.c,new E$mc([1,1,1,1],E$q,45));this.style.background=this.c.J;this.style.borderColor=this.c.P}function ah(){E$G(this.c,new E$mc([1,1,1],E$q,90));this.style.background=this.c.J;this.style.borderColor=this.c.P}function E(){E$G(this.c,new E$mc([2,1,2,1,2,1],E$q,90));this.style.background=this.c.J;this.style.borderColor=this.c.P}function bO(){E$G(this.c,new E$mc([1,1,1,1,1,1],E$q,90));this.style.background=this.c.J;this.style.borderColor=this.c.P}function bs(){E$G(this.c,new E$mc([1,1,1,1,1],E$q,90));this.style.background=this.c.J;this.style.borderColor=this.c.P}function aW(){this.c.uc.l=1;this.c.uc.Re=E$s;this.c.uc.innerHTML=this.innerHTML;this.c.uc.title=this.title;E$la&&DD_belatedPNG.fixPng(this.c.uc.childNodes[this.c.uc.childNodes.length-1]);this.c.uc.Xa()}function al(){this.c.uc.l=1;this.c.uc.Re=E$p;this.c.uc.innerHTML=this.innerHTML;this.c.uc.title=this.title;E$la&&DD_belatedPNG.fixPng(this.c.uc.childNodes[this.c.uc.childNodes.length-1]);this.c.uc.Xa()}function Q(){this.Re?E$G(this.c,new E$Kc(this.l)):E$G(this.c,new E$Ic(this.l));this.style.background=this.c.J;this.style.borderColor=this.c.P;if(this.Z){this.Z.style.borderColor=this.c.P;this.Z.style.background=this.c.J}}function bE(l,k,i,h){this.c.Sd.l=k;this.c.Sd.o=i;this.c.Sd.xc=h;this.c.Sd.innerHTML=this.innerHTML;this.c.Sd.title=this.title;E$la&&DD_belatedPNG.fixPng(this.c.Sd.childNodes[this.c.Sd.childNodes.length-1]);this.c.Sd.Xa()}function ad(l,k,i,h){this.c.O.l=k;this.c.O.o=i;this.c.O.xc=h;this.c.O.innerHTML=this.innerHTML;this.c.O.title=this.title;E$la&&DD_belatedPNG.fixPng(this.c.O.childNodes[this.c.O.childNodes.length-1]);this.c.O.Xa()}function a6(e){E$G(this.c,new E$Hc(this.l,this.o,this.xc));this.style.background=this.c.J;this.style.borderColor=this.c.P;if(this.Z){this.Z.style.borderColor=this.c.P;this.Z.style.background=this.c.J}E$Dc(this.c,e)}function N(l,k,i,h){E$G(this.c,new E$Hc(k,i,h));this.style.background=this.c.J;this.style.borderColor=this.c.P}function aV(l,k,i,h){this.c.Rb.l=k;this.c.Rb.o=i;this.c.Rb.xc=h;this.c.Rb.innerHTML=this.innerHTML;this.c.Rb.title=this.title;E$la&&DD_belatedPNG.fixPng(this.c.Rb.childNodes[this.c.Rb.childNodes.length-1]);this.c.Rb.Xa()}function p(){E$G(this.c,new E$Hc(this.l,this.o,this.xc));this.style.background=this.c.J;this.style.borderColor=this.c.P;if(this.Z){this.Z.style.borderColor=this.c.P;this.Z.style.background=this.c.J}}function bX(){this.c.O.l=2;this.c.O.o=E$jd;this.c.O.innerHTML=this.innerHTML;this.c.O.title=this.title;E$la&&DD_belatedPNG.fixPng(this.c.O.childNodes[this.c.O.childNodes.length-1]);this.c.O.Xa()}function bI(){this.c.O.l=1;this.c.O.o=E$kd;this.c.O.innerHTML=this.innerHTML;this.c.O.title=this.title;E$la&&DD_belatedPNG.fixPng(this.c.O.childNodes[this.c.O.childNodes.length-1]);this.c.O.Xa()}function be(){this.c.O.l=1;this.c.O.o=E$ld;this.c.O.innerHTML=this.innerHTML;this.c.O.title=this.title;E$la&&DD_belatedPNG.fixPng(this.c.O.childNodes[this.c.O.childNodes.length-1]);this.c.O.Xa()}function bS(l,k,i,h){this.c.Le.l=k;this.c.Le.o=i;this.c.Le.xc=h;this.c.Le.innerHTML=this.innerHTML;this.c.Le.title=this.title;this.c.Le.Xa()}function aG(){E$la&&DD_belatedPNG.fixPng(this.c.Rb.childNodes[this.c.Rb.childNodes.length-1]);E$G(this.c,new E$Hc(this.l,this.o,this.xc));this.style.background=this.c.J;this.style.borderColor=this.c.P;if(this.Z){this.Z.style.borderColor=this.c.P;this.Z.style.background=this.c.J}}function bB(l,k,i,h){this.c.Rb.l=k;this.c.Rb.o=i;this.c.Rb.xc=h;this.c.Rb.innerHTML=this.innerHTML;this.c.Rb.title=this.title;this.c.Rb.onclick()}function af(){E$la&&DD_belatedPNG.fixPng(this.c.Rb.childNodes[this.c.Rb.childNodes.length-1]);E$G(this.c,new E$Hc(this.l,this.o,this.xc));this.style.background=this.c.J;this.style.borderColor=this.c.P;if(this.Z){this.Z.style.borderColor=this.c.P;this.Z.style.background=this.c.J}}function B(){this.c.O.l=1;this.c.O.o=E$O;this.c.O.innerHTML=this.innerHTML;this.c.O.title=this.title;E$la&&DD_belatedPNG.fixPng(this.c.O.childNodes[this.c.O.childNodes.length-1]);this.c.O.Xa()}function bW(){this.c.O.l=3;this.c.O.o=0;this.c.O.innerHTML=this.innerHTML;this.c.O.title=this.title;E$la&&DD_belatedPNG.fixPng(this.c.O.childNodes[this.c.O.childNodes.length-1]);this.c.O.Xa()}function bH(){this.c.O.l=2;this.c.O.o=0;this.c.O.innerHTML=this.innerHTML;this.c.O.title=this.title;E$la&&DD_belatedPNG.fixPng(this.c.O.childNodes[this.c.O.childNodes.length-1]);this.c.O.Xa()}function aF(){this.c.O.l=1;this.c.O.o=0;this.c.O.innerHTML=this.innerHTML;this.c.O.title=this.title;E$la&&DD_belatedPNG.fixPng(this.c.O.childNodes[this.c.O.childNodes.length-1]);this.c.O.Xa()}function b3(){E$G(this.c,new E$Hc(2,E$jd));this.style.background=this.c.J;this.style.borderColor=this.c.P}function bN(){E$G(this.c,new E$Hc(1,E$kd));this.style.background=this.c.J;this.style.borderColor=this.c.P}function aQ(){E$G(this.c,new E$Hc(1,E$ld));this.style.background=this.c.J;this.style.borderColor=this.c.P}function ak(){E$G(this.c,new E$Hc(1,E$O));this.style.background=this.c.J;this.style.borderColor=this.c.P}function M(){E$G(this.c,new E$Hc(3,0));this.style.background=this.c.J;this.style.borderColor=this.c.P}function b5(){E$G(this.c,new E$Hc(2,0));this.style.background=this.c.J;this.style.borderColor=this.c.P}function C(){this.c.i.uiDragToolAsSingleBondTool&&this.l==1&&this.o==0?E$G(this.c,new E$Ic(this.l)):E$G(this.c,new E$Hc(this.l,this.o));this.style.background=this.c.J;this.style.borderColor=this.c.P;if(this.Z){this.Z.style.borderColor=this.c.P;this.Z.style.background=this.c.J}}function bP(){E$Pc(this.c);E$tb(this.c,this.c.e);E$N(this.c,E$p)}function bv(){this.c.Hd(0.8);var e=this.c.zoom;E$tb(this.c,this.c.e);this.c.zoom=e;E$N(this.c,E$p)}function bU(){this.c.Hd(1.25);var e=this.c.zoom;E$tb(this.c,this.c.e);this.c.zoom=e;E$N(this.c,E$p)}function bF(){this.c.Hd(0.8);window.Nc&&window.Nc(this.c)}function a9(){this.c.Hd(1.25);window.Nc&&window.Nc(this.c)}function ae(){E$G(this.c,new E$Hb);this.style.background=this.c.J;this.style.borderColor=this.c.P;!this.c.i.uiEraserDragSelectRegangle&&!this.c.i.uiEraseOnEraserDrag&&this.c.te()}function aC(){E$Pc(this.c);this.c.empty()}function ay(){E$B.ci()}function ab(){this.c.Qb.innerHTML=this.innerHTML;this.c.Qb.title=this.title;this.c.Qb.onclick=function(){E$G(this.c,new E$md(E$p));this.style.background=this.c.J;this.style.borderColor=this.c.P;this.Z.style.background=this.c.J;this.Z.style.borderColor=this.c.P};E$la&&DD_belatedPNG.fixPng(this.c.Qb.childNodes[this.c.Qb.childNodes.length-1]);this.c.Qb.onclick()}function X(){this.c.Qb.innerHTML=this.innerHTML;this.c.Qb.title=this.title;this.c.Qb.onclick=function(){E$G(this.c,new E$Cc(E$s));this.style.background=this.c.J;this.style.borderColor=this.c.P;this.Z.style.background=this.c.J;this.Z.style.borderColor=this.c.P};E$la&&DD_belatedPNG.fixPng(this.c.Qb.childNodes[this.c.Qb.childNodes.length-1]);this.c.Qb.onclick()}function o(){this.c.Qb.innerHTML=this.innerHTML;this.c.Qb.title=this.title;this.c.Qb.onclick=function(){E$G(this.c,new E$Bc(E$s));this.style.background=this.c.J;this.style.borderColor=this.c.P;this.Z.style.background=this.c.J;this.Z.style.borderColor=this.c.P};E$la&&DD_belatedPNG.fixPng(this.c.Qb.childNodes[this.c.Qb.childNodes.length-1]);this.c.Qb.onclick()}function v(){E$G(this.c,new E$Bc(E$s));this.style.background=this.c.J;this.style.borderColor=this.c.P;if(this.Z){this.Z.style.background=this.c.J;this.Z.style.borderColor=this.c.P}}function b6(){E$G(this.c,new E$Cc(E$s));this.style.background=this.c.J;this.style.borderColor=this.c.P;if(this.Z){this.Z.style.background=this.c.J;this.Z.style.borderColor=this.c.P}}function b2(){E$G(this.c,new E$md);this.style.background=this.c.J;this.style.borderColor=this.c.P}function bM(){E$Pc(this.c);this.c.Eg()}function bm(){E$Pc(this.c);this.c.qf()}function q(){E$G(this.c,new E$Gc(-1));this.style.background=this.c.J;this.style.borderColor=this.c.P}function bY(){E$G(this.c,new E$Gc(1));this.style.background=this.c.J;this.style.borderColor=this.c.P}function bV(){E$Pc(this.c);if(this.c.lc.style.display=="inline"){this.c.lc.style.display="none"}else{for(var g=0,f=this.c.ub.length;g<f;g++){this.c.ub[g].style.border="solid 1px #aaa"}this.c.lc.xf=E$Vc;if(this.c.gb){this.c.gb.style.display="none"}this.c.lc.style.display="inline"}}function bJ(){E$G(this.c,new E$nd);this.style.background=this.c.J;this.style.borderColor=this.c.P}function aO(){E$G(this.c,new E$od);this.style.background=this.c.J;this.style.borderColor=this.c.P}function bG(){E$Pc(this.c);for(var i=this.c.gb.childNodes,h=0,g=i.length;h<g;h++){if(i[h].style&&!i[h].yg){i[h].style.border="1px solid #aaa";i[h].style.display="inline"}}E$ha||E$E(this.c.gb,this.c.hc+5+E$nc(this.c.z),this.c.hc+5+E$oc(this.c.z));if(this.c.gb.style.display=="inline"){this.c.gb.style.display="none"}else{this.c.gb.xf=E$Tc;this.c.gb.style.display="inline";if(this.c.lc){this.c.lc.style.display="none"}this.c.gb.Bf.style.visibility="hidden";this.c.gb.style.display="inline"}}function aj(){E$G(this.c,new E$zb);this.style.background=this.c.J;this.style.borderColor=this.c.P}function ba(){E$G(this.c,new E$Fc(this.td));this.style.background=this.c.J;this.style.borderColor=this.c.P}function bf(){E$Pc(this.c);this.c.Qa.style.display="block"}function by(g){if(referenceToDHTMLSuiteContextMenu!=E$q&&referenceToDHTMLSuiteContextMenu.menuObject&&referenceToDHTMLSuiteContextMenu.menuObject.style.display!="none"){return E$s}var f={button:2};f.clientX=E$oc(this.c.Df)+4;f.clientY=E$nc(this.c.D)+0;if(this.c.Eb){f.clientX=2;f.clientY=2}E$pd(this.c);if(this.c.kc){E$B.fireEvent(this.c.kc,"mousedown",f);E$B.fireEvent(this.c.D,"contextmenu",f);E$B.srcElement=E$s}E$Ga(g);return E$s}function aD(){E$G(this.c,new E$rd);this.style.background=this.c.J;this.style.borderColor=this.c.P}function aH(){if(this.c.fb.style.display=="block"){this.c.fb.style.display="none";this.c.ab.title=this.c.ab.Td}else{E$Pc(this.c);this.c.fb.style.display="block";this.c.ab.title=""}}function au(K,J,I,H,F,A,z,y,x,w,P,L){this.Ye=K;this.zi=J;this.ae=I&&I!=""?I:J;this.onclick=H;this.Kf=F;this.sj=A;this.lf=z;this.le=y;this.ti=x;this.si=w;this.ek=P;this.dk=L}function ag(F,A,z,y,x,w,u,t){var f;f=F.da(A,"","");f.style.background=F.Wa;f.style.lineHeight="10px";f.id=u+"Palette";E$na?E$E(f,bl-aT-4,s+U+F.ga+aT+4,aT-2*F.ga*w,aT*x):E$E(f,bl-aT-4,s+U+F.ga+aT+4,aT*w,aT*x);f.style.zIndex=10;f.style.display="none";f.c=F;E$Sc(t,F.Aa,0,0,F.Aa);if(F.Aa>0){t.width=t.width-(F.Aa>6?6:F.Aa);t.style.width=t.width+"px"}x=aT-6;E$na&&(x=x-2*F.ga);x=aT>20?x-parseInt(aT/10):x-2;A=F.da(A,"<img style='position: absolute;left: 1px; top: "+x+"px' src='"+E$C+"triangleRight.png'>",y);A.style.background=F.Xc;z.Z=A;F.ub.push(A);y=8;E$ma&&(y=y+8);x=aT-6;F.Qe>0&&(x=x+F.Qe);E$na&&(x=x-F.ga);E$E(A,t.top,x+U,y,aT);E$Sc(A,0,F.Aa,F.Aa,0);A.style.border="solid "+F.ga+"px "+F.qe;A.style.borderLeftWidth="0px";z.le=u;A.onclick=function(e){E$Qc(this.c,u,e!=E$o)};A.onmouseup=function(e){E$Qc(this.c,u,e!=E$o)};return f}function D(y,x,w,u,t,h){var f;w.width=w.width+1;w.style.width=w.width+1+"px";f=y.da(x,"","");f.style.background=y.Wa;E$na?E$E(f,1+aT-y.ga-1,bl+y.ga,aT-2*y.ga,aT):E$E(f,1+aT+y.ga-2,bl+y.ga,aT,aT);f.style.zIndex=10;f.style.display="none";f.c=y;E$Sc(h,y.Aa,0,0,y.Aa);if(b1>8){bl=bl+(aT-8)}else{bl=bl+(aT-b1+1);b1>2?bl=bl+2:b1==2&&(bl=bl+1)}h=aT-6;E$na&&(h=h-2*y.ga);aT>20&&(h=h-parseInt(aT/10));E$ha&&(h=h+2);var z=1;E$ha&&(z=0);x=y.da(x,"<img style='position: absolute;left: "+z+"px; top: "+h+"px' src='"+E$C+"triangleDown.png'>",u);x.style.background=y.Xc;w.Z=x;y.ub.push(x);w=8;if(E$na){w=w+(y.ga+1);bl=bl-1}else{bl=bl+y.ga}E$ma&&(w=w+8);E$E(x,1,bl,w,aT);E$Sc(x,0,y.Aa,y.Aa,0);x.style.border="solid "+y.ga+"px "+y.qe;x.style.borderLeftWidth="0px";bl=bl+(w+aR);E$na||(bl=bl-y.ga);x.onclick=function(e){E$Qc(this.c,t,e!=E$o)};x.onmouseup=function(e){E$Qc(this.c,t,e!=E$o)};return f}var ao=aZ.i.buttonPanel,ar=aZ.i.buttonPanelDraggable,O=aZ.i.buttonPanelHeight,b8=aZ.i.elementIcons,b1=parseInt((aT-16)/2),ac=aR;E$na||(aR=aR+2*aZ.ga);var aY=aT;b1>8?aY=aT-7:b1>1?aY=aT-b1+3:b1==1&&(aY=aT-b1+2);ao&&(aY=aT);var s=1,bo=s,bl=1+aT+aR;if(ar){O=O*(aT+aR);O=O+23;E$na&&(O=O+2*aZ.ga)}E$Ta==E$Ka&&E$ha&&(bl=1);if(aZ.tipDiv==E$o||aZ.tipDiv==E$q){var b7=aZ.da(aU,"");b7.style.background=aZ.J;b7.style.visibility="hidden";b7.style.padding="2px 10px";b7.style.fontSize=12*E$B.G+"px";E$Sc(b7,4,4,4,4);ao?E$E(b7,aU.clientHeight-15,5):E$E(b7,aU.clientHeight-15,aT+aR+5);b7.style.zIndex=5;aZ.Lc=b7}if(aZ.i.getMolURL){var an=aZ.da(aU,"");an.style.position="absolute";an.bottom=1;an.style.bottom="1px";if(ao){an.left=5;an.style.left="5px"}else{an.left=aT+aR+5;an.style.left=aT+aR+5+"px"}an.style.zIndex=4;var R=document.createElement("input");aZ.mi=R;R.setAttribute("type","text");R.title="Type/paste SMILES or Compound ID";var bQ=aZ.width_-175;bQ<50&&(bQ=50);R.style.width=bQ+"px";R.style.display="none";R.a=aZ;R.onkeyup=function(g){if(g.keyCode==13){var f=E$qb(this.a.i.getMolURL+encodeURIComponent(this.value));this.blur();this.a.Dc(f);E$Ga(g)}};var bw=document.createElement("img");bw.src=E$C+"triangle-up.gif";bw.style.verticalAlign="top";bw.style.marginRight="1px";bw.input=R;bw.title="Show SMILES/ID input box";bw.onclick=function(){if(this.input.style.display=="none"){this.input.style.display="inline";this.title="Hide SMILES/ID input box";this.src=E$C+"triangle-down.gif"}else{this.input.style.display="none";this.title="Show SMILES/ID input box";this.src=E$C+"triangle-up.gif"}};an.appendChild(bw);an.appendChild(R);R.style.fontSize=an.style.fontSize=12*E$B.G+"px";R.a=aZ}if(aZ.shortcutTipDiv==E$o||aZ.shortcutTipDiv==E$q){var bR=aZ.da(aU,"");bR.style.background="#fafad2";bR.style.visibility="hidden";bR.style.padding="2px 10px";bR.style.fontSize=12*E$B.G+"px";E$Sc(bR,4,4,4,4);ao?E$E(bR,aU.clientHeight-15,5):E$E(bR,aU.clientHeight-15,aT+aR+5);bR.style.zIndex=5;aZ.Ed=bR}var bd=E$q,av;if(ao){bd=document.createElement("div");bd.style.position="absolute";bd.style.height=O+"px";bd.style.backgroundColor="white";if(ar){document.body.appendChild(bd);bd.style.border="1px solid grey";bd.onmousedown=E$wd;E$E(bd,E$nc(aZ.z),E$oc(aZ.z)+aZ.width_+4);var a2=document.createElement("div");a2.style.width="100%";a2.style.backgroundColor=aZ.Wa;a2.style.height="22px";var G;G=E$ka&&E$qa<9?aZ.da(a2,"<img height='100%' src='"+E$C+"elemental_25.png' />","Dotmatics Elemental",E$p):aZ.da(a2,"<img width='20px' height='20px' src='"+E$C+"El.svg' />","Dotmatics Elemental",E$p);aZ.ab=G;E$E(G,1,1,20,20);aZ.ab.Td=aZ.ab.title;aZ.ab.onclick=function(){if(this.c.fb.style.display=="block"){this.c.fb.style.display="none";this.c.ab.title=this.c.ab.Td}else{E$Pc(this.c);this.c.fb.style.display="block";this.c.ab.title=""}};var aq=document.createElement("img");aq.src=E$C+"cross.gif";E$xd(aq,"right");aq.style.marginRight=ac+"px";aq.style.cursor="pointer";aq.a=aZ;aq.onclick=function(){E$Pc(this.a,E$p)};a2.appendChild(aq);bd.appendChild(a2);var r=document.createElement("div");r.style.clear="both";bd.appendChild(r)}else{aZ.z.appendChild(bd);bd.style.width=aZ.width_+"px";bd.style.height=aZ.height_+"px";E$E(bd,0,0)}aU=bd;aU.style.zIndex=E$ha?E$ja-10:99999;aZ.Eb=bd;E$Ra(bd)}aZ.ub=[];aZ.ed=[];var U=0,bZ=aZ.Qe,bg;if(ao){if(ar){bl=23;bl=bl-(aT+aR);bg=function(){bl=bl+(aT+aR);if(bl+aT>O){bl=23;s=s+(aT+aR)}E$E(av,bl,s,aT,aT)}}else{bg=function(){E$Rc(av,aT,aT);av.style.margin=ac/2+"px";av.style.position="relative";av.style["float"]="left"}}}else{bg=function(){E$E(av,bl,s+U,aT+bZ,aT);bl=bl+(aT+aR)}}positionToTopSecondLeftColumn=function(){bl=1+aT+aR+1;E$Ta==E$Ka&&E$ha&&(bl=1);U=aT+aR+bZ};var bh;bh=E$na?b1-Math.ceil(aZ.ga/2):b1;if(E$Ta<E$Ia||E$Ta>E$La){E$Ta=E$Ia}Bond_STEREO_NONE=0;Bond_STEREO_UP=1;Bond_CT_EITHER=3;Bond_STEREO_EITHER=4;Bond_STEREO_DOWN=6;var a4=[],bc=[];E$Fb=E$Ta;if(ao||E$Ta==E$Ia||E$Ta==E$La){for(var bx=E$ha&&E$Ta==E$Ia,aL=0,b4=b8.length;aL<b4;aL++){a4.push(new au(b8[aL],"","Click on atom to set element to "+b8[aL],ba,function(e){av.style.color=E$yd(e);av.td=e},b8[aL]))}a4.push(new au("<img src='"+E$C+"element_text.png'>","Set element","Click on atom to set element by keyboard",aj));aZ.i.sgroupEdit&&a4.push(new au("<img src='"+E$C+"sgroup.png'>","Group","Drag to select atoms in group",aO,function(e){E$zd(e);e.Da.style.zIndex=10;e.Da.style.display="none"},aZ));aZ.i.periodicTable&&a4.push(new au("<img src='"+E$C+"ptable.png'>","Element Chooser","",bG,function(e){av.Pg=E$s;e.gb=E$Ad(e,e.z,aT+5,aT+5,e.i.query);e.gb.style.zIndex=E$ja;e.gb.style.display="none";e.Bg=av},aZ));aZ.i.reaxysGenerics&&a4.push(new au("<img src='"+E$C+"reaxys_icon.png'>","Reaxys Generics","",bV,function(e){av.Pg=E$s;e.lc=E$Bd(e,e.z,aT+5,aT+5);e.lc.style.zIndex=E$ja;e.lc.style.display="none";e.lg=av},aZ));a4.push(new au("+","Increase Charge","Click on atom to increase charge",bY));a4.push(new au("-","Decrease Charge","Click on atom to decrease charge",q));if(!ao){a4.push(new au("<img src='"+E$C+"edit-properties-icon.gif'>","Atom, bond, or textbox menu","Click on atom, bond, or textbox to edit",aD));bx||bc.push(new au("<img src='"+E$C+"menu.gif'>","Edit menu","",by,function(e){e.Df=av;bg()},aZ))}if(!bx){bc.push(new au("<img src='"+E$C+"undo_disabled.gif'><img src='"+E$C+"undo_edit.gif' style='display: none' >","Undo (Ctrl-Z)","",bm,function(e){bg();e.za=b1?av.getElementsByTagName("div")[0]:av;e.za.Ac=e.za.getElementsByTagName("img")[0];e.za.Cc=e.za.getElementsByTagName("img")[1];e.za.disabled=E$p},aZ));bc.push(new au("<img src='"+E$C+"redo_disabled.gif'><img src='"+E$C+"redo_edit.gif' style='display: none' >","Redo (Ctrl-Y)","",bM,function(e){bg();e.ya=b1?av.getElementsByTagName("div")[0]:av;e.ya.Ac=e.ya.getElementsByTagName("img")[0];e.ya.Cc=e.ya.getElementsByTagName("img")[1];e.ya.disabled=E$p},aZ))}E$ma||bx||bc.push(new au("<img src='"+E$C+"move.png'>","Move","Drag to move selection, all, or molecule",b2,function(e){e.lk=av;bg()},aZ));if(ao){bc.push(new au("<img src='"+E$C+"lasso-select.png'>","Lasso Select","Drag to select",b6,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"shape_handles.png'>","Select","Drag to select",v,function(){bg()},aZ))}else{if(bx){bc.push(new au("<img src='"+E$C+"lasso-select.png'>","Lasso Select","Drag to select",b6,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"shape_handles.png'>","Select","Drag to select",v,function(){bg()},aZ))}else{bc.push(new au("<img src='"+E$C+"lasso-select.png'>","Lasso Select","Drag to select",b6,function(e){if(!ao){E$Sc(av,this.Aa,0,0,this.Aa);av.style.borderRightWidth="0px"}e.ub.push(av);ao?bg():E$E(av,1,bl,aY,aT)},aZ,"selectButton","selectMenu","Select Tools",[new au("<img style='margin: "+bh+"px' src='"+E$C+"shape_handles.png'>","Select","Drag to select",o),new au("<img style='margin: "+bh+"px' src='"+E$C+"lasso-select.png'>","Lasso Select","Drag to select",X)]))}bx&&bc.push(new au("<img src='"+E$C+"move.png'>","Move","Drag to move selection, all, or molecule",b2,function(e){e.lk=av;bg()},aZ))}bx||bc.push(new au("<img src='"+E$C+"page_white.png'>","Clear Structure","Delete All",aC,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"eraser.png'>","Delete","Click on atom or bond to delete",ae,function(){bg()},aZ));if(!E$ma&&!bx){bc.push(new au("<img src='"+E$C+"zoom_in.png'>","Increase Scale","",a9,function(){if(ao){bg()}else{E$E(av,1,bl,aT,aT);if(b1>2){bl=bl+(aT+aR)}else{av.style.borderTopRightRadius="0px";av.style.borderBottomRightRadius="0px";av.style.borderRightWidth="0px";bl=bl+(aT-b1);b1>1?bl=bl+2:b1==1&&(bl=bl+1)}}},aZ));bc.push(new au("<img src='"+E$C+"zoom_out.png'>","Decrease Scale","",bF,function(g){if(b1>2||ao){bg()}else{var f=0;if(b1>1){f=av.getElementsByTagName("div")[0];f.left=2;f.style.left="2px";f=2}else{if(b1>0){f=av.getElementsByTagName("div")[0];f.left=1;f.style.left="1px";f=1}}av.style.background=g.Xc;av.style.borderTopLeftRadius="0px";av.style.borderBottomLeftRadius="0px";if(this.ga!=0){av.style.borderLeftWidth="1px"}E$E(av,1,bl,aT,aT);bl=bl+(aT-b1+f+aR);av.width=av.width-b1+f;av.style.width=aT-b1+f+"px"}},aZ))}bc.push(new au("<img src='"+E$C+"center.gif'>","Center view","",bP,function(){bg()},aZ));if(ao){bc.push(new au("<img src='"+E$C+"bond1.png'>","Add Single Bond","",C,function(){bg();av.l=1;av.o=0},aZ));bc.push(new au("<img src='"+E$C+"bond2.png'>","Add Double Bond","",b5,function(){bg();av.l=2;av.o=0},aZ));bc.push(new au("<img  src='"+E$C+"bond3.png'>","Add Triple Bond","",M,function(){bg();av.l=3;av.o=0},aZ));bc.push(new au("<img src='"+E$C+"up.png'>","Add Stereo Up Bond","",ak,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"down.png'>","Add Stereo Down Bond","",aQ,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"either.png'>","Add Stereo Either Bond","",bN,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"double_either.png'>","Add Double Either Bond","",b3,function(){bg()},aZ))}else{if(bx){bc.push(new au("<img src='"+E$C+"bond1.png'>","Add Single Bond","",C,function(){if(!ao){E$Sc(av,this.Aa,0,0,this.Aa);av.style.borderRightWidth="0px"}ao?bg():E$E(av,1,bl,aY,aT);av.l=1;av.o=0},aZ,"bondsButton","bondsMenu","Other Bonds",[new au("<img style='margin: "+bh+"px' src='"+E$C+"bond1.png'>","Add Single Bond","",aF),new au("<img style='margin: "+bh+"px' src='"+E$C+"bond2.png'>","Add Double Bond","",bH),new au("<img style='margin: "+bh+"px' src='"+E$C+"bond3.png'>","Add Triple Bond","",bW)]));bc.push(new au("<img src='"+E$C+"up.png'>","Add Stereo Up Bond","",af,function(){if(!ao){E$Sc(av,this.Aa,0,0,this.Aa);av.style.borderRightWidth="0px"}ao?bg():E$E(av,1,bl,aY,aT);av.l=1;av.o=Bond_STEREO_UP;av.xc=0},aZ,"stereoBondsButton","stereoBondsMenu","Stereo Up Bonds",[new au("<img style='margin: "+bh+"px' src='"+E$C+"up.png'>","Add Stereo Up Bond","",[bB,1,Bond_STEREO_UP,0]),new au("<img style='margin: "+bh+"px' src='"+E$C+"up_alt2.png'>","Add Bold Bond","",[bB,1,Bond_STEREO_UP,2]),new au("<img  style='margin: "+bh+"px' src='"+E$C+"up_alt1.png'>","Add Hollow Wedge Bond","",[bB,1,Bond_STEREO_UP,1])]));bc.push(new au("<img src='"+E$C+"down.png'>","Add Stereo Down Bond","",aG,function(){if(!ao){E$Sc(av,this.Aa,0,0,this.Aa);av.style.borderRightWidth="0px"}ao?bg():E$E(av,1,bl,aY,aT);av.l=1;av.o=Bond_STEREO_DOWN;av.xc=0},aZ,"stereoBondsDownButton","stereoBondsDownMenu","Stereo Down Bonds",[new au("<img style='margin: "+bh+"px' src='"+E$C+"down.png'>","Add Stereo Down Bond","",[bS,1,Bond_STEREO_DOWN,0]),new au("<img style='margin: "+bh+"px' src='"+E$C+"down_alt2.png'>","Add Dashed Stereo Down Bond","",[bS,1,Bond_STEREO_DOWN,2]),new au("<img  style='margin: "+bh+"px' src='"+E$C+"down_alt1.png'>","Add Hashed Stereo Down Bond","",[bS,1,Bond_STEREO_DOWN,1])]))}else{bc.push(new au("<img src='"+E$C+"bond1.png'>","Add Single Bond","",C,function(){if(!ao){E$Sc(av,this.Aa,0,0,this.Aa);av.style.borderRightWidth="0px"}ao?bg():E$E(av,1,bl,aY,aT);av.l=1;av.o=0},aZ,"bondsButton","bondsMenu","Other Bonds",[new au("<img style='margin: "+bh+"px' src='"+E$C+"bond1.png'>","Add Single Bond","",aF),new au("<img style='margin: "+bh+"px' src='"+E$C+"bond2.png'>","Add Double Bond","",bH),new au("<img style='margin: "+bh+"px' src='"+E$C+"bond3.png'>","Add Triple Bond","",bW),new au("<img style='margin: "+bh+"px' src='"+E$C+"up.png'>","Add Stereo Up Bond","",B),new au("<img style='margin: "+bh+"px' src='"+E$C+"down.png'>","Add Stereo Down Bond","",be),new au("<img style='margin: "+bh+"px' src='"+E$C+"either.png'>","Add Stereo Either Bond","",bI),new au("<img style='margin: "+bh+"px' src='"+E$C+"double_either.png'>","Add Double Either Bond","",bX)]))}}bx&&bc.push(new au("<img style='margin-left:-1px;' src='"+E$C+"chain.png'>","Chain Bond Tool","",Q,function(){ao?bg():E$E(av,1,bl,aY,aT);av.l=1;av.Re=E$p},aZ,"multiChainBondsButton","multiChainBondsMenu","Chain/Multi Bond Tools",[new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"chain.png'>","Chain Bond Tool","",al),new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"multibond.png'>","Multi Bond Tool","",aW)],1,2));bc.push(new au("<img src='"+E$C+"ring5.png'>","Add 5-Membered Ring","",bs,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"ring6.png'>","Add 6-Membered Ring","",bO,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"ringp.png'>","Add Phenyl Ring","",E,function(){bg()},aZ));if(ao){bc.push(new au("<img src='"+E$C+"ring3.png'>","Add 3-Membered Ring","",ah,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"ring4.png'>","Add 4-Membered Ring","",aM,function(){bg()},aZ));bc.push(new au("7","Add 7-Membered Ring","",bL,function(){bg()},aZ));bc.push(new au("8","Add 8-Membered Ring","",bn,function(){bg()},aZ))}else{bc.push(new au("<img src='"+E$C+"ring3.png'>","Add 3-Membered Ring","",bC,function(e){if(ao){bg()}else{E$Sc(av,e.Aa,0,0,e.Aa);av.style.borderRightWidth="0px";E$E(av,1,bl,aY,aT)}av.pf=[1,1,1];av.of=90},aZ,"ringsButton","ringsMenu","Other rings",[new au("<img style='margin: "+bh+"px' src='"+E$C+"ring3.png'>","Add 3-Membered Ring","",a8),new au("<img style='margin: "+bh+"px' src='"+E$C+"ring4.png'>","Add 4-Membered Ring","",a7),new au("7","Add 7-Membered Ring","",a0,function(e){E$na?E$Rc(av,aT-2*e.ga,aT-2*e.ga):E$Rc(av,aT,aT)},aZ),new au("8","Add 8-Membered Ring","",bK,function(e){E$na?E$Rc(av,aT-2*e.ga,aT-2*e.ga):E$Rc(av,aT,aT)},aZ)]))}bc.push(new au("<img src='"+E$C+"sd_file.png'>","Select template","",bD,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"plus.png'>","Add Reaction Plus","",at,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"arrow.png'>","Add Reaction Arrow","",bp,function(){bg()},aZ));aZ.i.noTextBox||bc.push(new au("<img src='"+E$C+"textfield.gif'>","Add textbox","",bA,function(){bg()},aZ));aZ.i.toRgroup&&bc.push(new au("<img src='"+E$C+"toR.png'>","Click on a bond to turn one side into an R-group label","",bJ,function(){bg()},aZ));if(ao){bc.push(new au("<img src='"+E$C+"sdtags.gif'>","Add/edit SD file data fields","",aw,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"edit-properties-icon.gif'>","Atom, bond, or textbox menu","Click on atom, bond, or textbox to edit",aD,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"menu.gif'>","Edit menu","",by,function(e){e.Df=av;bg()},aZ));bc.push(new au("<img src='"+E$C+"gear.png'>","Settings","",bf,function(){bg()},aZ))}}else{if(E$Ta==E$Ja){a4.push(new au("<img style='margin-left:-1px;' src='"+E$C+"sel_lasso.png'>","Lasso Select","Drag to select",b6,E$aa(),aZ,"selectButton","selectMenu","Select Tools",[new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"sel_lasso.png'>","Lasso Select","Drag to select",X),new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"sel_rect.png'>","Select","Drag to select",o),new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"sel_mol.png'>","Molecule Select","Click Fragment Select",ab)],1,3));a4.push(new au("<img src='"+E$C+"iraw2d.png'>","Rotate 2D","Rotate 2D",ay));a4.push(new au("<img src='"+E$C+"eraser.png'>","Delete","Click on atom or bond to delete",ae));a4.push(new au("<img src='"+E$C+"element_text.png'>","Set element","Click on atom to set element by keyboard",aj));a4.push(new au("<img style='margin-left:-1px;' src='"+E$C+"bond1carbons.png'>","Add Single Bond","",C,function(){av.l=1;av.o=0},aZ,"bondsButton","bondsMenu","Other Bonds",[new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"bond1carbons.png'>","Add Single Bond","",aF),new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"bond2.png'>","Add Double Bond","",bH),new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"bond3.png'>","Add Triple Bond","",bW)],1,3));a4.push(new au("<img style='margin-left:-1px;' src='"+E$C+"up.png'>","Add Stereo Up Bond","",p,function(){av.l=1;av.o=Bond_STEREO_UP;av.xc=0},aZ,"stereoBondsButton","stereoBondsMenu","Stereo Bonds",[new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"up.png'>","Add Stereo Up Bond","",[aV,1,Bond_STEREO_UP,0]),new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"down.png'>","Add Stereo Down Bond","",[aV,1,Bond_STEREO_DOWN,0]),new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"either.png'>","Add Stereo Either Bond","",[aV,1,Bond_STEREO_EITHER,0]),new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"double_either.png'>","Add Double Either Bond","",[aV,2,Bond_CT_EITHER,0]),new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"up_alt2.png'>","Add Stereo Up Bond","",[aV,1,Bond_STEREO_UP,2]),new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"down_alt2.png'>","Add Stereo Down Bond","",[aV,1,Bond_STEREO_DOWN,2]),new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"up_alt1.png'>","Add Stereo Up Bond","",[aV,1,Bond_STEREO_UP,1]),new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"down_alt1.png'>","Add Stereo Down Bond","",[aV,1,Bond_STEREO_DOWN,1])],2,4));a4.push(new au("<img style='margin-left:-1px;' src='"+E$C+"chain.png'>","Chain Bond Tool","",Q,function(){av.l=1;av.Re=E$p},aZ,"multiChainBondsButton","multiChainBondsMenu","Chain/Multi Bond Tools",[new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"chain.png'>","Chain Bond Tool","",al),new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"multibond.png'>","Multi Bond Tool","",aW)],1,2));a4.push(new au("<img src='"+E$C+"plus.png'>","Add Reaction Plus","",at));a4.push(new au("<img style='margin-left:-1px;' src='"+E$C+"arrow4.png'>","Arrow Tool","",az,function(){av.Wd=1},aZ,"arrowButton","arrowMenu","Arrows",[new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"arrow1.png'>","","",[aA,1])],1,1));a4.push(new au("<img style='margin-left:-1px;' src='"+E$C+"map.png'>","Reaction Mapping Tool","",bq,function(){av.wg=1},aZ,"reactionMapButton","reactionMapMenu","Reaction Mapping Tools",[new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"map.png'>","Reaction Mapping Tool","",[br,1]),new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"map_delete.png'>","Reaction Mapping Delete Tool","",[br,2])],1,2));aZ.i.sgroupEdit&&a4.push(new au("<img src='"+E$C+"sgroup.png'>","Group","Drag to select atoms in group",aO,function(e){E$zd(e);e.Da.style.zIndex=10;e.Da.style.display="none"},aZ));E$ha?bc.push(new au("<img style='opacity:0.3' src='"+E$C+"check_chem.png'>","Chemisty Checker","NOT AVAILABLE",E$q,function(){bg();bl=bl+aR*2},aZ)):bc.push(new au("<img src='"+E$C+"menu.gif'>","Edit menu","",by,function(e){e.Df=av;bg();bl=bl+aR*2},aZ));bc.push(new au("<img src='"+E$C+"template2.png'>","Template Chooser","",bD,function(){bg();bl=bl+aR*2},aZ));bc.push(new au("<img src='"+E$C+"last_template.png'>","Last Template","",aE,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"ring6.png'>","Add 6-Membered Ring","",bO,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"ring5.png'>","Add 5-Membered Ring","",bs,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"ring7.png'>","Add 7-Membered Ring","",bL,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"ringp.png'>","Add Phenyl Ring","",E,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"r5_up.png'>","Add Cyclopentane","",aa,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"r5_dn.png'>","Add Cyclopentane","",aB,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"r5pd_up.png'>","Add Cyclopentadiene","",b0,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"r5pd_dn.png'>","Add Cyclopentadiene","",W,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"ring4.png'>","Add Cyclobutane","",aM,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"ring3.png'>","Add Cyclopropane","",ah,function(){bg();E$ha||(bl=bl+aR*2)},aZ));if(!E$ha){bc.push(new au("<img src='"+E$C+"undo_disabled.gif'><img src='"+E$C+"undo_edit.gif' style='display: none' >","Undo (Ctrl-Z)","",bm,function(e){bg();e.za=b1?av.getElementsByTagName("div")[0]:av;e.za.Ac=e.za.getElementsByTagName("img")[0];e.za.Cc=e.za.getElementsByTagName("img")[1];e.za.disabled=E$p},aZ));bc.push(new au("<img src='"+E$C+"redo_disabled.gif'><img src='"+E$C+"redo_edit.gif' style='display: none' >","Redo (Ctrl-Y)","",bM,function(e){bg();e.ya=b1?av.getElementsByTagName("div")[0]:av;e.ya.Ac=e.ya.getElementsByTagName("img")[0];e.ya.Cc=e.ya.getElementsByTagName("img")[1];e.ya.disabled=E$p},aZ));bc.push(new au("<img src='"+E$C+"cut.png'>","Cut","Cut",aJ,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"copy.png'>","Copy","Copy",aK,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"paste.png'>","Paste","Paste",aP,function(){bg();bl=bl+3},aZ))}}else{if(E$Ta==E$Ka){a4.push(new au("<img src='"+E$C+"lasso-select.png'>","Lasso Select","Drag to select",b6));a4.push(new au("<img src='"+E$C+"iraw2d.png'>","Rotate 2D","Rotate 2D",ay));a4.push(new au("<img style='-webkit-transform:scaleY(-1);' src='"+E$C+"single.png'>","Add Single Bond","",[N,1,0,0]));a4.push(new au("<img style='-webkit-transform:scaleY(-1); margin-left:-1px;' src='"+E$C+"double.png'>","Add Double Bond","",a6,function(){av.l=2;av.o=0;av.xc=0},aZ,"bondsButton","bondsMenu","Other Bonds",[new au("<img style='-webkit-transform:scaleY(-1); margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"double.png'>","Add Double Bond","Draw Double Bond",[ad,2,0,0]),new au("<img style='-webkit-transform:scaleY(-1); margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"bond2dash1.png'>","Add Dashed Double Bond","Draw Dashed Double Bond",[ad,2,0,3]),new au("<img style='-webkit-transform:scaleX(-1); margin: "+bh+"px' src='"+E$C+"double_either.png'>","Add Double Either Bond","Draw Double Either Bond",[ad,2,Bond_CT_EITHER,0]),new au("<img style='-webkit-transform:scaleY(-1); margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"bond3.png'>","Add Triple Bond","",[ad,3,0,0]),new au("<img style='-webkit-transform:scaleY(-1); margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"bond2bold.png'>","Add Bold Double Bond","",[ad,2,0,2]),new au("<img style='-webkit-transform:scaleY(-1); margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"bond2dash.png'>","Add Double Dashed Double Bond","",[ad,2,0,1]),new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"any_alt.png'>","Add Any Bond","",[ad,8,0,1]),new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"sd_alt.png'>","Add Single/Double Bond","",[ad,5,0,1]),new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"sa_alt.png'>","Add Single/Aromatic Bond","",[ad,6,0,1]),new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"da_alt.png'>","Add Double/Aromatic Bond","",[ad,7,0,1])],2,5));a4.push(new au("<img style='-webkit-transform:scaleY(-1);' src='"+E$C+"down_alt2.png'>","Add Dashed Stereo Down Bond","",[N,1,Bond_STEREO_DOWN,2]));a4.push(new au("<img style='-webkit-transform:scaleY(-1);' src='"+E$C+"down_alt1.png'>","Add Hashed Stereo Down Bond","",[N,1,Bond_STEREO_DOWN,1]));a4.push(new au("<img style='-webkit-transform:scaleY(-1);' src='"+E$C+"down.png'>","Add Hashed Wedge Stereo Down Bond","",[N,1,Bond_STEREO_DOWN,0]));a4.push(new au("<img style='-webkit-transform:scaleY(-1);' src='"+E$C+"up_alt2.png'>","Add Bold Stereo Up Bond","",[N,1,Bond_STEREO_UP,2]));a4.push(new au("<img style='-webkit-transform:scaleY(-1); margin-left:-1px;' src='"+E$C+"wavy.png'>","Add Stereo Either Bond (Wavy)","",a6,function(){av.l=1;av.o=Bond_STEREO_EITHER;av.xc=1},aZ,"stereoEitherBondsButton","stereoEitherBondsMenu","Streo Either Bonds",[new au("<img style='-webkit-transform:scaleY(-1); margin: "+bh+"px' src='"+E$C+"either.png'>","Add Stereo Either Bond","",[bE,1,Bond_STEREO_EITHER,0]),new au("<img style='-webkit-transform:scaleY(-1); margin: "+bh+"px' src='"+E$C+"wavy.png'>","Add Stereo Either Bond (Wavy)","",[bE,1,Bond_STEREO_EITHER,1])],1,2));a4.push(new au("<img style='margin-left:-1px;' src='"+E$C+"chain.png'>","Chain Bond Tool","",Q,function(){av.l=1;av.Re=E$p},aZ,"multiChainBondsButton","multiChainBondsMenu","Chain/Multi Bond Tools",[new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"chain.png'>","Chain Bond Tool","",al),new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"multibond.png'>","Multi Bond Tool","",aW)],1,2));a4.push(new au("<img src='"+E$C+"ring3.png'>","Add Cyclopropane","",ah));a4.push(new au("<img src='"+E$C+"ring5.png'>","Add 5-Membered Ring","",bs));a4.push(new au("<img src='"+E$C+"ring7.png'>","Add 7-Membered Ring","",bL));a4.push(new au("<img style='margin-left:-2px;' src='"+E$C+"chair_left.png'>","Add Left Chair Ring","",a5));a4.push(new au("<img src='"+E$C+"r5pd_up.png'>","Add Cyclopentadiene","",b0,function(){positionToTopSecondLeftColumn()},aZ));a4.push(new au("<img src='"+E$C+"shape_handles.png'>","Select","Drag to select",v));a4.push(new au("<img src='"+E$C+"move.png'>","Move","Drag to move selection, all, or molecule",b2));a4.push(new au("<img src='"+E$C+"eraser.png'>","Delete","Click on atom or bond to delete",ae));a4.push(new au("<img src='"+E$C+"abc.png'>","Add textbox","",ax));a4.push(new au("<img src='"+E$C+"plus.png'>","Add Reaction Plus","",at));a4.push(new au("<img style='margin-left:-1px;' src='"+E$C+"arrow4.png'>","Arrow Tool","",az,function(){av.Wd=1},aZ,"arrowButton","arrowMenu","Arrows",[new au("<img style='margin: "+bh+"px; margin-left:"+(bh-1)+"px;' src='"+E$C+"arrow1.png'>","","",[aA,1])],1,1));a4.push(new au("<img style='-webkit-transform:scaleY(-1);' src='"+E$C+"up.png'>","Add Wedge Stereo Up Bond","",[N,1,Bond_STEREO_UP,0]));a4.push(new au("<img style='-webkit-transform:scaleY(-1);' src='"+E$C+"up_alt1.png'>","Add Hollow Wedge Stereo Up Bond","",[N,1,Bond_STEREO_UP,1]));aZ.i.sgroupEdit&&a4.push(new au("<img src='"+E$C+"sgroup.png'>","Group","Drag to select atoms in group",aO,function(e){E$zd(e);e.Da.style.zIndex=10;e.Da.style.display="none"},aZ));a4.push(new au("<img src='"+E$C+"stamp.png'>","Template Chooser","Template Chooser",bD,E$aa(),aZ));a4.push(new au("<img src='"+E$C+"ring4.png'>","Add Cyclobutane","",aM,function(e){e.i.sgroupEdit||bg()},aZ));a4.push(new au("<img src='"+E$C+"ring6.png'>","Add 6-Membered Ring","",bO));a4.push(new au("<img style='margin-top:-1px; margin-left:-1px;' src='"+E$C+"ring8.png'>","Add 8-Membered Ring","",bn));a4.push(new au("<img style='margin-left:-2px;' src='"+E$C+"chair_right.png'>","Add Right Chair Ring","",bj));a4.push(new au("<img src='"+E$C+"ringp.png'>","Add Phenyl Ring","",E));if(E$ha){aL=0;for(b4=b8.length;aL<b4;aL++){bc.push(new au(b8[aL],"","Click on atom to set element to "+b8[aL],ba,aL==0?function(e){bg();bg();av.style.color=E$yd(e);av.td=e}:function(e){bg();av.style.color=E$yd(e);av.td=e},b8[aL]))}bc.push(new au("<img src='"+E$C+"element_text.png'>","Set element","Click on atom to set element by keyboard",aj,function(){bg()},aZ));aZ.i.periodicTable&&bc.push(new au("<img src='"+E$C+"ptable.png'>","Element Chooser","",bG,function(e){bg();av.Pg=E$s;e.gb=E$Ad(e,e.z,aT+5,aT+5,e.i.query);e.gb.style.zIndex=10;e.gb.style.display="none";e.Bg=av},aZ));aZ.i.reaxysGenerics&&bc.push(new au("<img src='"+E$C+"reaxys_icon.png'>","Reaxys Generics","",bV,function(e){bg();av.Pg=E$s;e.lc=E$Bd(e,e.z,aT+5,aT+5);e.lc.style.zIndex=10;e.lc.style.display="none";e.lg=av},aZ))}else{bc.push(new au("<img src='"+E$C+"menu.gif'>","Edit menu","",by,function(e){e.Df=av;bg()},aZ));bc.push(new au("<img src='"+E$C+"help.png'>","Help","Help",aI,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"undo_disabled.gif'><img src='"+E$C+"undo_edit.gif' style='display: none' >","Undo (Ctrl-Z)","",bm,function(e){bg();e.za=b1?av.getElementsByTagName("div")[0]:av;e.za.Ac=e.za.getElementsByTagName("img")[0];e.za.Cc=e.za.getElementsByTagName("img")[1];e.za.disabled=E$p},aZ));bc.push(new au("<img src='"+E$C+"redo_disabled.gif'><img src='"+E$C+"redo_edit.gif' style='display: none' >","Redo (Ctrl-Y)","",bM,function(e){bg();e.ya=b1?av.getElementsByTagName("div")[0]:av;e.ya.Ac=e.ya.getElementsByTagName("img")[0];e.ya.Cc=e.ya.getElementsByTagName("img")[1];e.ya.disabled=E$p},aZ));bc.push(new au("<img src='"+E$C+"cut.png'>","Cut","Cut",aJ,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"copy.png'>","Copy","Copy",aK,function(){bg()},aZ));bc.push(new au("<img src='"+E$C+"paste.png'>","Paste","Paste",aP,function(){bg();bl=bl+3},aZ));bc.push(new au("<img src='"+E$C+"zoom_in.png'>","Increase Scale","",bU,function(){if(ao){bg()}else{E$E(av,1,bl,aT,aT);if(b1>2){bl=bl+(aT+aR)}else{av.style.borderTopRightRadius="0px";av.style.borderBottomRightRadius="0px";av.style.borderRightWidth="0px";bl=bl+(aT-b1);b1>1?bl=bl+2:b1==1&&(bl=bl+1)}}},aZ));bc.push(new au("<img src='"+E$C+"zoom_out.png'>","Decrease Scale","",bv,function(){if(b1>2||ao){bg()}else{var e=0;if(b1>1){e=av.getElementsByTagName("div")[0];e.left=2;e.style.left="2px";e=2}else{if(b1>0){e=av.getElementsByTagName("div")[0];e.left=1;e.style.left="1px";e=1}}av.style.background=this.Xc;av.style.borderTopLeftRadius="0px";av.style.borderBottomLeftRadius="0px";if(this.ga!=0){av.style.borderLeftWidth="1px"}E$E(av,1,bl,aT,aT);bl=bl+(aT-b1+e+aR);av.width=av.width-b1+e;av.style.width=aT-b1+e+"px"}},aZ))}}}}for(var bu,a3=0;a3<2;a3++){bu=a3==0?a4:bc;if(a3==1){if(E$Ta==E$Ka&&E$ha){bl=s;bt=aZ.ga;if(!ao){bl=bl+(aT+aR);bg=function(){E$E(av,1,bl,aT,aT);bl=bl+(aT+aR)}}E$Cd(aZ);E$Dd(aZ)}else{ar||(bl=s);var bt=aT;if(E$ia){bt=aZ.ga}else{if(E$ka&&E$qa<9){var bk="50";bt<17?bk="16":bt<25?bk="25":bt<33&&(bk="32");av=aZ.da(aZ.z,"<img height='100%' src='"+E$C+"elemental_"+bk+".png' />","Dotmatics Elemental",E$p);E$na||(bt=bt+2*aZ.ga)}else{b1=0;ao&&(b1=E$o);av=aZ.da(aZ.z,"<img height='"+bt+"px' width='"+bt+"px' src='"+E$C+"El.svg' />","Dotmatics Elemental",E$s,b1)}E$E(av,1,bo,bt,bt);if(!E$na&&!ao){var aN=E$cc(0.14*bt+0.5);E$Sc(av,aN,aN,aN,aN)}if(ao){av.title="Controls";av.onclick=function(){this.c.Eb.style.display=this.c.Eb.style.display=="block"?"none":"block"};av.style.zIndex=4}else{aZ.ab=av;aZ.ab.Td=aZ.ab.title;aZ.ab.onclick=aH}}E$Cd(aZ);if(!E$Ba&&!E$ma){if(!E$ka){aZ.i.getMolURL&&E$Ed(aZ);E$Fd(aZ);E$Gd(aZ)}E$Da||E$Hd(aZ)}E$Dd(aZ);if(!ao||ar){E$Id(aZ);E$ia?E$E(aZ.fb,0,0,aT,aT):E$E(aZ.fb,aT+2+2,0,aT,aT)}b1=(aT-16)/2;if(!ao){bl=bl+(aT+aR+aZ.Qe);E$ia&&(bl=bl-(aT+aR));bg=function(){E$E(av,1,bl,aT,aT);bl=bl+(aT+aR)}}}}for(var aX=0,a1=bu.length;aX<a1;aX++){var bT=bu[aX];if(bT.Ye!=E$q&&bT.Ye!=E$o){av=aZ.da(aU,bT.Ye,bT.zi,E$s,b1);av.ae=bT.ae;av.style.background=aZ.Xc;aZ.ub.push(av);(a3==0||a3==1&&bT.Kf==E$o)&&bg();av.c=aZ;if(bT.onclick instanceof Array){av.Xa=bT.onclick[0];av.Od=bT.onclick;av.onclick=function(g){var f=g&&this.Mf==g.screenX&&this.Sh==g.screenY;if(g&&this.Z&&this.style.background==this.c.J){this.Z.onclick.apply(this.Z,[g])}else{if(!f||!this.Md){this.Od[0]=g;return this.Xa.apply(this,this.Od)}return this.Md=E$s}};av.onmouseup=function(e){e=e||event;this.Md=E$s;if(this.Z){this.Z.onclick.apply(this.Z,[e])}else{this.Md=E$p;this.Od[0]=e;return this.Xa.apply(this,this.Od)}}}else{av.Xa=bT.onclick;av.Od=E$q;if(!E$ha&&bT.onclick==by){av.onclick=by}else{av.onclick=function(g){var f=g&&this.Mf==g.screenX&&this.Sh==g.screenY;if((g=g||window.event)&&this.Z&&this.style.background==this.c.J){if(f){this.Rh?this.Z.onclick.apply(this.Z,[E$o]):this.Z.onclick.apply(this.Z,[g]);this.Mf=-112;this.Md=E$s}else{this.Mf=-111;this.Z.onclick.apply(this.Z,[g])}}else{if(!f||!this.Md){return this.Xa.apply(this,[g])}return this.Md=E$s}};av.onmouseup=function(u){u=u||event;this.Md=E$s;this.Mf=u.screenX;this.Sh=u.screenY;if(this.Z){var t;a:{t=this.c;for(var n=0,m=t.ed.length;n<m;n++){var l=t.ed[n],k=t[l];if(this.le==l){t=k.style.display=="inline";break a}}t=E$s}if(t){this.Rh=E$p}else{this.Z.onclick.apply(this.Z,[u]);this.Rh=E$s}}else{this.Md=E$p;return this.Xa.apply(this,[u])}}}}}bT.Kf!=E$q&&bT.Kf!=E$o&&bT.Kf(bT.sj);if(bT.lf!=E$o){aZ[bT.lf]=av;switch(bT.lf){case"stereoBondsButton":aZ.Rb=av;break;case"multiChainBondsButton":aZ.uc=av;break;case"bondsButton":aZ.O=av;break;case"stereoEitherBondsButton":aZ.Sd=av;break;case"ringsButton":aZ.La=av;break;case"selectButton":aZ.Qb=av;break;case"arrowButton":aZ.uf=av;break;case"stereoBondsDownButton":aZ.Le=av;break;case"reactionMapButton":aZ.Ee=av}aZ[bT.le]=a3==0?ag(aZ,aU,aZ[bT.lf],bT.ti,bT.ek,bT.dk,bT.le,av):D(aZ,aU,aZ[bT.lf],bT.ti,bT.le,av);aZ.ed.push(bT.le);for(var am=0,ap=bT.si.length;am<ap;am++){var bz=bT.si[am];av=aZ.da(aZ[bT.le],bz.Ye,bz.zi);av.ae=bz.ae;if(a3==0){av.style.display="inline-block";av.width=aT;av.style.width=aT+"px";av.height=aT;av.style.height=aT+"px"}if(E$ha&&a3==1&&bz.Ye.indexOf("<img")==-1){av.style.fontSize="15px";av.style.fontWeight=900;av.style.paddingTop="7px";av.style.paddingBottom="7px"}av.style.background=aZ.Xc;av.c=aZ;if(bz.onclick instanceof Array){av.Xa=bz.onclick[0];av.Od=bz.onclick;av.onclick=function(e){this.Od[0]=e;this.Xa.apply(this,this.Od)}}else{av.onclick=bz.onclick}if(E$ha){av.onmouseover=function(){this.style.background=this.c.J;this.style.borderColor=this.c.P};av.onmouseout=function(){this.style.background=this.c.Xc;this.style.borderColor=this.c.qe}}}}}}if(ao){bd.scrollLeft=0}if(aS>0){av=aZ.da(aU,"Hello World Init Statbox","Structure Information");av.style.background=aZ.Xc;bg()}for(var aL=0,T=aZ.ub.length;aL<T;aL++){var b9=aZ.ub[aL];if(!b9.onmousedown&&b9.ae){b9.onmouseover=b9.onmousedown=function(){if(E$jb){clearTimeout(this.c.Qg);this.c.Lc.innerHTML=this.ae;this.c.Lc.style.left=this.c.re+10+"px";var g=this.c.D.top+this.c.D.height-this.c.Lc.offsetHeight-2;this.c.Lc.style.top=g+"px";this.c.Lc.top=g;this.c.Lc.style.visibility="visible";var f=this.c.Lc;this.c.Qg=setTimeout(function(){E$Jd(f)},3000)}if(E$D.Jk){clearTimeout(this.c.Qg);this.c.Ed.innerHTML=this.ae;g=this.c.D.left+this.c.D.width-155;this.c.Ed.style.left=g+"px";this.c.Ed.left=g;g=this.c.D.top+this.c.D.height-this.c.Ed.offsetHeight-2;this.c.Ed.style.top=g+"px";this.c.Ed.top=g;this.c.Ed.style.visibility="visible";f=this.c.Ed;this.c.Uj=setTimeout(function(){E$Jd(f)},3000)}};b9.onmouseout=function(){E$Jd(this.c.Ed);E$Jd(this.c.Lc);clearTimeout(this.c.Qg);clearTimeout(this.c.Uj)}}}if(!aZ.zb){document.onkeyup=function(e){e=e||event;if(e.keyCode==16&&e.shiftKey!=E$Kd){E$Kd=e.shiftKey;if(E$B.a.n instanceof E$mc){E$B.a.n.onmousemove(e,E$p);return E$s}if(E$B.a.n instanceof E$nd){E$B.a.n.onmousemove(e,E$p);return E$s}}if(e.keyCode==17){if(e.ctrlKey!=E$Ld){E$Ld=e.ctrlKey;if(E$B.a.n instanceof E$mc){E$B.a.n.onmousemove(e,E$p);return E$s}if(E$B.a.n instanceof E$nd){E$B.a.n.onmousemove(e,E$p);return E$s}}}else{if(e.keyCode==18&&e.altKey!=E$Md){E$Md=e.altKey;window.me?window.me():global.me&&global.me();if(E$B.a.n instanceof E$mc){E$B.a.n.onmousemove(e,E$p);return E$s}}}};document.onkeydown=function(z){z=z||event;if(E$B.md||E$ha){if(document.activeElement&&(document.activeElement.tagName=="INPUT"||document.activeElement.tagName=="TEXTAREA")){var y=E$o;if(z.keyCode){y=z.keyCode}else{if(z.which){y=z.which}}y==27&&E$B.a.$e()?E$B.a.Xe():y==27&&(E$B.a.N&&E$B.a.N.$e())&&E$B.a.N.Xe()}else{z=z||event;if(z.keyCode){y=z.keyCode}else{if(z.which){y=z.which}}if(z.keyCode==46||z.keyCode==8){E$B.te();E$Ga(z);return E$s}if(y==16){if(z.shiftKey!=E$Kd){E$Kd=z.shiftKey;if(E$B.a.n instanceof E$mc){E$B.a.n.onmousemove(z,E$p);return E$s}if(E$B.a.n instanceof E$nd){E$B.a.n.onmousemove(z,E$p)}}return E$s}if(y==18){if(z.altKey!=E$Md){E$Md=z.altKey;if(E$B.a.n instanceof E$mc){E$B.a.n.onmousemove(z,E$p);return E$s}window.me?window.me():global.me&&global.me()}return E$s}if(global.vj&&(y==91||y==93)&&z.metaKey!=E$Rd){E$Rd=z.metaKey;if(E$B.a.n instanceof E$mc){E$B.a.n.onmousemove(z,E$p);return E$s}}if(y==17&&z.ctrlKey!=E$Ld){E$Ld=z.ctrlKey;if(E$B.a.n instanceof E$mc){E$B.a.n.onmousemove(z,E$p);return E$s}if(E$B.a.n instanceof E$nd){E$B.a.n.onmousemove(z,E$p);return E$s}}var x=E$s,w=E$s;if(y>=65&&y<=90||y>=48&&y<=57){w=String.fromCharCode(y);w=z.shiftKey?w=="8"?"*":w.toUpperCase():w.toLowerCase();x=w.toUpperCase()}if(y>=37&&y<=40){switch(y){case 37:x="LEFT";break;case 38:x="UP";break;case 39:x="RIGHT";break;case 40:x="DOWN"}}if(z.ctrlKey||z.metaKey){if(E$Sd(z,x,y)){E$Ga(z);return E$s}}else{if(!(E$B.a.t!=E$q||E$Td(E$B.a.e))||!E$Ud(y,x,z.shiftKey)){if(E$B.a.n&&E$B.a.n.Ia||E$B.a.q!=E$q||E$Vd(E$B.a.e)){E$Wd(y,x,w,z.shiftKey)}else{if(!(w=E$B.a.fa!=E$q)){a:{for(var w=E$B.a.e,u=0,t=w.u.length;u<t;u++){if(w.u[u].selected){w=E$p;break a}}w=E$s}}if(w){for(var w=z.shiftKey,u=E$B.a.e,z=[],t=0,n=u.u.length;t<n;t++){var m=u.u[t];m.selected&&z.push(m)}z.length==0&&E$B.a.fa&&z.push(E$B.a.fa);if(x=="UP"||x=="DOWN"){u=0.02;w&&(u=u*10);x=="DOWN"&&(u=u*-1);E$B.a.save();x=0;for(w=z.length;x<w;x++){t=z[x];t.b.y=t.b.y+u;t.b.y=t.b.y+u}E$B.a.Ka=E$p;E$N(E$B.a)}else{if(x=="LEFT"||x=="RIGHT"){u=0.02;w&&(u=u*10);x=="LEFT"&&(u=u*-1);E$B.a.save();x=0;for(w=z.length;x<w;x++){t=z[x];t.b.x=t.b.x+u;t.b.x=t.b.x+u}E$B.a.Ka=E$p;E$N(E$B.a)}}}else{if(x!=E$s&&(x=="0"||x>="3"&&x<="9")){w=y==48?10:y-48;u=[];if(x=="6"&&z.shiftKey){u=[2,1,2,1,2,1]}else{for(z=0;z<w;z++){u.push(1)}}z=new E$mc(u,E$q,90);z.a=E$B.a;E$G(E$B.a,z);z.onmousemove(E$B.a.ce)}}}}}if(y==27&&E$B.a.$e()){E$B.a.Xe()}else{if(y==27&&E$B.a.N&&E$B.a.N.$e()){E$B.a.N.Xe()}else{if(y==27&&E$B.a.n instanceof E$mc){E$B.a.p=E$q;E$zc(E$B.a);E$B.a.n=E$q;E$B.a.O.Xa()}}}if(y==27&&E$B.a.i.uiESCCancelsSelection){E$kc(E$B.a.e);E$B.a.Ka=E$p;E$N(E$B.a)}else{if(y==113){E$B.a.save();y=E$B.a.e;if(!(y.v.length>0)){E$vc(y);x=0;for(w=y.f.length;x<w;x++){y.f[x].Pa=x+1}u=y.copy();u.u.length=0;z=y.sd+4;x=E$Xd(y);x.start.x=y.I+1;x.end.x=y.I+4-1;x.start.y=y.rb;x.end.y=y.rb;x=0;for(w=u.f.length;x<w;x++){u.f[x].b.x=u.f[x].b.x+z}E$wc(y,u);x=0;for(w=y.F.length;x<w;x++){u=y.F[x];t=E$Yd(y);t.b.x=u.b.x+z;t.b.y=u.b.y}}E$N(E$B.a)}}}}}}if(aZ.Eb&&!aZ.i.buttonPanelOpen){aZ.Eb.style.display="none"}if(ar){bQ=s+aT+aR;E$na&&(bQ=bQ+2*aZ.ga);aZ.Eb.style.width=bQ+"px"}}function E$Sd(p,o,n){if(!(o==E$s&&n==E$o)){if(E$B.he&&E$B.he.length>0){for(var m=0,l=E$B.he.length;m<l;m++){var k=E$B.he[m];if(k.Oh==107&&(n==107||n==187)){k.Og()}else{if(k.Oh==n){if(!k.alt||p.altKey){if(!k.shift||p.shiftKey){k.Og();return E$p}}}else{if(k.Tj==o&&(!k.alt||p.altKey)){if(!k.shift||p.shiftKey){k.Og();return E$p}}}}}}if(o!=E$s){if(o=="C"){E$B.copy();return E$p}if(o=="A"){E$B.Cd();return E$p}if(o=="X"){E$B.gg();return E$p}if(o=="V"){E$B.Ag(E$p);return E$p}if(o=="Z"){E$B.a.qf();return E$p}if(o=="Y"){E$B.a.Eg();return E$p}window.Xf&&window.Xf(50,0);return E$s}}}E$B.Pi=function(){E$B.he=[]};E$B.Jj=function(n,m,l){var k=""+m.charAt(m.length-1),i=m.indexOf("ALT")>=0,m=m.indexOf("SHIFT")>=0;if(!E$B.he){E$B.he=[]}E$B.he.push({Tj:k,Og:n,alt:i,shift:m,Oh:l})};function E$Ud(p,o,n){var m=E$B.a,l=E$Zd(E$B.a.e,E$s,E$s),k=[];if(E$B.a.t){k.push(E$B.a.t);if(m.i.uiIncludeSelectionWithHighlightedWhenMakingPropChanges&&l.length!=0){k=l;l.indexOf(E$B.a.t)==-1&&k.push(E$B.a.t)}}else{E$B.a.n&&E$B.a.n.Ia?k.push(E$B.a.n.Ia):l.length!=0&&(k=l)}if(k.length==0){return E$s}if(o=="1"){E$B.a.save();n=0;for(o=k.length;n<o;n++){l=k[n];l.type=1;l.l=1;l.o=0}E$N(E$B.a);return E$p}if(o=="2"){E$B.a.save();n=0;for(o=k.length;n<o;n++){l=k[n];l.type=2;l.l=2;l.o=0}E$N(E$B.a);return E$p}if(o=="3"){E$B.a.save();n=0;for(o=k.length;n<o;n++){l=k[n];l.type=3;l.l=3;l.o=0}E$N(E$B.a);return E$p}if(o=="A"){E$B.a.save();n=0;for(o=k.length;n<o;n++){l=k[n];l.type=l.type==8?1:8;l.l=1;l.o=0}E$N(E$B.a);return E$p}if(o!="4"){if(o=="R"){E$B.a.save();n=0;for(o=k.length;n<o;n++){l=k[n];l.xb=l.Xb()==E$s?l.xb==E$q?E$p:l.xb?E$s:E$q:E$q}E$N(E$B.a);return E$p}if(o!=E$s&&(o=="0"||o=="5"||o=="6"||o=="7"||o=="8"||o=="9")){switchTemplateToRingSize(p,o,n);E$B.a.save();te.onmousemove(E$B.a.ce);te.onmouseup(E$B.a.ce);E$N(E$B.a);return E$p}if(o=="W"){E$B.a.save();n=p=0;for(o=k.length;n<o;n++){l=k[n];if(l.o==E$ld){l.M++;if(l.M>2){l.o=E$kd;p=l.M=0}}else{if(l.o==E$O){l.M++;if(l.M>2){l.o=E$ld;p=l.M=0}}else{if(l.o==E$kd){l.M++;if(l.M>1){l.o=E$O;p=l.M=0}}else{if(l.o!=E$O){l.type=1;l.l=1;l.o=E$O;l.M=p}}}}}E$N(E$B.a);return E$p}if(o=="D"){E$B.a.save();n=0;for(o=k.length;n<o;n++){l=k[n];l.type=E$ld;l.l=1;l.o=2}E$N(E$B.a)}else{if(o=="H"){E$B.a.save();p=0;n&&(p=1);n=0;for(o=k.length;n<o;n++){l=k[n];if(l.o!=E$ld){l.type=1;l.l=1;l.o=E$ld;l.M=p}else{if(l.o==E$ld){l.M++;if(l.M>2){l.o=0;p=l.M=0}}}}E$N(E$B.a);return E$p}if(o=="B"){E$B.a.save();n=0;for(o=k.length;n<o;n++){l=k[n];l.type=1;l.l=1;l.o=E$O;l.M=2}E$N(E$B.a)}else{if(o=="Y"){E$B.a.save();n=0;for(o=k.length;n<o;n++){l=k[n];l.type=1;l.l=1;l.o=E$kd;l.M=1}E$N(E$B.a)}else{if(o=="E"){E$B.a.save();n=0;for(o=k.length;n<o;n++){l=k[n];l.type=2;l.l=2;l.o=3;l.M=0}E$N(E$B.a);return E$p}if(o=="S"){E$B.a.save();n=0;for(o=k.length;n<o;n++){l=k[n];l.o>0&&E$$d(l,l.o,l.M)}E$N(E$B.a);return E$p}if(o=="UP"||o=="DOWN"){p=[];m=0.02;n&&(m=m*10);o=="DOWN"&&(m=m*-1);E$B.a.save();n=0;for(o=k.length;n<o;n++){l=k[n];if(p.indexOf(l.j)==-1){l.j.b.y=l.j.b.y+m;p.push(l.j)}if(p.indexOf(l.k)==-1){l.k.b.y=l.k.b.y+m;p.push(l.k)}}E$B.a.Ka=E$p;E$N(E$B.a);return E$p}if(o=="LEFT"||o=="RIGHT"){p=[];m=0.02;n&&(m=m*10);o=="LEFT"&&(m=m*-1);E$B.a.save();n=0;for(o=k.length;n<o;n++){l=k[n];if(p.indexOf(l.j)==-1){l.j.b.x=l.j.b.x+m;p.push(l.j)}if(p.indexOf(l.k)==-1){l.k.b.x=l.k.b.x+m;p.push(l.k)}}E$B.a.Ka=E$p;E$N(E$B.a);return E$p}}}}}return E$s}function E$Wd(r,q,p,o){var n=E$B.a,m=E$Xc(E$B.a.e),l=[];if(E$B.a.q){l.push(E$B.a.q);if(n.i.uiIncludeSelectionWithHighlightedWhenMakingPropChanges&&m.length!=0){l=m;m.indexOf(E$B.a.q)==-1&&l.push(E$B.a.q)}}else{if(m.length!=0){console.log("Using selected atoms because NO highlight atom or bond");l=m}else{E$B.a.n&&E$B.a.n.Ia&&l.push(E$B.a.n.Ia.k)}}if(r==187||r==107||r==189||r==109){q=r==109||r==189?-1:1;E$B.a.save();r=0;for(o=l.length;r<o;r++){l[r].He(l[r].Na+q)}E$N(E$B.a)}else{if(r>=65&&r<=90||r>=48&&r<=57){E$N(E$B.a);clearTimeout(window.Elemental_typing_timeout);if(window.Elemental_typing){r=window.Elemental_typing.toLowerCase();r==q.toLowerCase()&&isNaN(Number(r))&&(window.Elemental_typing=E$s)}if(window.Elemental_typing&&!(window.Elemental_mapping_atom&&window.Elemental_mapping_atom!=E$B.a.q)){p=Number(q);q=window.Elemental_typing+q.toLowerCase();if(E$ae(q)!=-1){E$ae(window.Elemental_typing)==-1&&E$B.a.save();r=0;for(o=l.length;r<o;r++){E$be(l[r],q)}E$ce(E$B.a.e);E$N(E$B.a)}else{if(window.Elemental_typing=="R"&&!isNaN(p)){r=0;for(o=l.length;r<o;r++){E$ee(l[r]);l[r].na=p;l[r].U.length=0}E$ce(E$B.a.e);E$N(E$B.a)}else{if(l.length>=1&&!isNaN(Number(window.Elemental_typing))&&!isNaN(p)&&!o){E$B.a.qf();E$B.a.save();l=[];E$B.a.q!=E$q&&window.Elemental_mapping_atom_id_list.indexOf(E$B.a.q.id)==-1&&window.Elemental_mapping_atom_id_list.push(E$B.a.q.id);q=0;for(o=E$B.a.e.f.length;q<o;q++){if(E$B.a.q!=E$q&&E$B.a.e.f[q].id==E$B.a.q.id){E$B.a.q=E$B.a.e.f[q]}window.Elemental_mapping_atom_id_list.indexOf(E$B.a.e.f[q].id)>=0&&l.push(E$B.a.e.f[q])}q=10*Number(window.Elemental_typing)+p;r=0;for(o=l.length;r<o;r++){E$B.a.e.Jc(l[r],q)}E$N(E$B.a)}}}E$B.a.n.Ia=E$q;window.Elemental_typing=E$s}else{window.Elemental_typing=q;window.Elemental_mapping_atom=E$s;window.Elemental_mapping_atom_id_list=E$q;p=="l"&&(q="Cl");if(E$ae(q)!=-1){E$B.a.save();r=0;for(o=l.length;r<o;r++){E$be(l[r],q)}E$ce(E$B.a.e);E$N(E$B.a)}else{if(l.length>=1&&!isNaN(Number(q))&&!o){window.Elemental_mapping_atom=E$B.a.q;window.Elemental_mapping_atom_id_list=[];E$B.a.q!=E$q&&l.indexOf(E$B.a.q)==-1&&l.push(E$B.a.q);q=Number(q);E$B.a.save();r=0;for(o=l.length;r<o;r++){E$B.a.e.Jc(l[r],q);window.Elemental_mapping_atom_id_list.push(l[r].id)}E$N(E$B.a)}}window.Elemental_typing_timeout=setTimeout(function(){window.Elemental_typing=E$s;E$B.a.n.Ia=E$q},750)}}else{if(q=="UP"||q=="DOWN"){p=0.02;o&&(p=p*10);q=="DOWN"&&(p=p*-1);E$B.a.save();q=0;for(o=l.length;q<o;q++){r=l[q];r.b.y=r.b.y+p}E$B.a.Ka=E$p;E$N(E$B.a)}else{if(q=="LEFT"||q=="RIGHT"){p=0.02;o&&(p=p*10);q=="LEFT"&&(p=p*-1);E$B.a.save();q=0;for(o=l.length;q<o;q++){r=l[q];r.b.x=r.b.x+p}E$B.a.Ka=E$p;E$N(E$B.a)}}}}}function E$Rb(n){function m(g){try{g.parentNode.removeChild(g)}catch(f){}}n.ab&&m(n.ab);for(var l=0,k=n.ub.length;l<k;l++){var i=n.ub[l];i!=E$q&&m(i)}if(n.ed){l=0;for(k=n.ed.length;l<k;l++){m(n[n.ed[l]])}}}function E$Cd(l){var k=l.da(l.z,"","");l.Ii=k;k.innerHTML="<center><br><B>Elemental</B><br>Version "+l.version+" ("+l.rk+")";"<br>Copyright &copy; 2010-2018 Dotmatics Limited<br><br>[OK]<br><br>";k.style.zIndex=10;k.style.display="none";k.style.fontSize=13*E$B.G+"px";k.style.border="1px solid #aaa";E$Sc(k,10,10,10,10);var i=270*(1+(E$B.G-1)/1.5),h=l.width_-10,i=i>h?h:i,h=120*(1+(E$B.G-1)/1.5);E$E(k,l.height_/2-h/2,l.width_/2-i/2,i,h);k.style.width="270px";k.style.background=l.Wa;k.onclick=function(){this.style.display="none";return E$s}}function E$Fd(l){var k=document.createElement("div");document.body.appendChild(k);E$E(k,E$nc(l.z),E$oc(l.z),l.width_,l.height_);k.style.zIndex=E$ja;k.style.fontSize=13*E$B.G+"px";k.style.border="1px solid #aaa";k.style.background=l.Wa;l.Fc=k;var i=document.createElement("div");i.style.width="90%";i.style.marginLeft="10px";i.innerHTML="<center><br><B>Paste</B><br></center>Your browser does not allow access to your computer's clipboard.<br>Please paste a MOL/RXN file inside the following box using the keyboard (Ctrl/Cmd+V) or by right-clicking on the box,  and hit OK";l.Fc.appendChild(i);var h=document.createElement("textarea");h.style.width=l.width_-20+"px";h.style.left="10px";h.style.top="10px";h.style.position="relative";h.style.height=l.height_-i.clientHeight-52*E$B.G+"px";l.Fc.appendChild(h);l.Fc.Jb=h;i=document.createElement("input");i.setAttribute("type","button");i.value="OK";i.a=l;i.Jb=h;E$E(i,l.height_-32.5*E$B.G,l.width_/2-30);i.onclick=function(){var e=this.Jb.value;e.indexOf("$RXN")==0?this.a.load(e):this.a.Dc(e);this.a.Fc.style.display="none";h.value=""};h.a=l;l.Fc.Jb.onpaste=function(e){if(e.clipboardData){if(e=e.clipboardData.getData("text/plain")){e.indexOf("$RXN")==0?this.a.load(e):this.a.Dc(e);this.a.Fc.style.display="none";return E$s}}};l.Fc.appendChild(i);l.Fc.appendChild(h);i=document.createElement("input");i.setAttribute("type","button");i.value="Cancel";i.a=l;E$E(i,l.height_-32.5*E$B.G,l.width_/2+30);i.onclick=function(){this.a.Fc.style.display="none"};l.Fc.appendChild(i);k.style.display="none"}function E$Ed(l){var k=document.createElement("div");document.body.appendChild(k);E$E(k,E$nc(l.z),E$oc(l.z),l.width_,l.height_);k.style.zIndex=E$ja;k.style.fontSize=13*E$B.G+"px";k.style.border="1px solid #aaa";k.style.background=l.Wa;l.Gc=k;var i=document.createElement("div");i.style.width="90%";i.style.marginLeft="10px";i.innerHTML="<center><br><B>Paste</B><br></center>Your browser does not allow access to your computer's clipboard.<br>Please paste a SMILES string inside the following box using the keyboard (Ctrl/Cmd+V) or by right-clicking on the box,  and hit OK";l.Gc.appendChild(i);var h=document.createElement("textarea");h.style.width=l.width_-20+"px";h.style.left="10px";h.style.top="10px";h.style.position="relative";h.style.height=l.height_-i.clientHeight-52*E$B.G+"px";l.Gc.appendChild(h);l.Gc.Jb=h;i=document.createElement("input");i.setAttribute("type","button");i.value="OK";i.a=l;i.Jb=h;h.button=i;E$E(i,l.height_-32.5*E$B.G,l.width_/2-30);i.onclick=function(){var e=this.Jb.value;if(e){e=E$qb(this.a.i.getMolURL+encodeURIComponent(e));e.indexOf("$RXN")==0?editor.load(e):editor.Dc(e)}this.a.Gc.style.display="none";h.value=""};h.onkeyup=function(e){if(e.keyCode==13){this.button.onclick()}};h.a=l;l.Gc.Jb.onpaste=function(e){if(e.clipboardData){if(e=e.clipboardData.getData("text/plain")){e=E$qb(this.a.i.getMolURL+encodeURIComponent(e));e.indexOf("$RXN")==0?editor.load(e):editor.Dc(e);this.a.Gc.style.display="none";return E$s}}};l.Gc.appendChild(i);l.Gc.appendChild(h);i=document.createElement("input");i.setAttribute("type","button");i.value="Cancel";i.a=l;E$E(i,l.height_-32.5*E$B.G,l.width_/2+30);i.onclick=function(){this.a.Gc.style.display="none"};l.Gc.appendChild(i);k.style.display="none"}function E$Gd(l){var k=document.createElement("div");document.body.appendChild(k);E$E(k,E$nc(l.z),E$oc(l.z),l.width_,l.height_);k.style.zIndex=E$ja;k.style.fontSize=13*E$B.G+"px";k.style.border="1px solid #aaa";k.style.background=l.Wa;l.mb=k;var i=document.createElement("div");i.style.width="90%";i.style.marginLeft="10px";i.innerHTML="<center><br><B>Copy</B><br></center>Your browser does not allow access to your computer's clipboard.<br>Please copy from the following box using the keyboard (Ctrl/Cmd+C) or by right-clicking on the box.";l.mb.appendChild(i);var h=document.createElement("textarea");h.style.width=l.width_-20+"px";h.style.left="10px";h.style.top="10px";h.style.position="relative";h.style.height=l.height_-i.clientHeight-52*E$B.G+"px";l.mb.appendChild(h);l.mb.Jb=h;i=document.createElement("input");i.setAttribute("type","button");i.value="Done";i.a=l;l.mb.appendChild(i);E$E(i,l.height_-32.5*E$B.G,l.width_/2-i.clientWidth/2);i.onclick=function(){this.a.mb.style.display="none"};k.style.display="none"}function E$Hd(l){var k=document.createElement("div");document.body.appendChild(k);E$E(k,E$nc(l.z),E$oc(l.z),l.width_,l.height_);k.style.zIndex=E$ja;k.style.fontSize=13*E$B.G+"px";k.style.border="1px solid #aaa";k.style.background=l.Wa;l.vd=k;var i=document.createElement("div");i.style.width="90%";i.style.marginLeft="10px";i.innerHTML="<center><br><B>Copy</B></center><br>Elemental is not able to put an image on your clipboard<br>Please copy the following image by right-clicking on it</center>";l.vd.appendChild(i);var h=document.createElement("img");h.style.left="10px";h.style.top="10px";h.style.overflow="auto";h.style.position="relative";h.style.height=l.height_-i.clientHeight-52*E$B.G+"px";l.vd.appendChild(h);l.vd.Mh=h;i=document.createElement("input");i.setAttribute("type","button");i.value="Done";i.a=l;l.vd.appendChild(i);E$E(i,l.height_-32.5*E$B.G,l.width_/2-i.clientWidth/2);i.onclick=function(){this.a.vd.style.display="none";h.value=""};k.style.display="none"}function E$Id(g){g.fb=g.da(g.z,"","");g.fb.style.width="110px";g.fb.style.zIndex=10;g.fb.style.display="none";g.fb.c=g;if(!E$ma||g.i.embeddedDocs){var f=g.da(g.fb,"Help","Open the documentation",E$p);f.style.zIndex=10;f.style.height="22px";f.style.lineHeight="22px";f.style.width="110px";f.style.paddingLeft="5px";f.style.borderTop="1px solid #aaa";f.style.borderRight="1px solid #aaa";f.style.borderBottom="1px solid #aaa";f.style.fontSize="13px";f.style.background=g.Wa;f.onclick=function(){this.c.fb.style.display="none";this.c.ab.title=this.c.ab.Td;this.c.i.embeddedDocs?E$fe(this.c):E$ha?window.Pd?window.Pd(E$ca+"docs/Elemental.pdf"):global.Pd&&global.Pd(E$ca+"docs/Elemental.pdf"):window.open(E$ca+"docs/Elemental.pdf","ElementalHelp");return E$s}}if(!E$ma||g.i.license){f=g.da(g.fb,"License","License Agreement",E$p);f.style.zIndex=10;f.style.height=22*E$B.G+"px";f.style.lineHeight=22*E$B.G+"px";f.style.width=110*E$B.G+"px";f.style.paddingLeft="5px";f.style.borderBottom="1px solid #aaa";f.style.borderRight="1px solid #aaa";f.style.fontSize=13*E$B.G+"px";f.style.background=g.Wa;f.onclick=function(){this.c.fb.style.display="none";this.c.ab.title=this.c.ab.Td;E$ge(this.c);return E$s}}f=g.da(g.fb," Settings","Settings",E$p);f.style.zIndex=10;f.style.height=22*E$B.G+"px";f.style.lineHeight=22*E$B.G+"px";f.style.width=110*E$B.G+"px";f.style.paddingLeft="5px";f.style.borderBottom="1px solid #aaa";f.style.borderRight="1px solid #aaa";f.style.fontSize=13*E$B.G+"px";f.style.background=g.Wa;f.a=g;f.onclick=function(){this.c.fb.style.display="none";this.c.ab.title=this.c.ab.Td;var i=this.c,h=i.Qa.Hh;h.value=E$Ya&~E$he;h=i.Qa.eh;h.value=E$ab;if(i.i.uiThemeable){E$Fb=i.Qa.Ai.value=E$Ta}if(i.i.molfileVersionSetting){console.log("Elemental.defaultMolFormat="+E$cb);h=i.Qa.Th;h.value=E$cb}this.c.Qa.style.display="block";return E$s};if(!E$ma&&!E$Fa){f=g.da(g.fb," Dotmatics","Dotmatics website",E$p);f.style.zIndex=10;f.style.height="22px";f.style.lineHeight="22px";f.style.width="110px";f.style.paddingLeft="5px";f.style.borderBottom="1px solid #aaa";f.style.borderRight="1px solid #aaa";f.style.fontSize="13px";f.style.background=g.Wa;f.onclick=function(){this.c.fb.style.display="none";this.c.ab.title=this.c.ab.Td;E$ha?window.Pd("http://www.dotmatics.com"):window.open("http://www.dotmatics.com","Dotmatics").focus();return E$s}}f=g.da(g.fb," About Elemental","About Elemental",E$p);f.style.zIndex=10;f.style.height=22*E$B.G+"px";f.style.lineHeight=22*E$B.G+"px";f.style.width=110*E$B.G+"px";f.style.paddingLeft="5px";f.style.borderBottom="1px solid #aaa";f.style.borderRight="1px solid #aaa";f.style.fontSize=13*E$B.G+"px";f.style.background=g.Wa;f.onclick=function(){this.c.fb.style.display="none";this.c.ab.title=this.c.ab.Td;this.c.Ii.style.display="block";return E$s}}function E$ge(n){var m=n.da(n.z,"","");m.style.border="1px solid #aaa";E$Sc(m,10,10,10,10);var l=n.height_-10,k=n.width_-10;if(!E$na){l=l-2;k=k-2}var i=document.createElement("iframe");m.appendChild(i);i.style.overflow="scroll";i.style.width=k-12+"px";i.style.height=l-45+"px";i.src="license/Dotmatics_Elemental_EULA.htm";i.style.margin="6px 6px";i=document.createElement("input");i.setAttribute("type","button");i.value="OK";i.style.fontSize=12*E$B.G+"px";i.style.width="40px";i.style.position="relative";i.style.left=k/2-20+"px";i.left=k/2-20;m.appendChild(i);i.a=n;i.onclick=function(){this.a.z.removeChild(m)};m.style.zIndex=10;m.style.fontSize=13*E$B.G+"px";E$E(m,5,5,k,l);m.style.background=n.Wa}function E$fe(n){var m=n.da(n.z,"","");m.style.border="1px solid #aaa";E$Sc(m,10,10,10,10);var l=document.createElement("iframe"),k=n.height_-10,i=n.width_-10;if(!E$na){k=k-2;i=i-2}m.appendChild(l);l.style.overflow="scroll";l.style.width=i-12+"px";l.style.height=k-40+"px";l.src="docs/Elemental.pdf";l.style.margin="6px 6px";l=document.createElement("input");l.setAttribute("type","button");l.value="Close";l.style.fontSize=12*E$B.G+"px";l.style.width="80px";l.style.position="relative";l.style.left=i/2-40+"px";l.left=i/2-40;m.appendChild(l);l.a=n;l.onclick=function(){this.a.z.removeChild(m)};m.style.zIndex=10;m.style.fontSize=13*E$B.G+"px";E$E(m,5,5,i,k);m.style.background=n.Wa}function E$Dd(t){var s=t.da(t.z,"","");t.Qa=s;s.style.border="1px solid #aaa";E$Sc(s,10,10,10,10);var r=document.createElement("table");r.style.margin="10px 5px";tbody=document.createElement("tbody");r.appendChild(tbody);if(t.i.uiThemeable){var q=document.createElement("tr");tbody.appendChild(q);var p=document.createElement("td");q.appendChild(p);p.style.fontSize=12*E$B.G+"px";p.innerHTML="UI Theme";p=document.createElement("td");q.appendChild(p);q=document.createElement("select");q.style.fontSize=12*E$B.G+"px";t.Qa.Ai=q;p.appendChild(q);for(var o=[E$Ia,E$Ja,E$Ka],n=["Default  ","I/Draw  ","CDraw  "],p=0;p<o.length;p++){var m=document.createElement("option");m.setAttribute("value",o[p]);m.appendChild(document.createTextNode(n[p]));q.appendChild(m)}}q=document.createElement("tr");tbody.appendChild(q);p=document.createElement("td");q.appendChild(p);p.style.fontSize=12*E$B.G+"px";p.innerHTML="Hydrogen&nbsp;labels";p=document.createElement("td");q.appendChild(p);q=document.createElement("select");q.style.fontSize=12*E$B.G+"px";t.Qa.Hh=q;p.appendChild(q);o=[E$Qa,E$Qa+E$ie,E$ie,E$je,E$ke];n=["Hetero","Hetero+Terminal","Terminal","All","None"];for(p=0;p<o.length;p++){m=document.createElement("option");m.setAttribute("value",o[p]);m.appendChild(document.createTextNode(n[p]));q.appendChild(m)}q=document.createElement("tr");tbody.appendChild(q);p=document.createElement("td");q.appendChild(p);p=document.createElement("td");p.style.fontSize=12*E$B.G+"px";n=document.createElement("input");n.setAttribute("type","checkbox");n.setAttribute("style","vertical-align: middle");if(E$Ya&E$he){n.checked=E$p}p.appendChild(n);m=document.createElement("span");m.setAttribute("style","vertical-align: middle");m.innerHTML=" Metals";p.appendChild(m);q.appendChild(p);t.Qa.nj=n;q=document.createElement("tr");tbody.appendChild(q);p=document.createElement("td");q.appendChild(p);p.style.fontSize=12*E$B.G+"px";p.innerHTML="Display";p=document.createElement("td");q.appendChild(p);q=document.createElement("select");q.style.fontSize=12*E$B.G+"px";p.appendChild(q);t.Qa.eh=q;m=document.createElement("option");m.setAttribute("value",0);m.appendChild(document.createTextNode("Color"));q.appendChild(m);m=document.createElement("option");m.setAttribute("value",1);m.appendChild(document.createTextNode("Black-and-white"));q.appendChild(m);if(t.i.molfileVersionSetting){q=document.createElement("tr");tbody.appendChild(q);p=document.createElement("td");q.appendChild(p);p.style.fontSize=12*E$B.G+"px";p.innerHTML="Molfile writing";p=document.createElement("td");q.appendChild(p);q=document.createElement("select");q.style.fontSize=12*E$B.G+"px";p.appendChild(q);t.Qa.Th=q;m=document.createElement("option");m.setAttribute("value","v3000");m.appendChild(document.createTextNode("v3000"));q.appendChild(m);m=document.createElement("option");m.setAttribute("value","v2000");m.appendChild(document.createTextNode("v2000"));q.appendChild(m)}q=document.createElement("tr");tbody.appendChild(q);p=document.createElement("td");n=document.createElement("input");n.setAttribute("type","checkbox");if(E$$a){n.checked=E$p}p.appendChild(n);q.appendChild(p);p=document.createElement("td");p.style.fontSize=12*E$B.G+"px";m=document.createElement("div");m.innerHTML=" Atom numbers";p.appendChild(m);q.appendChild(p);t.Qa.Li=n;q=document.createElement("tr");tbody.appendChild(q);p=document.createElement("td");n=document.createElement("input");n.setAttribute("type","checkbox");if(E$Za){n.checked=E$p}p.appendChild(n);q.appendChild(p);p=document.createElement("td");p.style.fontSize=12*E$B.G+"px";m=document.createElement("div");m.innerHTML=" Exceeded valence warnings";p.appendChild(m);q.appendChild(p);t.Qa.pk=n;q=document.createElement("tr");tbody.appendChild(q);p=document.createElement("td");n=document.createElement("input");n.setAttribute("type","checkbox");if(E$jb){n.checked=E$p}p.appendChild(n);q.appendChild(p);p=document.createElement("td");p.style.fontSize=12*E$B.G+"px";m=document.createElement("div");m.innerHTML=" Tips on clicking buttons";p.appendChild(m);q.appendChild(p);t.Qa.jk=n;if(t.i.rgSupport){q=document.createElement("tr");tbody.appendChild(q);p=document.createElement("td");n=document.createElement("input");n.setAttribute("type","checkbox");if(E$eb){n.checked=E$p}p.appendChild(n);q.appendChild(p);p=document.createElement("td");p.style.fontSize=12*E$B.G+"px";m=document.createElement("div");m.innerHTML=" R-groups: auto-add attachments to first available non-ring atom";p.appendChild(m);q.appendChild(p);t.Qa.Wg=n}q=document.createElement("tr");tbody.appendChild(q);p=document.createElement("td");m=document.createElement("input");m.setAttribute("type","button");m.value="Set";m.style.fontSize=12*E$B.G+"px";m.a=t;p.appendChild(m);o=document.createElement("input");o.setAttribute("type","hidden");p.appendChild(o);t.Qa.xh=o;o.value=E$Sa;m.onclick=function(){for(var g=0,f=this.a.ub.length;g<f;g++){if(this.a.ub[g].style.backgroundColor==this.a.$h){this.a.Qa.xh.value=g;break}}};q.appendChild(p);p=document.createElement("td");p.style.fontSize=12*E$B.G+"px";m=document.createElement("div");m.innerHTML="current button as default";p.appendChild(m);q.appendChild(p);t.Qa.Wg=n;p=document.createElement("div");p.align="center";p.style.marginTop="10px";p=document.createElement("div");p.align="center";p.style.marginTop="10px";q=document.createElement("input");q.setAttribute("type","button");q.value="OK";q.style.fontSize=12*E$B.G+"px";p.appendChild(q);q.a=t;q.onclick=function(){this.a.Qa.style.display="none";var g=this.a,f=g.Qa.Hh;E$Ya=parseInt(f.value);g.Qa.nj.checked&&(E$Ya=E$Ya|E$he);f=g.Qa.Li;E$$a=Number(f.checked);f=g.Qa.pk;E$Za=Number(f.checked);f=g.Qa.eh;E$ab=parseInt(f.value);if(g.i.rgSupport){f=g.Qa.Wg;E$eb=Number(f.checked)}if(g.i.molfileVersionSetting){f=g.Qa.Th;E$cb=f.value}f=g.Qa.jk;E$jb=Number(f.checked);g.i.uiThemeable&&(E$Ta=Number(g.Qa.Ai.value));E$Sa=E$Fb!=E$Ta?-1:Number(g.Qa.xh.value);E$Vb();E$Fb!=E$Ta&&g.Ug(E$Ta);E$N(g,E$p)};q=document.createElement("input");q.setAttribute("type","button");q.value="Cancel";q.style.fontSize=12*E$B.G+"px";p.appendChild(q);q.a=t;q.onclick=function(){this.a.Qa.style.display="none"};s.appendChild(r);s.appendChild(p);s.style.zIndex=10;s.style.display="none";s.style.fontSize=13*E$B.G+"px";r=270*(1+(E$B.G-1)/1.5);p=t.width_-10;r=r>p?p:r;p=235*(1+(E$B.G-1)/1.5);if(t.i.rgSupport){p=p+30;r=r+30}t.i.uiThemeable&&(p=p+30);t.i.molfileVersionSetting&&(p=p+30);E$E(s,t.height_/2-p/2,t.width_/2-r/2,r,p);s.style.background=t.Wa}function E$wb(i,h,g){E$le="UserDefined";i.innerHTML="";if(i.style.width==""){i.style.width="400px"}if(i.style.height==""){i.style.height="300px"}this.width_=parseInt(i.style.width,10);this.height_=parseInt(i.style.height,10);i.style.border="1px solid #aaa";this.z=i;this.N=h;this.Sg=E$p;this.Qc=h.i.defaultTemplates;this.Ne=h.i.templateFile;if(this.be=g){this.Ub=[]}this.nf=[];this.vi=[];this.Ob=h.i.templateRows;this.Yb=h.i.templateCols;this.de=this.Ob*this.Yb;this.page=0;if(!h.i.delaySubElementals||h.i.delaySubElementals==E$o){E$ne(this,i);E$oe(this,i)}this.Fa=[];(!h.i.delaySubElementals||h.i.delaySubElementals==E$o)&&this.Qc&&E$pe(this,this.Qc);i.style.display="none";i.style.visibility="visible"}var E$le;function E$ne(D,C){E$qe(D);if(D.N.Eb){var B=D.da(C,"","");E$E(B,0,0);D.oh=B;B.zIndex=10;C=B}var z=D.N.hc,y=D.N.wf,v=z+y;E$na||(v=v+2*D.N.ga);var s=parseInt((D.N.hc-16)/2),r=2,q=200;if(D.N.Eb){var p=D.N.width_>D.N.height_?D.N.width_:D.N.height_,H=6*v+3*D.N.ga;p<q+4+H&&(q=p-4-H);q<180&&(q=p-4-v-2*D.N.ga);D.cf=q;p=D.N.width_<D.N.height_?D.N.width_:D.N.height_;D.ff=p-4-v-2*D.N.ga;q=D.N.width_<D.N.height_?D.ff:D.cf}D.wc=[];if(!D.be){p=0;for(H=D.Ub.length;p<H;p++){for(var G=D.Ub[p].ba.TEMPLATE_TYPE,F=E$p,E=0,o=D.wc.length;E<o;E++){if(D.wc[E]==G){F=E$s;break}}if(F){D.wc.push(G);D.nf[G]=1}else{D.nf[G]=D.nf[G]+1}}if(!D.Qc){D.Qc=D.wc[0]}p=D.Qc?D.Qc:"";B=D.da(C,p+(D.Qc?" ("+D.nf[D.Qc]+")":""),"",E$p);B.style.border="solid "+D.N.ga+"px "+D.N.qe;B.style.borderRightWidth="0px";E$Sc(B,D.N.Aa,0,0,D.N.Aa);B.style.height=z+"px";B.style.lineHeight=E$na?z-D.N.ga*2+"px":z+"px";B.style.paddingLeft="5px";if(D.N.Eb){B.style.position="relative";B.style.marginTop="2px";B.style.marginLeft=r+"px";E$Rc(B,q,z);E$xd(B,"left")}else{E$E(B,2,r,q,z)}D.Oe=B;B.onclick=function(){this.c.dc.style.display=this.c.dc.style.display=="inline"?"none":"inline"};D.Mc=B;D.Mc.type=p;D.dc=D.da(C,"","");D.dc.style.background=D.N.Wa;E$E(D.dc,2+z+3,r+D.N.ga-1,q,z);D.dc.style.zIndex=10;D.dc.style.display="none";D.dc.c=D;r=r+q;B=D.N.da(C,"<img src='"+E$C+"triangle_down.gif'>","Show types",E$s,s);B.c=D;E$Sc(B,0,D.N.Aa,D.N.Aa,0);if(D.N.Eb){B.style.position="relative";B.style.marginTop="2px";E$Rc(B,z,z);E$xd(B,"left")}else{E$E(B,2,r,z,z)}r=r+(v+10);B.onclick=function(){this.c.dc.style.display=this.c.dc.style.display=="inline"?"none":"inline"};p=0;for(H=D.wc.length;p<H;p++){B=D.da(D.dc,D.wc[p]+" "+("("+D.nf[D.wc[p]]+")"),"",E$p);B.type=D.wc[p];B.onclick=function(){this.c.dc.style.display="none";this.c.Mc.innerHTML=this.innerHTML;this.c.Mc.type=this.type;E$pe(this.c,this.type)};B.style.background=D.N.Wa;B.style.height="22px";B.style.lineHeight="22px";B.style.paddingLeft="5px";B.style.borderTop="1px solid #aaa";B.style.borderRight="1px solid #aaa";B.style.borderLeft="1px solid #aaa";if(D.wc[p]==E$le){D.rd=B}D.vi.push(B)}if(D.Uc.length==0){B=D.da(D.dc,E$le+" (0)","",E$p);B.type=E$le;B.onclick=function(){this.c.dc.style.display="none";this.c.Mc.type=this.type;this.c.Mc.innerHTML=this.innerHTML;E$pe(this.c,this.type)};B.style.background=D.N.Wa;B.style.height="22px";B.style.lineHeight="22px";B.style.paddingLeft="5px";B.style.borderTop="1px solid #aaa";B.style.borderRight="1px solid #aaa";B.style.borderLeft="1px solid #aaa";D.rd=B}if(B){B.style.borderBottom="1px solid #aaa"}}q=D.N.Eb?function(){B.style.position="relative";B.style.marginTop="2px";B.style.marginLeft=y+"px";E$Rc(B,z,z);E$xd(B,"left")}:function(){E$E(B,2,r,z,z);r=r+v};B=D.N.da(C,"<img src='"+E$C+"first.gif'>","Goto first page",E$s,s);B.c=D;q();B.onclick=function(){this.c.Sg?E$se(this.c,-1):E$ue(this.c)};B=D.N.da(C,"<img src='"+E$C+"backward.gif'>","Scroll left",E$s,s);B.c=D;q();B.disabled=E$s;B.onclick=function(){this.disabled||E$ve(this.c,-1)};D.pe=B.getElementsByTagName("div")[0];B=D.N.da(C,"<img src='"+E$C+"forward.gif'>","Scroll right",E$s,s);B.c=D;q();B.disabled=E$s;B.onclick=function(){this.disabled||E$ve(this.c,1)};D.ve=B.getElementsByTagName("div")[0];B=D.N.da(C,"<img src='"+E$C+"last.gif'>","Goto last page",E$s,s);B.c=D;q();B.onclick=function(){this.c.Sg?E$se(this.c,1):E$ye(this.c)};r=r+v;B=D.N.da(C,"<img src='"+E$C+"cross.gif'>","Go back to main window",E$s,s);B.c=D;q();B.onclick=function(){this.c.z.style.display="none"}}function E$qe(p){p.Ub=[];if(window.Mk){p.Ub=E$qc(templatesString)}else{if(p.Ne){if(p.Ne instanceof Array){for(var o,n=0;n<p.Ne.length;n++){if(!(o&&p.Ne[n].indexOf(o)!=-1)){var m=E$Ae(p.Ne[n]);if(m&&m.readyState==4){for(var l=E$qc(m.responseText),k=0;k<l.length;k++){p.Ub.push(l[k])}n==0&&E$Fa&&m.getResponseHeader("Served-By")=="ElementalTemplatesServlet"&&(o="/custom_templates.sdf")}}}}else{p.Ub=E$qc(E$qb(p.Ne))}}}n="";o=[];if(document.cookie.length>0){for(m=0;m!=-1;){m=document.cookie.indexOf("dotmatics.elementalTemplate",m);if(m!=-1){l=document.cookie.indexOf("=",m);o.push(document.cookie.substring(m,l));m=l;l=document.cookie.indexOf(";",m);if(l==-1){l=document.cookie.length}n=n+unescape(document.cookie.substring(m+1,l));!n.lastIndexOf("$$$$\n")!=n.length-5&&(n=n+"$$$$\n");m=l}}}if(n.length>0){p.Uc=E$qc(n);if(!p.Ub){p.Ub=[]}n=0;for(m=p.Uc.length;n<m;n++){p.Uc[n].ba.TEMPLATE_TYPE=E$le;p.Uc[n].ph=o[n];p.Ub.push(p.Uc[n])}}else{p.Uc=[]}}function E$oe(v,u){if(v.width_>v.height_){if(v.Ob>v.Yb){var t=v.Ob;v.Ob=v.Yb;v.Yb=t}}else{if(v.Yb>v.Ob){t=v.Ob;v.Ob=v.Yb;v.Yb=t}}var s=v.N.qd;if(v.N.Eb){s=v.oh.clientHeight}var r=E$cc((v.width_-4)/v.Yb),q=E$cc((v.height_-s-8)/v.Ob);v.Sb=[];v.contextMenu=E$B.Xi();for(var p=E$Xb(7,v.N.af/v.Ob),o=0;o<v.Ob;o++){for(t=0;t<v.Yb;t++){var n=v.da(u,"","");E$E(n,s+o*q+5,t*r,r,q);n=v.be?new E$D(n,E$q,{subElemental:E$p,handler:new E$Be,menu:v.contextMenu,bondPixels:30,autoScaleFraction:0.9,labelHeight:p/window.devicePixelRatio}):new E$D(n,E$q,{subElemental:E$p,handler:new E$Ce,menu:v.contextMenu,bondPixels:30,autoScaleFraction:0.9});n.N=v.N;n.aa=v;v.Sb.push(n)}}if(v.be){t=0;for(s=v.Sb.length;t<s;t++){v.Sb[t].D.oncontextmenu=function(e){E$Ga(e);return E$s}}}}function E$pe(l,k){for(var i=l.Fa.length=0,h=l.Ub.length;i<h;i++){l.Ub[i].ba.TEMPLATE_TYPE==k&&l.Fa.push(l.Ub[i])}if(k==E$le){i=0;for(h=l.Sb.length;i<h;i++){l.Sb[i].D.oncontextmenu=function(e){this.a.mf&&E$B.fireEvent(this.a.mf,"contextmenu",e);E$Ga(e);return E$s}}}else{i=0;for(h=l.Sb.length;i<h;i++){l.Sb[i].D.oncontextmenu=function(e){E$Ga(e);return E$s}}}E$ue(l)}function E$hd(l,k){for(var i=0,h=l.Ub.length;i<h;i++){if(l.Ub[i].ba.ICONLABEL==k){return l.Ub[i]}}return E$q}var E$De="ID NSC IDNUMBER IDnumber NS_ID PC_ID PFCID PEAKDALE_ID> Peakdale_ID ASDI_ID GJID code PUBCHEM_COMPOUND_ID PUBCHEM_SUBSTANCE_ID".split(" ");function E$hc(e){if(e.be&&(E$Da||E$Ea)){e.Ei.style.display="block";setTimeout(function(){E$Ee(e)},10)}else{E$Ee(e)}}function E$Ee(n){if(!n.Sg){if(n.page==0&&!n.pe.disabled){n.pe.disabled=E$p;n.pe.innerHTML="<img src='"+E$C+"backward_disabled.gif'>"}else{if(n.page>0&&n.pe.disabled){n.pe.disabled=E$s;n.pe.innerHTML="<img src='"+E$C+"backward.gif'>"}}var m=(n.page+1)*n.de<n.Fa.length;if(m&&n.ve.disabled){n.ve.disabled=E$s;n.ve.innerHTML="<img src='"+E$C+"forward.gif'>"}else{if(!m&&!n.ve.disabled){n.ve.disabled=E$p;n.ve.innerHTML="<img src='"+E$C+"forward_disabled.gif'>"}}}for(var m=0,l=n.page*n.de;m<n.de;l++,m++){if(l<n.Fa.length){if(n.Fa[l].f==E$o){var k=E$lc(n.Fa[l].ye);if(k!=E$q){k.ye=n.Fa[l].ye;k.Pb=n.Fa[l].vk;n.Fa[l]=k}}if(n.be&&!n.Fa[l].label){for(var k=0,i=E$De.length;k<i;k++){if(n.Fa[l].ba[E$De[k]]){n.Fa[l].label=n.Fa[l].ba[E$De[k]];break}}if(!n.Fa[l].label){n.Fa[l].label=n.Fa[l].name}}E$tb(n.Sb[m],n.Fa[l])}else{E$tb(n.Sb[m],new E$Ha)}E$N(n.Sb[m])}if(n.be&&E$Da){n.Ei.style.display="none"}}function E$ue(e){e.page=0;E$hc(e)}function E$ye(e){e.page=Math.floor((e.Fa.length-1)/e.de);E$hc(e)}function E$ve(g,f){g.page=g.page+f;g.page<0?E$se(g,-1):g.page*g.de>=g.Fa.length&&E$se(g,1);E$hc(g)}function E$se(p,o){var n=E$q;if(p.Mc){var n=p.Mc.type,m=-1;if(n==E$le&&p.rd){m=p.wc.length}else{for(var l=0,k=p.wc.length;l<k;l++){if(p.wc[l]==n){m=l;break}}}l=E$q;if(o>0){m++;if(m>=p.wc.length){p.rd&&n!=p.rd.type?l=p.rd:m=0}}else{m--;if(m<0){p.rd&&n!=p.rd.type&&(l=p.rd);m=p.wc.length-1}}l=l==E$q?p.vi[m]:l;p.dc.style.display="none";if(p.Mc){p.Mc.innerHTML=l.innerHTML;p.Mc.type=l.type}E$pe(p,l.type)}else{o>0?E$ye(p):E$ue(p)}}E$wb.prototype.da=function(n,m,l,k){var i=document.createElement("div");i.style.fontSize="14px";i.innerHTML=/<img/.text?m:k?m:"<center>"+m+"</center>";i.style.cursor="pointer";if(l!=E$q){i.title=l}i.c=this;n.appendChild(i);return i};function E$pd(e){e.q=E$q;e.t=E$q;e.fa=E$q;e.pa=E$q;e.ta=E$q}function E$Tb(g,f){f&&E$E(f,g.bg,g.re,g.width_-g.re-g.$f,g.height_-g.bg-g.ag-g.$f)}E$v=E$D.prototype;E$v.bh=function(){var y=this.i.buttonSize,x=this.i.buttonSpacing,w=20,v=0,u=E$s;y=="auto"&&!this.i.buttonPanelDraggable&&(u=E$p);if(y=="auto"&&this.i.buttonPanelDraggable){y=26;x=2}for(var s=this.width_-2,r=this.height_-2,q=this.i.buttonExtraWidth,p=0;p<2;){if(u){q=0;u=E$p;if(E$Ta==E$Ka||E$Ta==E$Ja){var w=this.i.autoSizeButtons[0],o=this.i.autoSizeButtons[1],y=this.i.autoSizeButtons[0]*x,z=(s-y)/w,y=o*x,y=(r-y)/o,y=Math.floor(z<y?z:y);y>37&&(y=37);y<32&&(q=parseInt((32-y)/2));x<0&&(x=2);p=p+2}else{E$ma&&(w=17);this.i.noTextBox&&w--;this.i.toRgroup&&w++;E$ma&&(v=0);o=24;E$ma&&(o=o*2);y=(w-1)*x;z=(s-o-y-v)/w;z=parseInt((z-16)/2);E$na||(z=z-this.ga);if(z>8){o=o-24}else{o=o-3*(z-2);z>2&&(o=o+3)}z=(s-o-y-v)/w;o=6+this.i.elementIcons.length;this.i.reaxysGenerics&&o++;this.i.periodicTable||o--;this.i.sgroupEdit&&o++;y=(o-1)*x;y=(r-y)/o;y=Math.floor(z<y?z:y);z=E$ma?50:37;y>z&&(y=z)}}if(y<16){z=16-y;y=16;this.i.buttonSize=="auto"&&(x=x-Math.floor(z))}x<0&&(x=0);z=y%2;y=y-z;x=x+z;if(u&&p==0){if((y-16)/2<=2){w=19;v=18;p++}else{p=p+2}}else{p=p+2}}if(this.ga==0||this.i.buttonSize=="auto"&&(y<18||x==0)){this.Wa=this.z.style.background=this.Xc;this.ga=0}E$na||(y=y-this.ga*2);this.hc=y;this.wf=x;this.Qe=q;if(E$Qb(this.Aa)&&this.Aa.indexOf("%")!=-1){this.Aa=E$cc(parseInt(this.Aa)*this.hc/100)}};function E$Sb(i){var h=i.hc,g=i.hc;if(i.i.buttonPanel||i.i.ui==E$s||i.i.subElemental==E$p){i.qd=0;i.ke=0;i.bg=0;i.fh=0;i.re=0}else{g=i.hc+3;h=i.hc+3;if(!E$na){h=h+i.ga*2;g=g+i.ga*2}g=g+i.Qe;i.qd=h;i.ke=g;i.bg=h;i.fh=g;i.re=g*i.i.uiLeftToolbarColumns}}function E$rb(p,o,n){var m=document.createElement("canvas");document.body.oncontextmenu=E$q;p.font="'Arial Rounded MT Bold', Arial, Helvetiker";var l=p.hc,k=p.wf;statbox=16;if(p.i.ui==E$s||p.i.subElemental==E$p){statbox=0}else{p.i.summary==E$s&&(statbox=0);if(!n){p.bh();l=p.hc;k=p.wf;E$Ub(p,o,l,statbox,k)}}E$Sb(p);o.appendChild(m);o=0;E$na&&(p.zb||(o=2));if(E$ha){p.ag=34;p.$f=0}else{p.$f=o;p.ag=statbox}E$Tb(p,m);if(E$ka&&!m.getContext){m=G_vmlCanvasManager.initElement(m);typeof FlashCanvas!="undefined"?E$Ea=E$p:E$Da=E$p}if(p.pc&&!n){m.onclick=function(e){if(this.a.n&&this.a.n.onclick!=E$q){this.a.n.onclick(e||event)}};m.onmousemove=function(e){e=e||window.event;this.a.ce=e;if(this.a.n&&this.a.n.onmousemove!=E$q){this.a.n.onmousemove(e||event)}E$B.md=E$p};m.style.Fk="none";m.style.webkitUserSelect="none";m.style.Ek="none";m.style.Qk="none";m.style.backgroundColor="white";m.unselectable="on";m.onmousedown=function(e){E$B.md=E$p;E$B.a=this.a;e=e||event;E$B.Zf=E$s;if(this.a.n instanceof E$rd){E$B.fireEvent(document.documentElement,"click",e)}else{if(referenceToDHTMLSuiteContextMenu!=E$q&&referenceToDHTMLSuiteContextMenu.menuObject&&referenceToDHTMLSuiteContextMenu.menuObject.style.display!="none"){if(E$Ba&&referenceToDHTMLSuiteContextMenu.menuObject.Lk==1){referenceToDHTMLSuiteContextMenu.menuObject=E$q}E$B.Zf=E$p}}E$Dc(this.a,e);if(E$Fe()){this.se=E$s;if(e.button==2){this.se=E$p;if(this.a.n&&this.a.n.oncontextmenu!=E$q&&this.a.n.onmousedown!=E$q){this.a.n.onmousedown(e)}else{this.a.q!=E$q&&this.a.Oc?E$B.fireEvent(this.a.Oc,"mousedown",e):this.a.t!=E$q&&this.a.Pc?E$B.fireEvent(this.a.Pc,"mousedown",e):this.a.fa!=E$q&&this.a.dd?E$B.fireEvent(this.a.dd,"mousedown",e):this.a.Ba!=E$q&&this.a.od?E$B.fireEvent(this.a.od,"mousedown",e):this.a.kc&&E$B.fireEvent(this.a.kc,"mousedown",e)}}else{if(E$B.Zf){return E$s}this.a.D.focus();if(this.a.n&&this.a.n.onmousedown!=E$q){this.a.n.onmousedown(e||event)}}}};m.onmouseup=function(e){e=e||window.event;this.a.ce=e;if(E$B.Zf){return E$s}if(!this.se&&this.a.n&&this.a.n.onmouseup!=E$q){this.a.n.onmouseup(e||event)}if(E$ma){E$pd(this.a);E$N(this.a,E$p)}return E$s};m.Fj=E$aa();m.onkeydown=function(e){if(E$Fe()&&this.a.n&&this.a.n.onkeydown!=E$q){this.a.n.onkeydown(e||event)}};m.onkeyup=function(e){if(this.a.n&&this.a.n.onkeyup!=E$q){this.a.n.onkeyup(e||event)}};m.onkeypress=function(e){if(this.a.n&&this.a.n.onkeypress!=E$q){this.a.n.onkeypress(e||event)}};m.onmouseout=function(e){E$B.md=E$s;if(this.a.n&&this.a.n.onmouseout!=E$q){this.a.n.onmouseout(e||event)}};m.onmouseover=function(e){E$B.md=E$p;if(this.a.n&&this.a.n.onmouseover!=E$q){this.a.n.onmouseover(e||event)}};m.onmousewheel=function(r){if(this.a.i.uiEnhancedMouseWheel){r=r||event;if(!r){r=window.event}if(this.a.n&&this.a.n.onmousewheel!=E$q&&this.a.n instanceof E$mc&&E$Ge||this.a.n.onmousewheel!=E$q){return this.a.n.onmousewheel(r)}var q=0;r.wheelDelta?q=r.wheelDelta/120:r.detail&&(q=-r.detail/3);if(q){if(this.a.zb){E$ve(this.a.N.aa,q>0?-1:1)}else{if(this.a.n!=E$q&&this.a.n instanceof E$xb){var i=this.a.n,q=q*7;if(i.qb.length>0){var h=E$q,h=-1*E$cc(q/1);if(h!=E$q){E$He(i.qb,h,i.Pf);E$Ie(i.a)}}}else{q>0?this.a.Hd(1.25):this.a.Hd(0.8)}}}r.preventDefault&&r.preventDefault();return r.returnValue=E$s}if(this.a.n&&this.a.n.onmousewheel!=E$q){this.a.n.onmousewheel(r||event)}};m.oncontextmenu=function(e){e=e||event;E$B.Ad=E$M(this.a,e);E$Dc(this.a,e);if(this.a.n&&this.a.n.oncontextmenu!=E$q){this.a.n.oncontextmenu(e)}else{if(this.a.q!=E$q&&this.a.Oc){this.a.Oc.s=this.a.q;E$B.mk(this.a.Oc.s,this.a);E$B.fireEvent(this.a.Oc,"contextmenu",e)}else{if(this.a.t!=E$q&&this.a.Pc){this.a.Pc.S=this.a.t;E$B.nk(this.a.Pc.S,this.a);E$B.fireEvent(this.a.Pc,"contextmenu",e)}else{if(this.a.fa!=E$q&&this.a.dd){this.a.dd.Ra=this.a.fa;E$B.fireEvent(this.a.dd,"contextmenu",e)}else{if(this.a.Ba!=E$q&&this.a.od){this.a.od.Qf=this.a.Ba;E$B.ok(this.a.od.Qf,this.a);E$B.fireEvent(this.a.od,"contextmenu",e)}else{if(this.a.kc){E$B.Bi(this.a);E$B.fireEvent(this.a.kc,"contextmenu",e)}}}}}}E$Ga(e)}}if(!p.pc&&E$ka){m.onmousedown=function(e){E$B.md=E$p;E$B.a=this.a;e=e||event;this.se=E$s;E$B.fireEvent(document.documentElement,"click",e);if(e.button==2){this.se=E$p;this.a.kc&&E$B.fireEvent(this.a.kc,"mousedown",e)}};m.oncontextmenu=function(e){e=e||event;if(this.a.kc){E$B.Bi(this.a);E$B.fireEvent(this.a.kc,"contextmenu",e)}E$Ga(e)};m.onmouseover=function(){E$B.a=this.a;E$B.md=E$p};m.onmouseout=function(){E$B.a=this.a;E$B.md=E$s};document.onkeydown=function(e){if(E$B.md&&!(document.activeElement&&document.activeElement!=document.body)){e=e||event;if(e.keyCode){code=e.keyCode}else{if(e.which){code=e.which}}if(e.ctrlKey&&String.fromCharCode(code).toLowerCase()=="c"){E$B.sh();E$Ga(e);return E$s}}}}return m}function E$Je(t){if(!(t.aa.Sb==E$q||t.aa.Sb.length==0)){if(t.aa){E$Rc(t.Kc,t.width_,t.height_);t.Kc.style.visibility="hidden";t.Kc.style.display="block";if(t.width_>t.height_){if(t.aa.Oe.width==t.aa.ff){var s=t.aa.Ob;t.aa.Ob=t.aa.Yb;t.aa.Yb=s;t.aa.Oe.width=t.aa.cf;t.aa.Oe.style.width=t.aa.cf+"px";t.aa.dc.style.width=t.aa.cf+"px"}}else{if(t.aa.Oe.width==t.aa.cf){s=t.aa.Ob;t.aa.Ob=t.aa.Yb;t.aa.Yb=s;t.aa.Oe.width=t.aa.ff;t.aa.Oe.style.width=t.aa.ff+"px";t.aa.dc.style.width=t.aa.ff+"px"}}s=t.qd;if(t.Eb){s=t.aa.oh.clientHeight}for(var r=E$cc((t.width_-4)/t.aa.Yb),q=E$cc((t.height_-s-8)/t.aa.Ob),p=0,o=0;o<t.aa.Ob;o++){for(var n=0;n<t.aa.Yb;n++){var m=t.aa.Sb[p];E$E(m.z,s+o*q+5,n*r,r,q);m.width_=r;m.height_=q;E$Rc(m.D,r,q);m.vc&&E$Rc(m.vc,r,q);m.mc&&E$Rc(m.mc,r,q);m.Wb&&E$Rc(m.Wb,r,q);m.Bc&&E$Rc(m.Bc,r,q);E$N(m,E$p);p++}}t.Kc.style.display="none";t.Kc.style.visibility="visible"}if(t.Ha){s=t.qd;E$Rc(t.oc,t.width_,t.height_);r=E$cc((t.width_-s-8)/t.Ha.Yb);q=E$cc((t.height_-s-8)/t.Ha.Ob);for(o=p=0;o<t.Ha.Ob;o++){for(n=0;n<t.Ha.Yb;n++){m=t.Ha.Sb[p];E$E(m.z,s+o*q,s+n*r,r,q);m.width_=r;m.height_=q;E$Rc(m.D,r,q);m.vc&&E$Rc(m.vc,r,q);m.mc&&E$Rc(m.mc,r,q);m.Wb&&E$Rc(m.Wb,r,q);m.Bc&&E$Rc(m.Bc,r,q);E$N(m,E$p);p++}}E$Ke(t)}}}function E$Ke(e){if(e.Xd){e.z.removeChild(e.Xd);e.Xd=E$Le(e,e.z)}}E$v.Nh=function(){return this.Xd?E$p:E$s};E$v.fi=function(){for(var l=0,k=Object.keys(this.e.ba),i=0;i<k.length;i++){var h=k[i];h.indexOf("TEXTBOX")==0||h=="PropertiesTextBox"||l++}return l};E$v.resize=function(){this.width_=this.z.clientWidth;this.height_=this.z.clientHeight;this.Eb&&E$Rc(this.Eb,this.width_,this.height_);this.Lc.style.top=this.z.clientHeight-25+"px";var e=16;this.i.ui==E$s||this.i.subElemental==E$p?e=0:this.i.summary==E$s&&(e=0);if(E$ha){e=this.ag}E$Rc(this.D,this.width_-this.ke,this.height_-this.qd-e);this.vc&&E$Rc(this.vc,this.width_-this.ke,this.height_-this.qd-e);this.mc&&E$Rc(this.mc,this.width_-this.ke,this.height_-this.qd-e);this.Wb&&E$Rc(this.Wb,this.width_-this.ke,this.height_-this.qd-e);this.Bc&&E$Rc(this.Bc,this.width_-this.ke,this.height_-this.qd-e);E$tb(this,this.e);E$N(this,E$p);E$Je(this)};function E$sb(g,f){g.onclick=function(e){f.onclick(e)};g.onmousemove=function(e){f.onmousemove(e)};g.onmousedown=function(e){f.Uh=E$p;f.onmousedown(e)};g.onmouseup=function(e){if(!f.Uh){return E$p}if(f.Lh){f.Lh=E$s}else{f.onmouseup(e)}f.Uh=E$s};g.Fj=E$aa();g.onkeydown=function(e){f.onkeydown(e)};g.onkeyup=function(e){f.onkeyup(e)};g.onkeypress=function(e){f.onkeypress(e)};g.onmouseout=function(e){f.onmouseout(e)};g.onmouseover=function(e){f.onmouseover(e)};g.onmousewheel=function(e){f.onmousewheel(e)};g.oncontextmenu=function(e){f.oncontextmenu(e)};g.ontouchstart=function(e){f.ontouchstart(e)};g.ontouchend=function(e){f.ontouchend(e)};g.ontouchmove=function(e){f.ontouchmove(e)}}function E$Ga(e){e=e||window.event;e.returnValue=E$s;e.preventDefault&&e.preventDefault();e.cancelBubble=E$p;e.stopPropagation&&e.stopPropagation()}function E$tb(x,w){w==E$q&&(w=new E$Ha);x.e=w;E$vc(x.e);var v=x.e,u=x.D.getContext("2d");u.save();for(var t=0,s=v.u.length;t<s;t++){var r=v.u[t],q="",q=r.Ze?v.ba[r.V]:r.V+" "+v.ba[r.V];if(!(q==E$q||q==E$o)){for(var p=q.split("\n"),q="",o=0;o<p.length;o++){p[o].length>q.length&&(q=p[o])}p=x.Ja*p.length;u.font=x.Ja+"px "+x.i.textBoxFont;q=u.measureText(q);q=r.b.x+q.width/(x.Lb*x.zoom);if(q>v.I){v.I=q}if(r.b.x<v.$){v.$=r.b.x}q=r.b.y-p/(x.Lb*x.zoom);if(q<v.ra){v.ra=q}if(r.b.y>v.wa){v.wa=r.b.y}}}v.Gd=0.5*(v.$+v.I);v.rb=0.5*(v.ra+v.wa);v.sd=v.I-v.$;v.ne=v.wa-v.ra;u.restore();extra=E$Ya&E$ke?0:1.5;v=(x.e.sd+extra)*x.i.bondPixels*x.zoom;if(v>x.i.autoScaleFraction*x.D.width){x.zoom=x.zoom*(x.i.autoScaleFraction*x.D.width/v)}v=x.e.ne;x.e.label&&(v=x.zb?v+x.af/(x.Lb*x.zoom):v+x.i.labelOffset);v=(v+extra)*x.i.bondPixels*x.zoom;if(v>x.i.autoScaleFraction*x.D.height){x.zoom=x.zoom*(x.i.autoScaleFraction*x.D.height/v)}x.origin=x.e.label?x.zb?new E$Q(x.e.Gd,x.e.rb-x.af/(2*x.Lb*x.zoom)):new E$Q(x.e.Gd,x.e.rb-0.5*x.i.labelOffset):new E$Q(x.e.Gd,x.e.rb);if(x.n){x.n.e=x.e}}E$v.empty=function(){this.save();this.ta=this.pa=this.t=this.q=E$q;this.e.empty();E$N(this,E$p)};function E$Me(i){if(i.zb||!E$ha){return E$s}var h="",h=E$Vd(i.e)?E$Ne(i.e).write():i.write();if(i.yj!=h){i.yj=h;window.ng?window.ng(h):global.ng&&global.ng(h)}h=i.i.calcDecimalPoints;if(E$ha){try{$("#AnalysisMolFormula").og(E$Oe(i));$("#AnalysisExactMass").og(E$Pe(i,E$s,h));$("#AnalysisMolWeight").og(E$Pe(i,E$p,h));$("#AnalysisElementalAnalysis").og(E$Qe(i,h))}catch(g){}}return E$s}function E$Pe(l,k,i){i==E$o&&(i=l.i.calcDecimalPoints);var h=E$B.srcElement.s||E$B.srcElement.S;if(h){l=E$Re(l.e,h);k=E$Se(l,k)}else{k=E$Vd(l.e)?E$Se(E$Xc(l.e),k):E$Se(l.e.f,k)}return k.toFixed(i)}function E$Qe(i,h){var g;h==E$o&&(h=i.i.calcDecimalPoints);if(g=E$B.srcElement.s||E$B.srcElement.S){g=E$Re(i.e,g);g=E$Te(g,E$p,h)}else{g=E$Vd(i.e)?E$Te(E$Xc(i.e),E$p,h):E$Te(i.e.f,E$p,h)}return g}function E$Oe(v){var u,t=E$B.srcElement.s||E$B.srcElement.S,s=E$p;if(t){v=E$Re(v.e,t)}else{if(E$Vd(v.e)){v=E$Xc(v.e)}else{v=v.e.f;s=E$s}}for(var r=v,t=[],q=0,p=r.length;q<p;q++){t[r[q].A]==E$o&&(t[r[q].A]=0);t[r[q].A]++;var o=E$Ue(r[q]);t.H==E$o&&(t.H=0);t.H=t.H+o}r="";if(t.C!=E$o){r=t.C>1?r+("C<sub>"+t.C+"</sub>"):r+"C";t.C=E$o}if(t.H!=E$o){r=t.H>1?r+("H<sub>"+t.H+"</sub>"):r+"H";t.H=E$o}q=[];for(u in t){t[u]!=E$o&&!(t[u] instanceof Function)&&q.push(u)}q.sort();for(var n in q){u=q[n];t[u]!=E$o&&!(t[u] instanceof Function)&&(r=t[u]>1?r+(u+"<sub>"+t[u]+"</sub>"):r+u)}u=r;if(s){s=[];n=0;for(t=v.length;n<t;n++){r=v[n];if(r.g.length>0){q=r.g;p=0;for(o=q.length;p<o;p++){v.indexOf(E$R(q[p],r))==-1&&s.indexOf(q[p])==-1&&s.push(q[p])}}}s=s.length;s>0&&(u=u+("<sup>"+s+"&bull;</sup>"))}return u}function E$N(g,f){E$Me(g);g.cb=E$p;if(f){g.Ka=E$p}E$Ve(g.e);E$Ie(g)}function E$Ac(D,C){switch(D.i.gridStyle){case E$Na:if(D.Wb){C=D.Wb.getContext("2d");C.clearRect(0,0,D.D.width,D.D.height)}var B=C,z=D.D.width,y=D.D.height;B.lineWidth=0.5;B.strokeStyle="#EEEEEE";for(var v=E$Cb(D,0),s=E$Cb(D,y),v=Math.floor(v+1),s=Math.floor(s-1),r=(v+s)/2,v=Math.floor((Math.floor(Math.abs(v-s)/0.5)+1)/2),s=r-0.5*v,q=r+0.5*v,r=-v;q>=s;q=q-0.5,r++){B.beginPath();B.moveTo(0,E$T(D,q));B.lineTo(z,E$T(D,q));B.lineWidth=r%5==0?2:0.5;B.closePath();B.stroke()}s=E$Bb(D,0);z=E$Bb(D,z);s=Math.floor(s-1);z=Math.floor(z+1);z=z-s;s=z/2+s;r=Math.floor((Math.floor(z/0.5)+1)/2);z=s+0.5*r;s=s-0.5*r;for(r=-r;s<=z;s=s+0.5,r++){B.beginPath();B.moveTo(E$U(D,s),0);B.lineTo(E$U(D,s),y);B.lineWidth=r%5==0?2:0.5;B.closePath();B.stroke()}break;case E$Pa:D.Wb&&(C=D.Wb.getContext("2d"));var B=C,y=Math.pow(1.11547,2),z=(1+y)/y,s=1/y,y=(-s+Math.sqrt(Math.pow(s,2)-4*z*(1-4*y)/(4*y)*Math.pow(1,2)))/(2*z),z=(2*y+1)/2.23094,s=2*z,p,L=D.D.width,q=D.D.height;B.lineWidth=0.5;B.strokeStyle="#f4f4f4";var r=2*y+1-y,v=E$Cb(D,0),q=E$Cb(D,q),J=(v+q)/2,G=Math.floor((Math.floor(Math.abs(v-q)/r)+1)/2)+1,q=J-r*G,v=E$Bb(D,0),L=E$Bb(D,L);p=(v+L)/2;for(var E=Math.floor((Math.floor(Math.abs(L-v)/s)+1)/2)+1,L=p+s*E,v=J+r*G+(y+0.5),J=p-s*E,E=-E;J<=L;J=J+s,E++){for(var o=J,K=v,I=-G;K>=q;K=K-r,I++){J=o;I%2==0&&(J=J+z);p="#CCCCCC";B.strokeStyle=p;B.beginPath();B.moveTo(E$U(D,J+z),E$T(D,K));B.lineTo(E$U(D,J+z),E$T(D,K)+1);B.closePath();B.stroke();B.beginPath();B.moveTo(E$U(D,J),E$T(D,K-y));B.lineTo(E$U(D,J),E$T(D,K-y)+1);B.closePath();B.stroke();B.beginPath();B.moveTo(E$U(D,J),E$T(D,K-y-1));B.lineTo(E$U(D,J),E$T(D,K-y-1)+1);B.closePath();B.stroke();p="#CCCCCC";B.strokeStyle=p;B.beginPath();B.moveTo(E$U(D,J+z),E$T(D,K-y-0.5));B.lineTo(E$U(D,J+z),E$T(D,K-y-0.5)+1);B.closePath();B.stroke();p="#f4f4f4";B.strokeStyle=p}J=o}}}function E$We(i,h){h.clearRect(0,0,i.D.width,i.D.height);h.fillStyle="white";h.fillRect(0,0,i.D.width,i.D.height);i.i.gridStyle!=E$Ma&&E$Ac(i,h);if(!i.zb&&!E$Ba&&!E$Fa){try{h.drawImage(i.ug,i.D.width-i.ug.width-2,i.D.height-i.ug.height-2)}catch(g){window.status="Problem drawing image"}}}function E$Ie(A){if(A.e==E$q){if(!A.zb&&!E$Ba){var z=A.D.getContext("2d");E$We(A,z)}}else{if((A.cb||A.Ka)&&E$Me(A)){A.cb=E$p}if(A.cb){if(A.ic){if(A.onchange){A.onchange(A)}A.ic=E$s}if(!window.Ah){window.Ah=0}window.Ah++;z=A.D.getContext("2d");z.fillStyle="white";A.Lb=A.i.bondPixels;A.Ja=A.zoom*A.i.bondPixels*A.i.textFraction;A.jg=A.i.fixedTextHeight*window.devicePixelRatio;A.af=A.i.labelHeight*window.devicePixelRatio;for(var y=0,x=A.e.f.length;y<x;y++){var v=A.e.f[y];v.b.va=E$U(A,v.b.x);v.b.Ea=E$T(A,v.b.y)}y=0;for(x=A.e.v.length;y<x;y++){v=A.e.v[y];v.start.va=E$U(A,v.start.x);v.start.Ea=E$T(A,v.start.y);v.end.va=E$U(A,v.end.x);v.end.Ea=E$T(A,v.end.y)}y=0;for(x=A.e.F.length;y<x;y++){v=A.e.F[y];v.b.va=E$U(A,v.b.x);v.b.Ea=E$T(A,v.b.y)}y=0;for(x=A.e.u.length;y<x;y++){v=A.e.u[y];v.b.va=E$U(A,v.b.x);v.b.Ea=E$T(A,v.b.y)}y=0;for(x=A.e.r.length;y<x;y++){for(var v=A.e.r[y],s=0;s<v.coords.length;s++){v.coords[s].va=E$U(A,v.coords[s].x);v.coords[s].Ea=E$T(A,v.coords[s].y)}}A.Ge=A.i.selectColor;A.Jd=A.i.highlightColor;A.gc=A.i.molBondColor;A.xi=A.i.textBoxColor;A.Yf=A.i.bondHighlightFraction;A.rc=A.i.atomHighlightFraction;A.ka=A.i.molBondWidth*A.zoom;A.Yg=A.i.aromaticWidth*A.zoom;A.Yj=A.i.singleOrAromaticWidth*A.zoom;A.aj=A.i.doubleOrAromaticWidth*A.zoom;E$We(A,z);E$Xe(A,z,A.e);E$Ye(A,z,A.e);E$Ze(A,z,A.e);A.vf=A.i.arrowColor;A.Wf=A.i.arrowWidth*A.zoom;E$$e(A,z,A.e);E$af(A,z,A.e);E$bf(A,z,A.e);y=z;if(A.fg!=E$q){x=A.fg.x;v=A.fg.y;E$cf(y,A,x+0.2,v+0.2,x-0.2,v-0.2,"red",A.ka);E$cf(y,A,x-0.2,v+0.2,x+0.2,v-0.2,"red",A.ka)}if(A.e.label){y=z;x=A.e;E$vc(x);v=A.i.labelColor;E$ab&&(v="#000");s=A.font;A.font=A.i.labelFont;A.zb?E$df(y,A,x.label,A.af,v,x.Gd,E$Cb(A,A.D.height-A.af)):E$df(y,A,x.label,A.Ja,v,x.Gd,x.ra-A.i.labelOffset);A.font=s}if(A.e.jb==1){y=z;x=A.i.textBoxColor;E$ab&&(x="#000");v=A.font;if(!A.ih){y.save();y.font=A.jg+"px "+A.i.textBoxFont;A.ih=y.measureText("Chiral ").width-5;y.restore()}var s=E$Bb(A,A.D.width-A.ih),r=E$Cb(A,A.jg);A.font=A.i.textBoxFont;E$df(y,A,"Chiral",A.jg,x,s,r);A.font=v}E$ef(A,z,A.e);a:{y=A.e;x=E$q;for(v=0;v<y.f.length;v++){s=y.f[v];if(s.ja){for(r=0;r<s.ja.length;r++){var q=s.ja[r];if(q&&A.ac&&q.j.selected==1){break a}}x=s.ja;s.ja=[];for(r=0;r<x.length;r++){if((q=x[r])&&!(A.ac&&q.j.selected==1)){dir=E$ff(s,0.7);var p=E$R(q,s);p.b.x=s.b.x+dir.x;p.b.y=s.b.y+dir.y;if(q.k.Gf==-1){var p=A,o=q.k,D=p.D.getContext("2d");D.save();D.textAlign="center";D.textBaseline="middle";D.font=p.Ja+"px "+p.font;E$gf(o,D,p.Ja+"px "+p.font);D.restore()}E$hf(A,z,q.k);E$jf(A,z,q);start=new E$Q(E$lf(q.j),E$mf(q.j));end=new E$Q(E$lf(q.k),E$mf(q.k));E$pf(A,q,start,end);p=E$qf(q,0.2);E$cf(z,A,end.x-p.x,end.y-p.y,end.x+p.x,end.y+p.y,A.gc,0.5*A.ka);s.ja[r]=q}}}}}if(E$rf(A.e)){z=A.e;y=E$sf(z);x=[];for(v=0;v<y;v++){x.length=0;r=E$s;s=E$p;q=0;for(p=z.f.length;q<p;q++){o=z.f[q];if(o.Sc==v&&o.tc>0){x.push(o);r="R"+o.tc+":";A.ac&&o.selected==1&&(s=E$s)}}if(r&&s){for(var s=A,q=999999999,o=-999999999,D=999999999,C=-999999999,B=p=0;B<x.length;B++){if(x[B].b.x<q){q=x[B].b.x;p=B}if(x[B].b.x>o){o=x[B].b.x}if(x[B].b.y<D){D=x[B].b.y}if(x[B].b.y>C){C=x[B].b.y}}o=0.5*(D+C);D=0.7;x[p].ja!=E$q&&(D=D+0.6);p=s.i.labelColor;E$ab&&(p="#000");C=s.font;s.font=s.i.labelFont;B=s.D.getContext("2d");E$df(B,s,r,s.Ja,p,q-D,o);s.font=C}}}A.cb=E$s}if(A.Ka&&A.mc){if(!window.Kh){window.Kh=0}window.Kh++;A.n instanceof E$Cc&&A.i.uiLiveLasso&&E$tf(A.n,E$s);z=A.mc.getContext("2d");z.clearRect(0,0,A.D.width,A.D.height);if(A.q!=E$q){(!A.ac||!A.q.selected)&&E$uf(A,z,A.q,A.Jd);A.pj!=E$q&&E$uf(A,z,A.pj,"red")}else{A.t!=E$q?(!A.ac||!A.t.j.selected&&!A.t.k.selected)&&E$vf(A,z,A.t,A.Jd):A.Ba!=E$q?(!A.ac||!A.Ba.selected)&&E$wf(A,z,A.Ba,A.Jd):A.Gh||(A.pa!=E$q?E$xf(A,z,A.pa,A.Jd):A.ta!=E$q?E$yf(A,z,A.ta,A.Jd):A.fa!=E$q&&E$zf(A,z,A.fa,A.Jd))}if(!A.ac){y=A.e;if(y!=E$q){x=0;for(v=y.f.length;x<v;x++){s=y.f[x];s.selected&&!E$Af(s)&&E$uf(A,z,s,A.Ge)}x=0;for(v=y.g.length;x<v;x++){s=y.g[x];s.selected&&(!s.hidden&&!E$Af(s.j)&&!E$Af(s.k))&&E$vf(A,z,s,A.Ge)}x=0;for(v=y.v.length;x<v;x++){s=y.v[x];s.selected&&E$xf(A,z,s,A.Ge)}x=0;for(v=y.F.length;x<v;x++){s=y.F[x];s.selected&&E$yf(A,z,s,A.Ge)}x=0;for(v=y.u.length;x<v;x++){s=y.u[x];s.selected&&E$zf(A,z,s,A.Ge)}x=0;for(v=y.r.length;x<v;x++){s=y.r[x];s.selected&&E$wf(A,z,s,A.Ge)}}}if(A.sa&&A.Ca){y=E$Yb(E$U(A,A.sa.ha),E$U(A,A.Ca.ha));x=E$Yb(E$T(A,A.sa.ia),E$T(A,A.Ca.ia));v=E$Wb(E$U(A,A.sa.ha)-E$U(A,A.Ca.ha));s=E$Wb(E$T(A,A.sa.ia)-E$T(A,A.Ca.ia));z.save();z.beginPath();z.fillStyle=A.i.selectRegionColor;z.moveTo(y,x);z.lineTo(y+v,x);z.lineTo(y+v,x+s);z.lineTo(y,x+s);z.closePath();z.fill();if(A.n instanceof E$od){A.n.x=E$Yb(A.sa.ha,A.Ca.ha);A.n.y=E$Yb(A.sa.ia,A.Ca.ia);A.n.width=E$Wb(A.sa.ha-A.Ca.ha);A.n.height=E$Wb(A.sa.ia-A.Ca.ia);z.lineCap="square";z.lineWidth=A.ka;z.lineJoin="round";z.beginPath();z.moveTo(y+10,x);z.lineTo(y,x);z.lineTo(y,x+s);z.lineTo(y+10,x+s);z.stroke();z.beginPath();z.moveTo(y+v-10,x);z.lineTo(y+v,x);z.lineTo(y+v,x+s);z.lineTo(y+v-10,x+s);z.stroke()}z.restore()}if(A.n instanceof E$Cc&&A.i.uiLiveLasso){y=A.n;if(y.bb!=E$q&&y.bb.length>2){for(x=0;x<y.bb.length-1;x++){v=y.bb[x];s=y.bb[x+1];E$Bf(z,v.x,v.y,s.x,s.y,y.ka)}if(y.a.i.uiDrawCloseLasso){x=y.bb[0];v=y.bb[y.bb.length-1];E$Bf(z,v.x,v.y,x.x,x.y,y.ka)}}}}if(A.p!=E$q){z=A.vc.getContext("2d");z.clearRect(0,0,A.D.width,A.D.height);if(!(A.n instanceof E$Hc&&A.p.f.length==1)){A.gc=A.i.templateBondColor;A.vf=A.i.templateBondColor;A.ka=A.i.templateBondWidth*A.zoom;A.gc=A.i.templateBondColor;A.xi=A.i.templateTextBoxColor;E$Xe(A,z,A.p);E$Ye(A,z,A.p,E$p);E$Ze(A,z,A.p);E$$e(A,z,A.p);E$af(A,z,A.p);E$ef(A,z,A.p);E$bf(A,z,A.p);if(!window.wi){window.wi=0}window.wi++}}window.Nc&&window.Nc(A)}}function E$uf(n,m,l,k){m.save();m.strokeStyle=k;var k=l.b.x-n.rc,i=l.b.y-n.rc;!l.Vb||l.Vb.length==0?m.strokeRect(E$U(n,k),E$T(n,i),E$U(n,k+2*n.rc)-E$U(n,k),E$T(n,i+2*n.rc)-E$T(n,i)):m.strokeRect(l.Vb[0]-2,l.Vb[1]-2,l.Vb[2]-l.Vb[0]+4,l.Vb[3]-l.Vb[1]+4);m.restore()}function E$yf(l,k,i,h){k.save();k.strokeStyle=h;h=i.b.x-l.rc;i=i.b.y-l.rc;k.strokeRect(E$U(l,h),E$T(l,i),E$U(l,h+2*l.rc)-E$U(l,h),E$T(l,i+2*l.rc)-E$T(l,i));k.restore()}function E$vf(r,q,p,o){var n=r.i.bondHighlightShortening,m={};m.x=p.j.b.x+n*(p.k.b.x-p.j.b.x);m.y=p.j.b.y+n*(p.k.b.y-p.j.b.y);var l={};l.x=p.k.b.x+n*(p.j.b.x-p.k.b.x);l.y=p.k.b.y+n*(p.j.b.y-p.k.b.y);E$Cf(r,q,m,l,r.Yf,o)}function E$xf(n,m,l,k){if(l.yd==1||l.yd==2){var i;if(l.yd==1){i=l.start}else{if(l.yd==2){i=l.end}}if(!(i==E$q||i==E$o)){m.save();m.strokeStyle=k;l=i.x-n.rc;i=i.y-n.rc;m.strokeRect(E$U(n,l),E$T(n,i),E$U(n,l+2*n.rc)-E$U(n,l),E$T(n,i+2*n.rc)-E$T(n,i));m.restore()}}else{E$Cf(n,m,l.start,l.end,n.Yf,k)}}function E$zf(r,q,p,o){if(!o){o=r.Jd}var n=r.Ja,r=p.b.va-3,m=p.b.va+p.width+3,l=p.b.Ea-n-3,p=p.b.Ea-n+p.height+3;q.save();q.beginPath();q.strokeStyle=o;q.lineCap="round";q.lineJoin="round";q.lineWidth=1.2;q.moveTo(r,l);q.lineTo(m,l);q.lineTo(m,p);q.lineTo(r,p);q.closePath();q.stroke();q.restore()}function E$wf(p,o,n,m){n.type=="SUP"&&E$Df(p,n,o,E$p);for(var l=0,k=n.coords.length-1;l<k;l=l+2){E$Cf(p,o,n.coords[l],n.coords[l+1],p.Yf,m)}}function E$Ye(y,x,w,v){if(w!=E$q){v&&w.g.length>1&&(v=E$s);for(var u=0,s=w.g.length;u<s;u++){var r=w.g[u];if((!y.ac||!(r.j.selected==1||r.k.selected==1))&&!r.hidden&&!E$Af(r.j)&&!E$Af(r.k)){if(v){var q=r.j;r.j=r.k;r.k=q}E$jf(y,x,r);if(v){q=r.j;r.j=r.k;r.k=q}}}w=y.gc;E$ab&&(w="#000");for(v=0;v<y.e.f.length;v++){if(y.e.f[v].A=="*"){u=y.e.f[v];for(s=0;s<u.g.length-1;s++){r=E$R(u.g[s],u);if(!(y.ac&&r.selected==1)){for(q=s+1;q<u.g.length;q++){var p=E$R(u.g[q],u);if(!(y.ac&&p.selected==1)){var o=E$Ef(y.e,r,p);if(o){p=w;if(o.color){p=o.color}var o=E$Ff(u.g[s]),z=E$Ff(u.g[q]);E$cf(x,y,o.x,o.y,z.x,z.y,p,y.ka/2)}}}}}}}}}function E$jf(D,C,B){if(!B.jd){if(B.type==1){E$Gf(D,C,B)}else{if(B.o==E$jd){var z=D.gc;E$ab&&(z="#000");if(B.color){z=B.color}var y=E$qf(B,D.i.stereoBondFraction,E$p);start=new E$Q(E$lf(B.j),E$mf(B.j));end=new E$Q(E$lf(B.k),E$mf(B.k));E$pf(D,B,start,end);E$cf(C,D,start.x+y.x,start.y+y.y,end.x-y.x,end.y-y.y,z,D.ka);E$cf(C,D,start.x-y.x,start.y-y.y,end.x+y.x,end.y+y.y,z,D.ka)}else{if(B.type==2){if(B.M){var v=E$Hf(B,D.i.doubleBondFraction),s=E$qf(B,D.i.doubleBondFraction,E$p),r=new E$Q(E$lf(B.j)+s.x+v.x,E$mf(B.j)+s.y+v.y),q=new E$Q(E$lf(B.k)+s.x-v.x,E$mf(B.k)+s.y-v.y),p=E$W(r,q),H,y=p.length()/D.i.dashedDoubleSteps;p.K();p.scale(y);z=y*(D.i.dashedDoubleStep/(D.i.dashedDoubleStep+D.i.dashedDoubleGap));y=y*(D.i.dashedDoubleGap/(D.i.dashedDoubleStep+D.i.dashedDoubleGap));H=D.ka;p.K();p.scale(y/2);p=D.gc;E$ab&&(p="#000");if(B.color){p=B.color}v=E$Hf(B,D.i.doubleBondFraction);s=E$qf(B,D.i.doubleBondFraction,E$p);r=new E$Q(E$lf(B.j),E$mf(B.j));q=new E$Q(E$lf(B.k),E$mf(B.k));E$pf(D,B,r,q);var G=D.ka*2,F=0,E=0;if(B.M==1){E=F=1}else{if(B.M==2){F=0;E=2}else{if(B.M==3){F=0;E=1}else{if(B.M==4){E=F=1}else{if(B.M==5){F=2;E=0}else{if(B.M==6){F=1;E=0}}}}}}if(B.j.g.length==1||B.k.g.length==1){var o;o=new E$Q(r.x+s.x/2,r.y+s.y/2);r=new E$Q(r.x-s.x/2,r.y-s.y/2);v=new E$Q(q.x+s.x/2,q.y+s.y/2);s=new E$Q(q.x-s.x/2,q.y-s.y/2);E$pf(D,B,o,v);E$pf(D,B,r,s);switch(F){case 0:E$cf(C,D,o.x,o.y,v.x,v.y,p,D.ka);break;case 1:E$If(C,D,o.x,o.y,v.x,v.y,p,H,z,y);break;case 2:E$cf(C,D,o.x,o.y,v.x,v.y,p,G,"butt")}switch(E){case 0:E$cf(C,D,r.x,r.y,s.x,s.y,p,D.ka);break;case 1:E$If(C,D,r.x,r.y,s.x,s.y,p,H,z,y);break;case 2:E$cf(C,D,r.x,r.y,s.x,s.y,p,G,"butt")}}else{o=new E$Q(B.j.b.x+v.x,B.j.b.y+v.y);v=new E$Q(B.k.b.x-v.x,B.k.b.y-v.y);if(r.x!=B.j.b.x||r.y!=B.j.b.y){o=r}if(q.x!=B.k.b.x||q.y!=B.k.b.y){v=q}switch(E){case 0:E$cf(C,D,r.x,r.y,q.x,q.y,p,D.ka);break;case 1:E$If(C,D,r.x,r.y,q.x,q.y,p,H,z,y);break;case 2:E$cf(C,D,r.x,r.y,q.x,q.y,p,G,"butt")}o.x=o.x+s.x;o.y=o.y+s.y;v.x=v.x+s.x;v.y=v.y+s.y;E$pf(D,B,o,v);switch(F){case 0:E$cf(C,D,o.x,o.y,v.x,v.y,p,D.ka);break;case 1:E$If(C,D,o.x,o.y,v.x,v.y,p,H,z,y);break;case 2:E$cf(C,D,o.x,o.y,v.x,v.y,p,G,"butt")}}}else{z=D.gc;E$ab&&(z="#000");if(B.color){z=B.color}p=E$Hf(B,D.i.doubleBondFraction);y=E$qf(B,D.i.doubleBondFraction,E$p);start=new E$Q(E$lf(B.j),E$mf(B.j));end=new E$Q(E$lf(B.k),E$mf(B.k));E$pf(D,B,start,end);if(B.j.g.length==1||B.k.g.length==1){H=new E$Q(start.x+y.x/2,start.y+y.y/2);p=new E$Q(start.x-y.x/2,start.y-y.y/2);G=new E$Q(end.x+y.x/2,end.y+y.y/2);y=new E$Q(end.x-y.x/2,end.y-y.y/2);E$pf(D,B,H,G);E$pf(D,B,p,y);E$cf(C,D,H.x,H.y,G.x,G.y,z,D.ka);E$cf(C,D,p.x,p.y,y.x,y.y,z,D.ka)}else{H=new E$Q(B.j.b.x+p.x,B.j.b.y+p.y);p=new E$Q(B.k.b.x-p.x,B.k.b.y-p.y);if(start.x!=B.j.b.x||start.y!=B.j.b.y){H=start}if(end.x!=B.k.b.x||end.y!=B.k.b.y){p=end}E$cf(C,D,start.x,start.y,end.x,end.y,z,D.ka);H.x=H.x+y.x;H.y=H.y+y.y;p.x=p.x+y.x;p.y=p.y+y.y;E$pf(D,B,H,p);E$cf(C,D,H.x,H.y,p.x,p.y,z,D.ka)}}}else{if(B.type==3){z=D.gc;E$ab&&(z="#000");if(B.color){z=B.color}y=E$qf(B,D.i.tripleBondFraction,E$p);start=new E$Q(E$lf(B.j),E$mf(B.j));end=new E$Q(E$lf(B.k),E$mf(B.k));E$pf(D,B,start,end);E$cf(C,D,start.x,start.y,end.x,end.y,z,D.ka);E$cf(C,D,start.x+y.x,start.y+y.y,end.x+y.x,end.y+y.y,z,D.ka);E$cf(C,D,start.x-y.x,start.y-y.y,end.x-y.x,end.y-y.y,z,D.ka)}else{if(B.type==4||B.type==6||B.type==7){if(B.M==1){E$Jf(D,C,B)}else{G=E$Hf(B,D.i.doubleBondFraction);F=E$qf(B,D.i.doubleBondFraction,E$p);z=new E$Q(E$lf(B.j)+F.x+G.x,E$mf(B.j)+F.y+G.y);G=new E$Q(E$lf(B.k)+F.x-G.x,E$mf(B.k)+F.y-G.y);F=E$W(z,G);if(B.type==4){H=F.length()/D.i.aromaticSteps;F.K();F.scale(H);y=H*(D.i.aromaticStep/(D.i.aromaticStep+D.i.aromaticGap));H=H*(D.i.aromaticGap/(D.i.aromaticStep+D.i.aromaticGap));p=D.Yg}else{if(B.type==6){H=F.length()/D.i.singleOrAromaticSteps;F.K();F.scale(H);y=H*(D.i.singleOrAromaticStep/(D.i.singleOrAromaticStep+D.i.singleOrAromaticGap));H=H*(D.i.singleOrAromaticGap/(D.i.singleOrAromaticStep+D.i.singleOrAromaticGap));p=D.Yj}else{if(B.type==7){H=F.length()/D.i.doubleOrAromaticSteps;F.K();F.scale(H);y=H*(D.i.doubleOrAromaticStep/(D.i.doubleOrAromaticStep+D.i.doubleOrAromaticGap));H=H*(D.i.doubleOrAromaticGap/(D.i.doubleOrAromaticStep+D.i.doubleOrAromaticGap));p=D.aj}}}F.K();F.scale(H/2);E=D.gc;E$ab&&(E="#000");if(B.color){E=B.color}E$If(C,D,z.x+F.x,z.y+F.y,G.x,G.y,E,p,y,H);z=new E$Q(E$lf(B.j),E$mf(B.j));G=new E$Q(E$lf(B.k),E$mf(B.k));E$pf(D,B,z,G);E$cf(C,D,z.x,z.y,G.x,G.y,E,D.ka)}}else{if(B.type==5){if(B.M==1){E$Jf(D,C,B)}else{z=E$qf(B,D.i.doubleBondFraction,E$p);z.x=z.x/1.5;z.y=z.y/1.5;y=E$Kf(B,5);H=D.gc;E$ab&&(H="#000");if(B.color){H=B.color}B.j.label==E$q&&E$cf(C,D,E$lf(B.j),E$mf(B.j),E$lf(B.j)+y.x,E$mf(B.j)+y.y,H,D.ka,"butt");E$cf(C,D,E$lf(B.j)+z.x+y.x,E$mf(B.j)+z.y+y.y,E$lf(B.j)+z.x+2*y.x,E$mf(B.j)+z.y+2*y.y,H,D.ka,"butt");E$cf(C,D,E$lf(B.j)-z.x+y.x,E$mf(B.j)+y.y-z.y,E$lf(B.j)+2*y.x-z.x,E$mf(B.j)+1.9*y.y-z.y,H,D.ka,"butt");E$cf(C,D,E$lf(B.j)+2*y.x,E$mf(B.j)+2*y.y,E$lf(B.j)+3*y.x,E$mf(B.j)+3*y.y,H,D.ka,"butt");E$cf(C,D,E$lf(B.j)+z.x+3*y.x,E$mf(B.j)+z.y+3*y.y,E$lf(B.j)+z.x+4*y.x,E$mf(B.j)+z.y+4*y.y,H,D.ka,"butt");E$cf(C,D,E$lf(B.j)-z.x+3*y.x,E$mf(B.j)+3*y.y-z.y,E$lf(B.j)+4*y.x-z.x,E$mf(B.j)+4*y.y-z.y,H,D.ka,"butt");B.k.label==E$q&&E$cf(C,D,E$lf(B.j)+4*y.x,E$mf(B.j)+4*y.y,E$lf(B.k),E$mf(B.k),H,D.ka,"butt")}}else{if(B.type==8){if(B.M==1){E$Jf(D,C,B)}else{z=D.gc;E$ab&&(z="#000");if(B.color){z=B.color}y=E$Kf(B,D.i.anyBondSteps);p=y.length();H=p*(D.i.anyBondStep/(D.i.anyBondStep+D.i.anyBondGap));p=p*(D.i.anyBondGap/(D.i.anyBondStep+D.i.anyBondGap));y.K();y.scale(p/2);E$If(C,D,E$lf(B.j)+y.x,E$mf(B.j)+y.y,E$lf(B.k),E$mf(B.k),z,D.ka,H,p,B.j.label!=E$q,B.k.label!=E$q)}}}}}}}}if(D.i.debugPerpendiculars){z=E$qf(B,1,E$p);y=E$Ff(B);E$cf(C,D,y.x,y.y,z.x+y.x,z.y+y.y,"red",D.ka)}if(B.xb!=E$q||B.Sa){z="";y=E$Xb(8,D.Ja*0.4);B.xb!=E$q&&(z=B.xb?"Rn":"Ch");if(B.Sa){z.length>0&&(z=z+",");B.Sa==-1&&(z=z+"X");B.Sa==1&&(z=z+"@");B.Sa==2&&(z=z+"//");if(B.Sa==4||B.Sa==5){z=z+"#"}if(B.Sa==8||B.Sa==9){z=z+"~"}if(B.Sa==12||B.Sa==13){z=z+"#~"}y=E$Xb(11,D.Ja*0.8)}H=E$Ff(B);E$df(C,D,z,y,"black",H.x,H.y,E$q,E$q,E$q,E$p)}if(B.Ib){z=E$Ff(B);E$Lf(C,D,z.x+0.2,z.y+0.2,z.x+0.2,z.y-0.2,z.x-0.2,z.y-0.2,z.x-0.2,z.y+0.2,"#000")}if(B.Jg){z=E$Hf(B,0.06);y=E$qf(B,0.2);start=new E$Q(E$lf(B.j),E$mf(B.j));end=new E$Q(E$lf(B.k),E$mf(B.k));E$pf(D,B,start,end);B=new E$Q;B.x=0.5*(start.x+end.x);B.y=0.5*(start.y+end.y);H=D.gc;E$ab&&(H="#000");E$cf(C,D,B.x-z.x+y.x,B.y-z.y+y.y,B.x-z.x+1.1*y.x,B.y-z.y+1.1*y.y,H,D.ka);E$cf(C,D,B.x+z.x+y.x,B.y+z.y+y.y,B.x+z.x+1.1*y.x,B.y+z.y+1.1*y.y,H,D.ka)}}}function E$Jf(n,m,l){var k="",i=E$Xb(8,n.Ja*0.4);l.type==6?k="S/A":l.type==7?k="D/A":l.type==5?k="S/D":l.type==8&&(k="Any");E$Gf(n,m,l);l=E$Ff(l);E$df(m,n,k,i,"black",l.x,l.y,E$q,E$q,E$q,E$p)}function E$pf(v,u,t,s){if(u.j.label!=E$q||u.k.label!=E$q){var r=v.i.symbolBorderFraction*v.zoom*v.Lb,r=E$Xb(2,r),r=E$Yb(10,r),r=r/(v.zoom*v.Lb),q=0.5*v.Ij/(v.zoom*v.Lb)+r;if(u.j.label!=E$q){var p=new E$Mf(u.k.b,u.j.b),o=0.5*u.j.Gf/(v.zoom*v.Lb),n=u.j.bf/(v.zoom*v.Lb)-o,n=n+r,o=o+r;if(u.j.label.charAt(0)=="O"||u.j.label.charAt(0)=="C"&&(u.j.label.length==1||p.x<0)){p=p.length();E$Nf(t,s,u.j.b,q/p)}else{if(u.j.label=="*"){p=p.length();E$Nf(t,s,u.j.b,o/p)}else{t.pg(s,u.j.b,n,o,q,r)}}}if(u.k.label!=E$q){p=new E$Mf(u.j.b,u.k.b);o=u.k.Gf/(2*v.zoom*v.Lb);n=u.k.bf/(v.zoom*v.Lb)-o;n=n+r;o=o+r;if(u.k.label.charAt(0)=="O"||u.k.label.charAt(0)=="C"&&(u.k.label.length==1||p.x<0)){p=p.length();E$Nf(s,t,u.k.b,q/p)}else{if(u.k.label=="*"&&!u.k.ah){p=p.length();E$Nf(s,t,u.k.b,o/p)}else{s.pg(t,u.k.b,n,o,q,r)}}}}}function E$Gf(D,C,B){var z=D.gc;E$ab&&(z="#000");if(B.color){z=B.color}if(B.o==E$Of){start=new E$Q(E$lf(B.j),E$mf(B.j));end=new E$Q(E$lf(B.k),E$mf(B.k));E$pf(D,B,start,end);if(B.Fi){C.save();C.beginPath();C.strokeStyle=z;C.fillStyle=z;C.lineCap="round";C.lineWidth=D.ka;C.lineJoin="round";z=E$qf(B,D.i.stereoBondFraction,E$p);C.moveTo(E$U(D,start.x+z.x),E$T(D,start.y+z.y));C.lineTo(E$U(D,end.x+z.x),E$T(D,end.y+z.y));C.lineTo(E$U(D,end.x-z.x),E$T(D,end.y-z.y));C.lineTo(E$U(D,start.x-z.x),E$T(D,start.y-z.y));C.closePath();C.fill();var y=B.j;C.lineCap="square";C.lineWidth=1;for(var v=0;v<2;v++){if(y.label==E$q){for(var s=0;s<y.g.length;s++){var r=y.g[s];if(r.o==E$O&&r.k==y){s=E$qf(r,D.i.stereoBondFraction,E$p);C.beginPath();C.moveTo(E$U(D,y.b.x),E$T(D,y.b.y));C.lineTo(E$U(D,y.b.x-z.x),E$T(D,y.b.y-z.y));C.lineTo(E$U(D,y.b.x-s.x),E$T(D,y.b.y-s.y));C.closePath();C.fill();C.beginPath();C.moveTo(E$U(D,y.b.x),E$T(D,y.b.y));C.lineTo(E$U(D,y.b.x-z.x),E$T(D,y.b.y-z.y));C.stroke();C.beginPath();C.moveTo(E$U(D,y.b.x),E$T(D,y.b.y));C.lineTo(E$U(D,y.b.x-s.x),E$T(D,y.b.y-s.y));C.stroke();C.beginPath();C.moveTo(E$U(D,y.b.x),E$T(D,y.b.y));C.lineTo(E$U(D,y.b.x+z.x),E$T(D,y.b.y+z.y));C.lineTo(E$U(D,y.b.x+s.x),E$T(D,y.b.y+s.y));C.closePath();C.fill();C.beginPath();C.moveTo(E$U(D,y.b.x),E$T(D,y.b.y));C.lineTo(E$U(D,y.b.x+z.x),E$T(D,y.b.y+z.y));C.stroke();C.beginPath();C.moveTo(E$U(D,y.b.x),E$T(D,y.b.y));C.lineTo(E$U(D,y.b.x+s.x),E$T(D,y.b.y+s.y));C.stroke();break}}y=B.k}}C.restore()}else{E$cf(C,D,start.x,start.y,end.x,end.y,z,D.ka)}}else{a:{var z=E$qf(B,D.i.stereoBondFraction,E$p),q=D.gc;E$ab&&(q="#000");if(B.color){q=B.color}C.save();C.beginPath();C.strokeStyle=q;C.fillStyle=q;C.lineCap="round";C.lineWidth=D.ka;C.lineJoin="round";start=new E$Q(E$lf(B.j),E$mf(B.j));end=new E$Q(E$lf(B.k),E$mf(B.k));E$pf(D,B,start,end);if(B.o==E$O){if(B.M){if(B.M==1){C.lineWidth=D.ka/2;C.moveTo(E$U(D,start.x-0.1*z.x),E$T(D,start.y-0.1*z.y));C.lineTo(E$U(D,start.x+0.1*z.x),E$T(D,start.y+0.1*z.y));C.lineTo(E$U(D,end.x+z.x),E$T(D,end.y+z.y));C.lineTo(E$U(D,end.x-z.x),E$T(D,end.y-z.y));C.stroke()}else{E$cf(C,D,start.x,start.y,end.x,end.y,q,D.ka*2,"butt");break a}}else{C.moveTo(E$U(D,start.x-0.1*z.x),E$T(D,start.y-0.1*z.y));C.lineTo(E$U(D,start.x+0.1*z.x),E$T(D,start.y+0.1*z.y));C.lineTo(E$U(D,end.x+z.x),E$T(D,end.y+z.y));C.lineTo(E$U(D,end.x-z.x),E$T(D,end.y-z.y));C.closePath();C.fill()}}else{if(B.o==E$ld||B.o==E$kd){y=E$Mb(start,end);v=E$W(start,end);if(B.o==E$ld){if(B.M){if(B.M==1){s=D.i.stereoDownBondStep;B=y+s/2;for(r=0;r<B;r=r+s){var p=r/y,H=start.x+p*v.x,G=start.y+p*v.y;E$cf(C,D,H+z.x,G+z.y,H-z.x,G-z.y,q,D.ka)}}else{s=D.i.stereoDownBondStep/1.5;E$If(C,D,start.x,start.y,end.x,end.y,q,D.ka,s,s,E$s,E$s);break a}}else{s=D.i.stereoDownBondStep;B=y+s/2;for(r=0;r<B;r=r+s){p=r/y;H=start.x+p*v.x;G=start.y+p*v.y;p=p+s/y;E$cf(C,D,H+p*z.x,G+p*z.y,H-p*z.x,G-p*z.y,q,D.ka)}}}else{q=1;s=D.i.stereoEitherBondStep;B.M==1&&(s=y/16);C.moveTo(E$U(D,start.x),E$T(D,start.y));for(var F=0,E=0,o=0,r=s;r<=y;r=r+s){p=r/y;F++;H=start.x+p*v.x;G=start.y+p*v.y;if(B.M==1){p=12*s;if(F%2==0){C.quadraticCurveTo(E,o,E$U(D,H),E$T(D,G))}else{q=q*-1;E=E$U(D,H+p*q*z.x);o=E$T(D,G+p*q*z.y)}}else{p=p+2*s/y;C.lineTo(E$U(D,H+p*q*z.x),E$T(D,G+p*q*z.y))}q=q*-1}B.M!=1&&C.lineTo(E$U(D,end.x),E$T(D,end.y));C.stroke()}}}C.restore()}}}window.Nk=0;function E$Cf(r,q,p,o,n,m){if(!m){m=r.Jd}var l=E$W(p,o);l.K();l=E$Pf(l);l.scale(n);E$Lf(q,r,p.x+l.x,p.y+l.y,o.x+l.x,o.y+l.y,o.x-l.x,o.y-l.y,p.x-l.x,p.y-l.y,m)}function E$Xe(n,m,l){if(l!=E$q){m.save();m.textAlign="center";m.textBaseline="middle";m.font=n.Ja+"px "+n.font;n.Ij=m.measureText("O").width;for(var k=0,i=l.f.length;k<i;k++){E$gf(l.f[k],m,n.Ja+"px "+n.font)}m.restore()}}function E$gf(i,h,g){i.label=E$Qf(i);if(i.label!=E$q){h.save();h.font=g;g=""+i.label;g=g.replace("!","").replace("[","");i.bf=i.label.length>2?h.measureText(g.charAt(0)+g.charAt(1)).width:h.measureText(g).width;i.Gf=h.measureText(g.charAt(0)).width;h.restore()}else{i.bf=0}}function E$Rf(e){return e.abbr&&E$Sf(e.abbr)&&e.abbr.sb==e?E$s:e.Rc?E$p:E$Ya&E$ke||(e.na>0||e.U.length>0)||e.vb||!(E$Ya&E$he)&&E$Tf(E$ae(e.A))?E$s:E$Ya&E$je||E$Ya&E$ie&&e.g.length<2||E$Ya&E$Qa&&e.A!="C"&&e.A!="H"?E$p:E$s}function E$Ze(p,o,n){if(n!=E$q){for(var m=0,l=n.f.length;m<l;m++){var k=n.f[m];!(p.ac&&k.selected==1)&&!E$Af(k)&&E$hf(p,o,k,parseInt(m))}}}function E$hf(B,A,z,y){for(var v=[],s=0;s<6;s++){v[s]=[];v[s].x=0;v[s].y=0;v[s].size=B.Ja;if(s==E$Wf||s==E$Yf){v[s].size=E$ka?B.Ja*0.9:B.Ja*0.8}v[s].height=0;v[s].width=0;v[s].border=0;v[s].text=""}if(v[E$Zf].text=z.label){v[E$$f].text=z.label.charAt(0)}if(z.Na!=0){if(E$Wb(z.Na)>1){v[E$ag].text=new String(E$Wb(z.Na))}v[E$ag].text=z.Na<0?v[E$ag].text+"-":v[E$ag].text+"+"}if(z.$a>0&&z.A!="H"){v[E$Yf].text=new String(z.$a)}var r=E$q;if(E$Rf(z)){s=E$Ue(z);z.Rc>=2&&(s=z.Rc-1);if(s>0){for(var r=s,q=[0,0],p=z.g.length,o=E$ae(z.A),q=[0,0],F=0,E=z.g.length;F<E;F++){var D=new E$Q;D.x=z.b.x-E$R(z.g[F],z).b.x;D.y=z.b.y-E$R(z.g[F],z).b.y;D.K();q[0]=q[0]+D.x;q[1]=q[1]+D.y}p==0&&(q[0]=o==8&&z.Na>=0?-1:o==6||o==7||o==8||o==16?1:-1);r=o==7&&(r==1&&p==2)&&E$Wb(q[0])<E$Wb(q[1])?q[1]<0?E$bg:E$cg:q[0]<0?E$dg:E$eg;if(s>1){v[E$Wf].text=new String(s)}if(s>0){v[E$fg].text=v[E$fg].text+"H"}}}if(z.label){if(z.label.charAt(0)=="!"){v[E$$f].text=z.label.charAt(2);v[E$Zf].text=z.label.substr(2);v[E$fg].text="![";r=E$dg}else{if(z.label.charAt(0)=="["){v[E$$f].text=z.label.charAt(1);v[E$Zf].text=z.label.substr(1);v[E$fg].text="[";r=E$dg}}}A.save();for(s=0;s<6;s++){if(v[s].text&&v[s].text!=""){A.font=v[s].size+"px "+B.font;v[s].width=A.measureText(v[s].text).width;v[s].height=A.measureText("O").width;if(v[s].width<1){v[s].height=0;v[s].border=0}else{v[s].border=E$ka?1:0}}}A.restore();s=E$T(B,E$mf(z));v[E$Zf].x=E$U(B,E$lf(z))-v[E$$f].width*0.5;v[E$Zf].y=s+v[E$$f].height*0.5;if(r==E$dg){v[E$fg].x=v[E$Zf].x-(v[E$fg].border+v[E$fg].width)-(v[E$Wf].width>v[E$Yf].width?v[E$Wf].width+v[E$Wf].border:v[E$Yf].width+v[E$Yf].border);v[E$fg].y=v[E$Zf].y}else{if(r==E$cg){v[E$fg].x=v[E$Zf].x;v[E$fg].y=v[E$Zf].y-(v[E$Zf].height+v[E$Zf].border)}else{if(r==E$bg){v[E$fg].x=v[E$Zf].x;v[E$fg].y=v[E$Zf].y+v[E$fg].height+v[E$fg].border}else{v[E$fg].x=v[E$Zf].x+v[E$Zf].width+v[E$Zf].border;v[E$fg].y=v[E$Zf].y}}}v[E$ag].x=r==E$eg?v[E$fg].x+v[E$fg].width+v[E$fg].border:v[E$Zf].x+v[E$Zf].width+v[E$Zf].border;v[E$ag].y=v[E$Zf].y-v[E$Zf].height+0.5*v[E$ag].height;v[E$Wf].x=v[E$fg].x+v[E$fg].width+v[E$fg].border;if(E$ka){v[E$Wf].x=v[E$Wf].x-0.08*v[E$Wf].width}v[E$Wf].y=v[E$Zf].y+0.5*v[E$Wf].height;v[E$Yf].x=v[E$Zf].x-v[E$Yf].width-v[E$Yf].border;v[E$Yf].y=v[E$Zf].y+0.5*v[E$Yf].height-v[E$Zf].height;if(E$Za){if(z.U.length>0||z.na!=0||z.vb){s=E$s}else{s=E$ae(z.A);if(s<1||s>118){s=E$s}else{s=E$ae(z.A)-z.Na;r=99;if(s>=0&&s<E$gg.length){for(q=r=0;q<6;q++){E$gg[s][q]>=r&&(r=E$gg[s][q])}}s=E$hg(z)>r}}if(s){var s=B.i.valenceWarningColor,r=E$lf(z),q=E$mf(z),C;A.save();A.beginPath();C==E$q&&(C=20);p=0;o=2*E$fc/C;for(F=0;F<C;F++){D=0.4;F%2==0&&(D=0.6);E=E$U(B,r+E$ac(p)*D);D=E$T(B,q+E$$b(p)*D);F==0?A.moveTo(E,D):A.lineTo(E,D);p=p+o}A.closePath();A.strokeStyle=s;A.lineJoin="round";A.stroke();A.restore()}}if(v[E$Zf].text&&v[E$Zf].text.length>2){C=v[E$Zf];E$ka&&z.U.length>0?E$ig(A,C.x,C.y+5,C.x+C.width,C.y+5,C.x+C.width,C.y-C.height-5,C.x,C.y-C.height-5):E$ig(A,C.x,C.y,C.x+C.width,C.y,C.x+C.width,C.y-C.height,C.x,C.y-C.height)}for(s=2;s<6;s++){if(v[s].text!=""){C=v[s];E$ig(A,C.x,C.y,C.x+C.width,C.y,C.x+C.width,C.y-C.height,C.x,C.y-C.height)}}C=999999.9;r=0;q=999999.9;p=0;F=o=-1;for(s=1;s<6;s++){if(v[s].width>0){if(v[s].x>r){r=v[s].x;o=s}if(v[s].x<C){C=v[s].x}if(v[s].y>p){p=v[s].y}if(v[s].y<q){q=v[s].y;F=s}}}if(!z.Vb){z.Vb=[]}if(o==-1||F==-1){z.Vb.length=0}else{z.Vb[0]=C;z.Vb[1]=q-v[F].height;z.Vb[2]=r+v[o].width;z.Vb[3]=p}if(z.label!=E$q){C=E$yd(z.A);z.na>0&&(C="#000");z.vb&&(C="#000");z.U.length>0&&(C=z.nc?"red":"green");E$ab&&(C="#000");if(z.color){C=z.color}for(s=1;s<6;s++){v[s].text!=""&&E$df(A,B,v[s].text,v[s].size,C,v[s].x,v[s].y-v[E$$f].height*0.5,"left","middle",E$p)}}if(E$$a){C="#696565";y=y+1;z.Pa&&(y=y+(","+z.Pa));if(z.bc){z.bc==1?y=y+",Inv":z.bc==2&&(y=y+",Ret");C="#000"}if(z.hd){y=y+",Ex";C="#000"}}else{C="#0000A0";y="";z.Pa&&(y=y+z.Pa);if(z.bc){y.length>0&&(y=y+",");z.bc==1?y=y+"Inv":z.bc==2&&(y=y+"Ret")}if(z.hd){y.length>0&&(y=y+",");y=y+"Ex"}}E$df(A,B,y,B.Ja*0.85,C,E$lf(z)+0.25,E$mf(z)+0.3,E$q,E$q,E$q,E$p);if(z.pb){C="black";if(z.pb==E$jg){y="abs";E$kb&&(C="red")}else{if(z.pb==E$kg){y="or"+z.Mb;E$kb&&(C="green")}else{if(z.pb==E$lg){y="&"+z.Mb;E$kb&&(C="blue")}}}v=E$ff(z,0.5);E$df(A,B,y,B.Ja*0.7,C,E$lf(z)+v.x,E$mf(z)+v.y,E$q,E$q,E$s,E$p)}}function E$Ng(l){if(l.A=="N"){for(var k=0,i=0;i<l.g.length;i++){var h=l.g[i];E$Sg(h)||(k=k+h.l)}if(k==4&&l.Na==0){l.Na=1}else{if(k==3&&l.Na==1){l.Na=0}}}}function E$ef(A,z,y){if(y!=E$q){for(var x=0,v=y.u.length;x<v;x++){var s=y.u[x];(!s.width||!s.height)&&E$Tg(A,s,y);var r=A,q=z,p=s,o=y.ba[s.V],s=p.color!=E$o?p.color:r.xi;E$ab&&(s="#000");var D=r.font;r.font=r.i.textBoxFont;for(var C="",C=p.Ze?o:p.V+": "+o,o=C.split("\n"),C=0;C<o.length;C++){var B=E$T(r,p.b.y)+C*r.Ja,B=E$Cb(r,B);E$df(q,r,o[C],r.Ja,s,p.b.x,B,"left","bottom")}r.font=D}}}function E$$e(y,x,w){for(var v=0,u=w.v.length;v<u;v++){var s=y,r=x,q=w.v[v],p=E$W(q.start,q.end);p.K();p.scale(0.15);var o=E$Pf(p);o.K();o.scale(0.15);if(q.type!=2){E$cf(r,s,q.start.x,q.start.y,q.end.x,q.end.y,q.color,s.Wf)}else{var z=E$W(q.start,q.end);z.K();z.scale(0.25);step=0.25*(s.i.aromaticStep/(s.i.aromaticStep+s.i.aromaticGap));gap=0.25*(s.i.aromaticGap/(s.i.aromaticStep+s.i.aromaticGap));width=s.Yg;E$If(r,s,q.start.x,q.start.y,q.end.x,q.end.y,q.color,width,step,gap)}E$cf(r,s,q.end.x,q.end.y,q.end.x+o.x-p.x,q.end.y+o.y-p.y,q.color,s.Wf);E$cf(r,s,q.end.x,q.end.y,q.end.x-o.x-p.x,q.end.y-o.y-p.y,q.color,s.Wf)}}function E$af(r,q,p){for(var o=0,n=p.F.length;o<n;o++){var m=p.F[o],l=r.vf;E$ab&&(l="#000");E$df(q,r,"+",1.5*r.Ja,l,m.b.x,m.b.y)}}function E$M(O,N,M,L,K,J,G){if(!N){return E$q}var E=N.clientX-E$oc(O.D),D=N.clientY-E$nc(O.D),C=E$Xb(document.body.scrollLeft,document.documentElement.scrollLeft),E=E+C,C=E$Xb(document.body.scrollTop,document.documentElement.scrollTop),N=new E$Q;N.x=E;N.y=D+C;N.x=N.x*window.devicePixelRatio;N.y=N.y*window.devicePixelRatio;N.ha=E$Bb(O,N.x);N.ia=E$Cb(O,N.y);if(O.i.snapToGrid&&!(O.n instanceof E$Cc)){N.ha=0.5*E$cc(N.ha/0.5);N.ia=0.5*E$cc(N.ia/0.5);N.x=E$U(O,N.ha);N.y=E$T(O,N.ia)}var E=O.q,D=O.t,C=O.pa,z=O.ta,y=O.fa,s=O.Ba;if(M){O.t=E$q;O.pa=E$q;O.ta=E$q;O.fa=E$q;O.q=E$q;O.Ba=E$q}else{O.t=E$q;O.pa=E$q;O.ta=E$q;O.fa=E$q;O.Ba=E$q;O.q=L?E$q:E$Ug(O.e,N,O.rc,E$p);if(G&&O.q&&O.q.g.length>1){O.q=E$q}if(O.q==E$q){if(K){M=E$q}else{for(var M=O.e,L=N.x,K=N.y,G=E$q,q=10000000,B=0,v=M.g.length;B<v;B++){var r=M.g[B];if(!r.hidden&&!E$Af(r.j)&&!E$Af(r.k)){var p=E$Vg(r.j.b.va,r.j.b.Ea,r.k.b.va,r.k.b.Ea,L,K);if(p<q&&p<10){q=p;G=r}}}M=G}O.t=M;if(O.t==E$q){if(J!=E$p){J=O.e;M=N.x;L=N.y;K=E$q;G=10000000;q=0;for(B=J.v.length;q<B;q++){v=J.v[q];p=E$Vg(v.start.va,v.start.Ea,v.end.va,v.end.Ea,M,L);if(p<G&&p<10){G=p;K=v}}if(K==E$q){q=0;for(B=J.v.length;q<B;q++){v=J.v[q];for(r=0;r<2;r++){var o;o=r?v.start.va:v.end.va;p=r?v.start.Ea:v.end.Ea;o=E$Wb(o-M);p=E$Wb(p-L);p=o*o+p*p;if(p<G&&p<=36){G=p;K=v}}}}O.pa=K;if(O.pa==E$q){a:{J=O.e;M=N.ha;L=N.ia;K=O.rc;G=0;for(q=J.F.length;G<q;G++){B=J.F[G];v=E$Wb(B.b.x-M);r=E$Wb(B.b.y-L);if(v<K&&r<K){J=B;break a}}J=E$q}O.ta=J;if(O.ta==E$q){a:{J=O.e;M=N.x;L=N.y;K=O.Ja;G=3;E$ma&&(G=G+K);q=0;for(B=J.u.length;q<B;q++){v=J.u[q];(!v.width||!v.height)&&E$Tg(O,v,J);r=v.b.va+v.width+G;p=v.b.Ea-K-G;o=v.b.Ea-K+v.height+G;if(M>v.b.va-G&&M<r&&L>p&&L<o){J=v;break a}}J=E$q}O.fa=J;if(O.fa==E$q){O.Ba=E$Wg(O.e,N.x,N.y)}}}else{O.pa.yd=0;M=O.pa;L=new E$Q(N.x,N.y);J=E$Xg(L,M.start.va,M.start.Ea);M=E$Xg(L,M.end.va,M.end.Ea);if(J<M&&J<10){O.pa.yd=1}else{if(M<J&&M<10){O.pa.yd=2}}}}else{O.Ba=E$Wg(O.e,N.x,N.y)}}}}if(O.q!=E$q||O.t!=E$q||O.pa!=E$q||O.ta!=E$q||O.fa!=E$q||O.Ba!=E$q){E$B.md=E$p}if(O.n&&O.n.Ia&&O.n.xe){O.q==O.n.Ia.j?O.q=O.n.Ia.k:O.n.xe=E$s}O.Ka=E!=O.q||D!=O.t||C!=O.pa||z!=O.ta||y!=O.fa||s!=O.Ba||O.p!=E$q?E$p:E$s;return O.df=N}function E$U(g,f){return 0.5*g.D.width+(f-g.origin.x)*g.Lb*g.zoom}function E$T(g,f){return g.D.height-(0.5*g.D.height+(f-g.origin.y)*g.Lb*g.zoom)}function E$Bb(g,f){return g.origin.x+(f-0.5*g.D.width)/(g.Lb*g.zoom)}function E$Cb(g,f){return g.origin.y+-(f-g.D.height+0.5*g.D.height)/(g.Lb*g.zoom)}function E$Yg(r,q,p){var o=E$Ue(q),n=E$q,m=E$s,n=E$q;if(E$Ge){E$Zg();if(q.g.length==1){l=q.g[0];l=E$R(l,q);n=E$W(q.b,l.b)}else{n=E$ff(q,1);E$$g(n)}r=E$ah;l=E$Ue(r);if(o<E$hg(r)||l<E$hg(q)){m=E$p}p&&(m=!m);q.g.length<2&&r.g.length<2&&(m=E$s);if(n!=E$q){n.K();n=E$bh(E$bc(n.y,n.x));if(m){o=E$ch(E$X);if(r.g.length==1){p=E$W(E$R(r.g[0],r).b,r.b);l=n-E$bh(E$bc(p.y,p.x));p.rotate(l<0||l>180?-60:60)}else{p=E$ff(r,1)}p.K();o.b.x=r.b.x+p.x;o.b.y=r.b.y+p.y;E$X.Ga(r,o,1,0);E$X.We=E$p}m&&(r=E$X.f[E$X.f.length-1]);if(r.g.length==1){l=r.g[0];l=E$R(l,r);p=E$W(l.b,r.b);p.K();n=n-E$bh(E$bc(p.y,p.x));q.g.length==1&&(n=n<0||n>180?n+60:n-60);E$X.rotate(n)}else{if(r.g.length==2){p=E$ff(r,1);p.K();n=n-E$bh(E$bc(p.y,p.x));E$X.rotate(n)}}E$X.move(q.b.x-r.b.x,q.b.y-r.b.y)}}else{if(o<E$dh||E$eh<E$hg(q)){m=E$p}p&&(m=!m);if(q.g.length==1&&!m){var l=q.g[0],l=E$R(l,q),n=E$W(q.b,l.b)}else{n=E$ff(q,1);E$$g(n)}if(n!=E$q){n.K();n=E$bh(E$bc(n.y,n.x));E$X=E$fh(E$gh,E$hh,n,E$s,m);r.p=E$X;r.p.shift(q.b.x-r.p.f[0].b.x,q.b.y-r.p.f[0].b.y)}}}function E$ih(y,x,w){if(E$Ge){E$Zg();if(E$jh&&x.l==1&&E$Ue(x.j)<2&&E$Ue(x.k)<2){E$kh.l=1;E$kh.type=1;E$lh=E$p}y=E$kh;u=E$Ff(x);v=E$qf(x,1);x=E$qf(y,1);w||E$$g(x);w=E$bh(E$bc(v.y,v.x));w=w-E$bh(E$bc(x.y,x.x));E$X.rotate(w);q=E$Ff(y);E$X.shift(u.x-q.x,u.y-q.y,E$s)}else{var v=E$qf(x,1);w&&E$$g(v);var u=E$Ff(x),w=E$bh(E$bc(v.y,v.x));E$X=E$fh(E$gh,E$hh,w,E$p);var s=v=E$s;x.l==1&&(E$Ue(x.j)<2&&E$Ue(x.k)<2)&&(v=E$p);x.l==1&&(E$Ue(x.j)>=2&&E$Ue(x.k)>=2)&&(s=E$p);var r=E$s;y.p=E$X;for(var q=E$q,p=0,o=y.p.g.length;p<o;p++){var w=y.p.g[p],z=E$s;if(E$mh[p]&&v){if(w.l==2){z=E$p;if(!E$nh||!s){w.l=1;w.type=1}}}else{if(w.l==x.l){if(!r){r=E$p;continue}z=E$p}w.l==2&&(x.l==1&&s&&E$nh)&&(z=E$p)}if(z){if(p>0){x=E$Hf(w,1);v=-1*E$bh(E$bc(x.y,x.x));x=E$Hf(y.p.g[0],1);v=v+E$bh(E$bc(x.y,x.x));E$X.rotate(v)}q=E$Ff(w);break}}q==E$q&&(q=E$Ff(y.p.g[0]));y.p.shift(u.x-q.x,u.y-q.y,E$s);E$oh(E$X)}}function E$ph(x){if(x.p){var w=[],v=x.e.f.length,u=x.e.g.length,t=E$s;if(x.Tb){E$kc(x.e);for(var s=0,r=x.p.f.length;s<r;s++){var q=x.p.f[s];if(q.selected){t=E$p;break}}if(!t){s=0;for(r=x.p.f.length;s<r;s++){q=x.p.f[s];if(q.selected){break}q.selected=1}}}else{x.Ud&&E$kc(x.e)}if(!E$Ge){s=0;for(r=x.p.f.length;s<r;s++){var q=x.p.f[s],p=E$qh(x.e,E$lf(q),E$mf(q));if(p!=E$q){w.push(p);if(x.Tb&&!t){q.selected=0}}}if(w.length==2){s=E$q;r=w[0].g.length;for(p=0;p<r;p++){if(E$R(w[0].g[p],w[0])==w[1]){s=w[0].g[p];break}}if(s){E$ih(x,s,E$s);s=0;for(r=x.p.f.length;s<r;s++){q=x.p.f[s];p=E$qh(x.e,E$lf(q),E$mf(q));if(p!=E$q){w.push(p);if(x.Tb){q.selected=0}}else{if(x.Tb){q.selected=1}}}E$Ie(x)}}}x.save();w=[];s=0;for(r=x.p.f.length;s<r;s++){q=x.p.f[s];if(x.Tb&&E$Ge){p=E$qh(x.e,E$lf(q),E$mf(q));if(p!=E$q){q.selected=0}}p=E$rh(x.e,E$lf(q),E$mf(q));if(!x.p.We||s<x.p.f.length-1){t=p.A;p.Za(x.p.f[s]);if(p.A=="C"){p.A=t}}w.push(p)}s=0;for(r=x.p.g.length;s<r;s++){var p=x.p.g[s],t=x.e.Ga(w[p.j.id],w[p.k.id],p.l,0),q=t.l,o=t.type;t.Za(p);if(q>t.l){t.type=o;t.l=q}}s=0;for(r=x.p.u.length;s<r;s++){w=x.p.u[s];E$sh(x.e,w);x.e.ba[w.V]=x.p.ba[w.V]}E$th(x.p,x.e);E$uh(x.p,x.e,v,u);if(E$Ge&&x.p.jb){x.e.jb=1}if(v==0){if(typeof x.e.name=="undefined"&&typeof x.p.name!="undefined"){x.e.name=x.p.name}if(typeof x.e.ee=="undefined"&&typeof x.p.ee!="undefined"){x.e.ee=x.p.ee}}s=0;for(r=x.p.f.length;s<r;s++){q=x.p.f[s];q.selected=x.Tb?1:0}E$vh(x.e)}}function E$wh(v,u,t,s){for(var r=E$s,q=[],p=0,o=v.e.f.length;p<o;p++){var n=v.e.f[p];if(!u){n.selected=0}if(E$xh(n.b,v.sa.ha,v.sa.ia,v.Ca.ha,v.Ca.ia)){if(s){n.selected=t?n.selected==3?0:n.selected==2?1:n.selected==1?1:n.selected==0?1:0:1;r=E$p}else{n.selected=n.selected==3?3:n.selected==2?2:n.selected==1?3:n.selected==0?2:0}}else{n.selected=n.selected==2?0:n.selected==3?1:n.selected==1?1:0}n.abbr&&(n.abbr.sb==n&&E$Sf(n.abbr))&&q.push(n)}p=0;for(o=v.e.g.length;p<o;p++){n=v.e.g[p];if(!u){n.selected=0}if(E$xh(E$Ff(n),v.sa.ha,v.sa.ia,v.Ca.ha,v.Ca.ia)){if(s){n.selected=t?n.selected==3?0:n.selected==2?1:n.selected==1?1:n.selected==0?1:0:1;r=E$p}else{n.selected=n.selected==3?3:n.selected==2?2:n.selected==1?3:n.selected==0?2:0}}else{n.selected=n.selected==2?0:n.selected==3?1:n.selected==1?1:0}}for(p=0;p<q.length;p++){n=q[p];E$yh(n.abbr,n.selected)}p=0;for(o=v.e.F.length;p<o;p++){t=v.e.F[p];if(!u){t.selected=0}if(E$xh(t.b,v.sa.ha,v.sa.ia,v.Ca.ha,v.Ca.ia)){t.selected=1;r=E$p}}p=0;for(o=v.e.v.length;p<o;p++){t=v.e.v[p];if(!u){t.selected=0}if(E$xh(t.start,v.sa.ha,v.sa.ia,v.Ca.ha,v.Ca.ia)&&E$xh(t.end,v.sa.ha,v.sa.ia,v.Ca.ha,v.Ca.ia)){t.selected=1;r=E$p}}p=0;for(o=v.e.u.length;p<o;p++){t=v.e.u[p];if(!u){t.selected=0}if(E$xh(t.b,v.sa.ha,v.sa.ia,v.Ca.ha,v.Ca.ia)){t.selected=1;r=E$p}}p=0;for(o=v.e.r.length;p<o;p++){t=v.e.r[p];if(!u){t.selected=0}s=E$p;for(q=0;q<t.coords.length;q++){if(!E$xh(t.coords[q],v.sa.ha,v.sa.ia,v.Ca.ha,v.Ca.ia)){s=E$s;break}}if(s){r=E$p;t.selected=1;console.log("selected sgroup")}}return r}function E$yc(){if(E$zh(E$Ch("RSRjJCgiZG90bWF0aWNzLmVsZW1lbnRhbEtleSIpICE9ICJTTHNMV2xNaHJIblRqRGVyU3JsRyIg"))){E$zh(E$Ch("YWxlcnQoIlRoaXMgdmVyc2lvbiBvZiBFbGVtZW50YWwgaXMgbGljZW5zZWQgZm9yIHVzZSBvbiBDbGFyaXZhdGUgQW5hbHl0aWNzIHdlYiBzaXRlcy4gUGxlYXNlIGNvbnRhY3QgRG90bWF0aWNzICh3d3cuZG90bWF0aWNzLmNvbSkgZm9yIG1vcmUgaW5mb3JtYXRpb24iKQ=="));return E$s}return E$p}function E$Q(){this.va=this.Ea=this.x=this.y=this.oa=0;if(arguments.length==2){this.x=parseFloat(arguments[0])+0;this.y=parseFloat(arguments[1])+0}else{if(arguments.length==3){this.x=parseFloat(arguments[0])+0;this.y=parseFloat(arguments[1])+0;this.oa=parseFloat(arguments[2])+0}}}function E$xh(p,o,n,m,l){var k=E$Yb(o,m),o=E$Xb(o,m),m=E$Yb(n,l),n=E$Xb(n,l);return p.x>=k&&p.x<=o&&p.y>=m&&p.y<=n?E$p:E$s}E$v=E$Q.prototype;E$v.rotate=function(l){var l=l*E$fc/180,k=E$$b(l),l=E$ac(l),i=this.x,h=this.y;this.x=i*k-h*l;this.y=i*l+h*k;return this};E$v.Cf=function(e){return this.x*e.x+this.y*e.y};function E$Dh(e){return e.length()<0.00001?E$p:E$s}function E$$g(e){e.x=-e.x;e.y=-e.y}E$v.add=function(g,f){if(f){this.x=this.x+f*g.x;this.y=this.y+f*g.y}else{this.x=this.x+g.x;this.y=this.y+g.y}return this};E$v.set=function(e){this.x=e.x;this.y=e.y;return this};function E$Eh(i,h,g){i.x=h.x+g.x;i.y=h.y+g.y}E$v.toString=function(){return"x: "+this.x+" y: "+this.y+" length: "+this.length()};E$v.length=function(){return E$Zb(this.x*this.x+this.y*this.y)};E$v.scale=function(e){this.x=this.x*e;this.y=this.y*e;return this};function E$W(i,h){var g=new E$Q;g.x=h.x-i.x;g.y=h.y-i.y;return g}function E$Mb(l,k){var i=k.x-l.x,h=k.y-l.y;return E$Zb(i*i+h*h)}function E$Xg(i,h,g){h=h-i.x;i=g-i.y;return E$Zb(h*h+i*i)}E$v.K=function(){var e=this.length();if(e>0.00001){this.x=this.x/e;this.y=this.y/e}else{this.x=1;this.y=0}};function E$Pf(e){e=new E$Q(e.x,e.y);if(e.length()<0.00001){e.x=1;e.y=0}else{e.rotate(90)}e.K();return e}function E$Vg(t,s,r,q,p,o){var n,m;if(!(t==r&&s==q)){n=r-t;m=q-s;n=((t-p)*(t-r)+(s-o)*(s-q))/(n*n+m*m);n<0&&(n=-100);n>1&&(n=100);t=t+n*(r-t);s=s+n*(q-s)}n=t-p;m=s-o;return E$Zb(n*n+m*m)}function E$Fh(){this.b=new E$Q;this.save=new E$Q;this.hb=new E$Q;this.A="C";this.Ld=0;this.g=[];this.ua=-1;this.ad=[];this.selected=this.$a=this.Na=0;this.ib=-1;this.Mb=this.pb=this.jb=0;this.ef=E$s;this.Fg=this.ai=this.Sc=0;this.gd=E$s;this.Oa=this.lb=this.ob=this.e=this.cc=E$q;this.U=[];this.nc=E$s;this.na=0;this.vb=E$s;this.label="";this.Tc=this.Cb=this.nb=this.bf=0}var E$jg=1,E$kg=2,E$lg=3,E$dg=1,E$cg=2,E$eg=3,E$bg=4,E$ke=0,E$Qa=1,E$ie=2,E$je=4,E$he=8,E$$f=0,E$Zf=1,E$ag=2,E$Wf=3,E$fg=4,E$Yf=5;function E$ee(e){e.A="C";e.Na=0;e.$a=0;e.gd=E$s;e.cc=E$q;e.Oa=E$q;e.U=[];e.nc=E$s;e.na=0;e.vb=E$s;e.label="";e.bf=0;e.nb=0;e.Cb=0;e.Tc=0}E$v=E$Fh.prototype;E$v.Xb=function(){this.e.Af&&E$Gh(this.e);return this.Ld};E$v.Za=function(l){var k=this.id,i;for(i in l){if(l[i]==E$q||typeof l[i]!="object"){this[i]=l[i]}}i=0;for(var h=l.U.length;i<h;i++){this.U.push(l.U[i])}if(l.ja){i=0;for(h=l.ja.length;i<h;i++){if(l.ja[i]){this.fc(i);this.ja[i].k.b.x=l.ja[i].k.b.x;this.ja[i].k.b.y=l.ja[i].k.b.y}}}this.id=k;this.b.x=l.b.x;this.b.y=l.b.y};function E$Hh(l,k){var k=k||99999,i="";if(l.U.length>0){for(var i="["+E$Uc[l.U[0]][2],h=1;h<l.U.length&&h<k;h++){i=i+(","+E$Uc[l.U[h]][2])}l.U.length>k&&(i=i+"..");i=i+"]"}return i}function E$Ih(e){return e.A=="Q"||e.A=="A"||e.A=="X"||e.A=="QH"||e.A=="AH"||e.A=="XH"||e.A=="*"?E$p:E$s}function E$Jh(i){if(i.g.length>1||i.Pa||i.g.length>0&&i.g[0].l!=1){return E$s}if(i.A=="*"||i.A=="QH"||i.A=="AH"||i.A=="XH"){return E$p}if(i.U.length>1){for(var h=0,g=i.U.length;h<g;h++){if(i.U[h]==1){return E$p}}}return E$s}function E$lf(e){return e.b.x}function E$mf(e){return e.b.y}function E$yd(e){return e=="C"||e=="H"?"#000":e=="O"?"#f00":e=="N"?"#00f":e=="S"?"orange":e=="P"?"magenta":e=="F"?"green":e=="Cl"?"green":e=="Br"?"#A62929":e=="I"?"#990099":(e.indexOf("R")!=0?0:!isNaN(e.substring(1)))?"#000":e=="*"||e=="A"||e=="AH"||e=="Q"||e=="QH"||e=="X"||e=="XH"||e=='*"'?"#000":"#f00"}E$v.He=function(e){this.Na=e;this.Cb=this.nb=0};E$v.Je=function(e){this.Na=0;this.nb=e;this.Cb=0};E$v.jf=function(e){if(e){this.nb=this.Na=0}this.Cb=e};function E$be(i,h){h==E$q&&(h="C");h=h.trim();if(h.indexOf("R")!=0?0:!isNaN(h.substring(1))){E$ee(i);i.na=parseInt(h.substring(1))}else{i.vb=E$s;if(h.indexOf("Gen=")==0){i.vb=h.substring(4);if(i.vb=="A"||i.vb=="Q"){i.A=i.vb;i.vb=E$s}}else{if(i.A==h){if(i.Rc!=E$p&&i.Rc>=1){var g=i.Rc-1;i.Rc=g>1?g:E$s}else{if(i.Rc==E$p){i.Rc=E$Ue(i);if(i.Rc<=0){i.Rc=E$s}}else{i.Rc=E$p}}}i.A=h}i.na=0;i.U.length=0;i.$a=0;E$Ng(i);if(E$Fa&&E$Tf(E$ae(h))&&i.g.length==0){i.Cb=-1}}}function E$Af(e){return e.abbr&&E$Sf(e.abbr)&&e.abbr.sb!=e||e.hidden?E$p:E$s}function E$Qf(g){var f=E$q;if(g.ah){return g.A}if(g.A=="*"){for(f=0;f<g.g.length;f++){if(g.g[f].qg){return E$q}}return g.A}if(g.A!="C"||g.Na!=0||g.g.length==0||g.$a>0||g.nb>0){f=g.A}else{if(E$Rf(g)){f=g.A}}g.A=="H"&&g.$a>0&&(g.$a==2?f="D":g.$a==3&&(f="T"));if(g.U.length>0){f=E$Hh(g,4);g.nc==E$p&&(f="!"+f)}g.na>0&&(f="R"+g.na);if(g.abbr&&!g.abbr.$b){f=g.abbr.label}if(g.vb){f=g.vb}if(g.cc!=E$q||g.ob!=E$q||g.lb!=E$q||g.Oa!=E$q||g.Tc==1){f=f==E$q?"?":f+"?";g.cc!=E$q&&(f=g.cc?f+"Ar":f+"Al");g.ob!=E$q&&(f=f+("R"+g.ob));g.lb!=E$q&&(f=f+("S"+g.lb));g.Oa!=E$q&&(f=f+("H"+g.Oa));g.Tc==1&&(f=f+"U")}g.nb==2?f=f+".":g.nb==1?f=f+":":g.nb==3&&(f="."+f+".");return f}function E$ff(D,C,B){for(var z=new E$Q,y=[],v=0,s=D.g.length;v<s;v++){var r=E$R(D.g[v],D),q=E$W(r.b,D.b);q.K();z.add(q);y.push(r)}if(D.ja){for(v=0;v<D.ja.length;v++){if(s=D.ja[v]){r=E$R(s,D);q=E$W(r.b,D.b);q.K();z.add(q);y.push(r)}}}if(y.length==1){if(D.g[0].l==3){z.K();z.scale(C);return z}r=y[0];z.rotate(60);if(r.g.length==2){var v=E$ff(r,1),p=E$Lh(z,v);(p<0&&!B||p>0&&B)&&z.rotate(-120)}else{v=new E$Q(z.x,z.y);v.rotate(-120);if(E$Wb(z.x+v.x)<0.001){if(!B&&z.x<0||B&&v.x<0){z.K();z.scale(C);return z}v.K();v.scale(C);return v}if((D=E$Wb(z.x)>E$Wb(v.x))&&!B||!D&&B){z.K();z.scale(C);return z}v.K();v.scale(C);return v}}if(y.length==3){B=E$p;v=0;for(s=y.length;v<s;v++){if(y[v].g.length!=1){B=E$s;break}}if(!B){v=0;for(s=y.length;v<s;v++){for(var B=0,L=y.length;B<L;B++){if(v!=B&&y[v].g.length==1&&y[B].g.length==1){var J=E$W(D.b,y[v].b),p=E$W(D.b,y[B].b);J.K();p.K();E$Eh(z,J,p);r=0;for(s=y.length;r<s;r++){if(r!=v&&r!=B){break}}D=new E$W(D.b,y[r].b);D.K();E$Lh(z,D)>0&&E$$g(z);z.K();z.scale(C);return z}}}}}if(y.length>2){var G=E$q,r=E$q,E=2,o=y[0],J=E$W(D.b,o.b);J.K();v=0;for(s=y.length;v<s;v++){for(var K=-2,q=E$q,B=0,L=y.length;B<L;B++){if(o!=y[B]){p=E$W(D.b,y[B].b);p.K();var I=E$Mh(p,J);if(I.oa>0){p=E$Lh(J,p);if(p>K){q=y[B];K=p}}}}if(q==E$q){E$$g(J);B=0;for(L=y.length;B<L;B++){if(o!=y[B]){p=E$W(D.b,y[B].b);p.K();I=E$Mh(p,J);if(I.oa>=0){p=E$Lh(J,p);if(p>K){q=y[B];K=p}}}}y=E$W(o.b,D.b);v=E$W(q.b,D.b);y.K();v.K();E$Eh(z,y,v);if(E$Dh(z)){y.rotate(90);z.set(y)}z.K();z.scale(C);return z}if(K<E){E=K;G=o;r=q}o=q;J=E$W(D.b,o.b);J.K()}y=E$W(D.b,G.b);v=E$W(D.b,r.b);y.K();v.K();E$Eh(z,y,v);if(E$Dh(z)){v.rotate(90);z.set(v)}z.K();z.scale(C);return z}if(E$Dh(z)){if(y.length==2){D=E$W(y[0].b,D.b);D.rotate(90);z.x=D.x;z.y=D.y}else{window.status="null sprout";z.x=1;z.y=0}}z.K();z.scale(C);return z}function E$hg(n){for(var m=0,l=0,k=n.g.length;l<k;l++){var i=n.g[l],m=i.l<4?m+i.l:m+1}return m}function E$Nh(n,m){for(var l=0,k=n.g.length;l<k;l++){var i=n.g[l];if(E$R(i,n)==m){return i}}return E$q}E$v.Jf=function(){for(var g=0,f=this.g.length;g<f;g++){if(this.g[g].o>0&&this.g[g].l==1){return E$p}}return E$s};function E$Oh(){this.type=this.l=1;this.Ld=0;this.k=this.j=E$q;this.jc=this.Q=this.yc=this.kg=this.selected=this.M=this.o=0;this.xb=E$q}var E$Of=0,E$O=1,E$jd=3,E$kd=4,E$ld=6;E$Oh.prototype.Za=function(i){var h=this.id,g;for(g in i){if(i[g]==E$q||typeof i[g]!="object"){this[g]=i[g]}}this.id=h};function E$$d(i,h,g){i.l=1;i.type=1;if(i.o==h&&i.M==g){h=i.j;i.j=i.k;i.k=h}else{i.o=h;i.M=g}}E$Oh.prototype.Xb=function(){this.j.e.Af&&E$Gh(this.k.e);return this.Ld};function E$R(g,f){if(g.j==f){return g.k}if(g.k==f){return g.j}}function E$Ff(g){var f=new E$Q;f.x=0.5*(g.j.b.x+g.k.b.x);f.y=0.5*(g.j.b.y+g.k.b.y);return f}function E$Hf(i,h){var g=E$W(i.j.b,i.k.b);g.K();g.scale(h);return g}function E$Kf(l,k){var i=E$W(l.j.b,l.k.b),h=i.length()/k;i.K();i.scale(h);return i}function E$qf(v,u,t){u=E$Hf(v,u);u.rotate(90);for(var s=new E$Q,t=t&&v.Xb(),r=0;r<2;r++){for(var q=r==0?v.j:v.k,p=0,o=q.g.length;p<o;p++){var n=q.g[p];if(n!=v&&(!t||n.Xb())){n=E$W(E$R(n,q).b,q.b);s.x=s.x+n.x;s.y=s.y+n.y}}}!E$Dh(s)&&s.Cf(u)>0&&E$$g(u);return u}function E$Ha(){this.f=[];this.g=[];this.v=[];this.F=[];this.u=[];this.tb=[];this.yc=[];this.yf=[];this.r=[];this.Af=1;this.q=E$q;this.gc="black";this.Hb="";this.ba={};this.jb=0}function E$Ph(l){for(var k=0,i=l.F.length-1;i>=0;i--){var h=l.F[i];if(h.selected){E$Qh(l,h);k++}}for(i=l.v.length-1;i>=0;i--){h=l.v[i];if(h.selected){E$Rh(l,h);k++}}for(i=l.u.length-1;i>=0;i--){h=l.u[i];if(h.selected){l.Yd(h);k++}}for(i=l.r.length-1;i>=0;i--){h=l.r[i];if(h.selected){E$Sh(l,h);k++}}return k=k+E$Th(l)}function E$Th(l){for(var k=0,i=l.g.length-1;i>=0;i--){var h=l.g[i];if(h.selected){l.wd(h);k++}}for(i=l.f.length-1;i>=0;i--){h=l.f[i];if(h.selected){E$Uh(l,h);k++}}return k}E$v=E$Ha.prototype;E$v.empty=function(){this.f.length=0;this.g.length=0;this.v.length=0;this.F.length=0;this.u.length=0;this.ba={};this.r.length=0;this.$=E$q;this.label="";this.jb=0;delete this.name;delete this.ee;E$vh(this)};function E$wc(r,q){for(var p=r.f.length,o=r.g.length,n=0,m=q.f.length;n<m;n++){var l=q.f[n];E$ch(r).Za(l)}n=0;for(m=q.g.length;n<m;n++){l=q.g[n];r.Ga(r.f[p+l.j.id],r.f[p+l.k.id],l.l,l.o).Za(l)}n=0;for(m=q.u.length;n<m;n++){l=q.u[n];E$sh(r).Za(l);r.ba[l.V]=q.ba[l.V]}E$uh(q,r,p,o)}function E$Vh(r,q){for(var p=new E$Ha,o=0,n=0,m=r.f.length;n<m;n++){var l=r.f[n];if(l.tc){l.Bb=E$o}else{E$ch(p).Za(l);l.Bb=o++}}E$Wh(r,p);p.Ta=r.Ta;q&&E$th(r,p);E$Xh(p);E$Yh(p);return p}function E$Zh(r,q){for(var p=new E$Ha,o=0,n=0,m=r.f.length;n<m;n++){var l=r.f[n];if(l.Sc==q){E$ch(p).Za(l);l.Bb=o++}else{l.Bb=E$o}}E$Wh(r,p);E$Xh(p);E$Yh(p);return p}function E$Wh(r,q){for(var p=0,o=0,n=r.g.length;o<n;o++){var m=r.g[o];if(m.j.Bb!=E$o&&m.k.Bb!=E$o){q.Ga(q.f[m.j.Bb],q.f[m.k.Bb],m.l,m.o).Za(m);m.Bb=p++}else{m.Bb=E$o}}for(p=0;p<r.r.length;p++){var l=m=0,n=r.r[p];n.sb&&(n.sb.Bb!=E$o?m++:l++);if(n.f){for(o=0;o<n.f.length;o++){n.f[o].Bb!=E$o?m++:l++}}if(n.Ya){for(o=0;o<n.Ya.length;o++){n.Ya[o].Bb!=E$o?m++:l++}}if(n.g){for(o=0;o<n.g.length;o++){n.g[o].Bb!=E$o?m++:l++}}if(m>0){if(l==0){m=new E$mi(n.type,n.id);m.Za(n);q.r.push(m);m.id=q.r.length;for(o=0;o<n.f.length;o++){m.f.push(q.f[n.f[o].Bb])}for(o=0;o<n.g.length;o++){m.g.push(q.g[n.g[o].Bb])}if(n.g.left){m.g.left=[];for(o=0;o<n.g.left.length;o++){m.g.left.push(q.g[n.g.left[o].Bb])}}if(n.g.right){m.g.right=[];for(o=0;o<n.g.right.length;o++){m.g.right.push(q.g[n.g.right[o].Bb])}}for(o=0;o<n.Ya.length;o++){m.Ya.push(q.f[n.Ya[o].Bb])}}else{console.log("sgroup "+n.id+" has atoms/bonds both inside and outside a component. Should never happen")}}}}function E$Yh(g){for(var f=0;f<g.g.length;f++){g.g[f].id=f}}function E$Xh(g){for(var f=0;f<g.f.length;f++){g.f[f].id=f}}function E$ni(r,q){for(var p=new E$Ha,o=0,n=0,m=r.f.length;n<m;n++){var l=r.f[n];if(l.ai==q){E$ch(p).Za(l);l.Bb=o++}else{l.Bb=E$o}}E$Wh(r,p);E$Xh(p);E$Yh(p);return p}function E$th(p,o){for(var n=0,m=p.v.length;n<m;n++){var l=p.v[n],k=E$Xd(o);k.start.x=l.start.x;k.start.y=l.start.y;k.end.x=l.end.x;k.end.y=l.end.y;k.style=l.style;k.selected=l.selected}n=0;for(m=p.F.length;n<m;n++){l=p.F[n];k=E$Yd(o);k.b.x=l.b.x;k.b.y=l.b.y;k.selected=l.selected}}function E$uh(t,s,r,q){r||(r=0);q||(q=0);for(var p=0;p<t.r.length;p++){var o=t.r[p],n=new E$mi(o.type,o.id);n.Za(o);s.r.push(n);if(r>0){n.id=s.r.length}for(a=0;a<o.f.length;a++){n.f.push(s.f[r+o.f[a].id])}for(b=0;b<o.g.length;b++){n.g.push(s.g[q+o.g[b].id])}if(o.g.left){n.g.left=[];for(b=0;b<o.g.left.length;b++){n.g.left.push(s.g[q+o.g.left[b].id])}}if(o.g.right){n.g.right=[];for(b=0;b<o.g.right.length;b++){n.g.right.push(s.g[q+o.g.right[b].id])}}for(a=0;a<o.Ya.length;a++){n.Ya.push(s.f[r+o.Ya[a].id])}if(n.type=="SUP"){for(a=0;a<n.f.length;a++){n.f[a].abbr=n}for(a=0;a<n.g.length;a++){var m=n.g[a];if(E$si(n,m.j)&&!E$si(n,m.k)){n.sb=m.j}else{if(!E$si(o,m.j)&&E$si(n,m.k)){n.sb=m.k}}}}}}E$v.copy=function(){var l=new E$Ha;l.Vc=this.Vc;for(var k=0,i=this.f.length;k<i;k++){var h=this.f[k];E$ch(l).Za(h)}k=0;for(i=this.g.length;k<i;k++){h=this.g[k];l.Ga(l.f[h.j.id],l.f[h.k.id],h.l,h.o).Za(h)}E$th(this,l);k=0;for(i=this.u.length;k<i;k++){h=this.u[k];E$sh(l).Za(h)}i=Object.keys(this.ba);for(k=0;k<i.length;k++){l.ba[i[k]]=this.ba[i[k]]}if(this.Pb!=E$q&&this.Pb!=E$o){l.Pb=this.Pb}E$uh(this,l);return l};function E$ti(x,w){var v=new E$Ha;v.Vc=x.Vc;for(var u=0,t=[],s=0,r=0,q=x.f.length;r<q;r++){var p=x.f[r];if(E$ui(w,p)!=-1){var o=E$ch(v);t[r]=u;u++;o.Za(p);o.selected=0}}u=0;for(q=x.g.length;u<q;u++){r=x.g[u];if(E$ui(w,r.j)!=-1&&E$ui(w,r.k)!=-1){p=v.Ga(v.f[t[r.j.id]],v.f[t[r.k.id]],r.l,r.o,r.M);p.Za(r);p.selected=0;s++}}return v}function E$Ne(y,x){var w=new E$Ha;w.Vc=y.Vc;for(var v=0,u=[],s=[],r=0,q=0,p=y.f.length;q<p;q++){var o=y.f[q];if(o.selected){var z=E$ch(w);u[q]=v;v++;z.Za(o);z.selected=0}}q=0;for(p=y.g.length;q<p;q++){v=y.g[q];if(v.j.selected&&v.k.selected){o=w.Ga(w.f[u[v.j.id]],w.f[u[v.k.id]],v.l,v.o,v.M);o.Za(v);o.selected=0;s[q]=r;r++}}q=0;for(p=y.F.length;q<p;q++){r=y.F[q];if(r.selected){v=E$Yd(w);v.b.x=r.b.x;v.b.y=r.b.y}}q=0;for(p=y.v.length;q<p;q++){r=y.v[q];if(r.selected){v=E$Xd(w,r.type,r.color);v.start.x=r.start.x;v.start.y=r.start.y;v.end.x=r.end.x;v.end.y=r.end.y}}q=0;for(p=y.u.length;q<p;q++){r=y.u[q];if(r.selected){E$sh(w,r);w.ba[r.V]=y.ba[r.V]}}q=0;for(p=y.r.length;q<p;q++){r=y.r[q];if(!x&&r.selected||E$Sf(r)&&r.sb.selected){v=new E$mi(r.type,r.id);v.Za(r);v.selected=0;w.r.push(v);v.g=[];for(o=0;o<r.f.length;o++){v.f.push(w.f[u[r.f[o].id]])}for(o=0;o<r.g.length;o++){v.g.push(w.g[s[r.g[o].id]])}if(r.g.left){v.g.left=[];for(o=0;o<r.g.left.length;o++){v.g.left.push(w.g[s[r.g.left[o].id]])}}if(r.g.right){v.g.right=[];for(o=0;o<r.g.right.length;o++){v.g.right.push(w.g[s[r.g.right[o].id]])}}if(v.type=="SUP"){for(o=0;o<v.f.length;o++){v.f[o].abbr=v}v.sb=w.f[u[r.sb.id]];E$vi(v,v.$b)}}}return w}function E$vh(e){e.Af=1}function E$ch(g){var f=new E$Fh;f.A="C";f.id=g.f.length;g.f.push(f);f.e=g;E$vh(g);return f}function E$xi(l,k,i,h){return h?E$Xd(l,k,i):l.v.length==0?E$Xd(l,k,i):l.v[0]}function E$Xd(i,h,g){h=new E$yi(h,g);h.e=i;i.v.push(h);return h}function E$Yd(g){var f=new E$zi;g.F.push(f);g.e=g;return f}E$v.shift=function(l,k,i){i&&E$Ai(this);for(var i=0,h=this.f.length;i<h;i++){this.f[i].b.x=this.f[i].b.x+l;this.f[i].b.y=this.f[i].b.y+k}};function E$rh(p,o,n){for(var m=0,l=p.f.length;m<l;m++){var k=p.f[m];if(E$Xg(k.b,o,n)<0.2){return k}}p=E$ch(p);p.b.x=o;p.b.y=n;return p}function E$qh(p,o,n){for(var m=0,l=p.f.length;m<l;m++){var k=p.f[m];if(E$Xg(k.b,o,n)<0.2){return k}}return E$q}function E$Bi(n,m){for(var l=0,k=n.f.length;l<k;l++){var i=n.f[l];if(i!=m&&i.b.x==m.b.x&&i.b.y==m.b.y){return i}}return E$q}function E$Wg(x,w,v){for(var u=E$q,t=10000000,s=0;s<x.r.length;s++){var r=x.r[s];if(r.type=="SUP"){if(E$xh(new E$Q(w,v),r.coords[0].va-10,r.coords[0].Ea+10,r.coords[2].va+10,r.coords[2].Ea-10)){return r}}else{for(var q=0,p=r.coords.length-1;q<p;q=q+2){var o=E$Vg(r.coords[q].va,r.coords[q].Ea,r.coords[q+1].va,r.coords[q+1].Ea,w,v);if(o<t&&o<10){t=o;u=r}}}}return u}function E$Tg(r,q,p){var o=r.D.getContext("2d");r.font=r.i.textBoxFont;o.font=r.Ja+"px "+r.font;for(var p=p.ba[q.V].split("\n"),n=o.measureText(q.Ze?p[0]:q.V+": "+p[0]).width,m=1;m<p.length;m++){var l=o.measureText(p[m]).width;l>n&&(n=l)}q.width=n;q.height=r.Ja*p.length}function E$Ug(z,y,x,w){for(var v=E$q,s=100000000,r=0,q=z.f.length;r<q;r++){var p=z.f[r];if(!E$Af(p)){var o=E$Wb(p.b.x-y.ha),B=E$Wb(p.b.y-y.ia),A=o*o+B*B;if(w&&z.f[r].Vb&&z.f[r].Vb.length>0){o=z.f[r].Vb;if(y.x>o[0]&&y.x<o[2]&&y.y>o[1]&&y.y<o[3]&&A<s){s=A;v=p}}else{if(o<x&&B<x&&A<s){s=A;v=p}}}}return v}function E$Ef(p,o,n){for(var m=0,l=p.g.length;m<l;m++){var k=p.g[m];if(k.j==o&&k.k==n||k.j==n&&k.k==o){return k}}return E$q}E$v.Ga=function(p,o,n,m,l){if(p==o){return E$q}var k=E$Ef(this,p,o);if(k!=E$q){return k}k=new E$Oh;k.j=p;k.k=o;k.l=n;k.type=n;k.o=m;k.M=l!=E$o?l:0;k.id=this.g.length;p.g.push(k);o.g.push(k);this.g.push(k);if(p.Cb==-1){p.Cb=0}if(o.Cb==-1){o.Cb=0}E$vh(this);E$ce(this);return k};function E$Ci(l,k){for(var i=l.r.length-1;i>=0;i--){var h=l.r[i];for(j=h.g.length-1;j>=0;j--){if(h.g[j]==k){E$Yc(h.g,k);if(h.type!="DAT"&&h.type!="SUP"){E$Yc(l.r,h);break}}}}}function E$Uh(r,q,p){for(var o=0;o<r.r.length;o++){var n=r.r[o];for(j=n.f.length-1;j>=0;j--){if(n.f[j]==q){E$Yc(n.f,q);if(q.abbr&&q.abbr.sb==q){var m=r,l=n;if(l.type=="SUP"){for(j=l.f.length-1;j>=0;j--){l.f[j]!=l.sb&&E$Uh(m,l.f[j])}}E$Yc(r.r,n);break}}}}for(o=q.g.length-1;o>=0;o--){n=q.g[o];m=E$R(n,q);E$Yc(q.g,n);E$Yc(m.g,n);E$Yc(r.g,n);E$Ci(r,n)}E$Yc(r.f,q);if(!p){E$Xh(r);E$Yh(r)}if(r.f.length==0){r.jb=0}E$ce(r);E$vh(r)}E$v.wd=function(g,f){E$Yc(g.j.g,g);E$Yc(g.k.g,g);E$Yc(this.g,g);E$Ci(this,g);if(!f){g.j.g.length==0&&E$Uh(this,g.j);g.k.g.length==0&&E$Uh(this,g.k)}E$Yh(this);E$Ng(g.j);E$Ng(g.k);E$ce(this);E$vh(this)};function E$Rh(g,f){E$Yc(g.v,f);E$vh(g)}function E$Qh(g,f){E$Yc(g.F,f);E$vh(g)}function E$Sh(g,f){E$Yc(g.r,f);E$vh(g)}E$v.Yd=function(e){e.Ze&&delete this.ba[e.V];E$Yc(this.u,e);E$vh(this)};function E$fh(x,w,v,u,t){var s=x.length,r=new E$Ha,q=0.5/E$ac(E$fc/s),p=2*E$fc/s,v=v*E$fc/180;u&&(v=v-p*0.5);if(t){var o=E$ch(r)}for(u=0;u<s;u++){o=E$ch(r);if(w!=E$q){o.A=w[u]}o.b.x=q*E$$b(v);o.b.y=q*E$ac(v);v=v+p}w=0;t&&(w=1);for(u=0;u<s;u++){q=r.Ga(r.f[u+w],r.f[(u+1)%s+w],1,0);q.l=x[u];q.type=x[u]}if(t){r.Ga(r.f[0],r.f[1],1,0);x=new E$Q(r.f[1].b.x,r.f[1].b.y);x.K();r.f[0].b.x=r.f[1].b.x+x.x;r.f[0].b.y=r.f[1].b.y+x.y}E$Di(r);E$Ei(r);return r}function E$Di(l){for(var k=0,i=l.f.length;k<i;k++){l.f[k].save.x=l.f[k].b.x;l.f[k].save.y=l.f[k].b.y}for(k=0;k<l.r.length;k++){for(i=0;i<l.r[k].coords.length;i++){if(!l.r[k].save){l.r[k].save=[]}l.r[k].save[i]=new E$Q(l.r[k].coords[i].x,l.r[k].coords[i].y)}}k=0;for(i=l.v.length;k<i;k++){var h=l.v[k];if(!h.save){h.save=[]}h.save[0]=new E$Q(h.start.x,h.start.y);h.save[1]=new E$Q(h.end.x,h.end.y)}k=0;for(i=l.F.length;k<i;k++){h=l.F[k];h.save=new E$Q(h.b.x,h.b.y)}k=0;for(i=l.u.length;k<i;k++){h=l.u[k];h.save=new E$Q(h.b.x,h.b.y)}}function E$Ai(l){for(var k=0,i=l.f.length;k<i;k++){l.f[k].b.x=l.f[k].save.x;l.f[k].b.y=l.f[k].save.y}for(k=0;k<l.r.length;k++){for(i=0;i<l.r[k].save.length;i++){l.r[k].coords[i].x=l.r[k].save[i].x;l.r[k].coords[i].y=l.r[k].save[i].y}}k=0;for(i=l.v.length;k<i;k++){var h=l.v[k];h.start.x=h.save[0].x;h.start.y=h.save[0].y;h.end.x=h.save[1].x;h.end.y=h.save[1].y}k=0;for(i=l.F.length;k<i;k++){h=l.F[k];h.b.x=h.save.x;h.b.y=h.save.y}k=0;for(i=l.u.length;k<i;k++){h=l.u[k];h.b.x=h.save.x;h.b.y=h.save.y}}function E$Ei(l){for(var k=0,i=l.f.length;k<i;k++){l.f[k].hb.x=l.f[k].b.x;l.f[k].hb.y=l.f[k].b.y}for(k=0;k<l.r.length;k++){for(i=0;i<l.r[k].coords.length;i++){if(!l.r[k].hb){l.r[k].hb=[]}l.r[k].hb[i]=new E$Q(l.r[k].coords[i].x,l.r[k].coords[i].y)}}k=0;for(i=l.v.length;k<i;k++){var h=l.v[k];if(!h.hb){h.hb=[]}h.hb[0]=new E$Q(h.start.x,h.start.y);h.hb[1]=new E$Q(h.end.x,h.end.y)}k=0;for(i=l.F.length;k<i;k++){h=l.F[k];h.hb=new E$Q(h.b.x,h.b.y)}k=0;for(i=l.u.length;k<i;k++){h=l.u[k];h.hb=new E$Q(h.b.x,h.b.y)}}function E$Fi(l){for(var k=0,i=l.f.length;k<i;k++){l.f[k].b.x=l.f[k].hb.x;l.f[k].b.y=l.f[k].hb.y}for(k=0;k<l.r.length;k++){for(i=0;i<l.r[k].hb.length;i++){l.r[k].coords[i].x=l.r[k].hb[i].x;l.r[k].coords[i].y=l.r[k].hb[i].y}}k=0;for(i=l.v.length;k<i;k++){var h=l.v[k];h.start.x=h.hb[0].x;h.start.y=h.hb[0].y;h.end.x=h.hb[1].x;h.end.y=h.hb[1].y}k=0;for(i=l.F.length;k<i;k++){h=l.F[k];h.b.x=h.hb.x;h.b.y=h.hb.y}k=0;for(i=l.u.length;k<i;k++){h=l.u[k];h.b.x=h.hb.x;h.b.y=h.hb.y}}function E$Gi(p,o,n,m,l,k){if(o==E$q){return E$q}if(n==3&&o.g.length){l=E$W(E$R(o.g[0],o).b,o.b);l.K();l.scale(1)}else{l=E$ff(o,1,l)}l=E$rh(p,o.b.x+l.x,o.b.y+l.y);return p.Ga(o,l,n,m,k)}function E$Hi(l){for(var k=[],i=0;i<l.Ic.length;i++){var h=l.Ic[i],h=E$ni(l,h);E$vc(h);k.push(h)}for(i=0;i<l.Hc.length;i++){h=l.Hc[i];h=E$ni(l,h);E$vc(h);k.push(h)}k.sort(function(g,f){return g.$-f.$});return k}function E$Ii(B,A,z,y){var v=-99999999,s=99999999,r=0;if(B.v.length==0&&(!z||!y)){for(var y=0,q=B.u.length;y<q;y++){var p=B.u[y];p.fd=E$o}return E$q}for(var z=z?z:B.v[0].start.x,o=y?y:B.v[0].end.x,y=0,q=B.u.length;y<q;y++){p=B.u[y];p.fd=E$o;var F=E$Bb(A,p.b.va+p.width);if(p.b.x>z&&F<o){p.fd=1}else{var E;E=F;var D=o,C=E$Xb(p.b.x,z);E=E$Yb(E,D)-C;if(E/(F-p.b.x)>0.5||E/(o-z)>0.5){p.fd=1}}if(p.fd){r=1;F>v&&(v=F);if(p.b.x<s){s=p.b.x}}}return r?[s,v]:E$q}function E$Ji(P,N){E$vc(P);E$Ki(P);var M=4,L=E$Ii(P,N);if(L){L=L[1]-L[0];L>1.5&&(M=L+2.5)}for(var L=P.Ic.length,K=P.Hc.length,J=E$Hi(P),G=new E$Ha,E=0,D=[],C=[],z=0,y=J.length;z<y;z++){var s=2,q=J[z];E$vc(G,E$p);E$vc(q,E$p);if(E==L){var s=M,B=E$Xd(G);B.start.x=G.I+1;B.end.x=G.I+s-1;B.start.y=G.rb;B.end.y=G.rb}else{if(E>0&&E!=L){B=E$Yd(G);B.b.x=G.I+0.5*s;B.b.y=G.rb}}for(var s=G.I-q.$+s,B=0.5*(G.wa+G.ra)-0.5*(q.ra+q.wa),v=0,r=q.f.length;v<r;v++){var p=q.f[v];p.b.x=p.b.x+s;p.b.y=p.b.y+B}D.push(s);C.push(B);E$wc(G,q);E++}s=0.5*(G.$+G.I)-0.5*(P.$+P.I);B=0.5*(G.ra+G.wa)-0.5*(P.ra+P.wa);v=0;for(y=P.u.length;v<y;v++){E=P.u[v];p=E$sh(G);p.Za(E);G.ba[E.V]=P.ba[E.V];if(!E.fd){for(var o=-1,z=0,r=J.length;z<r;z++){var q=J[z],O=E$Bb(N,E.b.va+E.width);if(O-E.b.x>q.I-q.$){if(q.$>E.b.x&&q.I<O){o=z;break}}else{if(E.b.x<xmins[z]){q=E$Wb(xmins[z]-E.b.x);if(q<closest){closest=q;o=z}}}}if(o>-1){p.b.x=p.b.x+D[o];p.b.y=p.b.y+C[o]}else{if(!E.fd){p.b.x=p.b.x+s;p.b.y=p.b.y+B}}}}E$vc(G,E$p);if(K==0){s=M;B=E$Xd(G);B.start.x=G.I+1;B.end.x=G.I+s-1;B.start.y=G.rb;B.end.y=G.rb;G.I=G.I+M;G.sd=G.sd+M;G.Tg=G.Tg+M/2;G.kf=E$p}s=(G.v[0].end.x+G.v[0].start.x)/2-(P.v[0].end.x+P.v[0].start.x)/2;B=(G.v[0].end.y+G.v[0].start.y)/2-(P.v[0].end.y+P.v[0].start.y)/2;v=0;for(y=G.u.length;v<y;v++){E=G.u[v];if(E.fd){E.b.x=E.b.x+s;E.b.y=E.b.y+B}}if(L==0){G.$=G.$-M;G.sd=G.sd+M;G.Tg=G.Tg-M/2;G.kf=E$p}return G}function E$pc(aa,X,W){var T=new E$Ha,X=X.replace(/\r/g,""),R,Q=X.substring(0,1000).split("\n"),P=Q[4],N,M=E$s;if(Q[0].indexOf("V3000")!=-1||Q[0].indexOf("v3000")!=-1){R=X.split(/M  V30 BEGIN CTAB/);M=P.split(/\s+/);Q=parseInt(M[3]);N=parseInt(M[4]);M=E$p}else{R=X.split("$MOL\n");Q=parseInt(P.substring(0,3));N=parseInt(P.substring(3,6))}var L=Q+N,G=0,E=[],C=[],z=[],J=[],D=[],B=[],y=P=E$s,p=0,Z=-1,ab=-1,O;O=M?E$Li(R[L],!W):E$lc(R[L],E$s,!W);if(typeof W!="object"&&(O.F.length>0||O.v.length>0)||O.v.length>1){W=E$s}for(var q=1;q<=L;q++){var r=2;O=M?E$Li(R[q],!W):E$lc(R[q],E$s,!W);E$vc(T,E$p);E$vc(O,E$p);if(W){if(G==0&&Q>0){Z=G}else{if(G<Q){for(var U=0;U<J.length;U++){if(O.I>J[U]){Z=G;break}}}else{if(G==Q){ab=G}else{for(U=Q;U<z.length;U++){if(O.$<z[U]){ab=G;break}}}}}if(G==Q){p=T.f.length;if(typeof W=="object"){if(W.extraPlus&&Q>0){var o=E$Yd(T);o.b.x=T.I+0.5*r;o.b.y=T.rb;T.I=T.I+r}if(typeof W.gap=="number"){T.I=T.I+W.gap}}o=E$Xd(T);r=4;o.start.x=T.I+1;o.end.x=T.I+r-1}else{if(G>0&&G!=Q){o=E$Yd(T);o.b.x=T.I+0.5*r}}for(var U=T.I-O.$+r,s=0.5*(T.wa+T.ra)-0.5*(O.ra+O.wa),r=0,o=O.f.length;r<o;r++){var v=O.f[r];v.b.x=v.b.x+U;v.b.y=v.b.y+s}r=0;for(o=O.r.length;r<o;r++){v=O.r[r];if(v.type=="DAT"){if(v.oe){v.coords[0].x=v.coords[0].x+U;v.coords[0].y=v.coords[0].y+s}}else{if(v.coords.length>0){for(var K=0;K<v.coords.length;K++){v.coords[K].x=v.coords[K].x+U;v.coords[K].y=v.coords[K].y+s}}}}E.push(U);C.push(s);if(G>=Q){r=0;for(o=O.r.length;r<o;r++){O.r[r].Dg=E$p}r=0;for(o=O.u.length;r<o;r++){O.u[r].Dg=E$p}}}else{if(G>=Q){r=B.length;B.push({index:r,$:O.$,I:O.I})}else{r=D.length;D.push({index:r,$:O.$,I:O.I})}}E$wc(T,O);if(!W){E$th(O,T);O.v.length>0&&(P=E$p);O.F.length>0&&(y=E$p)}z.push(O.$);J.push(O.I);G++}L=-1;M&&(L=X.indexOf("M  V30 BEGIN RGROUP"));G=E$q;O=4;U=E$s;if(W&&L==-1){q=100000000000000000000;o=-100000000000000000000;ab!=-1?q=z[ab]:Z!=-1&&(q=J[Z]+10);Z!=-1?o=J[Z]:ab!=-1&&(o=z[ab]-10);if(!(Q==0&&N==0)&&q>o){U=E$p;r=0;for(D=T.u.length;r<D;r++){B=T.u[r];E$Tg(aa,B,T);B.b.va=E$U(aa,B.b.x);B.b.Ea=E$T(aa,B.b.y)}if(q=E$Ii(T,aa,o,q)){q=q[1]-q[0];if(q>1.5){O=q+2.5;G=O-4}}}r=0;for(D=T.u.length;r<D;r++){B=T.u[r];T.ba[B.V]=T.ba[B.V];if(!B.fd){s=-1;v=9999;q=0;for(o=R.length;q<o;q++){if(B.b.x>z[q]&&B.b.x<J[q]){s=q;break}if(B.b.x<z[q]){K=E$Wb(z[q]-B.b.x);if(K<v){v=K;s=q}}}if(s>-1){B.b.x=B.b.x+E[s];B.b.y=B.b.y+C[s]}}}}else{if(!W){if(!P){R=-99999999;z=99999999;for(q=0;q<D.length;q++){if(D[q].I>R){R=D[q].I}}for(q=0;q<B.length;q++){if(B[q].$<z){z=B[q].$}}o=E$Xd(T);if(D.length==0&&B==0){o.start.x=0;o.end.x=2}else{if(D.length==0){o.start.x=z-3;o.end.x=z-1}else{if(B==0){o.start.x=R+1;o.end.x=R+3}else{r=(z-R)/4;o.start.x=R+r;o.end.x=R+3*r}}}}if(!y){D.sort(function(g,f){return g.$-f.$});for(q=1;q<D.length;q++){o=E$Yd(T);o.b.x=(D[q-1].I+D[q].$)/2}B.sort(function(g,f){return g.$-f.$});for(q=1;q<B.length;q++){o=E$Yd(T);o.b.x=(B[q-1].I+B[q].$)/2}}}}if(W&&N==0){E$vc(T,E$p);r=2;if(typeof W=="object"){if(W.extraPlus){o=E$Yd(T);o.b.x=T.I+0.5*r;o.b.y=T.rb;T.I=T.I+r}if(typeof W.gap=="number"){T.I=T.I+W.gap}}r=O;o=E$Xd(T);o.start.x=T.I+1;o.end.x=T.I+r-1;o.start.y=T.rb;o.end.y=T.rb;T.I=o.end.x;T.kf=E$p}else{if(W&&G!=E$q){for(r=p;r<T.f.length;r++){T.f[r].b.x=T.f[r].b.x+G}T.v[0].end.x=T.v[0].end.x+G;if(Q>0){for(r=Q-1;r<T.F.length;r++){T.F[r].b.x=T.F[r].b.x+G}}r=0;for(o=T.r.length;r<o;r++){v=T.r[r];if(v.Dg){if(v.type=="DAT"){if(v.oe){v.coords[0].x=v.coords[0].x+G}}else{if(v.coords.length>0){for(K=0;K<v.coords.length;K++){v.coords[K].x=v.coords[K].x+G}}}}}r=0;for(o=T.u.length;r<o;r++){B=T.u[r];if(!B.fd&&B.Dg){B.b.x=B.b.x+G}}}E$vc(T,E$p);if(Q==0&&W&&typeof W=="object"&&typeof W.gap=="number"){T.$=0}}if(W&&U){if(N==0){U=E[Z];s=C[Z]}else{if(Q==0){U=E[ab];s=C[ab]}else{U=(E[Z]+E[ab])/2;G!=E$q&&(U=U+G/2);s=(C[Z]+C[ab])/2}}r=R=Q=0;for(D=T.u.length;r<D;r++){B=T.u[r];if(B.fd){B.b.x=B.b.x+U;B.b.y=B.b.y+s;B.b.y<T.v[0].start.y?R++:Q++}}if(Q<2&&R<2){r=0;for(D=T.u.length;r<D;r++){B=T.u[r];if(B.fd){B.b.x=(T.v[0].start.x+T.v[0].end.x)/2-B.width*0.5/(aa.Lb*aa.zoom)}}}}if(W&&typeof W=="object"&&typeof W.gap=="number"){T.I=T.I+W.gap;T.Gd=0.5*(T.$+T.I);T.rb=0.5*(T.ra+T.wa);T.sd=T.I-T.$;T.ne=T.wa-T.ra;T.kf=E$p}if(!P){q=0;for(D=T.v.length;q<D;q++){T.v[q].start.y=T.rb;T.v[q].end.y=T.rb}}if(!y){q=0;for(D=T.F.length;q<D;q++){T.F[q].b.y=T.rb}}if(M&&L!=-1){return E$Mi(X.substring(L),T)}W||E$xc(T);return T}function E$qc(p){var o=[],n,p=p.replace(/\r/g,"");n=p.split("$$$$\n");for(var m=0,l=0,k=n.length;l<k;l++){p=E$lc(n[l]);if(p!=E$q){p.ye=n[l];p.Pb=m;o.push(p);m++}}return o}function E$lc(B,A,z){var y=B.substring(0,1000).split("\n"),v=new E$Ha,s;if(A){if(B.indexOf("$CTAB")==0){y=y[1];s=2}else{y=y[0];s=1}}else{if(y.length<4){return E$q}if(y[3].length>=39&&y[3].charAt(35)=="3"){var r=B.indexOf("M  V30 BEGIN RGROUP");if(r!=-1){v=E$Li(B,E$p);v=E$Mi(B.substring(r),v)}else{v=E$Li(B,z)}v.name=y[0];return v}v.name=y[0];v.ee=y[2];y=y[3];s=4}var B=B.split("\n"),q=parseInt(y.substring(0,3)),p=parseInt(y.substring(3,6));if(y.length>14){v.jb=parseInt(y.substring(12,15))}for(y=0;y<q;y++){var A=B[y+s],o=E$ch(v);o.b.x=parseFloat(A.substring(0,10))+0;o.b.y=parseFloat(A.substring(10,20))+0;o.b.oa=parseFloat(A.substring(20,30))+0;o.A=A.substring(31,34).trim();if(o.A=="D"){o.A="H";o.$a=2}else{if(o.A=="T"){o.A="H";o.$a=3}else{if(o.A.charAt(0)=="R"&&o.A.length>1){var F=parseInt(o.A.substr(1));if(!isNaN(F)){o.na=F}}}}F=A.substring(34,36).trim();if(F!=0){var E=E$ae(o.A);o.$a=(E==-1?0:E$Ni[E])+Number(F)}if(A.substring(36,39).trim()!=0){o.Na=4-A.substring(36,39).trim()}F=A.substring(42,45).trim();if(F!=0){o.Oa=F-1}if(A.length>=48){E=A.substring(45,48).trim();if(E!=0){o.Ib=E}}if(A.length>=51){E=A.substring(48,51).trim();if(E!=0){o.Cb=E==15?-1:E}}if(A.length>=63){E=A.substring(60,63).trim();if(E!=0){o.Pa=parseInt(E)}}if(A.length>=66){E=A.substring(63,66).trim();if(E!=0){o.bc=E}}if(A.length>=69){E=A.substring(66,69).trim();if(E!=0){o.hd=E}}}for(y=0;y<p;y++){A=B[q+y+s];o=parseInt(A.substring(0,3))-1;E=parseInt(A.substring(3,6))-1;if(o==-1||E==-1){return new E$Ha}var D=parseInt(A.substring(6,9)),C=parseInt(A.substring(9,12)),F=parseInt(A.substring(12,15)),o=v.Ga(v.f[o],v.f[E],D,C),E=parseInt(A.substring(15,18));if(E==1){o.xb=E$p}if(E==2){o.xb=E$s}if(A.length>=20){E=A.substring(18.21).trim();if(E!=0){o.Sa=E}}if(o.l==2&&o.j.Ib&&o.k.Ib){o.Ib=1}if(F==1){o.qg=E$p;o.hidden=E$p}}y=q+p+s;for(s=E$s;y<B.length;y++){A=B[y];q=A.substring(0,6);if(!s&&A.substring(0,3)=="A  "){for(;;){o=parseInt(A.substring(3,6))-1;y++;A=B[y];v.f[o].vb=A.trim();y++;A=B[y];if(A.substring(0,3)!="A  "){q=A.substring(0,6);s=E$p;break}}}if(q=="M  CHG"){F=parseInt(A.substring(6,9));for(p=0;p<F;p++){o=parseInt(A.substring(9+p*8,13+p*8))-1;E=parseInt(A.substring(13+p*8,17+p*8));v.f[o].Na=E}}if(q=="M  RAD"){F=parseInt(A.substring(6,9));for(p=0;p<F;p++){o=parseInt(A.substring(9+p*8,13+p*8))-1;E=parseInt(A.substring(13+p*8,17+p*8));v.f[o].nb=E}}if(q=="M  ISO"){F=parseInt(A.substring(6,9));for(p=0;p<F;p++){o=parseInt(A.substring(9+p*8,13+p*8))-1;E=parseInt(A.substring(13+p*8,17+p*8));v.f[o].$a=E}}if(q=="M  RGP"){F=parseInt(A.substring(6,9));for(p=0;p<F;p++){o=parseInt(A.substring(9+p*8,13+p*8))-1;E=parseInt(A.substring(13+p*8,17+p*8));v.f[o].na=E;v.f[o].A="C"}}if(q=="M  RBC"){F=parseInt(A.substring(6,9));for(p=0;p<F;p++){o=parseInt(A.substring(9+p*8,13+p*8))-1;E=parseInt(A.substring(13+p*8,17+p*8));if(E!=0){E==-1&&(E=0);E==-2&&(E="*");v.f[o].ob=E}}}if(q=="M  SUB"){F=parseInt(A.substring(6,9));for(p=0;p<F;p++){o=parseInt(A.substring(9+p*8,13+p*8))-1;E=parseInt(A.substring(13+p*8,17+p*8));if(E!=0){E==-1&&(E=0);E==-2&&(E="*");v.f[o].lb=E}}}if(q=="M  UNS"){F=parseInt(A.substring(6,9));for(p=0;p<F;p++){o=parseInt(A.substring(9+p*8,13+p*8))-1;E=parseInt(A.substring(13+p*8,17+p*8));if(E==1){v.f[o].Tc=1}}}if(q=="M  ALS"){o=parseInt(A.substring(7,10))-1;F=parseInt(A.substring(10,13));v.f[o].nc=A.substring(14,15)=="T"?E$p:E$s;for(p=0;p<F;p++){E=E$ae(A.substring(16+p*4,20+p*4).trim());E!=-1&&v.f[o].U.push(E)}}if(q=="M  APO"){F=parseInt(A.substring(6,9));for(p=0;p<F;p++){o=parseInt(A.substring(9+p*8,13+p*8))-1;E=parseInt(A.substring(13+p*8,17+p*8));o=v.f[o];E==1&&o.fc(1);E==2&&o.fc(2);if(E==3){o.fc(1);o.fc(2)}}}if(q=="M  LOG"){parseInt(A.substring(6,9));r=parseInt(A.substring(9,13));p=parseInt(A.substring(13,17));o=parseInt(A.substring(17,21));F=A.substring(22).trim();E=new E$Oi(r);E.Be=F;E.Fe=o;E.Kd=p;if(!v.Ta){v.Ta=[]}v.Ta.push(E)}if(q=="M  SDD"){r=parseInt(A.substring(7,10));if(F=E$Pi(v,r)){if(F.type=="DAT"){F.oe=A.length>36&&A.charAt(36)=="A"?E$p:E$s;F.coords.push(new E$Q(A.substring(11,21),A.substring(21,31)));if(A.length>51&&A.charAt(51)!=" "){F.V=A.charAt(51)}if(A.length>54&&A.charAt(54)!=" "){F.wh=A.charAt(54)}}}else{console.log("could not find sgroup "+r+". Line="+A)}}else{if(q=="M  SED"){if(A.length>9){r=parseInt(A.substring(7,10));if(F=E$Pi(v,r)){if(F.type=="DAT"&&A.length>11){F.label=F.label!=E$q?F.label+("\n"+A.substring(11)):A.substring(11)}}else{console.log("SED only makes sense with DAT sgroup type")}}else{console.log("could not find sgroup "+r+". Line="+A)}}else{if(q=="M  STY"){E=0;A.length>8&&(E=parseInt(A.substring(6,9)));if(A.length>16+(E-1)*8){for(p=0;p<E;p++){o=9+p*8;r=parseInt(A.substring(o,o+4));o=A.substring(o+5,o+8);if(o=="SUP"||o=="SRU"||o=="MUL"||o=="MON"||o=="MER"||o=="COP"||o=="CRO"||o=="MOD"||o=="GRA"||o=="COM"||o=="MIX"||o=="FOR"||o=="DAT"||o=="GEN"||o=="ANY"){F=new E$mi(o,r);v.r.push(F)}}}}else{if(q=="M  SST"){E=0;A.length>8&&(E=parseInt(A.substring(6,9)));if(A.length>16+(E-1)*8){for(p=0;p<E;p++){o=9+p*8;r=parseInt(A.substring(o,o+4));if(F=E$Pi(v,r)){o=A.substring(o+5,o+8);F.pd=o}else{console.log("could not find sgroup "+r+". Line="+A)}}}}else{if(q=="M  SAL"){r=parseInt(A.substring(7,10));E=parseInt(A.substring(10,13));if(F=E$Pi(v,r)){for(p=0;p<E;p++){o=13+p*4;o=parseInt(A.substring(o,o+4));if(o>0&&o<=v.f.length){o=v.f[o-1];F.f.push(o);if(F.type=="SUP"){o.abbr=F}}}}else{console.log("could not find sgroup "+r+". Line="+A)}}else{if(q=="M  SBL"){r=parseInt(A.substring(7,10));F=E$Pi(v,r);E=parseInt(A.substring(10,13));if(F){for(p=0;p<E;p++){o=13+p*4;o=parseInt(A.substring(o,o+4));if(o>0&&o<=v.g.length){o=v.g[o-1];F.g.push(o);D=E$si(F,o.j);C=E$si(F,o.k);if(F.type=="DAT"){(!D||!C)&&console.log("From Data Sgroup an SBL entry should be a containing bond, not a crossing bond")}else{if(D&&C){console.log("SBL entry should be a crossing bond")}else{if(F.type=="SUP"){if(D){F.sb=o.j}else{if(C){F.sb=o.k}}}}}}}}else{console.log("could not find sgroup "+r+". Line="+A)}}else{if(q=="M  SPA"){r=parseInt(A.substring(7,10));E=parseInt(A.substring(10,13));if(F=E$Pi(v,r)){if(F.type=="MUL"){for(p=0;p<E;p++){o=13+p*4;o=parseInt(A.substring(o,o+4));o>0&&o<=v.f.length&&F.Ya.push(v.f[o-1])}}else{console.log("SPA (parent atom list) only has a use for multiple type sgroup (MUL)")}}else{console.log("could not find sgroup "+r+". Line="+A)}}else{if(q=="M  SMT"){r=parseInt(A.substring(7,10));(F=E$Pi(v,r))?F.label=A.substring(11):console.log("could not find sgroup "+r+". Line="+A)}else{if(q=="M  SDI"){r=parseInt(A.substring(7,10));E=parseInt(A.substring(10,13));if(E==4){if(F=E$Pi(v,r)){A=A.substring(13).trim().split(/\s+/);if(A.length>=4){F.coords.push(new E$Q(A[0],A[1]));F.coords.push(new E$Q(A[2],A[3]))}else{console.log("Need 4 coordinates for bracket for sgroup"+r)}}else{console.log("could not find sgroup "+r+". Line="+A)}}else{console.log("Need 4 coordinates for bracket for sgroup"+r)}}else{if(q=="M  SDS"){if(A.substring(7,10)=="EXP"){E=parseInt(A.substring(10,13));for(p=0;p<E;p++){o=13+p*4;r=parseInt(A.substring(o,o+4));(F=E$Pi(v,r))?F.$b=E$p:console.log("could not find sgroup "+r+". Line="+A)}}}else{if(q=="M  SCN"){E=0;A.length>8&&(E=parseInt(A.substring(6,9)));if(A.length>16+(E-1)*8){for(p=0;p<E;p++){o=9+p*8;r=parseInt(A.substring(o,o+4));(F=E$Pi(v,r))?F.Va=A.substring(o+5,o+8).trim():console.log("could not find sgroup "+r+". Line="+A)}}}else{if(q=="M  CRS"){r=parseInt(A.substring(7,10));E=parseInt(A.substring(10,13));if(F=E$Pi(v,r)){if(isPolymer(F.type)){if(E==3){F.g.left=[];F.g.right=[];for(p=0;p<E;p++){o=13+p*4;o=parseInt(A.substring(o,o+4));o>0&&o<=v.g.length&&F.g.left.push(v.g[o-1])}F.g.right.push(F.g.left.pop())}else{console.log("CRS should have 3 bonds")}}else{console.log("CRS only valid for polymers")}}else{console.log("could not find sgroup "+r+". Line="+A)}}}}}}}}}}}}}if(q=="M  END"){break}}E$Qi(v);E$Ri(v,B,y+1);E$Ve(v);z||E$xc(v);return v}function E$Ri(t,s,r){for(;r<s.length;r++){var q=s[r];if(q.charAt(0)==">"){var p=q.split("<"),o=p[1].split(">")[0],n="";if(o=="EL_TEXTBOXES"||o=="TEXTBOXES"){for(r=r+1;r<s.length;r++){q=s[r];if(q.trim()==""){break}var q=q.split(";"),m=new E$Si;m.V=q[0];m.Ze=E$p;m.b.x=parseFloat(q[1]);m.b.y=parseFloat(q[2]);t.u.push(m)}}else{if(o=="EL_ARROWS"){for(r=r+1;r<s.length;r++){q=s[r];if(q.trim()==""){break}q=q.split(";");o=E$Xd(t);o.start.x=parseFloat(q[0]);o.start.y=parseFloat(q[1]);o.end.x=parseFloat(q[2]);o.end.y=parseFloat(q[3]);if(q.length>4){o.Wd=parseInt(q[4]);if(p.length>5){o.vf=q[5]}}}}else{if(o=="EL_PLUSES"){for(r=r+1;r<s.length;r++){q=s[r];if(q.trim()==""){break}q=q.split(";");p=E$Yd(t);p.b.x=parseFloat(q[0]);p.b.y=parseFloat(q[1])}}else{if(o=="EL_ATOM_COLORS"||o=="ATOM_COLORS"){for(r=r+1;r<s.length;r++){q=s[r];if(q.trim()==""){break}q=q.split(/\s+/);o=q[0];for(p=1;p<q.length;p++){if(q[p].length>0&&q[p]>=0&&q[p]<t.f.length){t.f[q[p]].color=o}}}p=0;for(q=t.g.length;p<q;p++){o=t.g[p];if(o.j.color&&o.k.color&&o.j.color==o.k.color){o.color=o.j.color}}}else{if(o=="EL_BOND_COLORS"||o=="BOND_COLORS"){for(r=r+1;r<s.length;r++){q=s[r];if(q.trim()==""){break}q=q.split(/\s+/);o=q[0];for(p=1;p<q.length;p++){if(q[p].length>0&&q[p]>=0&&q[p]<t.g.length){t.g[q[p]].color=o}}}p=0;for(q=t.g.length;p<q;p++){o=t.g[p];if(o.j.color&&o.k.color&&o.j.color==o.k.color){o.color=o.j.color}}}else{if(o=="EL_BOND_STYLES"||o=="BOND_STYLES"){for(r=r+1;r<s.length;r++){q=s[r];if(q.trim()==""){break}q=q.split(/\s+/);o=q[0];for(p=1;p<q.length;p++){if(q[p].length>0&&q[p]>=0&&q[p]<t.g.length){t.g[q[p]].M=o}}}}else{for(r=r+1;r<s.length;r++){q=s[r];if(q.trim()==""){break}n.length>0&&(n=n+"\n");n=n+q}t.ba[o]=n;if(o=="LABEL"){t.label=n}}}}}}}}}for(r=t.u.length-1;r>=0;r--){(t.ba[t.u[r].V]==E$q||t.ba[t.u[r].V==E$o])&&E$Yc(t.u,m)}}function E$Li(D,C){for(var B=new E$Ha,z=D.split("\n"),y=[],v="",s=0;s<z.length;s++){for(;z[s].charAt(z[s].length-1)=="-";){if(v.length==0){v=z[s].substring(0,z[s].length-1)}else{var r=z[s].substring(7,z[s].length-1),v=v+z[s].substring(7,z[s].length-1)}s++}if(v.length>0){v=v+z[s].substring(7,z[s].length);y.push(v);v=""}else{y.push(z[s])}}for(var q,p,s=0;s<y.length;s++){if(y[s].indexOf("M  V30 COUNTS")==0){v=y[s].split(/\s+/);if(v<5){window.status="Invalid counts line";return E$q}q=v[3];p=v[4];if(v.length>=8){B.jb=v[7]=="1"?1:0}break}}for(;s<y.length;s++){if(y[s].indexOf("M  V30 BEGIN ATOM")==0){break}}if(s==y.length){return z[1].indexOf("M  V30")!=0?E$lc(D.substring(1),C):E$q}j=0;for(s++;j<q;j++,s++){z=E$ch(B);v=y[s].match(/[^\s"]+|"[^"]+"/g);v[3].indexOf("[")!=-1?z.gf(v[3],v[3].indexOf("NOT")!=-1):z.A=v[3];z.b.x=parseFloat(v[4])+0;z.b.y=parseFloat(v[5])+0;z.b.oa=parseFloat(v[6])+0;var H=parseInt(v[7])+0;if(H!=0){z.Pa=H}for(var G=8;G<v.length;G++){if(v[G].indexOf("CHG=")==0){H=v[G].split("=");z.Na=parseInt(H[1])}else{if(v[G].indexOf("RAD=")==0){H=v[G].split("=");z.nb=parseInt(H[1])}else{if(v[G].indexOf("VAL=")==0){H=v[G].split("=");z.Cb=parseInt(H[1])}else{if(v[G].indexOf("MASS=")==0){H=v[G].split("=");z.$a=parseInt(H[1])}else{if(v[G].indexOf("HCOUNT=")==0){H=v[G].split("=");z.Oa=parseInt(H[1])}else{if(v[G].indexOf("RBCNT=")==0){H=v[G].split("=");H=parseInt(H[1]);if(H!=0){H==-1&&(H=0);H==-2&&(H="*");z.ob=H}}else{if(v[G].indexOf("SUBST=")==0){H=v[G].split("=");H=parseInt(H[1]);if(H!=0){H==-1&&(H=0);H==-2&&(H="*");z.lb=H}}else{if(v[G].indexOf("STBOX=")==0){H=v[G].split("=");z.Ib=parseInt(H[1])}else{if(v[G].indexOf("ATTCHPT=")==0){H=v[G].split("=");if(parseInt(H[1])==1){z.fc(1)}else{if(app==2){z.fc(2)}else{if(app==-1){z.fc(1);z.fc(2)}}}}else{if(v[G].indexOf("RGROUPS=")==0){r=y[s].indexOf("(",y[s].indexOf("RGROUPS="));H=y[s].indexOf(")",r);r=y[s].substring(r+1,H);H=r.split(/\s+/);H[0]=parseInt(H[0]);H[1]=parseInt(H[1]);if(H[0]==1){z.na=H[1];z.A="C"}}else{if(v[G].indexOf("EXACHG=")==0){H=v[G].split("=");H=parseInt(H[1]);if(H!=0){z.hd=H}}else{if(v[G].indexOf("INVRET=")==0){H=v[G].split("=");H=parseInt(H[1]);if(H!=0){z.bc=H}}}}}}}}}}}}}}}for(;s<y.length;s++){if(y[s].indexOf("M  V30 BEGIN BOND")==0){break}}if(s==y.length&&p>0){window.status="couldn't find BOND block";return E$q}j=0;for(s++;j<p;s++,j++){v=y[s].split(/\s+/);z=parseInt(v[4])-1;H=parseInt(v[5])-1;r=parseInt(v[3]);z=B.Ga(B.f[z],B.f[H],r,0);if(z.l==2&&z.j.Ib&&z.k.Ib){z.Ib=1}for(G=6;G<v.length;G++){if(v[G].indexOf("CFG=")==0){H=v[G].split("=");H=parseInt(H[1]);if(r==1){H==0?z.o=E$Of:H==1?z.o=E$O:H==2?z.o=E$kd:H==3?z.o=E$ld:window.status="invalid bond stereo flag"}else{if(r==2&&H==2){z.o=E$jd}}}else{if(v[G].indexOf("TOPO=")==0){H=v[G].split("=");if(H[1]=="1"){z.xb=E$p}else{if(H[1]=="2"){z.xb=E$s}}}else{if(v[G].indexOf("RXCTR=")==0){H=v[G].split("=");H=parseInt(H[1]);if(H!=0){z.Sa=H}}else{if(v[G].indexOf("STBOX=")==0){H=v[G].split("=");if(z.l==2){z.Ib=H}}}}}}}p=E$s;D.indexOf("M  V30 BEGIN SGROUP")!=-1&&(p=E$p);v=E$s;D.indexOf("M  V30 BEGIN COLLECTION")!=-1&&(v=E$p);z=s;if(v){for(s=z;s<y.length;s++){if(y[s].indexOf("M  V30 BEGIN COLLECTION")==0){break}}for(;s<y.length;s++){if(y[s].indexOf("M  V30 END COLLECTION")==0){break}if(y[s].indexOf("M  V30 MDLV30/STEABS")==0){r=y[s].indexOf("(",y[s].indexOf("ATOMS="));H=y[s].indexOf(")",r);r=y[s].substring(r+1,H);r=r.split(/\s+/);for(v=1;v<r.length;v++){H=parseInt(r[v])-1;B.f[H].pb=E$jg}}else{if(y[s].indexOf("M  V30 MDLV30/STEREL")==0){q=parseInt(y[s].substring(20));r=y[s].indexOf("(",y[s].indexOf("ATOMS="));H=y[s].indexOf(")",r);r=y[s].substring(r+1,H);r=r.split(/\s+/);for(v=1;v<r.length;v++){H=parseInt(r[v])-1;B.f[H].pb=E$kg;B.f[H].Mb=q}}else{if(y[s].indexOf("M  V30 MDLV30/STERAC")==0){q=parseInt(y[s].substring(20));r=y[s].indexOf("(",y[s].indexOf("ATOMS="));H=y[s].indexOf(")",r);r=y[s].substring(r+1,H);r=r.split(/\s+/);for(v=1;v<r.length;v++){H=parseInt(r[v])-1;B.f[H].pb=E$lg;B.f[H].Mb=q}}}}}}if(p){for(s=z;s<y.length;s++){if(y[s].indexOf("M  V30 BEGIN SGROUP")==0){s++;break}}for(;s<y.length;s++){if(y[s].indexOf("M  V30 END SGROUP")==0){E$Qi(B);break}v=y[s].split(/\s+/);v=v[3].substring(0,3);H=B.r.length+1;p=new E$mi(v,H);B.r.push(p);var F,E;if(y[s].indexOf("ATOMS=")!=-1){r=y[s].indexOf("(",y[s].indexOf("ATOMS="));H=y[s].indexOf(")",r);r=y[s].substring(r+1,H);r=r.split(/\s+/);for(H=1;H<r.length;H++){z=B.f[r[H]-1];p.f.push(z);if(p.type=="SUP"){z.abbr=p}}}if(y[s].indexOf("LABEL=")!=-1){z=y[s].split("LABEL=");if(z[1].charAt(0)=='"'){D=z[1].substring(1);p.label=D.substring(0,D.indexOf('"'))}else{r=z[1].split(/\s+/);p.label=r[0]}}if(y[s].indexOf("ESTATE=E")!=-1){p.$b=E$p}if(y[s].indexOf("XBONDS=")!=-1){r=y[s].indexOf("(",y[s].indexOf("XBONDS="));H=y[s].indexOf(")",r);r=y[s].substring(r+1,H);H=r.split(/\s+/);for(r=1;r<H.length;r++){z=B.g[H[r]-1];p.g.push(z);if(v=="SUP"){if(E$si(p,z.j)&&!E$si(p,z.k)){p.sb=z.j;z.j.sup=p}else{if(!E$si(p,z.j)&&E$si(p,z.k)){p.sb=z.k;z.k.sup=p}}}}}if(v=="DAT"&&y[s].indexOf("CBONDS=")!=-1){r=y[s].indexOf("(",y[s].indexOf("CBONDS="));H=y[s].indexOf(")",r);r=y[s].substring(r+1,H);H=r.split(/\s+/);for(r=1;r<H.length;r++){z=B.g[H[r]-1];p.g.push(z)}}if(v=="MUL"&&y[s].indexOf("MULT=")!=-1){z=y[s].split("MULT=");r=z[1].split(/\s+/);p.label=r[0]}if(y[s].indexOf("SUBTYPE=")!=-1){z=y[s].split("SUBTYPE=");r=z[1].split(/\s+/);p.type=r[0]}if(y[s].indexOf("CONNECT=")!=-1){z=y[s].split("CONNECT=");r=z[1].split(/\s+/);p.Va=r[0]}if(y[s].indexOf("PATOMS=")!=-1){r=y[s].indexOf("(",y[s].indexOf("PATOMS="));H=y[s].indexOf(")",r);r=y[s].substring(r+1,H);r=r.split(/\s+/);for(H=1;H<r.length;H++){p.Ya.push(B.f[r[H]-1])}}if(y[s].indexOf("BRKXYZ=")!=-1){z=y[s].split("BRKXYZ=");for(v=1;v<z.length;v++){r=z[v].indexOf("(");H=z[v].indexOf(")",r);r=z[v].substring(r+1,H);H=r.split(/\s+/);r=new E$Q(H[1],H[2]);p.coords.push(r);r=new E$Q(H[4],H[5]);p.coords.push(r)}}if(y[s].indexOf("FIELDDISP=")!=-1){r=y[s].indexOf('"',y[s].indexOf("FIELDDISP="));H=y[s].indexOf('"',r+1);v=y[s].substring(r+1,H);r=new E$Q(parseFloat(v.substring(0,10))+0,parseFloat(v.substring(10,20))+0);p.coords.push(r);p.oe=y[s].length>25&&v.charAt(25)=="A"?E$p:E$s}if(y[s].indexOf("XBHEAD=")!=-1){r=y[s].indexOf("(",y[s].indexOf("XBHEAD="));H=y[s].indexOf(")",r);r=y[s].substring(r+1,H);H=r.split(/\s+/);F=[];for(r=1;r<H.length;r++){(z=B.g[H[r]-1])&&F.push(z)}F&&(E&&F.length*2==E.length)&&E$Ti(p,F,E)}if(y[s].indexOf("XBCORR=")!=-1){r=y[s].indexOf("(",y[s].indexOf("XBCORR="));H=y[s].indexOf(")",r);r=y[s].substring(r+1,H);H=r.split(/\s+/);E=[];for(r=1;r<H.length;r++){(z=B.g[H[r]-1])&&E.push(z)}F&&(E&&F.length*2==E.length)&&E$Ti(p,F,E)}if(y[s].indexOf("FIELDDATA=")!=-1){z=y[s].split("FIELDDATA=");for(v=1;v<z.length;v++){if(z[v].charAt(0)=='"'){D=z[v].substring(1);if(!p.label){p.label=""}if(p.label.length>0){p.label=p.label+"\n"}p.label=p.label+D.substring(0,D.indexOf('"'))}else{r=z[v].split(/\s+/);if(!p.label){p.label=""}if(p.label.length>0){p.label=p.label+"\n"}p.label=p.label+r[0]}}}if(p.type=="SUP"&&p.g.length==0&&p.f.length==1){var v=E$s,o;for(o in E$Ui){if(v){break}z=E$Ui[o];for(r=0;r<z.length;r++){if(z[r][1]==p.label){v=E$p;break}}}if(v){p.label=="A"||p.label=="Q"?p.f[0].A=p.label:p.f[0].vb=p.label;B.r.pop();p.f[0].abbr=E$q}}}}E$Qi(B);E$Ri(B,y,s);C||E$xc(B);return B}function E$xc(p){for(var o=0,n=0,m=p.g.length;n<m;n++){var l=p.g[n],o=o+E$Mb(l.j.b,l.k.b)}n=E$q;if(p.g.length>0){for(var n=o/p.g.length,k=1/n,o=0,m=p.f.length;o<m;o++){p.f[o].b.scale(k)}o=0;for(m=p.u.length;o<m;o++){p.u[o].b.scale(k)}o=0;for(m=p.v.length;o<m;o++){p.v[o].start.scale(k);p.v[o].end.scale(k)}o=0;for(m=p.F.length;o<m;o++){p.F[o].b.scale(k)}}o=0;for(m=p.r.length;o<m;o++){b=0;for(c=p.r[o].coords.length;b<c;b++){p.r[o].coords[b].scale(k)}}p.Vc=n}function E$vc(t,s,r){if(t.kf){t.kf=E$s}else{if(t.f.length==0){t.$=0;t.I=0;t.ra=0;t.wa=0;t.Gd=0;t.rb=0;t.sd=0;t.ne=0}else{t.$=t.ra=10000000000;t.I=t.wa=-10000000000;t.Gg=t.Ig=10000000000;t.di=t.Hg=-10000000000;for(var q=0,p=t.f.length;q<p;q++){var o=t.f[q];if(o.b.x<t.$){t.$=o.b.x}if(o.b.y<t.ra){t.ra=o.b.y}if(o.b.x>t.I){t.I=o.b.x}if(o.b.y>t.wa){t.wa=o.b.y}if(r&&o.ja){for(var n=0;n<o.ja.length;n++){var m=o.ja[n];if(m){if(m.k.b.x<t.$){t.$=m.k.b.x}if(m.k.b.y<t.ra){t.ra=m.k.b.y}if(m.k.b.x>t.I){t.I=m.k.b.x}if(m.k.b.y>t.wa){t.wa=m.k.b.y}}}}if(s&&o.Xb()){if(o.b.x<t.Gg){t.Gg=o.b.x}if(o.b.y<t.Ig){t.Ig=o.b.y}if(o.b.x>t.di){t.di=o.b.x}if(o.b.y>t.Hg){t.Hg=o.b.y}}}if(s&&t.Gg!=10000000000){t.ra=t.Ig;t.wa=t.Hg}if(t.$==10000000000||t.ra==10000000000){t.$=0;t.I=10;t.ra=0;t.wa=10}t.Gd=0.5*(t.$+t.I);t.rb=0.5*(t.ra+t.wa);t.sd=t.I-t.$;t.ne=t.wa-t.ra}}}function E$Vi(n){var m={};m.$=m.ra=10000000000;m.I=m.wa=-10000000000;for(var l=0,k=n.length;l<k;l++){var i=n[l];if(i.b.x<m.$){m.$=i.b.x}if(i.b.y<m.ra){m.ra=i.b.y}if(i.b.x>m.I){m.I=i.b.x}if(i.b.y>m.wa){m.wa=i.b.y}}if(m.$==10000000000||m.ra==10000000000){m.$=0;m.I=0;m.ra=0;m.wa=0}m.Gd=0.5*(m.$+m.I);m.rb=0.5*(m.ra+m.wa);m.sd=m.I-m.$;m.ne=m.wa-m.ra;return m}E$D.prototype.dj=function(){return this.e.v.length>0||this.e.F.length>0?".rxn":E$rf(this.e)?".rgn":[".mol",".mdl"]};E$v=E$Ha.prototype;E$v.write=function(t){var s=E$q;a:{for(var s=0,r=this.f.length;s<r;s++){if(this.f[s].pb!=0){s=E$p;break a}}s=E$s}if(t=="smiles"||t=="smarts"){this.Gb=t=="smiles"?E$s:E$p;var q;if(this.v.length==0&&this.F.length==0){q=E$Wi(this)}else{E$Ki(this);q="";for(t=0;t<this.Ic.length;t++){t>0&&(q=q+".");s=this.Ic[t];s=E$ni(this,s);s.Gb=this.Gb;q=q+E$Wi(s)}q=q+">>";for(t=0;t<this.Hc.length;t++){t>0&&(q=q+".");s=this.Hc[t];s=E$ni(this,s);s.Gb=this.Gb;q=q+E$Wi(s)}}s=q}else{if(t=="mol"&&E$cb!="v3000"&&!s){s=E$ic(this);s=s+E$jc(this)}else{if(t=="v3000"||E$cb=="v3000"||s){t="";q==E$q&&(q=1.54);if(E$rf(this)){t="";if(q==E$q){q=this.Vc;q==E$q&&(q=1);q=1.54/q}for(var s=E$Xi(this),r=[],p=E$sf(this),o=0;o<p;o++){r[o]=E$Zh(this,o);r[o].Rd(E$rf(r[o]))}o=E$Vh(this,E$p);if(this.v.length>0||this.F.length>0){t=t+E$Yi(o,q)}else{t=t+E$Zi(this);t=t+"  0  0  0     0  0            999 V3000\n"+E$$i(o,q)}for(var n=0;n<s.length;n++){for(var m=s[n],t=t+("M  V30 BEGIN RGROUP "+m.id+"\n"),t=t+("M  V30 RLOGIC "+m.Kd+" "+m.Fe+" "+m.Be+"\n"),o=0;o<p;o++){r[o].f[0].tc==m.id&&(t=t+E$$i(r[o],q))}t=t+"M  V30 END RGROUP\n"}}else{if(this.v.length>0||this.F.length>0){t=E$Yi(this,q)}else{t=t+E$Zi(this);t=t+"  0  0  0     0  0            999 V3000\n";if(E$aj(this)){s=this.copy();E$bj(s);t=t+E$$i(s,q)}else{t=t+E$$i(this,q)}}}t=t+"M  END\n";s=t+E$jc(this,1.54)}else{if(t=="sdf"){E$vc(this);E$sf(this);q="";if(this.kh==1){q=E$ic(this,E$o);q=q+E$jc(this);q=q+"$$$$\n"}else{for(t=0;t<this.kh;t++){s=E$Zh(this,t);q=q+E$ic(s,E$o);q=q+E$jc(this);q=q+"$$$$\n"}}s=q}else{s=t=="rxn"?E$cj(this):this.v.length==0&&this.F.length==0?E$ic(this):E$cj(this);s=s+E$jc(this)}}}}return s};function E$cj(r){E$vc(r);E$Ki(r);var q,p=new Date;q="$RXN\n\n      ELEMENTAL"+E$dj(p.getMonth()+1);q=q+E$dj(p.getDate());q=q+E$dj(p.getFullYear());q=q+E$dj(p.getHours());q=q+E$dj(p.getMinutes());q=q+"\n\n"+(E$ej(r.Ic.length)+E$ej(r.Hc.length)+"\n");for(var p=E$Hi(r),o=p[p.length-1],n=0;n<r.r.length;n++){var m=r.r[n];if(!m.sb&&(!m.f||m.f.length==0)&&(!m.g||m.g.length==0)&&(!m.Ya||m.Ya.length==0)){var l=new E$mi(m.type,m.id);l.Za(m);o.r.push(l);l.id=o.r.length}}for(r=0;r<p.length;r++){q=q+"$MOL\n";q=q+E$ic(p[r])}return q}function E$Ki(z){for(var y=z.I+1,x=z.F.length-1;x>0;x--){for(var w=x-1;w>=0;w--){if(E$Mb(z.F[x].b,z.F[w].b)<0.1){E$Qh(z,z.F[x]);break}}}z.v.length>0&&(y=0.5*(z.v[0].start.x+z.v[0].end.x));z.F.sort(function(g,f){return g.b.x-f.b.x});var v=E$sf(z);z.Hc?z.Hc.length=0:z.Hc=[];z.Ic?z.Ic.length=0:z.Ic=[];for(var s=[],r=[],w=0;w<v;w++){for(var q=0,p=0,x=0,o=z.f.length;x<o;x++){var B=z.f[x];if(B.Sc==w){q=q+B.b.x;p++}}var q=q/p,p=0,A;if(q<y){A=0}else{A=1;p++}x=0;for(o=z.F.length;x<o;x++){q>z.F[x].b.x&&p++}r[w]=p;s[w]=A;x=0;for(o=z.f.length;x<o;x++){B=z.f[x];if(B.Sc==w){B.ai=p;B.Fg=A}}}for(w=0;w<v;w++){if(s[w]==0){y=E$p;for(x=0;x<z.Ic.length;x++){if(z.Ic[x]==r[w]){y=E$s;break}}y&&z.Ic.push(r[w])}else{if(s[w]==1){y=E$p;for(x=0;x<z.Hc.length;x++){if(z.Hc[x]==r[w]){y=E$s;break}}y&&z.Hc.push(r[w])}}}}function E$jc(x,w){if(w==E$q){w=x.Vc;w==E$q&&(w=0.825)}var v="";if(x.u.length>0){for(var v=v+"> <EL_TEXTBOXES>\n",u=0,t=x.u.length;u<t;u++){v=v+(x.u[u].V+";"+(w*x.u[u].b.x).toFixed(4)+";"+(w*x.u[u].b.y).toFixed(4)+"\n")}v=v+"\n"}t=Object.keys(x.ba);for(u=0;u<t.length;u++){v=v+("> <"+t[u]+">\n"+x.ba[t[u]]+"\n\n")}if(!x.a||x.a&&(x.a.i.saveReactionLayout||x.v.length>1)){if(x.v.length>0){v=v+"> <EL_ARROWS>\n";u=0;for(t=x.v.length;u<t;u++){v=v+((w*x.v[u].start.x).toFixed(4)+";"+(w*x.v[u].start.y).toFixed(4)+";");v=v+((w*x.v[u].end.x).toFixed(4)+";"+(w*x.v[u].end.y).toFixed(4));if(x.v[u].type!=1||x.v[u].color!="black"){v=v+(";"+x.v[u].type+";"+x.v[u].color)}v=v+"\n"}v=v+"\n"}if(x.F.length>0){v=v+"> <EL_PLUSES>\n";u=0;for(t=x.F.length;u<t;u++){v=v+((w*x.F[u].b.x).toFixed(4)+";"+(w*x.F[u].b.y).toFixed(4)+"\n")}v=v+"\n"}}for(var s=E$s,u=0,t=x.f.length;u<t;u++){if(x.f[u].color){s=E$p;break}}if(s){v=v+"> <EL_ATOM_COLORS>\n";s={};u=0;for(t=x.f.length;u<t;u++){if(x.f[u].color){s[x.f[u].color]||(s[x.f[u].color]=[]);s[x.f[u].color].push(u)}}for(var r in s){for(var q=s[r],u=0,t=q.length;u<t;u++){if(u%10==0){u!=0&&(v=v+"\n");v=v+E$fj(r.toString(),8)}v=v+E$gj(q[u])}v=v+"\n"}v=v+"\n"}s=E$s;u=0;for(t=x.g.length;u<t;u++){var q=-1,p=x.g[u];if(p.j.color&&p.k.color&&p.j.color==p.k.color){q=p.j.color}if(p.color&&p.color!=q){s=E$p;break}}if(s){v=v+"> <EL_BOND_COLORS>\n";s={};u=0;for(t=x.g.length;u<t;u++){q=-1;p=x.g[u];if(p.j.color&&p.k.color&&p.j.color==p.k.color){q=p.j.color}if(p.color&&p.color!=q){s[p.color]||(s[p.color]=[]);s[p.color].push(u)}}for(r in s){q=s[r];u=0;for(t=q.length;u<t;u++){if(u%10==0){u!=0&&(v=v+"\n");v=v+E$fj(r.toString(),8)}v=v+E$gj(q[u])}v=v+"\n"}v=v+"\n"}r=E$s;u=0;for(t=x.g.length;u<t;u++){if(x.g[u].M>=1){r=E$p;break}}if(r){v=v+"> <EL_BOND_STYLES>\n";r={};u=0;for(t=x.g.length;u<t;u++){if(x.g[u].M){r[x.g[u].M]||(r[x.g[u].M]=[]);r[x.g[u].M].push(u)}}for(var o in r){q=r[o];u=0;for(t=q.length;u<t;u++){if(u%10==0){u!=0&&(v=v+"\n");v=v+E$fj(o.toString(),8)}v=v+E$gj(q[u])}v=v+"\n"}v=v+"\n"}return v}function E$gc(i){for(var h=0,g=i.F.length;h<g;h++){if(i.F[h].selected){return E$p}}h=0;for(g=i.v.length;h<g;h++){if(i.v[h].selected){return E$p}}h=0;for(g=i.u.length;h<g;h++){if(i.u[h].selected){return E$p}}h=0;for(g=i.r.length;h<g;h++){if(i.r[h].selected){return E$p}}return E$Vd(i)||E$Td(i)}function E$Vd(i){for(var h=0,g=i.f.length;h<g;h++){if(i.f[h].selected){return E$p}}return E$s}function E$Xc(p,o){for(var n=[],m=0,l=p.f.length;m<l;m++){var k=p.f[m];k.selected&&n.push(k)}if(n.length==0&&o){m=0;for(l=p.f.length;m<l;m++){n.push(p.f[m])}}return n}function E$Td(l){for(var k=0,i=l.g.length;k<i;k++){var h=l.g[k];if(h.selected||h.j.selected&&h.k.selected){return E$p}}return E$s}function E$Zd(r,q,p){for(var o=[],n=0,m=r.g.length;n<m;n++){var l=r.g[n];q&&l.j.selected&&l.k.selected?o.push(l):l.selected&&o.push(l)}if(o.length==0&&p){q=0;for(m=r.g.length;q<m;q++){o.push(r.g[n])}}return o}function E$hj(t,s){for(var r=0,q=0,p=0,o=0,n=t.f.length;o<n;o++){var m=t.f[o];if(!s||s&&m.selected){r=r+m.b.x;q=q+m.b.y;p++}}return p>0?new E$Q(r/p,q/p):E$q}function E$ij(i){for(var h=0,g=i.length;h<g;h++){i[h].selected=0}}function E$kc(e){E$ij(e.f);E$ij(e.g);E$ij(e.v);E$ij(e.F);E$ij(e.u);E$ij(e.r)}function E$jj(p,o){var n=E$Ug(p,o,1);if(n!=E$q){for(var m=[],l=0,k=p.f.length;l<k;l++){p.f[l].ib=-1}E$kj(p,n,0);l=0;for(k=p.f.length;l<k;l++){p.f[l].ib!=-1&&m.push(p.f[l])}return m}}function E$lj(r,q,p,o,n,m){var l;l==E$o&&(l=r.i.calcDecimalPoints);if(q){q=E$Re(r.e,q);q=E$Se(q,p)}else{q=E$Vd(r.e)?E$Se(E$Xc(r.e),p):E$Se(r.e.f,p)}l=q.toFixed(l);p=p||!r.i.livePropertyCalcs?"MW":"MW(exact)";m&&(p=p+" ");E$mj(r,p,l,o,n)}function E$nj(r,q,p,o,n,m){var l;l==E$o&&(l=r.i.calcDecimalPoints);if(q){q=E$Re(r.e,q);p=E$Te(q,p,l)}else{p=E$Vd(r.e)?E$Te(E$Xc(r.e),p,l):E$Te(r.e.f,p,l)}l="Elem. Analysis";m&&(l=l+" ");E$mj(r,l,p,o,n)}function E$mj(r,q,p,o,n){var m=r.n,l=new E$Ha,q=E$oj(r,q);o&&n?E$sh(l,q,E$s,new E$Q(o,n)):E$sh(l,q,E$s,new E$Q(E$Bb(r,r.D.width/2),E$Cb(r,r.D.height/2)));l.ba[q]=p;E$G(r,new E$Ec(l,m))}function E$oj(r,q){for(var p=E$s,o=1,n=q;!p;){p=E$p;o>1&&(n=q+"_"+o);for(var m=0,l=r.e.u.length;m<l;m++){if(r.e.u[m].V==n){p=E$s;break}}o++}return n}function E$sh(n,m,l,k){var i;if(k){i=new E$Si;i.V=m;i.Ze=l;i.b.x=k.x;i.b.y=k.y}else{i=m?m:new E$Si}n.u.push(i);return i}function E$Re(p,o){var n=E$q,n=o instanceof E$Oh&&o.j&&o.k?o.j:o;if(n!=E$q){for(var m=[],l=0,k=p.f.length;l<k;l++){p.f[l].ib=-1}E$kj(p,n,0);l=0;for(k=p.f.length;l<k;l++){p.f[l].ib!=-1&&m.push(p.f[l])}return m}}function E$Ob(l,k){for(var i=0,h=k.length;i<h;i++){E$Uh(l,k[i],E$p)}E$Xh(l);E$Yh(l)}function E$pj(n,m,l,k,i){if(m=E$jj(n,m)){if(l){i=E$s;l=0;for(k=m.length;l<k;l++){if(m[l].selected>=1){i=E$p;break}}l=0;for(k=m.length;l<k;l++){m[l].selected=i?0:1}}else{if(k){l=0;for(k=m.length;l<k;l++){E$Uh(n,m[l])}}else{l=0;for(k=m.length;l<k;l++){m[l].selected=1;if(i){for(n=m[l].g.length-1;n>=0;n--){m[l].g[n].selected=1}}}}}}}function E$Pb(l,k,i){if(l=E$Re(l,k)){for(var k=0,h=l.length;k<h;k++){l[k].selected=i?0:1}}}E$v.Cd=function(){for(var g=0,f=this.f.length;g<f;g++){this.f[g].selected=1}g=0;for(f=this.F.length;g<f;g++){this.F[g].selected=1}g=0;for(f=this.v.length;g<f;g++){this.v[g].selected=1}g=0;for(f=this.u.length;g<f;g++){this.u[g].selected=1}g=0;for(f=this.r.length;g<f;g++){this.r[g].selected=1}};E$v.$d=function(l){for(var k=0,i=0,h=this.f.length;i<h;i++){k=k+this.f[i].$d(l)}return k};function E$Se(n,m){for(var l=0,k=0,i=n.length;k<i;k++){l=l+n[k].$d(m)}return l}function E$Te(y,x,w){var v=[];if(w==E$o||w==0){w=2}for(var u=0,s=0,r=y.length;s<r;s++){v[y[s].A]==E$o&&(v[y[s].A]=0);var q=y[s].$d(x,E$p),p=E$Ue(y[s]);v.H==E$o&&(v.H=0);v.H=x?v.H+p*E$Uc[1][3]:v.H+p*E$qj[1][0][1];v[y[s].A]=v[y[s].A]+q;u=u+q}v.H!=E$o&&(u=u+v.H);for(var o in v){v[o] instanceof Function||(v[o]=(v[o]/u*100).toFixed(w))}y="";if(v.C!=E$o){y=y+("C,"+v.C);v.C=E$o}if(v.H!=E$o){y!=""&&(y=y+"; ");y=y+("H,"+v.H);v.H=E$o}x=[];for(o in v){v[o]!=E$o&&!(v[o] instanceof Function)&&x.push(o)}x.sort();for(var z in x){o=x[z];if(v[o]!=E$o&&!(v[o] instanceof Function)){y!=""&&(y=y+"; ");y=y+(o+","+v[o])}}return y}E$v.qb=function(n,m){for(var l=0,k=this.f.length;l<k;l++){var i=this.f[l];i.b.x=i.b.x+n;i.b.y=i.b.y+m}};E$v.move=function(g,f){this.qb(g,f);E$rj(this,g,f)};function E$rj(r,q,p){for(var o=0,n=r.v.length;o<n;o++){var m=r.v[o];if(m.yd==1){m.start.x=m.start.x+q;m.start.y=m.start.y+p}else{if(m.yd!=2){m.start.x=m.start.x+q;m.start.y=m.start.y+p}m.end.x=m.end.x+q;m.end.y=m.end.y+p}}o=0;for(n=r.F.length;o<n;o++){m=r.F[o];m.b.x=m.b.x+q;m.b.y=m.b.y+p}o=0;for(n=r.u.length;o<n;o++){m=r.u[o];m.b.x=m.b.x+q;m.b.y=m.b.y+p}o=0;for(n=r.r.length;o<n;o++){for(var m=r.r[o],l=0;l<m.coords.length;l++){m.coords[l].x=m.coords[l].x+q;m.coords[l].y=m.coords[l].y+p}}}function E$He(n,m,l){for(var k=0,i=n.length;k<i;k++){n[k].rotate(m,l)}}E$v.Hf=function(v,u){if(!v.Xb()){E$Yc(u.g,v);var t=E$Re(this,u);if(t){u.g.push(v);for(var s=E$Mf(E$R(v,u).b,u.b),r=s.length(),q=0,p=t.length;q<p;q++){if(t[q]!=u){var o=E$Mf(u.b,t[q].b),n=E$Wb(s.x*o.y-o.x*s.y)/r;E$sj(o,s);o.K();t[q].b.x=t[q].b.x+2*n*o.x;t[q].b.y=t[q].b.y+2*n*o.y}}t=0;for(p=this.g.length;t<p;t++){v=this.g[t];if(v.j.ib!=-1&&v.k.ib!=-1){if(v.o==E$O){v.o=E$ld}else{if(v.o==E$ld){v.o=E$O}}}}}}};E$v.kk=function(t,s,r){if(!t.Xb()){E$Yc(t.j.g,t);E$Yc(t.k.g,t);var q=E$Re(this,t.j),p=E$Re(this,t.k);t.j.g.push(t);t.k.g.push(t);var o=q,n=t.j,m=t.k;if(s?q.length<=p.length:q.length>p.length){o=p;n=t.k;m=t.j}s=t=0;for(q=this.f.length;s<q;s++){p=this.f[s];if(p.na>t){t=p.na}p.Sc=0;p.selected=0}o.push(m);s=0;for(q=o.length;s<q;s++){o[s].Sc=1}s=E$Zh(this,1);E$rh(s,E$lf(m),E$mf(m)).na=1;s=s.write();E$Yc(o,n);E$Yc(o,m);E$Ob(this,o);n.na=t+1;typeof r=="function"&&r(s,n.na)}};E$v.rotate=function(l,k){k||(k=E$hj(this));for(var i=0,h=this.f.length;i<h;i++){this.f[i].rotate(l,k)}};E$Fh.prototype.rotate=function(p,o){var p=p*E$fc/180,n=E$$b(p),m=E$ac(p),l=this.b.x-o.x,k=this.b.y-o.y;this.b.x=o.x+l*n-k*m;this.b.y=o.y+l*m+k*n};function E$ic(x,w){var v="";if(w==E$q){w=x.Vc;w==E$q&&(w=0.825)}if(E$rf(x)){var v=w,u;if(v==E$q){v=x.Vc;v==E$q&&(v=0.825)}var t=new Date;u="$MDL REV 1 "+E$dj(t.getMonth()+1);u=u+E$dj(t.getDate());u=u+E$dj(t.getFullYear()-2000);u=u+E$dj(t.getHours());u=u+E$dj(t.getMinutes());u=u+"\n$MOL\n$HDR\n"+E$Zi(x);u=u+"$END HDR\n";for(var t=E$Xi(x),s=[],r=E$sf(x),q=0;q<r;q++){s[q]=E$Zh(x,q);s[q].Rd(E$rf(s[q]))}u=u+"$CTAB\n";q=E$Vh(x);u=u+E$tj(q,v);u=u+"$END CTAB\n";for(var p=0;p<t.length;p++){var o=t[p];u=u+"$RGP\n";u=u+E$gj(o.id);u=u+"\n";for(q=0;q<r;q++){if(s[q].f[0].tc==o.id){u=u+"$CTAB\n";u=u+E$tj(s[q],v);u=u+"$END CTAB\n"}}u=u+"$END RGP\n"}v=u+"$END MOL\n"}else{v=v+E$Zi(x);if(E$aj(x)){u=x.copy();E$bj(u);v=v+E$tj(u,w)}else{v=v+E$tj(x,w)}}return v}function E$Zi(i){var h="",h=typeof i.name!="undefined"?h+(i.name+"\n"):h+"MolHeader\n",g=new Date,h=h+"  ELEMENTL"+E$dj(g.getMonth()+1),h=h+E$dj(g.getDate()),h=h+E$dj(g.getFullYear()-2000),h=h+E$dj(g.getHours()),h=h+E$dj(g.getMinutes()),h=h+"2D\n";return h=typeof i.ee!="undefined"?h+(i.ee+"\n"):h+"Dotmatics Elemental\n"}function E$uj(p,o,n){for(var m="",l=0;l<p.length;l++){var k=p[l];if(l%8==0){l!=0&&(m=m+"\n");m=p.length-l<8?m+("M  "+o+"  "+(p.length-l)):m+("M  "+o+"  8")}m=m+n(k)}p.length>0&&(m=m+"\n");return m}function E$vj(r,q,p,o){for(var n="",m=0;m<r.length;m++){var l=r[m];if(m%15==0){m!=0&&(n=n+"\n");n=n+("M  "+q);n=n+E$gj(p);n=r.length-m<15?n+E$ej(r.length-m):n+E$ej(15)}n=n+o(l)}r.length>0&&(n=n+"\n");return n}function E$wj(i,h){var g;g=""+E$xj(i.coords[0].x*h);g=g+E$xj(i.coords[0].y*h);g=g+"    D";g=i.oe?g+"A":g+"R";g=g+"    ALL  1    ";g=i.V?g+i.V:g+" ";return g=g+"  "+i.wh}function E$tj(v,u){var t;t=""+E$ej(v.f.length);t=t+E$ej(v.g.length);for(var s=0,r=0,q=v.f.length;r<q;r++){var p=v.f[r];p.U.length>0&&s++;if(p.Ib){p.Ib=0}}r=0;for(q=v.g.length;r<q;r++){p=v.g[r];if(p.Ib){p.j.Ib=1;p.k.Ib=1}}t=t+E$ej(s);t=t+"  0"+E$ej(v.jb);t=t+"  0            999 V2000\n";r=0;for(q=v.f.length;r<q;r++){p=v.f[r];t=t+E$xj(p.b.x*u);t=t+E$xj(p.b.y*u);t=t+E$xj(p.b.oa*u);t=t+" ";t=p.na>0?t+"R# ":p.U.length>0?t+"L  ":t+E$fj(p.A,3);t=t+" 0";var o=p.Na;o!=0&&(o=4-o);t=t+E$ej(o);t=t+E$ej(0);t=p.Oa!=E$q?t+E$ej(p.Oa+1):t+E$ej(0);t=p.Ib?t+"  1":t+"  0";t=p.Cb==-1?t+" 15":t+E$ej(p.Cb);t=t+"  0  0  0";t=p.Pa?t+E$ej(p.Pa):t+"  0";t=p.bc?t+E$ej(p.bc):t+"  0";t=p.hd?t+E$ej(p.hd):t+"  0";t=t+"\n"}r=0;for(q=v.g.length;r<q;r++){p=v.g[r];t=t+E$ej(p.j.id+1);t=t+E$ej(p.k.id+1);t=t+E$ej(p.type);t=t+E$ej(p.o);t=p.qg?t+"  1":t+"  0";t=p.xb==E$q?t+"  0":p.xb?t+"  1":t+"  2";t=p.Sa?t+E$ej(p.Sa):t+"  0";t=t+"\n"}if(s>0){s=0;for(q=v.f.length;s<q;s++){p=v.f[s];if(p.U.length>0){t=t+E$ej(p.id+1);t=p.nc?t+" T    ":t+" F    ";r=p.U.length;r>5&&(r=5);t=t+r;for(var n=0;n<r;n++){t=t+E$gj(p.U[n])}t=t+"\n"}}}r=0;for(q=v.f.length;r<q;r++){p=v.f[r];if(p.vb){t=t+"A  ";t=t+(E$ej(p.id+1)+"\n");t=t+(p.vb+"\n")}}o=[];r=0;for(q=v.f.length;r<q;r++){p=v.f[r];p.$a>0&&o.push(v.f[r])}t=t+E$uj(o,"ISO",function(g){var f=E$gj(g.id+1);return f=f+E$gj(g.$a)});r=o.length=0;for(q=v.f.length;r<q;r++){p=v.f[r];p.nb>0&&o.push(v.f[r])}t=t+E$uj(o,"RAD",function(g){var f=E$gj(g.id+1);return f=f+E$gj(g.nb)});r=o.length=0;for(q=v.f.length;r<q;r++){p=v.f[r];p.na>0&&o.push(v.f[r])}t=t+E$uj(o,"RGP",function(g){var f=E$gj(g.id+1);return f=f+E$gj(g.na)});s=0;for(q=v.f.length;s<q;s++){p=v.f[s];if(p.U.length>0){for(r=0;r<p.U.length;){t=t+"M  ALS ";t=t+E$ej(p.id+1);n=p.U.length-r;n>16&&(n=16);t=t+E$ej(n);t=p.nc?t+" T ":t+" F ";for(n=0;n<16&&r<p.U.length;n++,r++){t=t+E$fj(E$Uc[p.U[r]][2],4)}t=t+"\n"}}}r=o.length=0;for(q=v.f.length;r<q;r++){p=v.f[r];p.ob!=E$q&&o.push(v.f[r])}t=t+E$uj(o,"RBC",function(g){var f=E$gj(g.id+1);return f=g.ob==0?f+"  -1":g.ob=="*"?f+"  -2":f+E$gj(g.ob)});r=o.length=0;for(q=v.f.length;r<q;r++){p=v.f[r];p.lb!=E$q&&o.push(v.f[r])}t=t+E$uj(o,"SUB",function(g){var f=E$gj(g.id+1);return f=g.lb==0?f+"  -1":g.lb=="*"?f+"  -2":f+E$gj(g.lb)});r=o.length=0;for(q=v.f.length;r<q;r++){p=v.f[r];p.Tc==1&&o.push(v.f[r])}t=t+E$uj(o,"UNS",function(g){var f=E$gj(g.id+1);return f=f+E$gj(g.Tc)});r=0;for(q=v.f.length;r<q;r++){p=v.f[r];if(p.ja){for(n=s=0;n<p.ja.length;n++){p.ja[n]&&(s=s+n)}t=t+"M  APO  1";t=t+E$gj(p.id+1);t=t+E$gj(s);t=t+"\n"}}if(v.Ta){for(r=0;r<v.Ta.length;r++){q=v.Ta[r];t=t+"M  LOG  1";t=t+E$gj(q.id);t=t+E$gj(q.Kd);t=t+E$gj(q.Fe);t=t+"   ";t=t+q.Be;t=t+"\n"}}t=t+E$uj(v.r,"STY",function(g){var f=E$gj(g.id);return f=f+E$gj(g.type)});for(r=o.length=0;r<v.r.length;r++){v.r[r].pd!=E$o&&o.push(v.r[r])}t=t+E$uj(o,"SST",function(g){var f=E$gj(g.id);return f=f+E$gj(g.pd)});t=t+E$uj(v.r,"SLB",function(g){var f=E$gj(g.id);return f=f+E$gj(g.id)});for(r=o.length=0;r<v.r.length;r++){v.r[r].Va!=E$o&&o.push(v.r[r])}t=t+E$uj(o,"SCN",function(g){var f=E$gj(g.id);return f=f+E$gj(g.Va)});for(r=0;r<v.r.length;r++){q=v.r[r];q.f.length>0&&(t=t+E$vj(q.f,"SAL",q.id,function(e){return E$gj(e.id+1)}));q.g.length>0&&(t=t+E$vj(q.g,"SBL",q.id,function(e){return E$gj(e.id+1)}));q.Ya.length>0&&(t=t+E$vj(q.Ya,"SPA",q.id,function(e){return E$gj(e.id+1)}));q.$c!=E$o&&(q.g.left&&q.g.right&&q.g.left.length>1&&q.g.left.length==q.g.right.length)&&(t=t+E$vj([q.g.left[0],q.g.left[1],q.g.right[0]],"CRS",q.id,function(e){return E$gj(e.id+1)}));if(q.coords.length>0){if(q.type=="DAT"){t=t+"M  SDD";t=t+E$gj(q.id);t=t+" ";t=t+E$wj(q,u);t=t+"\n"}else{if(q.type!="SUP"){for(s=0;s<q.coords.length-1;s=s+2){t=t+"M  SDI";t=t+E$gj(q.id);t=t+"  4";t=t+E$xj(q.coords[s].x*u);t=t+E$xj(q.coords[s].y*u);t=t+E$xj(q.coords[s+1].x*u);t=t+E$xj(q.coords[s+1].y*u);t=t+"\n"}}}}if(q.label){t=t+"M  SMT";t=t+E$gj(q.id);t=t+" ";t=t+q.label;t=t+"\n"}}p=[];for(r=0;r<v.r.length;r++){q=v.r[r];q.$b&&p.push(q)}p.length>0&&(t=t+E$vj(p,"SDS","EXP",function(e){return E$gj(e.id)}));return t+"M  END\n"}E$Ha.prototype.Rd=function(i){if(i){for(var h=0,g=this.f.length;h<g;h++){this.f[h].tc=i}}};function E$aj(g){for(var f=0;f<g.r.length;f++){if(g.r[f].type=="MUL"){return E$p}}return E$s}function E$bj(y){for(var x=0;x<y.r.length;x++){var w=y.r[x];if(w.type=="MUL"){if(w.g.length==2){var v=E$si(w,w.g[0].j)?w.g[0].j:w.g[0].k,u=E$si(w,w.g[1].j)?w.g[1].j:w.g[1].k,s=w.g[1];if(v!=u&&u.b.x<v.b.x){s=v;v=u;u=s;s=w.g[0]}E$Yc(s.j.g,s);E$Yc(s.k.g,s);E$Yc(y.g,s);E$Yc(w.g,s);E$Yh(y);for(var r=-1,q=-1,p=E$ti(y,w.Ya),o=0;o<p.f.length;o++){p.f[o].hidden=E$p;E$Mb(p.f[o].b,v.b)<0.0001&&(r=o);E$Mb(p.f[o].b,u.b)<0.0001&&(q=o)}v=y.f.length;for(o=1;o<w.label;o++){var z=y.f.length;E$wc(y,p);y.Ga(u,y.f[z+r],s.l,s.o);u=y.f[z+q]}s=y.Ga(u,E$si(w,s.j)?s.k:s.j,s.l,s.o);w.g.push(s)}else{p=E$ti(y,w.Ya);for(o=0;o<p.f.length;o++){p.f[o].hidden=E$p}v=y.f.length;for(o=1;o<w.label;o++){E$wc(y,p)}}for(o=v;o<y.f.length;o++){w.f.push(y.f[o])}}}}function E$xj(e){return E$yj(e.toFixed(4)," ",10)}function E$dj(e){return E$yj(e.toString(),"0",2)}function E$ej(e){return E$yj(e.toString()," ",3)}function E$gj(e){return E$yj(e.toString()," ",4)}function E$zj(n,m){if(n==E$q||m==E$q){console.log("ERROR in snapPosition() from="+n+"  to="+m);console.trace()}else{var l=E$W(n.b,m.b),k=E$bc(l.y,l.x),i=15*E$fc/180,k=i*E$cc(k/i);l.x=E$$b(k);l.y=E$ac(k);l.K();m.b.x=n.b.x+l.x;m.b.y=n.b.y+l.y}}function E$Si(){this.b=new E$Q;this.selected=this.width=0;this.V=""}E$Si.prototype.Za=function(g){for(var f in g){if(g[f]==E$q||typeof g[f]!="object"){this[f]=g[f]}}this.b.x=g.b.x;this.b.y=g.b.y};function E$yi(g,f){g==E$o&&(g=1);f==E$o&&(f="black");this.start=new E$Q;this.end=new E$Q;this.selected=this.style=0;this.type=g;this.color=f}function E$zi(){this.b=new E$Q;this.selected=0}function E$df(A,z,y,x,v,s,r,q,p,o,D){A.save();A.textAlign=q?q:"center";A.textBaseline=p?p:"middle";A.fillStyle="#fff";A.strokeStyle="#fff";A.lineCap="round";A.lineJoin="round";A.font=x+"px "+z.font;A.lineWidth=Math.max(1,z.ck*x);q=s;p=r;if(!o){q=E$U(z,s);p=E$T(z,r)}if(E$ka&&E$Da){q=q+x/30;p=p+x/25}E$Aa&&(p=p+x/15);E$Ca&&(p=p-x/10);if(D){var s=A.measureText(y).width,x=A.measureText("O").width,C,B;if(A.textAlign=="left"){z=q;s=q+s}else{if(A.textAlign=="left"){z=q-s;s=q}else{z=q-s/2;s=q+s/2}}if(A.Ok=="bottom"){C=p-x;B=p}else{if(A.textAlign=="top"){C=p;B=p+x}else{z=p-x/2;s=p+x/2}}E$ig(A,z,B,s,B,s,C,z,C)}A.strokeText(y,q,p);A.fillStyle=v;A.fillText(y,q,p);A.restore()}function E$Lf(y,x,w,v,u,s,r,q,p,o,z){y.save();y.beginPath();y.strokeStyle=z;y.lineCap="round";y.lineJoin="round";y.lineWidth=1.2;y.moveTo(E$U(x,w),E$T(x,v));y.lineTo(E$U(x,u),E$T(x,s));y.lineTo(E$U(x,r),E$T(x,q));y.lineTo(E$U(x,p),E$T(x,o));y.closePath();y.stroke();y.restore()}function E$ig(v,u,t,s,r,q,p,o,n){v.save();v.beginPath();v.fillStyle="white";v.moveTo(u,t);v.lineTo(s,r);v.lineTo(q,p);v.lineTo(o,n);v.closePath();v.fill();v.restore()}function E$cf(v,u,t,s,r,q,p,o,n){v.save();v.beginPath();v.strokeStyle=p;v.lineCap=n?n:"round";v.lineWidth=o;v.lineJoin="round";v.moveTo(E$U(u,t),E$T(u,s));v.lineTo(E$U(u,r),E$T(u,q));v.stroke();v.restore()}function E$Bf(p,o,n,m,l,k){p.save();p.beginPath();p.strokeStyle="gray";p.lineCap="round";p.lineWidth=k;p.lineJoin="round";p.moveTo(o,n);p.lineTo(m,l);p.stroke();p.restore()}function E$If(z,y,x,w,v,s,r,q,p,o,B,A){z.save();z.beginPath();z.strokeStyle=r;z.lineWidth=q;z.lineJoin="round";x=new E$Q(x,w);s=new E$Q(v,s);v=E$Mb(x,s);s=E$W(x,s);w=x.x;r=x.y;w=0;B&&(w=p+o);B=v;A&&(B=B-(p+o));for(A=w;A<B;A=A+(p+o)){B-A<p&&(p=B-A);r=A/v;w=x.x+r*s.x;r=x.y+r*s.y;z.moveTo(E$U(y,w),E$T(y,r));r=(A+p)/v;w=x.x+r*s.x;r=x.y+r*s.y;z.lineTo(E$U(y,w),E$T(y,r))}z.stroke();z.restore()}E$D.prototype.te=function(){this.save();if(E$Ph(this.e)==0){if(this.q!=E$q){E$Uh(this.e,this.q)}else{if(this.t!=E$q){this.e.wd(this.t)}else{if(this.pa!=E$q){E$Rh(this.e,this.pa)}else{if(this.ta!=E$q){E$Qh(this.e,this.ta)}else{if(this.fa!=E$q){this.e.Yd(this.fa)}else{if(this.Ba!=E$q){E$Sh(this.e,this.Ba)}else{this.qc.pop();return}}}}}}}E$N(this,E$p)};function E$Hb(){}E$Hb.prototype.onmousedown=function(e){this.xa=E$s;this.Ch=E$p;if(this.a.i.uiEraserDragSelectRegangle){E$kc(this.e);this.Bd=new E$Bc(E$p);this.Bd.a=this.a;this.Bd.e=this.e;this.Bd.onmousedown(e)}document.body.className="nonselectable"};E$Hb.prototype.onmouseup=function(g){this.Ch=E$s;document.body.className="";if(this.a.i.uiEraserDragSelectRegangle){if(this.xa){if(this.Bd){this.Bd.onmouseup(g)}this.Bd=E$q;return}this.Bd=E$q}var f=E$M(this.a,g);if(this.a.q!=E$q){this.a.save();this.Ff=E$Re(this.e,this.a.q);E$Uh(this.e,this.a.q);this.tg=f}else{if(this.a.t!=E$q){this.a.save();if(this.a.i.uiEraserReducesBondOrder){if(this.a.t.l>1){this.a.t.l--;this.a.t.type--}else{this.e.wd(this.a.t);this.Ff=E$Re(this.e,this.a.t)}}else{this.e.wd(this.a.t);this.Ff=E$Re(this.e,this.a.t)}this.tg=f}else{if(this.a.pa!=E$q){this.a.save();E$Rh(this.e,this.a.pa)}else{if(this.a.ta!=E$q){this.a.save();E$Qh(this.e,this.a.ta)}else{if(this.a.fa!=E$q){this.a.save();this.e.Yd(this.a.fa)}else{if(this.a.Ba!=E$q){this.a.save();E$Sh(this.e,this.a.Ba)}else{this.xa||E$kc(this.a.e)}}}}}}E$M(this.a,g);E$N(this.a,E$p)};E$Hb.prototype.onmousemove=function(e){E$M(this.a,e);if(this.Ch&&this.a.i.uiEraseOnEraserDrag){if(this.a.q!=E$q){this.a.save();E$Uh(this.e,this.a.q)}else{if(this.a.t!=E$q){this.a.save();this.e.wd(this.a.t)}else{if(this.a.pa!=E$q){this.a.save();E$Rh(this.e,this.a.pa)}else{if(this.a.ta!=E$q){this.a.save();E$Qh(this.e,this.a.ta)}else{if(this.a.fa!=E$q){this.a.save();this.e.Yd(this.a.fa)}else{this.xa||E$kc(this.a.e)}}}}}E$M(this.a,e);E$N(this.a,E$p)}else{if(this.a.i.uiEraserDragSelectRegangle){if(this.Bd){this.Bd.onmousemove(e)}}else{E$Ie(this.a)}}this.xa=E$p};function E$rd(){isEditPropertiesEditor=E$p}E$rd.prototype.onclick=function(e){E$Ga(e);return E$s};E$rd.prototype.onmouseup=function(e){E$B.a=this.a;if(this.a.q!=E$q&&this.a.Oc){this.se=E$p;E$B.fireEvent(this.a.Oc,"mousedown",e);E$B.fireEvent(this.a.D,"contextmenu",e);E$Ga(e)}else{if(this.a.t!=E$q&&this.a.Pc){this.se=E$p;E$B.fireEvent(this.a.Pc,"mousedown",e);E$B.fireEvent(this.a.D,"contextmenu",e);E$Ga(e)}else{if(this.a.fa!=E$q&&this.a.dd){E$B.fireEvent(this.a.dd,"mousedown",e);E$B.fireEvent(this.a.D,"contextmenu",e);E$Ga(e)}else{if(this.a.Ba!=E$q&&this.a.od){E$B.fireEvent(this.a.od,"mousedown",e);E$B.fireEvent(this.a.D,"contextmenu",e);E$Ga(e)}}}}E$N(this.a,E$p);return E$s};E$rd.prototype.onmousemove=function(e){E$M(this.a,e);E$Ie(this.a)};function E$Ce(){this.ud=E$s}E$Ce.prototype.onmousedown=function(e){e.button==2&&this.a.mf&&E$B.fireEvent(this.a.mf,"mousedown",e)};E$Ce.prototype.oncontextmenu=function(e){E$Ga(e);return E$s};E$Ce.prototype.onmouseup=function(g){if(!this.ud){this.ud=E$p;E$M(this.a,g);if(this.a.q!=E$q){var f=this.a.e.copy();E$G(this.a.N,new E$mc(E$q,E$q,E$q,f,this.a.q.id));this.a.N.Kc.style.display="none";this.a.N.n.onmousemove(g);this.ud=E$s}else{if(this.a.t!=E$q){f=this.a.e.copy();E$G(this.a.N,new E$mc(E$q,E$q,E$q,f,this.a.t.j.id,this.a.t.k.id));this.a.N.Kc.style.display="none";this.a.N.n.onmousemove(g);this.ud=E$s}}this.ud=E$s}};E$Ce.prototype.onmousemove=function(e){E$M(this.a,e);E$Ie(this.a)};function E$Be(){this.ud=E$s}E$Be.prototype.oncontextmenu=function(e){E$Ga(e);return E$s};E$Be.prototype.onmouseup=function(g){if(window.Elemental_clickSkip){E$Ga(g);return E$s}if(!this.ud){this.ud=E$p;var f=this.a.e.copy();if(this.a.N.Ha.load){this.a.N.save();E$tb(this.a.N,f);this.a.N.oc.style.display="none";E$Ke(this.a.N);E$N(this.a.N,E$p)}else{this.a.N.oc.style.display="none";this.a.N.Dc(f,g)}this.ud=E$s}};function E$Bc(e){this.zf=e;this.ma=new E$md;this.ma.Ve=E$p}E$Bc.prototype.onmousedown=function(e){this.a.sa=E$M(this.a,e);this.a.Ca=E$q;this.a.Ka=E$p;this.xd=this.xa=E$s};E$Bc.prototype.onmouseup=function(p){var o=E$s;if(this.a.i.uiSelectionSHIFTallowsAddition&&p.shiftKey||this.a.i.uiSelectionCTRLallowsAddition&&p.ctrlKey){o=E$p}var n=this.a.i.uiSelectionClickSelectedUnselects;!this.xa&&!o&&E$kc(this.a.e);var m=E$M(this.a,p);if(this.zf&&this.a.i.uiEraserDragSelectRegangle){E$gc(this.e)&&this.a.save();this.a.cb=E$p;E$Ph(this.e);E$pd(this.a)}else{if(this.xd){n=this.ma.onmouseup(p);this.ma.eb=E$q;return n}var n=this.a.i.uiSelectionClickSelectedUnselects,l=E$s;if(n&&this.a.sa&&this.xa){this.a.Ca=E$M(this.a,p);l=E$wh(this.a,o,n,E$p)}this.xa=E$s;this.a.sa=E$q;this.a.Ca=E$q;p=p.ctrlKey&&this.a.i.uiSelectionCTRLselectsFragment;if(!l){if(this.a.q!=E$q){this.a.q.selected=!n?1:this.a.q.selected>0?0:1;if(p){this.a.q.selected?E$Pb(this.a.e,this.a.q):E$Pb(this.a.e,this.a.q,E$p);p=E$s}}else{if(this.a.t!=E$q){if(this.a.t.j.selected&&this.a.t.k.selected&&n){this.a.t.j.selected=0;this.a.t.k.selected=0;this.a.t.selected=0}else{this.a.t.selected=!n?1:this.a.t.selected>0?0:1}if(p){this.a.t.selected?E$Pb(this.a.e,this.a.t):E$Pb(this.a.e,this.a.t,E$p);this.a.t.selected=0;p=E$s}}else{if(this.a.pa!=E$q){this.a.pa.selected=!n?1:this.a.pa.selected>0?0:1}else{if(this.a.ta!=E$q){this.a.ta.selected=!n?1:this.a.ta.selected>0?0:1}else{if(this.a.fa!=E$q){this.a.fa.selected=!n?1:this.a.fa.selected>0?0:1}else{if(this.a.Ba!=E$q){o=this.a.Ba;o.selected=!n?1:o.selected>0?0:1;for(var k=0;k<o.f.length;k++){o.f[k].selected=o.selected}}}}}}}}p&&(!l&&this.a.q==E$q&&this.a.t==E$q&&this.a.pa==E$q&&this.a.ta==E$q&&this.a.fa==E$q&&this.a.Ba==E$q)&&E$pj(this.a.e,m,n);if(this.zf){E$gc(this.e)&&this.a.save();this.a.cb=E$p;E$Ph(this.e);E$pd(this.a)}}this.a.Ka=E$p;E$Ie(this.a)};E$Bc.prototype.onmousemove=function(i){var h=E$s;if(this.a.i.uiSelectionSHIFTallowsAddition&&i.shiftKey||this.a.i.uiSelectionCTRLallowsAddition&&i.ctrlKey){h=E$p}if(this.a.sa){if(!this.xa&&!h){if(this.a.q!=E$q||this.a.t!=E$q||this.a.pa!=E$q||this.a.ta!=E$q||this.a.fa!=E$q||this.a.Ba!=E$q){E$gc(this.a.e)&&(this.a.q!=E$q&&!this.a.q.selected||this.a.pa!=E$q&&!this.a.pa.selected||this.a.ta!=E$q&&!this.a.ta.selected||this.a.fa!=E$q&&!this.a.fa.selected||this.a.Ba!=E$q&&!this.a.Ba.selected||this.a.t!=E$q&&(!this.a.t.j.selected||!this.a.t.k.selected))&&E$kc(this.a.e);this.ma.a=this.a;this.ma.onmousedown(i);this.xd=E$p}else{E$kc(this.a.e)}}this.xa=E$p;if(this.xd){this.ma.onmousemove(i)}else{var g=this.a.i.uiSelectionClickSelectedUnselects;this.a.Ca=E$M(this.a,i);E$wh(this.a,h,g);this.a.Ka=E$p;E$Ie(this.a)}}else{E$B.Ad=E$M(this.a,i);E$Ie(this.a)}};function E$Aj(p,o,n){var m,l=0,k=E$s;m=0;for(l=n.length-1;m<n.length;l=m++){if((n[m].y<=o&&o<n[l].y||n[l].y<=o&&o<n[m].y)&&p<(n[l].x-n[m].x)*(o-n[m].y)/(n[l].y-n[m].y)+n[m].x){k=!k}}return k}function E$Cc(e){this.zf=e;this.ma=new E$md;this.ma.Ve=E$p;this.bb=[]}E$Cc.prototype.onmousedown=function(e){this.a.sa=E$M(this.a,e);this.a.Ca=E$q;this.a.Ka=E$p;this.ue=this.xd=this.xa=E$s;this.Yi=this.a.mc.getContext("2d")};function E$tf(v,u,t){if(v.bb!=E$q&&v.bb.length>3){for(var s=[],r=0,q=v.a.e.f.length;r<q;r++){var p=v.a.e.f[r];p.selected=E$Aj(p.b.va,p.b.Ea,v.bb)?u?t?p.selected==3?0:p.selected==2?1:p.selected==1?1:p.selected==0?1:0:1:p.selected==3?3:p.selected==2?2:p.selected==1?3:p.selected==0?2:0:p.selected==2?0:p.selected==3?1:p.selected==1?1:0;p.abbr&&(p.abbr.sb==p&&E$Sf(p.abbr))&&s.push(p)}r=0;for(q=v.a.e.g.length;r<q;r++){var p=v.a.e.g[r],o;o=p;var n=new E$Q;n.x=0.5*(o.j.b.va+o.k.b.va);n.y=0.5*(o.j.b.Ea+o.k.b.Ea);o=n;p.selected=E$Aj(o.x,o.y,v.bb)?u?t?p.selected==3?0:p.selected==2?1:p.selected==1?1:p.selected==0?1:0:1:p.selected==3?3:p.selected==2?2:p.selected==1?3:p.selected==0?2:0:p.selected==2?0:p.selected==3?1:p.selected==1?1:0}for(t=0;t<s.length;t++){p=s[t];E$yh(p.abbr,p.selected)}t=0;for(q=v.a.e.F.length;t<q;t++){s=v.a.e.F[t];if(E$Aj(s.b.va,s.b.Ea,v.bb)){s.selected=u?1:2}else{if(s.selected==2){s.selected=0}}}t=0;for(q=v.a.e.v.length;t<q;t++){s=v.a.e.v[t];if(E$Aj(s.start.va,s.start.Ea,v.bb)&&E$Aj(s.end.va,s.end.Ea,v.bb)){s.selected=u?1:2}else{if(s.selected==2){s.selected=0}}if(s.selected){s.yd=0}}t=0;for(q=v.a.e.u.length;t<q;t++){s=v.a.e.u[t];if(E$Aj(s.b.va,s.b.Ea,v.bb)){s.selected=u?1:2}else{if(s.selected==2){s.selected=0}}}t=0;for(q=v.a.e.r.length;t<q;t++){s=v.a.e.r[t];if(s.coords){r=E$p;for(p=0;p<s.coords.length;p++){if(!E$Aj(s.coords[p].va,s.coords[p].Ea,v.bb)){r=E$s;break}}if(r){s.selected=u?1:2}else{if(s.selected==2){s.selected=0}}}}}}E$Cc.prototype.onmousewheel=function(e){if(this.ue){this.Me.onmousewheel(e)}};E$Cc.prototype.onmouseup=function(n){var m=E$s;if(this.a.i.uiSelectionSHIFTallowsAddition&&n.shiftKey||this.a.i.uiSelectionCTRLallowsAddition&&n.ctrlKey){m=E$p}!this.xa&&!m&&E$kc(this.a.e);this.a.sa=E$q;this.a.Ca=E$q;m=E$M(this.a,n);if(this.xd){m=this.ma.onmouseup(n);this.ma.eb=E$q;E$Bj=E$s;return m}if(this.ue){m=this.Me.onmouseup(n);this.ue=E$s;this.Me=E$q;return m}var l=this.a.i.uiSelectionClickSelectedUnselects;if(this.xa){this.bb.push(this.bb[0]);E$tf(this,E$p,l)}this.xa=E$s;if(this.a.i.uiLassoClickSelects){n=n.ctrlKey&&this.a.i.uiSelectionCTRLselectsFragment;if(this.a.q!=E$q){this.a.q.selected=!l?1:this.a.q.selected>0?0:1;if(n){this.a.q.selected?E$Pb(this.a.e,this.a.q):E$Pb(this.a.e,this.a.q,E$p);n=E$s}}else{if(this.a.t!=E$q){var k=this.a.t.j.selected&&this.a.t.k.selected;this.a.t.selected=!l?1:k||this.a.t.selected>0?0:1;if(n){this.a.t.selected?E$Pb(this.a.e,this.a.t):E$Pb(this.a.e,this.a.t,E$p);this.a.t.selected=0;n=E$s}}else{if(this.a.pa!=E$q){this.a.pa.selected=!l?1:this.a.pa.selected>0?0:1}else{if(this.a.ta!=E$q){this.a.ta.selected=!l?1:this.a.ta.selected>0?0:1}else{if(this.a.fa!=E$q){this.a.fa.selected=!l?1:this.a.fa.selected>0?0:1}else{if(this.a.Ba!=E$q){k=this.a.Ba;k.selected=!l?1:k.selected>0?0:1;for(var i=0;i<k.f.length;i++){k.f[i].selected=k.selected}}}}}}}n&&(this.a.q==E$q&&this.a.t==E$q&&this.a.pa==E$q&&this.a.ta==E$q&&this.a.fa==E$q&&this.a.Ba==E$q)&&E$pj(this.a.e,m,l)}if(this.zf){E$gc(this.e)&&this.a.save();this.a.cb=E$p;E$Ph(this.e)}this.bb.length=0;this.a.Ka=E$p;E$Ie(this.a)};E$Cc.prototype.onmousemove=function(p){var o=E$s;if(this.a.i.uiSelectionSHIFTallowsAddition&&p.shiftKey||this.a.i.uiSelectionCTRLallowsAddition&&p.ctrlKey){o=E$p}if(this.a.sa){if(!this.xa&&!o){this.xd=this.ue=E$s;if(this.a.q!=E$q||this.a.t!=E$q||this.a.pa!=E$q||this.a.ta!=E$q||this.a.fa!=E$q||this.a.Ba!=E$q){E$gc(this.a.e)&&(this.a.q!=E$q&&!this.a.q.selected||this.a.pa!=E$q&&!this.a.pa.selected||this.a.ta!=E$q&&!this.a.ta.selected||this.a.fa!=E$q&&!this.a.fa.selected||this.a.Ba!=E$q&&!this.a.Ba.selected||this.a.t!=E$q&&(!this.a.t.j.selected||!this.a.t.k.selected))&&E$kc(this.a.e);console.log("ABOUT TO START TRANSLATING!!!  this.editor.mol.hasSelectedItems()="+E$gc(this.a.e)+"  this.editor.highlightAtom="+this.a.q+" this.editor.highlightBond="+this.a.t);if(E$gc(this.a.e)&&(this.a.q!=E$q&&this.a.q.selected||this.a.t!=E$q&&this.a.t.j.selected&&this.a.t.k.selected||this.a.Ba!=E$q&&this.a.Ba.selected)){a:{for(var o=this.a.e,n=E$Re(this.a.e,this.a.q||this.a.t),m=0,l=o.f.length;m<l;m++){var k=o.f[m];k.cg=0}m=0;for(l=n.length;m<l;m++){k=n[m];k.cg=1}m=0;for(l=o.f.length;m<l;m++){k=o.f[m];if(k.selected&&k.cg==0||!k.selected&&k.cg==1){o=E$s;break a}}o=E$p}if(o){this.a.q!=E$q?this.a.q.userPicked=E$p:this.a.t!=E$q&&(this.a.t.userPicked=E$p);o=E$Ne(this.a.e);o.Cd();a:{m=0;for(n=o.f.length;m<n;m++){l=o.f[m];if(l.userPicked==E$p){l.Cj=m;n=l;break a}}m=0;for(n=o.g.length;m<n;m++){l=o.g[m];if(l.userPicked==E$p){l.Cj=m;n=l;break a}}n=E$q}this.a.q!=E$q?this.a.q.userPicked=E$o:this.a.t!=E$q&&(this.a.t.userPicked=E$o);n!=E$q?n.userPicked=E$o:console.log("ERROR-   Looks like 'userPicked' was not manually obfuscated");E$Ph(this.a.e);if(n instanceof E$Fh){this.Me=new E$mc(E$q,E$q,E$q,o,n.id)}else{if(n instanceof E$Oh){this.Me=new E$mc(E$q,E$q,E$q,o,n.j.id,n.k.id)}}this.Me.a=this.a;this.ue=E$Bj=E$p}else{this.ma.a=this.a;this.ma.onmousedown(p);this.xd=E$p}}else{this.ma.a=this.a;this.ma.onmousedown(p);this.xd=E$p}}else{E$kc(this.a.e)}}this.xa=E$p;if(this.xd){this.ma.onmousemove(p)}else{if(this.ue){E$Bj=E$p;this.Me.onmousemove(p)}else{p=E$M(this.a,p);if(this.bb.length>0){o=this.bb[this.bb.length-1];if(E$Mb(p,o)>2){this.bb.push(p);if(this.a.i.uiLiveLasso){this.a.Ka=E$p;E$Ie(this.a)}else{E$Bf(this.Yi,o.x,o.y,p.x,p.y,this.ka)}}}else{this.bb.push(p)}}}}else{E$B.Ad=E$M(this.a,p);this.a.Ka=E$p;E$Ie(this.a)}};function E$zb(){}E$zb.prototype.onmouseup=function(){if(this.a.q){var l=this.a.q,k=this.a.De?this.a.De:"",i=document.createElement("div");this.a.z.appendChild(i);E$E(i,l.b.Ea+this.a.qd-this.a.Ja/2-6,l.b.va+this.a.ke-this.a.Ja/2);i.style.zIndex=E$ja;this.a.q=E$q;E$N(this.a,E$p);var h=document.createElement("input");h.setAttribute("type","text");h.style.width="60px";h.style.zIndex=E$ja+1;i.appendChild(h);h.value=k;h.style.fontSize=this.a.Ja+"px";h.a=this.a;h.z=i;h.Nj=this.a.z.onselectstart;this.a.z.onselectstart=E$ba(E$p);h.s=l;h.onclick=function(){this.onblur()};h.onblur=function(){var w=this.value.trim();this.a.z.onselectstart=this.Nj;if(this.z.parentNode){try{this.z.parentNode.removeChild(this.z)}catch(v){console.log("exception on elementtexteditor line")}}if(w.length!=0){var s=E$s;if(w.indexOf("!")==0){w=w.substring(1);s=E$p}var r=w.split(",");this.a.save();if(r.length==1){w=r[0];if(w.length>1&&w[1].toUpperCase()=="H"){if(w.substr(1,1).toUpperCase()=="H"){var o=w.substr(0,1).toUpperCase(),x=E$Ue(this.s)-new Number(w.substr(2))+1;this.s.A="";E$be(this.s,o);this.s.Rc=x;r[0]=w}}else{x=E$s;if(w.length<3){var q=E$ae(w);if(q!=-1){E$be(this.s,w);x=E$p}else{var p=w;if(w.length==1){p=w.toUpperCase();q=E$ae(p)}else{if(w.length==2){p=w.substr(0,1).toUpperCase()+w.substr(1).toLowerCase();q=E$ae(p)}}if(q!=-1){E$be(this.s,p);r[0]=p;x=E$p}}}if(!x&&w.length>1){global.vj&&global.xg?o=global.xg.smilesToMolfile(w):window.xg&&(o=window.xg.smilesToMolfile(w));o&&(handledAsSmiles=E$p)}}}else{r=this.s.gf(w,s)}E$ce(this.a.e);this.a.De="";if(s){this.a.De=this.a.De+"!"}this.a.De=this.a.De+r.join(",");E$N(this.a)}};h.onkeydown=function(e){e=e||event;if(e.keyCode){code=e.keyCode}else{if(e.which){code=e.which}}if(code==13||code==27){this.onblur()}};this.a.Ck=h;h.focus();h.select()}};E$zb.prototype.onmousemove=function(e){E$M(this.a,e,E$s,E$s,E$p,E$p);E$Ie(this.a)};function E$Fc(e){E$Cj=e;this.Wc=new E$Hc(1,0);this.ea=E$q;this.Ga=E$s}var E$Cj;E$Fc.prototype.onmousedown=function(e){this.ea=this.a.q;this.ni=E$M(this.a,e,E$s,E$s,E$p,E$p)};E$Fc.prototype.onmouseup=function(g){var f=E$M(this.a,g,E$s,E$s,E$p,E$p);this.Ga||this.a.save();if(this.Ga){this.Wc.onmouseup(g);if(this.a.q!=E$q){E$be(this.a.q,E$Cj)}else{E$be(this.Wc.Ia.k,E$Cj);this.Ia=this.Wc.Ia}}else{if(this.a.q!=E$q){if(g.shiftKey||g.ctrlKey){this.Wc.a=this.a;this.Wc.onmousedown(g);this.Wc.onmouseup(g);E$be(this.Wc.Ia.k,E$Cj);this.Ia=this.Wc.Ia}else{E$Qf(this.a.q)==E$Cj?E$be(this.a.q,"C"):E$be(this.a.q,E$Cj)}}else{if(this.a.t!=E$q){f=this.a.t;if(f.o==0){f.l=E$Ue(f.j,E$p)>0&&E$Ue(f.k,E$p)>0?f.l+1:1;if(f.l>3){f.l=1}if(f.Xb()&&f.l>2){f.l=1}f.type=f.l}}else{g=E$ch(this.e);g.b.x=E$Bb(this.a,f.x);g.b.y=E$Cb(this.a,f.y);E$be(g,E$Cj)}}}E$ce(this.a.e);this.Ga=E$s;this.ea=E$q;this.a.p=E$q;E$zc(this.a);this.a.ic=E$p;E$N(this.a)};E$Fc.prototype.onmousemove=function(g){var f=E$M(this.a,g,E$s,E$s,E$p,E$p);if(this.ea&&E$Mb(f,this.ni)>5){if(!this.Ga){this.Wc.a=this.a;this.Wc.init(this.ea,this.ni,E$Cj);this.Ga=E$p;this.a.ic=E$s}this.Wc.onmousemove(g)}else{E$Ie(this.a)}};function E$md(g,f){this.Nf=E$p;this.xa=E$s;this.eb=E$q;this.qb=[];this.ie=E$s;this.Te=g==E$p;this.Dj=f==E$p;this.s=this.S=this.Sf=this.fe=this.Vd=E$q}E$md.prototype.onmousedown=function(t){if(this.eb==E$q){this.eb=E$gc(this.a.e)}if(t.button!=2){var s;this.Nb=s=this.Ve?this.a.sa:this.Dj?E$M(this.a,t,E$o,E$p,E$p,E$s,E$s):E$M(this.a,t);var r=this.ie=E$s;if(this.Te){if(this.a.i.uiSelectionSHIFTallowsAddition&&t.shiftKey||this.a.i.uiSelectionCTRLallowsAddition&&t.ctrlKey){r=E$p}if(r){E$pj(this.a.e,s)}else{E$kc(this.a.e);E$jj(this.a.e,s)?E$pj(this.a.e,s):this.a.q==E$q&&(this.a.t==E$q&&this.a.pa==E$q&&this.a.ta==E$q&&this.a.fa==E$q)&&E$pj(this.a.e,s);this.a.Ka=E$p}this.eb=E$gc(this.a.e)}if(this.eb&&this.a.i.uiMouseCursorChange){console.log("setting to move cursor");this.a.we().style.cursor="auto"}this.xa=E$s;this.s=this.S=this.Sf=this.fe=this.Vd=E$q;this.qb.length=0;this.a.save();this.a.ic=E$s;this.Nf=E$p;if(!this.eb){if(this.a.pa!=E$q){this.Vd=this.a.pa;this.a.pa=E$q;E$Yc(this.a.e.v,this.Vd);this.a.p=new E$Ha;this.a.p.v.push(this.Vd);E$N(this.a,E$p);this.ie=E$p}else{if(this.a.ta!=E$q){this.fe=this.a.ta;this.a.ta=E$q;E$Yc(this.a.e.F,this.fe);this.a.p=new E$Ha;this.a.p.F.push(this.fe);E$N(this.a,E$p);this.ie=E$p}else{if(this.a.fa!=E$q){this.Ra=this.a.fa;this.a.fa=E$q;E$Yc(this.a.e.u,this.Ra);this.a.p=new E$Ha;this.a.p.u.push(this.Ra);this.a.p.ba[this.Ra.V]=this.a.e.ba[this.Ra.V];E$N(this.a,E$p);this.ie=E$p}else{if(this.a.Ba!=E$q){this.a.Ba.selected=1;this.ie=E$p;this.a.Ba=E$q}else{if(this.a.q!=E$q||this.a.t!=E$q){E$ij(this.a.e.f);if(this.a.q!=E$q){this.a.q.selected=1;this.s=this.a.q}if(this.a.t!=E$q){this.a.t.j.selected=1;this.a.t.k.selected=1;this.S=this.a.t}}else{if(!this.Ve&&!this.Te){E$pj(this.a.e,s);if(!E$gc(this.a.e)){this.Nf=E$s}}}}}}}}if(E$gc(this.a.e)){for(s=this.a.e.r.length-1;s>=0;s--){r=this.a.e.r[s];if(r.selected){for(t=0;t<r.f.length;t++){r.f[t].selected=E$p}}else{for(var q=E$p,t=0;t<r.f.length;t++){if(!r.f[t].selected){q=E$s;break}}if(q){r.selected=E$p}}}this.a.p=E$Ne(this.a.e,E$p);for(t=this.qb.length=0;t<this.a.p.f.length;t++){this.qb.push(this.a.p.f[t])}if(this.qb.length>1){this.s=E$q}for(s=this.a.e.v.length-1;s>=0;s--){t=this.a.e.v[s];if(t.selected){E$Yc(this.a.e.v,t);this.Vd=t}}for(s=this.a.e.F.length-1;s>=0;s--){t=this.a.e.F[s];if(t.selected){E$Yc(this.a.e.F,t);this.fe=t}}for(s=this.a.e.u.length-1;s>=0;s--){t=this.a.e.u[s];if(t.selected){E$Yc(this.a.e.u,t);this.Sf=t}}for(s=0;s<this.a.e.r.length;s++){r=this.a.e.r[s];if(r.selected){t=new E$mi(r.type,1);t.coords=r.coords;this.a.p.r.push(t)}}t=0;for(s=this.a.e.f.length;t<s;t++){r=this.a.e.f[t];if(r.selected){for(var q=0,p=r.g.length;q<p;q++){var o=r.g[q],n=E$R(o,r);if(!n.selected){var m=E$ch(this.a.p);m.b.x=n.b.x;m.b.y=n.b.y;this.a.p.Ga(E$Bi(this.a.p,r),m,o.l,o.o,o.M)}}}}this.a.ac=E$p;E$N(this.a,E$p)}}};E$md.prototype.onmousemove=function(r){if(this.eb==E$q){this.eb=E$gc(this.a.e)}this.xa=E$p;r=this.a.p!=E$q?E$M(this.a,r,this.ie,this.s==E$q,this.S==E$q,this.Vd==E$q&&this.fe==E$q&&this.Sf==E$q,E$s):E$M(this.a,r);if(this.Nb!=E$q){var q=r.ha-E$Bb(this.a,this.Nb.x),p=r.ia-E$Cb(this.a,this.Nb.y);if(this.Nf){if(this.a.p){E$rj(this.a.p,q,p);if(this.qb.length>0){for(var o=this.qb,n=0,m=o.length;n<m;n++){var l=o[n];l.b.x=l.b.x+q;l.b.y=l.b.y+p}}}E$Ie(this.a)}else{this.a.origin.x=this.a.origin.x-q;this.a.origin.y=this.a.origin.y-p;E$N(this.a,E$p)}this.Nb=r}else{if(!this.Te&&!this.eb){E$ij(this.a.e.f);this.a.q==E$q&&(this.a.t==E$q&&this.a.pa==E$q&&this.a.ta==E$q&&this.a.fa==E$q)&&E$pj(this.a.e,r);this.a.Ka=E$p;E$Ie(this.a)}}};E$md.prototype.onmouseup=function(p){if(this.a.i.uiMouseCursorChange){this.a.mc.style.cursor="auto"}this.Nb=E$q;this.ie=E$s;if(this.Nf&&this.xa){if(this.qb.length==1&&this.a.q!=E$q&&!this.a.q.selected){for(var o=0,n=0;o<this.a.e.f.length;o++){var m=this.a.e.f[o];if(m.selected){n=0;for(o=m.g.length;n<o;n++){var l=m.g[n],k=E$R(l,m);k!=this.a.q&&this.a.e.Ga(k,this.a.q,l.l,l.o).Za(l)}E$Uh(this.a.e,m);o=this.a.q.b.x;n=this.a.q.b.y;this.a.q.Za(m);this.a.q.b.x=o;this.a.q.b.y=n;break}}}else{for(n=o=0;o<this.a.e.f.length;o++){m=this.a.e.f[o];if(m.selected){m.b.x=this.qb[n].b.x;m.b.y=this.qb[n].b.y;n++}}}}if(this.a.p){m=0;for(o=this.a.p.v.length;m<o;m++){n=this.a.p.v[m];if(this.eb){n.selected=1}this.a.e.v.push(n)}m=0;for(o=this.a.p.F.length;m<o;m++){n=this.a.p.F[m];if(this.eb){n.selected=1}this.a.e.F.push(n)}m=0;for(o=this.a.p.u.length;m<o;m++){n=this.a.p.u[m];if(this.eb){n.selected=1}this.a.e.u.push(n)}}this.xa?this.a.ic=E$p:this.a.qc.pop();if(!this.eb||!this.xa){this.Te||E$kc(this.a.e);this.eb=E$s}if(this.Te){o=this.eb=E$s;if(this.a.i.uiSelectionSHIFTallowsAddition&&p.shiftKey||this.a.i.uiSelectionCTRLallowsAddition&&p.ctrlKey){o=E$p}p=E$M(this.a,p);if(!o&&!E$jj(this.a.e,p)){E$kc(this.a.e)}else{if(!o){E$kc(this.a.e);E$pj(this.a.e,p,E$s,E$s,E$p)}}}this.a.ac=E$s;this.a.p=E$q;this.qb.length=0;this.eb=this.s=this.S=this.Sf=this.Vd=this.fe=E$q;E$zc(this.a);E$N(this.a,E$p);if(this.Ik){this.a.n=this.Ce}};function E$xb(x,w){this.xa=E$s;this.qb=[];this.a=x;this.a.p=E$Ne(this.a.e);this.Pf=w;if(!this.Pf){this.Pf=E$hj(this.a.p)}for(var v=0;v<this.a.p.f.length;v++){this.qb.push(this.a.p.f[v])}for(var v=0,u=this.a.e.f.length;v<u;v++){var t=this.a.e.f[v];if(t.selected){for(var s=0,r=t.g.length;s<r;s++){var q=t.g[s],p=E$R(q,t);if(!p.selected){var o=E$ch(this.a.p);o.b.x=p.b.x;o.b.y=p.b.y;this.a.p.Ga(E$Bi(this.a.p,t),o,q.l,q.o)}}}}this.a.ac=E$p;this.Nb=E$q}E$xb.prototype.onmousemove=function(n){var m=E$M(this.a,n);if(this.Nb==E$q){this.Nb=m}else{this.xa=E$p;var l=m.x-this.Nb.x,k=m.y-this.Nb.y,i=-l;E$Wb(k)>E$Wb(l)&&(i=k);if(this.qb.length>0){l=E$q;n.ctrlKey||n.shiftKey&&E$Wb(i)>1?l=-1*E$cc(i/1):E$Wb(i)>7&&(l=-15*E$cc(i/7));if(l!=E$q){E$He(this.qb,l,this.Pf);E$Ie(this.a);this.Nb=m}}}};E$xb.prototype.onmouseup=function(l){this.Nb=E$q;for(var k=0,i=0;k<this.a.e.f.length;k++){var h=this.a.e.f[k];if(h.selected){h.b.x=this.qb[i].b.x;h.b.y=this.qb[i].b.y;i++}}this.xa?this.a.ic=E$p:this.a.qc.pop();this.eb||E$kc(this.a.e);this.a.ac=E$s;this.a.p=E$q;this.qb.length=0;E$zc(this.a);E$N(this.a,E$p);this.a.n=this.Ce;E$Ga(l);return E$s};function E$Ec(g,f){this.Ce=f;this.p=g}E$Ec.prototype.onmouseup=function(e){if(e.button!=2){E$M(this.a,e);E$ph(this.a);this.a.n=this.Ce;this.a.p=E$q;E$zc(this.a);E$N(this.a);this.a.n=this.Ce;E$Ga(e);return E$s}};E$Ec.prototype.onmousemove=function(e){this.a.p=this.p;e=E$M(this.a,e);this.p.u[0].b.x=e.ha;this.p.u[0].b.y=e.ia;E$Ie(this.a)};function E$cd(){this.Ra=E$q;this.Ef=E$s}E$cd.prototype.onmousemove=function(e){e=E$M(this.a,e,E$s,E$s,E$p,E$s);if(this.Ra!=E$q){this.Ra.b.x=e.ha;this.Ra.b.y=e.ia;this.Ra.b.va=e.x;this.Ra.b.Ea=e.y;this.a.fa=E$q}E$N(this.a)};E$cd.prototype.onmousedown=function(e){if(e.button!=2){e=E$M(this.a,e,E$s,E$s,E$p,E$s);if(this.a.q){this.Ef=E$p}else{this.Ef=E$s;if(this.a.fa!=E$q){this.Ra=this.a.fa;this.a.fa=E$q;this.ak=e.x;this.bk=e.y}else{this.Ra=E$q}E$N(this.a)}}};E$cd.prototype.onmouseup=function(g){if(g.button!=2){var f=E$M(this.a,g,E$s,E$s,E$p,E$s);if(this.Ef&&this.a.q){f=new E$zb;f.a=this.a;f.e=this.e;f.onmouseup(g);this.Ef=E$s}else{if(this.Ra==E$q){g=E$oj(this.a,"TEXTBOX");this.Ra=E$sh(this.a.e,g,E$p,new E$Q(f.ha,f.ia));this.a.e.ba[g]="";this.Ra.b.x=f.ha;this.Ra.b.y=f.ia;this.Ra.b.va=f.x;this.Ra.b.Ea=f.y;E$B.a=this.a;E$B.srcElement=this.a.D;E$B.srcElement.Ra=this.Ra;E$B.hg()}else{if(f.x-this.ak<5&&f.y-this.bk<5){E$B.a=this.a;E$B.srcElement=this.a.D;E$B.srcElement.Ra=this.Ra;E$B.hg()}else{E$N(this.a)}}this.Ra=E$q}}};function E$mc(p,o,n,m,l,k){E$gh=p;E$hh=o;E$Dj=n;E$Md=E$Kd=E$Ld=-1;E$Bj=E$s;E$kh=E$ah=E$q;E$Ej=E$Fj=E$Gj=E$s;E$Hj=E$Ij=E$q;E$nh=E$s;if(E$Jj){E$Jj.jd=E$s;E$Jj=E$q}if(m){E$X=m;E$Ge=E$p;E$Zc=m;E$$c=l;E$ad=k;if(k==E$o||k==E$q){E$ah=E$X.f[l];E$kh=E$q}else{E$ah=E$q;E$kh=E$Ef(E$X,E$X.f[l],E$X.f[k])}E$X.We=E$s;if(E$kh){E$Gh(E$X);E$Kj(E$X);E$jh=E$kh.type==4&&E$kh.l==2?E$p:E$s;E$oh(E$X)}}else{E$X=E$fh(p,o,n,E$s);E$eh=E$Ue(E$X.f[0]);E$dh=E$hg(E$X.f[0]);E$Gh(E$X);E$Kj(E$X);E$mh||(E$mh=[]);p=E$mh.length=0;for(o=E$X.g.length;p<o;p++){E$X.g[p].type==4?E$mh.push(E$p):E$mh.push(E$s)}E$oh(E$X);E$Ge=E$s}E$Di(E$X);E$Ei(E$X);E$Lj()}var E$Zc,E$$c,E$ad,E$Kd,E$Ld,E$Md,E$Rd,E$Ge,E$dh,E$eh,E$X,E$gh,E$hh,E$ah,E$mh,E$nh,E$jh,E$kh,E$lh,E$Bj,E$Dj,E$Gj,E$Fj,E$Ej,E$Ij,E$Hj,E$Jj,E$Mj,E$Nj;function E$Lj(){var i=E$q,h,g=E$ah!=E$q?E$ah:E$X.f[0];E$X.We&&(g=E$X.f[E$X.f.length-1]);g.g.length>=1&&(h=E$W(g.b,E$R(g.g[0],g).b));if(h!=E$q){h.K();i=E$bh(E$bc(h.y,h.x))}return i}E$v=E$mc.prototype;E$v.onmouseout=function(){this.a.bj=E$s;if(E$Jj){E$Jj.jd=E$s;E$Jj=E$q;this.a.cb=E$p}this.a.vc.getContext("2d").clearRect(0,0,this.a.D.width,this.a.D.height)};E$v.onmouseover=function(){if(E$Jj){E$Jj.jd=E$s;E$Jj=E$q}this.a.bj=E$p;E$N(this.a)};E$v.onmousedown=function(e){if(e.button!=2&&!E$ma){this.xa=E$s;if(!E$Ej){if(E$Fj){E$Mj=E$Hj;E$Nj=E$Lj()}else{E$Mj=e=E$M(this.a,e,E$p);E$Ij=new E$Q(E$Bb(this.a,e.x),E$Cb(this.a,e.y));E$Hj=new E$Q(e.x,e.y);E$Nj=0}E$Ei(E$X)}E$Gj=E$p}};E$v.onmouseup=function(e){if(e.button!=2){E$Gj=E$Fj=E$s;E$Ij=E$q;E$Mj=E$M(this.a,e,E$p);if(E$Jj){E$Jj.jd=E$s;E$Jj=E$q;this.a.cb=E$p}E$ph(this.a);this.a.p=E$q;E$zc(this.a);E$N(this.a);if(this.Gj){this.a.n={};if(this.a.Of!=E$q){this.a.Of.onclick()}else{this.a.O.onclick()}}}};E$v.onmousemove=function(v,u){if(u&&this.ld){v.clientX=this.ld.x;v.clientY=this.ld.y}this.a.p=E$X;u=u||E$s;if(E$Gj){if(!E$Ej){var t=E$M(this.a,v,E$p);E$Mj==E$q&&(E$Mj=t);if(!this.xa&&E$Mb(t,E$Mj)>10){this.xa=E$p}if(this.xa){if(!E$Ge&&!E$Fj){var s=E$hj(E$X),r=s.x,s=s.y;E$Ij=new E$Q(r,s);E$Hj=new E$Q(E$U(this.a,r),E$T(this.a,s))}r=Math.atan2(-(t.y-E$Hj.y),t.x-E$Hj.x);r=r*(180/E$fc);if(r!=E$q){r=r-E$Nj;if(E$Ge||E$Fj){!v.ctrlKey&&!v.shiftKey&&(r=E$cc(r/5)*5);E$Fi(this.a.p);this.a.p.rotate(r,E$Ij)}else{E$Fi(E$X);if(E$gh.length==6){r=E$cc(r/45)*45;r=E$Wb(r)>135?90:r<45&&r>-45?90:0}else{if(E$gh.length==5){r=E$cc(r/30)*30;r=E$Wb(r)>135?90:r<45&&r>-45?-90:r<-45&&r>-135?-180:0}else{if(E$gh.length==4){r=E$cc(r/45)*45}else{if(E$gh.length==3){r=E$cc(r/30)*30;r=E$Wb(r)>135?90:r<45&&r>-45?-90:r<-45&&r>-135?-180:0}else{r=E$cc(r/10)*10}}}}E$X.rotate(r);this.p=E$X;this.a.p=E$X}E$Ie(this.a);E$Mj=t}}}}else{E$Ej=E$Fj=E$s;if(E$Jj){E$Jj.jd=E$s;E$Jj=E$q;this.a.cb=E$p}if(v&&!u){t=E$M(this.a,v,E$s,E$kh!=E$q,E$ah!=E$q,E$p)}else{if(u&&this.ld){v.clientX=this.ld.x;v.clientY=this.ld.y;t=E$M(this.a,v,E$s,E$kh!=E$q,E$ah!=E$q,E$p)}else{t=new E$Q(this.a.D.width/2,this.a.D.height/2)}}this.ld=new E$Q(v.clientX,v.clientY);if(E$lh){E$lh=E$s;E$kh.l=2;E$kh.type=2}(v&&v.shiftKey||E$Bj)&&E$Ai(this.a.p);if(this.a.q!=E$q&&!E$Ge||this.a.q!=E$q&&E$ah!=E$q){E$Yg(this.a,this.a.q,v.ctrlKey||v.altKey);E$Fj=E$p;E$Ij=this.a.q.b;E$Hj=new E$Q(E$U(this.a,this.a.q.b.x),E$T(this.a,this.a.q.b.y))}else{if(this.a.t!=E$q&&!E$Ge||this.a.t!=E$q&&E$kh!=E$q){E$ih(this.a,this.a.t,v.ctrlKey);E$Ej=E$p;E$Jj=this.a.t;E$Jj.jd=E$p;this.a.cb=E$p}else{if(E$Ge){var q=this.a.i.templateSnap;E$Zg();this.p=E$X;var r=E$Bb(this.a,t.x),s=E$Cb(this.a,t.y),t=E$hj(this.a.p),p;if(E$ah!=E$q){p=E$W(t,E$ah.b)}else{if(E$kh!=E$q){p=E$W(t,E$Ff(E$kh))}else{var o=this.a.p,n=E$hj(o);o.move(r-n.x,s-n.y)}}if(E$ah!=E$q||E$kh!=E$q){p=E$bc(p.y,p.x);t=E$W(t,new E$Q(r,s));t=E$bc(t.y,t.x);t=E$bh(t-p);t=q*E$cc(t/q);!E$Bj&&(v==E$q||!v.shiftKey)&&this.a.p.rotate(t);if(E$ah!=E$q){this.a.p.move(r-E$ah.b.x,s-E$ah.b.y);E$Fj=E$p;E$Ij=new E$Q(r,s);E$Hj=new E$Q(E$U(this.a,r),E$T(this.a,s))}else{if(E$kh!=E$q){q=this.a.p;t=E$Ff(E$kh);q.move(r-t.x,s-t.y);E$Ej=E$p}}}}else{E$X=E$fh(E$gh,E$hh,E$Dj,E$s,E$s);E$X.shift(t.ha,t.ia,E$p);this.p=E$X;this.a.p=E$X}}}E$Ie(this.a)}};E$v.onmousewheel=function(t){pos=E$M(this.a,t,E$s,E$kh!=E$q,E$ah!=E$q,E$p);if(E$Jj){E$Jj.jd=E$s;E$Jj=E$q;this.a.cb=E$p}this.a.p=E$X;if(E$Ge){a:{var s=E$hj(E$X),r,q;if(E$ah!=E$q){r=E$ah.b.x;q=E$ah.b.y}else{if(E$kh!=E$q){q=E$Ff(E$kh);r=q.x;q=q.y}}var p;if(E$ah!=E$q){p=E$W(s,E$ah.b)}else{if(E$kh!=E$q){p=E$W(s,E$Ff(E$kh))}else{break a}}for(var s=E$X,o=0,n=s.f.length;o<n;o++){s.f[o].b.x=s.f[o].b.x*-1}o=0;for(n=s.g.length;o<n;o++){var m=s.g[o];if(m.o==E$O){m.o=E$ld}else{if(m.o==E$ld){m.o=E$O}}}s=E$hj(E$X);s=E$ah!=E$q?E$W(s,E$ah.b):E$W(s,E$Ff(E$kh));p=E$bc(p.y,p.x);s=E$bc(s.y,s.x);E$X.rotate(E$bh(p-s));if(E$ah!=E$q){E$X.move(r-E$ah.b.x,q-E$ah.b.y)}else{if(E$kh!=E$q){p=E$X;s=E$Ff(E$kh);p.move(r-s.x,q-s.y)}}E$Nj=E$Lj();E$Di(E$X);E$Ei(E$X)}this.a.q!=E$q&&E$ah!=E$q?E$Yg(this.a,this.a.q,t.ctrlKey):this.a.t!=E$q&&E$kh!=E$q&&E$ih(this.a,this.a.t,t.ctrlKey)}else{if(E$Gj){return}E$gh&&E$gh!=E$q&&E$gh.unshift.apply(E$gh,E$gh.splice(1,E$gh.length));this.p=E$X=E$fh(E$gh,E$hh,E$Dj,E$s,E$s);this.a.p=this.p;E$eh=E$Ue(E$X.f[0]);E$dh=E$hg(E$X.f[0]);E$Gh(E$X);E$Kj(E$X);E$mh||(E$mh=[]);r=E$mh.length=0;for(q=E$X.g.length;r<q;r++){E$X.g[r].type==4?E$mh.push(E$p):E$mh.push(E$s)}E$oh(E$X);E$nh=!E$nh;this.p=E$X;this.a.p=this.p;this.onmousemove(t,E$p)}E$N(this.a);E$Ga(t)};function E$Zg(){if(E$X.We){E$Uh(E$X,E$X.f[E$X.f.length-1]);E$X.We=E$s}}function E$Gc(e){E$Oj=e}var E$Oj;E$Gc.prototype.onmouseup=function(e){E$M(this.a,e);e=this.a.q;if(e!=E$q){this.a.save();e.He(e.Na+E$Oj);E$N(this.a)}};E$Gc.prototype.onmousemove=function(e){E$M(this.a,e);E$Ie(this.a)};function E$bd(e){this.Wd=e;this.Kb=E$nb?new E$dd:E$q;if(E$ob){this.bd=new E$fd;this.ma=new E$md(E$s,E$p)}else{this.ma=this.bd=E$q}this.zd=E$s}E$bd.prototype.onmousedown=function(g){if(this.a.pa!=E$q||this.a.ta!=E$q){this.ma.a=this.a;E$kc(this.a.e);this.ma.e=this.e;this.zd=E$p;this.ma.Ve=E$s;this.ma.eb=E$s;return this.ma.onmousedown(g)}if(this.Kb!=E$q){this.Kb.a=this.a;this.Kb.e=this.e;if(this.Kb.Ec!=E$q){return this.Kb.onmousedown(g)}var f=this.a.q;if(f!=E$q){return this.Kb.onmousedown(g)}}else{f=this.a.q;if(f!=E$q){return E$s}}if(this.bd!=E$q&&g.shiftKey||this.bd!=E$q&&g.ctrlKey){this.bd.a=this.a;this.bd.e=this.e;return this.bd.onmousedown(g)}this.la=E$M(this.a,g,E$p)};E$bd.prototype.onmousemove=function(i){var h=this.Kb!=E$q&&this.Kb.Ec||this.la!=E$q,g=this.ma!=E$q&&this.la==E$q;if(this.zd){this.ma.a=this.a;this.ma.e=this.e;this.ma.eb=E$s;return this.ma.onmousemove(i)}h=E$M(this.a,i,E$o,h,E$p,!g,E$s);if(this.Kb!=E$q&&this.Kb.Ec!=E$q){this.Kb.a=this.a;this.Kb.e=this.e;return this.Kb.onmousemove(i)}if(this.la!=E$q){if(E$Mb(this.la,h)<10){return}if(this.Ua==E$q){this.a.save();this.Ua=E$xi(this.e,this.Wd,this.a.i.arrowColor,this.a.i.allowMultipleArrows);this.Ua.start.x=E$Bb(this.a,this.la.x);this.Ua.start.y=E$Cb(this.a,this.la.y)}this.Ua.end.x=E$Bb(this.a,h.x);this.Ua.end.y=E$Cb(this.a,h.y)}this.a.Ka=E$p;E$vh(this.e);E$N(this.a)};E$bd.prototype.onmouseup=function(e){if(this.zd){this.ma.a=this.a;this.ma.e=this.e;this.zd=E$s;this.ma.eb=E$s;return this.ma.onmouseup(e)}if(this.Kb!=E$q&&this.Kb.Ec!=E$q){this.Kb.a=this.a;this.Kb.e=this.e;return this.Kb.onmouseup(e)}if(this.bd!=E$q&&e.shiftKey||this.bd!=E$q&&e.ctrlKey){this.bd.a=this.a;this.bd.e=this.e;return this.bd.onmouseup(e)}e=E$M(this.a,e,E$p);if(this.Ua==E$q&&E$Mb(this.la,e)<10){this.a.save();this.Ua=E$xi(this.e,this.Wd,this.a.i.arrowColor,this.a.i.allowMultipleArrows);this.Ua.start.x=E$Bb(this.a,this.la.x);this.Ua.start.y=E$Cb(this.a,this.la.y);this.Ua.end.x=this.Ua.start.x+2;this.Ua.end.y=this.Ua.start.y;E$N(this.a)}this.la=this.Ua=E$q};function E$fd(){this.ma=E$ob?new E$md(E$s,E$p):E$q;this.zd=E$s}E$fd.prototype.onmousedown=function(e){if(this.a.pa!=E$q||this.a.ta!=E$q){this.ma.a=this.a;this.ma.e=this.e;E$kc(this.a.e);this.zd=E$p;this.ma.Ve=E$s;return this.ma.onmousedown(e)}this.la=E$M(this.a,e)};E$fd.prototype.onmousemove=function(g){var f=this.ma!=E$q&&this.la==E$q;if(this.zd){this.ma.a=this.a;this.ma.e=this.e;return this.ma.onmousemove(g)}if(this.ma){E$M(this.a,g,E$o,E$p,E$p,!f,E$s);this.a.Ka=E$p;E$N(this.a)}};E$fd.prototype.onmouseup=function(g){if(this.zd){this.ma.a=this.a;this.ma.e=this.e;this.zd=E$s;return this.ma.onmouseup(g)}this.a.save();var f=E$Yd(this.e),g=E$M(this.a,g);f.b.x=E$Bb(this.a,g.x);f.b.y=E$Cb(this.a,g.y);E$vh(this.e);E$N(this.a)};function E$dd(){this.vg=1;this.Ec=this.Ua=this.Fb=E$q}E$dd.prototype.onmousedown=function(i){var h=E$s;console.log("on mouse down "+this.a.q+" this.firstAtomInMap="+this.Fb+"  this.newArrow="+this.Ua);var g=this.a.q;if(g!=E$q){if(this.Fb==E$q){this.Fb=g;console.log("this.firstAtomInMap.mapping = "+this.Fb.Pa);(this.Fb.Pa==E$o||this.Fb.Pa==0)&&this.a.e.Jc(this.Fb,this.vg++);this.Ec=E$M(this.a,i,E$o,E$s,E$p,E$p);this.Ec.x=E$U(this.a,g.b.x);this.Ec.y=E$T(this.a,g.b.y)}else{if(g!=this.Fb){console.log("DOING BOTH ATOMS");if(this.Fb.Pa!=0&&this.Fb.Pa!=E$o){this.a.e.Jc(g,this.Fb.Pa)}else{this.a.e.Jc(this.Fb,this.vg);this.a.e.Jc(g,this.vg++)}this.Fb=E$q}}h=E$p}else{if(this.a.t){i=this.a.t;h=0;switch(i.Sa){case -1:h=0;break;case E$o:case 0:h=1;break;case 1:h=2;break;case 2:h=4;break;case 4:h=8;break;case 8:h=12;break;case 12:h=-1;break;default:h=0}console.log("changing From"+i.Sa+"  to "+h);i.Sa=h;this.Fb=this.Ec=E$q;h=E$p}}if(h){E$vh(this.e);E$N(this.a);E$Ie(this.a)}};E$dd.prototype.onmousemove=function(e){e=E$M(this.a,e,E$o,E$s,this.Ua!=E$q,E$p,E$s);if(this.Ec!=E$q){if(E$Mb(this.Ec,e)<10){return}if(this.Ua==E$q){this.a.save();this.Ua=E$xi(this.e,2,"#ddd",E$p);this.Ua.start.x=E$Bb(this.a,this.Ec.x);this.Ua.start.y=E$Cb(this.a,this.Ec.y)}this.Ua.end.x=E$Bb(this.a,e.x);this.Ua.end.y=E$Cb(this.a,e.y);E$vh(this.e)}E$N(this.a);E$Ie(this.a)};E$dd.prototype.onmouseup=function(){console.log("on mouse up "+this.a.q+" this.firstAtomInMap="+this.Fb+"  this.newArrow="+this.Ua);if(this.Ua!=E$q&&this.Fb!=E$q){console.log("We were drawing arrow and had a first atom!");var l=this.a.q;l!=E$q&&l!=this.Fb&&this.a.e.Jc(l,this.Fb.Pa);this.Fb=E$q}if(this.Ua!=E$q){for(var l=this.e,k=this.Ua,i=[],h=0;h<l.v.length;h++){l.v[h]!=k&&i.push(l.v[h])}l.v=i}this.Ec=this.Ua=E$q;E$N(this.a)};function E$ed(){}E$ed.prototype.onmouseup=function(){if(this.a.sa){for(var g=E$Zd(this.a.e,E$p,E$s),f=0;f<g.length;f++){g[f].Sa=0}g=E$Xc(this.a.e,E$s);for(f=0;f<g.length;f++){g[f].Pa=0}}this.a.sa=E$q;this.a.Ca=E$q;E$kc(this.a.e);E$pd(this.a);this.a.Ka=E$p;E$vh(this.e);E$N(this.a);E$Ie(this.a)};E$ed.prototype.onmousedown=function(i){var h=E$s;E$kc(this.a.e);console.log("AtomAtomMapDeleteEditoron mouse down "+this.a.q);var g=this.a.q;if(g!=E$q){this.a.e.Jc(g,0);h=E$p}else{if(this.a.t){this.a.t.Sa=0;h=E$p}else{this.a.sa=E$M(this.a,i);this.a.Ca=E$q;this.a.Ka=E$p;this.xa=E$s}}if(h){E$vh(this.e);E$N(this.a);E$Ie(this.a)}};E$ed.prototype.onmousemove=function(e){if(this.a.sa){this.xa=E$p;this.a.Ca=E$M(this.a,e);E$wh(this.a,E$s,E$s);this.a.Ka=E$p;E$Ie(this.a)}else{E$M(this.a,e,E$o,E$s,E$s,E$p,E$s)}};function E$Hc(i,h,g){this.l=i;this.o=h;this.M=g!=E$o?g:0;this.Ia=E$q;this.xe=E$s}E$Hc.prototype.init=function(i,h,g){this.Lf=this.la=h;this.a.save();this.ea=i;this.Id=this.Dd=this.ca=E$q;this.Yh=g;this.xe=E$s;this.a.p=new E$Ha;if(this.ea!=E$q){i=E$ch(this.a.p);i.b.x=this.ea.b.x;i.b.y=this.ea.b.y}};E$Hc.prototype.onmousedown=function(e){this.init(this.a.q,E$M(this.a,e));E$Ie(this.a)};E$Hc.prototype.onmousemove=function(i){if(this.xe&&this.Lf&&this.a.df){var h=this.a.df;if(E$Wb(this.Lf.x-h.x)>2||E$Wb(this.Lf.y-h.y)>2){this.xe=E$s;this.Lf=E$q}}h=E$M(this.a,i,E$o,E$o,E$o,E$p);if(this.la!=E$q){if(this.Dd){this.Dd.l=this.l;this.Dd.type=this.l;this.Dd.o=this.o;this.Dd.M=this.M}if(this.Id){this.Id.jd=E$s;this.Id=E$q;this.a.cb=E$p}if(E$Wb(this.la.x-h.x)>4||E$Wb(this.la.y-h.y)>4){if(this.ca==E$q||this.ea==E$q){if(this.ea==E$q){this.ea=E$rh(this.a.e,E$Bb(this.a,this.la.x),E$Cb(this.a,this.la.y));var g=E$ch(this.a.p);g.b.x=this.ea.b.x;g.b.y=this.ea.b.y}this.ca=E$ch(this.a.p);this.Yh&&E$be(this.ca,this.Yh);this.Dd=this.a.p.Ga(this.ca,this.a.p.f[0],this.l,this.o,this.M)}this.ca.b.x=E$Bb(this.a,h.x);this.ca.b.y=E$Cb(this.a,h.y);if(this.a.q!=E$q&&this.a.q!=this.ea&&this.a.q!=this.ca&&this.ea!=E$q){if((i=E$Nh(this.ea,this.a.q))&&this.l==1&&this.o==0){h=i.l;if(E$Ue(i.j,E$p)>0&&E$Ue(i.k,E$p)>0){h=i.l+1;h>3&&(h=1);i.Xb()&&h>2&&(h=1)}else{h=1}if(h!=i.l){this.Id=i;this.Id.jd=E$p;this.Dd.l=h;this.Dd.type=this.Dd.l;this.a.cb=E$p}}this.ca.b.x=this.a.q.b.x;this.ca.b.y=this.a.q.b.y}else{if(i&&i.shiftKey){this.ca.b.x=h.ha;this.ca.b.y=h.ia}else{(i==E$q||!i.shiftKey)&&this.ea!=E$q&&E$zj(this.ea,this.ca)}}}E$vh(this.a.e)}E$Ie(this.a)};E$Hc.prototype.onmouseup=function(l){if(this.Id){this.Id.jd=E$s;this.Id=E$q}var k=E$M(this.a,l);(this.a.Tb||this.a.Ud)&&E$kc(this.a.e);if(this.ca==E$q){var k=E$M(this.a,l),i=this.a.t;if(i!=E$q){if(this.o==0){if(i.o!=0||this.l>1){i.o=0;i.l=this.l;i.type=this.l}else{i.o=0;i.l=E$Ue(i.j,E$p)>0&&E$Ue(i.k,E$p)>0?i.l+1:1;if(i.l>3){i.l=1}if(i.Xb()&&i.l>2){i.l=1}i.type=i.l}i.M=this.M}else{if(this.l==1){E$$d(i,this.o,this.M)}else{i.l=this.l;i.type=this.l;i.o=this.o;i.M=this.M}}E$Ng(i.j);E$Ng(i.k);E$vh(this.a.e);this.a.cb=E$p;this.Ia=E$s}else{i=this.a.q;if(i==E$q){l=E$ch(this.a.e);l.b.x=k.ha;l.b.y=k.ia;var i=E$ch(this.a.e),h=30*E$fc/180;i.b.x=k.ha+E$$b(h);i.b.y=k.ia+E$ac(h);this.Ia=this.a.e.Ga(l,i,this.l,this.o,this.M);E$Ng(l);E$Ng(i);this.a.cb=E$p;this.a.q=l;this.a.Ka=E$p;if(this.a.Tb){l.selected=1;i.selected=1}}else{this.Ia=E$Gi(this.a.e,i,this.l,this.o,l.ctrlKey,this.M);E$Ng(i);if(this.a.Ud){E$R(this.Ia,i).selected=1}this.xe=E$p;this.a.q=this.Ia.k;this.a.cb=E$p}}}else{k=E$Bi(this.a.e,this.ca);i=E$q;if(k==E$q){k=E$ch(this.a.e);k.b.x=this.ca.b.x;k.b.y=this.ca.b.y;if(this.a.Tb){k.selected=1}}else{if(i=E$Nh(this.ea,k)){if(this.l==1&&this.o==0){i.o=0;i.l=E$Ue(i.j,E$p)>0&&E$Ue(i.k,E$p)>0?i.l+1:1;if(i.l>3){i.l=1}if(i.Xb()&&i.l>2){i.l=1}i.type=i.l}else{i.l=this.l;i.type=this.l;i.o=this.o}i.M=this.M}}this.Ia=i||this.a.e.Ga(this.ea,k,this.l,this.o,this.M);this.a.cb=E$p}this.ea=this.ca=this.la=E$q;this.a.p=E$q;E$zc(this.a);E$Ie(this.a)};function E$yj(i,h,g){for(;i.length<g;){i=h+i}return i}function E$fj(i,h){for(var g=i;g.length<h;){g=g+" "}return g}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});function E$Qb(e){return typeof e==="string"||e instanceof String}function E$ui(i,h){for(var g=0;g<i.length;g++){if(i[g]==h){return g}}return -1}Array.prototype.indexOf||(Array.prototype.indexOf=function(g){for(var f=0;f<this.length;f++){if(this[f]==g){return f}}return -1});function E$Yc(g,f){g.splice(E$ui(g,f),1)}function E$bh(e){return e*180/E$fc}function E$oc(e){for(oLeft=e.offsetLeft;e.offsetParent!=E$q;){oParent=e.offsetParent;oLeft=oLeft+oParent.offsetLeft;e=oParent}return oLeft}function E$nc(e){for(oTop=e.offsetTop;e.offsetParent!=E$q;){oParent=e.offsetParent;oTop=oTop+oParent.offsetTop;e=oParent}return oTop}function E$Pj(i){for(var h=0,g=i.f.length;h<g;h++){if(i.f[h].ib==-1){return i.f[h]}}return -1}function E$Qj(r,q,p){q.ib=1;q.ua=r.Pe;r.Pe++;r.tb[p]=q;p++;for(var o=q.g.length,n=0;n<o;n++){var m=q.g[n],l=E$R(m,q);if(m.yc==0&&(p<2||l!=r.tb[p-2])){l.ib==-1?E$Qj(r,l,p):m.yc=1}}}function E$Rj(t,s,r){var q=s.g.length,p=[];s.ib=t.Pe;t.Pe++;t.tb[r]=s;r++;for(var o=0;o<q;o++){var n=s.g[o],m=E$R(n,s);if(r<2||m!=t.tb[r-2]){n.yc==0?p.push(n):s.ad.push(n)}}o=0;for(q=p.length;o<q;o++){n=p[o];m=E$R(n,s);if(m.ib==-1){s.ad.push(n);m.ad.push(n);E$Rj(t,m,r)}}}function E$Gh(i){for(var h=0,g=i.f.length;h<g;h++){i.f[h].Ld=0}h=0;for(g=i.g.length;h<g;h++){i.g[h].Ld=0}g=0;for(h=i.f.length;g<h;g++){i.f[g].ib=-1}g=0;for(h=i.f.length;g<h;g++){i.f[g].ib==-1&&E$kj(i,i.f[g],0)}i.Af=0}function E$Sg(i){if(i.l!=1){return E$s}for(;;){var h=i.k;if(E$Sj(E$ae(i.j.A))&&h.A=="N"&&h.g.length==3&&h.Na==0){var g=0}for(i=0;i<h.g.length;i++){g=g+h.g[i].l}if(g==4){return E$p}break}return E$s}function E$kj(r,q,p){r.tb[p]=q;q.ib=p;for(var o=0,n=q.g.length;o<n;o++){var m=q.g[o];if(!E$Sg(m)){var l=E$R(m,q);if(p==0||l!=r.tb[p-1]){r.yc[p]=m;if(l.ib==-1){E$kj(r,l,p+1)}else{for(m=l.ib;m<=p;m++){r.tb[m].Ld=1;r.yc[m].Ld=1}}}}}}function E$sf(l){for(var k=0,i=l.f.length;k<i;k++){l.f[k].Sc=-1}for(var h=0,k=0,i=l.f.length;k<i;k++){if(l.f[k].Sc==-1){E$Tj(l,l.f[k],h);h++}}return l.kh=h}function E$Tj(p,o,n){o.Sc=n;for(var m=0,l=o.g.length;m<l;m++){var k=E$R(o.g[m],o);k.Sc==-1&&E$Tj(p,k,n)}}function E$Wi(z){E$Gh(z);E$Uj(z);E$Kj(z);for(var y=0,x=z.f.length;y<x;y++){z.f[y].jb=0;z.f[y].ef=E$s}for(var w=0,x=z.g.length;w<x;w++){z.g[w].jc=0}w=0;for(x=z.kb.length;w<x;w++){var v=z.kb[w];if(v.size<8){for(var s=0;s<v.size;s++){y=v.g[s];if(y.l==2){y.jc=-1}}}}y=0;for(x=z.f.length;y<x;y++){for(var w=0,r=z.f[y],s=0;s<r.g.length;s++){r.g[s].l==2&&w++}if(w==2){for(s=0;s<r.g.length;s++){if(r.g[s].l==2){r.g[s].jc=-1}}}}w=0;for(x=z.g.length;w<x;w++){y=z.g[w];if(y.l==2&&y.jc!=-1&&y.o!=E$jd){v=[y.j,y.k];if(v[0].g.length>1&&v[1].g.length>1){for(var q=E$p,s=0,p=v.length;s<p;s++){for(var r=v[s],o=0,B=r.g.length;o<B;o++){var A=r.g[o];A.o==E$kd&&(q=E$s)}}if(q){o=0;for(B=y.j.g.length;o<B;o++){s=0;for(r=y.k.g.length;s<r;s++){p=E$R(y.j.g[o],y.j);A=E$R(y.k.g[s],y.k);if(p!=y.k&&A!=y.j&&E$Vj(p,y.j,y.k,A)==E$q){q=E$s;break}}if(!q){break}}}if(q){y.jc=2;s=0;for(p=v.length;s<p;s++){r=v[s];r.ef=E$p;o=0;for(B=r.g.length;o<B;o++){A=r.g[o];if(A!=y){A.jc=1}}}}}}}y=0;for(x=z.f.length;y<x;y++){z.f[y].jb=0}y=0;for(x=z.f.length;y<x;y++){if(z.f[y].g.length==3||z.f[y].g.length==4){s=z.f[y].g;w=0;for(p=s.length;w<p;w++){if(s[w].j==z.f[y]){if(s[w].o==E$O||s[w].o==E$ld){z.f[y].jb=1}if(s[w].o==E$kd){z.f[y].jb=-1}}}}}s=E$s;x=0;for(w=z.f.length;x<w;x++){y=z.f[x];y.Pa&&(s=E$p);if(y.cd){y.cd.length=0}}if(!s&&z.Gb&&E$mb){x=0;for(w=z.f.length;x<w;x++){y=z.f[x];if(E$Jh(y)&&y.g.length==1){s=E$R(y.g[0],y);if(s.cd==E$q){s.cd=[]}s.cd.push(y)}}}z.Hb="";for(x=0;x<3;x++){w=0;z.Pe=0;y=z;v=x==0;q=0;for(s=y.f.length;q<s;q++){y.f[q].ib=-1}if(v){q=0;for(s=y.f.length;q<s;q++){y.f[q].ad=[];y.f[q].ua=-1}v=0;for(s=y.g.length;v<s;v++){y.g[v].yc=0;y.g[v].kg=-1;y.g[v].Q=0}for(s=1;s<101;s++){y.yf[s]=-1}}for(;E$Pj(z)!=-1;){y=E$Pj(z);w++;if(x==0){E$Qj(z,y,0)}else{if(x==1){E$Rj(z,y,0)}else{if(w>1){z.Hb=z.Hb+"."}E$Wj(z,y,0)}}}}if(E$lb){y="";s=[];x=0;for(w=z.f.length;x<w;x++){console.log("ABS search i="+x+"  atom.outputOrder="+z.f[x].ua);z.f[x].pb==E$jg&&s.push(z.f[x].ua+1)}if(s.length>0){s.sort();y="a:";for(x=0;x<s.length;x++){x>0&&(y=y+",");y=y+s[x]}y=y+";"}v=[];x=0;for(w=z.f.length;x<w;x++){if(z.f[x].pb==E$kg){v[z.f[x].Mb]=z.f[x].Mb}}for(q=0;q<v.length;q++){if(v[q]){o=v[q];x=s.length=0;for(w=z.f.length;x<w;x++){z.f[x].pb==E$kg&&z.f[x].Mb==o&&s.push(z.f[x].id+1)}if(s.length>0){s.sort();y=y+("o"+o+":");for(x=0;x<s.length;x++){x>0&&(y=y+",");y=y+s[x]}y=y+";"}}}v=[];x=0;for(w=z.f.length;x<w;x++){if(z.f[x].pb==E$lg){v[z.f[x].Mb]=z.f[x].Mb}}for(q=0;q<v.length;q++){if(v[q]){o=v[q];x=s.length=0;for(w=z.f.length;x<w;x++){z.f[x].pb==E$lg&&z.f[x].Mb==o&&s.push(z.f[x].id+1)}if(s.length>0){s.sort();y=y+("&"+o+":");for(x=0;x<s.length;x++){x>0&&(y=y+",");y=y+s[x]}y=y+";"}}}z.Hb=z.Hb+(" "+y);console.log("extendedSmiles="+y)}E$oh(z);return z.Hb}function E$ae(g){for(var f=0;f<E$Uc.length;f++){if(g==E$Uc[f][2]){return f}}return -1}E$Fh.prototype.$d=function(p,o){var n=E$ae(this.A);if(n==-1||E$Uc[n]==E$o||E$qj[n]==E$o||E$Ni[n]==E$o){return 0}var m,l=0;if(p){m=E$Uc[n][3]}else{for(var l=this.$a?this.$a:E$Ni[n],k=0;k<E$qj[n].length;k++){l==E$qj[n][k][0]&&(m=E$qj[n][k][1])}}o||(m=p?m+E$Ue(this)*E$Uc[1][3]:m+E$Ue(this)*E$qj[1][0][1]);return m};function E$Xj(e){switch(e){case"C":return E$p;case"N":return E$p;case"O":return E$p;case"F":return E$p;case"P":return E$p;case"S":return E$p;case"Cl":return E$p;case"Br":return E$p;case"I":return E$p;case"B":return E$p;default:return E$s}}function E$Yj(i,h){if(i>=0&&i<E$gg.length){for(var g=0;g<6;g++){if(E$gg[i][g]>=h){return E$gg[i][g]}}}return 0}function E$Wj(A,z,y){var x=z.g.length,v=[],s=[],r=[],q=0;z.ib=A.Pe;A.Pe++;A.tb[y]=z;y++;A.Hb=A.Hb+E$Zj(A,z,y);for(var p=0;p<x;p++){var o=z.g[p],D=E$R(o,z);o.jc==1&&(q=1);if(y<2||D!=A.tb[y-2]){if(o.yc==0){v.push(o)}else{var C=o.kg;s.push(o);if(C==-1){var B=E$s;a:{for(C=1;C<101;C++){if(A.yf[C]==-1){break a}}C=0}o.kg=C;A.yf[C]=o;if(o.jc==1){E$ak(z,o,D);B=E$p}A.Hb=A.Hb+E$bk(A,o,B)}else{A.yf[C]=-1}A.Hb=C<10?A.Hb+C:A.Hb+("%"+C)}}}if(q){p=B=0;for(x=v.length;p<x;p++){o=v[p];if(o.jc==1){D=E$R(o,z);if(D.ef){r[p]=1;B++}else{r[p]=0}}else{r[p]=0}}if(B==0){p=1;if(y>1){o=E$Ef(A,A.tb[y-1],A.tb[y-2]);o.jc==1&&(p=0)}if(p){p=0;for(D=v.length;p<D;p++){o=v[p];if(o.jc==1){r[p]=1;break}}}}}p=0;for(x=v.length;p<x;p++){o=v[p];D=E$R(o,z);s=p<v.length-1;A.Gb&&(E$mb&&E$Jh(D))&&(s=E$s);if(D.ib==-1){B=E$s;if(q&&o.jc&&r[p]){E$ak(z,o,D);B=E$p}if(s){A.Hb=A.Hb+"("}A.Hb=A.Hb+E$bk(A,o,B);E$Wj(A,D,y);if(s){A.Hb=A.Hb+")"}}}}function E$ck(i){for(var h=0,g=i.g.length;h<g;h++){if(i.g[h].type==4){return E$p}}return E$s}function E$Zj(B,A,z,y){var v=E$s,s=-1;if(B.Gb&&E$mb&&E$Jh(A)&&!y){return""}if(A.cd&&A.cd.length>0&&!y){y=A.Oa;if(A.Oa==E$q){A.Oa=0}A.Oa=A.Oa+A.cd.length;for(var v="[$("+E$Zj(B,A,z,E$p),v=v+")",r=[],s=parseInt(Math.pow(2,A.cd.length)-1),q=1;q<=s;q++){var p=0;A.Oa=y;for(var o=0;o<A.cd.length;o++){q>>o&1||p++}if(p){if(A.Oa==E$q){A.Oa=0}A.Oa=A.Oa+p}for(var p=E$Zj(B,A,z,E$p),F=0,E=A.g.length;F<E;F++){var D=A.g[F],C=E$R(D,A);if(!E$Jh(C)){p=p+"(";p=p+E$bk(B,D);p=p+E$Zj(B,C,z,E$p);p=p+")"}}for(o=0;o<A.cd.length;o++){if(q>>o&1){p=p+"(";F=0;for(E=A.g.length;F<E;F++){D=A.g[F];C=E$R(D,A);if(C==A.cd[o]){p=p+E$bk(B,D);p=p+E$Zj(B,C,z,E$p);p=p+")";break}}}}F=E$p;o=0;for(E=r.length;o<E;o++){r[o]==p&&(F=E$s)}if(F){r.push(p);v=v+(",$("+p+")")}}A.Pa&&(v=v+(":"+A.Pa));A.Oa=y;return v+"]"}r="";A.$a!=0&&(v=E$p);A.nb!=0&&(v=E$p);if(!(A.U.length>0||E$Ih(A))&&!E$Xj(A.A)){v=E$p}A.Cb==-1&&(v=E$p);A.Pa&&!y&&(v=E$p);if(B.Gb){E$Ih(A)&&A.A!="*"&&(v=E$p);A.cc!=E$q&&(v=1);A.ob!=E$q&&(v=1);A.lb!=E$q&&(v=1);A.Oa!=E$q&&(v=1);A.cc!=E$q&&(v=1);A.U.length>0&&(v=1);A.Tc&&(v=1)}if(A.gd&&!B.Gb&&A.A=="N"&&s==-1){q=E$Ue(A);q>0&&(s=q)}q=A.Na;A.Na!=0&&(v=1);o=-1;if(A.jb==1){a:{o=[];p=0;b:{E=0;E=A.g.length;if(E==3){if(z==1){o[0]=A;o[1]=E$R(A.ad[0],A);o[2]=E$R(A.ad[1],A);o[3]=E$R(A.ad[2],A);E=0}else{o[0]=E$R(A.ad[0],A);o[1]=A;o[2]=E$R(A.ad[1],A);o[3]=E$R(A.ad[2],A);E=1}}else{if(E==4){z=0;for(E=A.g.length;z<E;z++){o[z]=E$R(A.ad[z],A)}E=-1}else{console.log("nonsense stereo center atom "+A,id+" "+A.g.length);E=-2;break b}}}if(E==-2){o=A.jb=0}else{z=[];for(D=0;D<4;D++){D!=E&&(z[D]=E$Mf(o[D].b,A.b))}F=-1;for(D=0;D<4;D++){if(D!=E){C=E$Ef(B,A,o[D]);if(C!=E$q){if(C.o==E$kd){o=0;break a}if(C.j==A){if(C.o==E$O){z[D].oa=1;p++;F=D}else{if(C.o==E$ld){z[D].oa=-1;p++;F=D}}}}else{console.log("assignChirality - couldn't find bond between "+A.id+" and "+o[D].id)}z[D].K()}}if(E!=-1){if(F==-1){console.log("assignChirality - no stereo slot for "+A.id);o=0;break a}z[E]=new E$dk;for(D=0;D<4;D++){if(D!=E){z[E].x=z[E].x-z[D].x;z[E].y=z[E].y-z[D].y;z[E].oa=z[E].oa-z[D].oa}}z[E].K();o=new E$dk;o.x=z[F].x;o.y=z[F].y;o.oa=0;o.K();if(E$Lh(z[E],o)<-0.99999){z[E].oa=z[F].oa}}E=z[1];o=z[2];p=z[3];z=E$Mf(p,z[0]);E=E$Mf(p,E);o=E$Mf(p,o);o=E$Mh(E,o);volume=E$Lh(z,o)/6;o=volume<-0.001?1:volume>0.001?2:0}}o>0&&(v=1)}A.jb==-1&&(B.Gb?v=1:o=0);s>0&&(v=1);z=E$s;if(p=B.Gb){a:{p=0;for(E=A.g.length;p<E;p++){F=A.g[p];if(F.type==6||F.type==7||F.type==8){p=E$p;break a}}p=E$s}}if(p){A.A!="*"&&(v=1);z=E$p}A.na>0&&E$Wa&&(v=1);if(v){r=r+"[";if(s==-1&&A.U.length==0&&(!E$Ih(A)&&!A.na&&A.lb==E$q&&A.Oa==E$q)&&(!B.Gb||A.jb!=0)){s=E$Ue(A)}}A.$a!=0&&(r=r+A.$a);if(A.na>0){r=E$Wa?r+("R"+A.na):r+"*"}else{if(A.U.length>0){if(B.Gb){for(z=0;z<A.U.length;z++){z==0?A.nc&&(r=r+"!"):r=A.nc?r+"&!":r+",";r=r+("#"+A.U[z])}}else{r=r+"*"}}else{E$Ih(A)?B.Gb?A.A=="A"?r=r+"!#1":A.A=="AH"||A.A=="*"?r=r+"*":A.A=="Q"?r=r+"!#1;!#6":A.A=="QH"?r=r+"!#6":A.A=="X"?r=r+"F,Cl,Br,I":A.A=="XH"&&(r=r+"#1,F,Cl,Br,I"):r=r+"*":r=A.gd||E$ck(A)?r+A.A.toLowerCase():z?r+("#"+E$ae(A.A)):r+A.A}}B.Gb&&A.jb==-1&&(r=r+";@,@@;");if(o!=-1&&B.Gb&&(A.U.length>0||E$Ih(A))){r=r+";"}o==1&&(r=r+"@");o==2&&(r=r+"@@");s==1&&(r=r+"H");s>1&&(r=r+("H"+s));if(q!=0&&B.Gb&&(A.U.length>0||E$Ih(A))){r=r+";"}q==1?r=r+"+":q==-1?r=r+"-":q>1?r=r+("+"+q):q<-1&&(r=r+q);if(B.Gb){A.Tc==1&&(r=r+";$(*=*),$(*#*),$(*:*)");A.cc!=E$q&&(r=A.cc?r+";a":r+";A");if(A.ob!=E$q){if(A.ob=="*"){s=B=0;for(q=A.g.length;s<q;s++){A.g[s].Xb()&&B++}r=r+(";x"+B)}else{r=r+(";x"+A.ob)}}if(A.lb!=E$q){if(A.lb=="*"){B=A.g.length;for(q=s=0;q<B;q++){z=E$R(A.g[q],A);if((z.A==="H"||z.A==="D")&&!z.vb&&z.U.length==0&&!z.na){s=s+1}}B=r+(";D"+(A.g.length-s))}else{B=r+(";D"+A.lb)}r=B}if(A.Oa!=E$q){if(A.Oa==0){r=r+";H0"}else{for(B=0;B<A.Oa;B++){r=r+(";!H"+B)}}}}r.charAt(r.length-1)==";"&&(r=r.substring(0,r.length-1));A.Pa&&!y&&(r=r+(":"+A.Pa));v&&(r=r+"]");return r}function E$ek(l){for(var k=0,i=l.g.length;k<i;k++){var h=l.g[k];if(h.jc==2){return E$R(h,l).ua<l.Gk?1:0}}return -1}function E$Vj(n,m,l,k){var n=E$Mf(n.b,m.b),k=E$Mf(k.b,l.b),i=E$Mf(l.b,m.b),m=E$Mf(m.b,l.b);i.K();m.K();E$sj(n,i);E$sj(k,m);dotp=E$Lh(n,k);return dotp>0.000001?E$p:dotp<-0.000001?E$s:E$q}function E$fk(v,u,t,s){for(var r=0,q=t.g.length;r<q;r++){var p=t.g[r],o=E$R(p,t);if(p.jc==1&&(s.Q==E$O||s.Q==E$ld)&&p.Q!=E$O&&p.Q!=E$ld){if(E$ek(u)==0){if(o.ua>t.ua&&v.ua<u.ua||o.ua<t.ua&&v.ua>u.ua){var n=E$Vj(v,u,t,o);if(n){if(s.Q==E$O){p.Q=E$ld}else{if(s.Q==E$ld){p.Q=E$O}}}else{if(n!=E$q){if(s.Q==E$O){p.Q=E$O}else{if(s.Q==E$ld){p.Q=E$ld}}}}}else{if(n=E$Vj(v,u,t,o)){if(s.Q==E$O){p.Q=E$O}else{if(s.Q==E$ld){p.Q=E$ld}}}else{if(n!=E$q){if(s.Q==E$O){p.Q=E$ld}else{if(s.Q==E$ld){p.Q=E$O}}}}}}else{if(o.ua<t.ua&&v.ua>u.ua||o.ua>t.ua&&v.ua<u.ua){if(n=E$Vj(v,u,t,o)){if(s.Q==E$O){p.Q=E$ld}else{if(s.Q==E$ld){p.Q=E$O}}}else{if(n!=E$q){if(s.Q==E$O){p.Q=E$O}else{if(s.Q==E$ld){p.Q=E$ld}}}}}else{if(n=E$Vj(v,u,t,o)){if(s.Q==E$O){p.Q=E$O}else{if(s.Q==E$ld){p.Q=E$ld}}}else{if(n!=E$q){if(s.Q==E$O){p.Q=E$ld}else{if(s.Q==E$ld){p.Q=E$O}}}}}}E$gk(t,o,p)}}}function E$hk(r,q){for(var p=E$R(q,r),o=0,n=r.g.length;o<n;o++){var m=r.g[o],l=E$R(m,r);if(m!=q&&m.Dk==1&&(q.Q==E$O||q.Q==E$ld)&&m.Q!=E$O&&m.Q!=E$ld){if(E$ek(r)==0){if(p.ua<r.ua&&l.ua>r.ua||p.ua>r.ua&&l.ua<r.ua){if(q.Q==E$O){m.Q=E$O}else{if(q.Q==E$ld){m.Q=E$ld}}}else{if(q.Q==E$O){m.Q=E$ld}else{if(q.Q==E$ld){m.Q=E$O}}}E$gk(r,l,m)}else{if(E$ek(r)==1){if(p.ua>r.ua&&l.ua>r.ua||p.ua<r.ua&&l.ua<r.ua){if(q.Q==E$O){m.Q=E$ld}else{if(q.Q==E$ld){m.Q=E$O}}}else{if(q.Q==E$O){otherBondoutputCisTrans=E$O}else{if(q.Q==E$ld){m.Q=E$ld}}}E$gk(r,l,m)}}break}}}function E$Pk(l){for(var k=0,i=l.g.length;k<i;k++){var h=l.g[k];if(h.jc==2){return E$R(h,l)}}return -1}function E$gk(i,h,g){if(h.ef){E$hk(h,g);E$fk(i,h,E$Pk(h),g)}if(i.ef){E$hk(i,g);E$fk(h,i,E$Pk(i),g)}}function E$ak(i,h,g){if(!(h.Q==E$O||h.Q==E$ld)){h.Q=E$O;E$gk(i,g,h)}}function E$bk(l,k,i){var h="";if(i){if(k.Q==E$ld){return h+"\\"}if(k.Q==E$O){return h+"/"}}i=E$s;if(k.type==4){if((!k.j.gd||!k.k.gd)&&(!E$ck(k.j)||!E$ck(k.k))||!k.Xb()){h=h+":";i=E$p}}else{if(k.type==1){if(k.j.gd&&k.k.gd){h=h+"-";i=E$p}}else{if(k.type==2){h=h+"=";i=E$p}else{if(k.type==3){h=h+"#";i=E$p}}}}if(l.Gb){if(k.type==5){h=h+"-,=";i=E$p}else{if(k.type==6){h=h+"-,:";i=E$p}else{if(k.type==7){h=h+"=,:";i=E$p}else{if(k.type==8){h=h+"~";i=E$p}}}}if(k.xb!=E$q){i&&(h=h+";");h=k.xb?h+"@":h+"!@"}}return h}E$Ha.prototype.Jf=function(){for(var g=0,f=this.g.length;g<f;g++){if(this.g[g].o>0&&this.g[g].l==1){return E$p}}return E$s};function E$ub(){if(E$zh(E$Ch("RSRjJCgiZG90bWF0aWNzLmVsZW1lbnRhbEtleSIpID09ICJTTHNMV2xNaHJIblRqRGVyU3JsRyIg"))){return E$p}E$zh(E$Ch("YWxlcnQoIlRoaXMgdmVyc2lvbiBvZiBFbGVtZW50YWwgaXMgbGljZW5zZWQgZm9yIHVzZSBvbiBDbGFyaXZhdGUgQW5hbHl0aWNzIHdlYiBzaXRlcy4gUGxlYXNlIGNvbnRhY3QgRG90bWF0aWNzICh3d3cuZG90bWF0aWNzLmNvbSkgZm9yIG1vcmUgaW5mb3JtYXRpb24iKQ=="));return E$s}function E$Sj(e){if(e>88){return E$p}if(e<1){return E$s}e=E$Uc[e][4];return e>2&&e<13?E$p:E$s}function E$Tf(g){if(g>88){return E$p}if(g<=1){return E$s}var f=E$Uc[g][4];return f<13||f==13&&g>5||f==14&&g>32||f==15&&g>51?E$p:E$s}function E$Ue(t,s){var r=t.g.length,q=E$s,p=E$ae(t.A);if(p==-1||t.Cb==-1){return 0}var o=p-t.Na;if(E$Sj(p)){o=p;q=E$p}else{E$Sj(o)&&(o=o-10)}for(var n=p=0;n<r;n++){var m=t.g[n];if(!E$Sg(m)){p=p+m.l;if(m.l==-1){return 0}}}r=E$Yj(o,p);if(t.Cb>0){r=t.Cb}n=r-p;q&&(n=n-t.Na);if(t.nb==2){n=n-1}else{if(t.nb==1||t.nb==3){n=n-1}}t.ja&&(n=n-t.ja.length);n<0&&(n=0);if(n==0&&s){q=E$Yj(o,p+1);if(q>r){return q-r}}return n}function E$Qk(){this.size=0;this.f=[];this.g=[]}function E$Rk(x,w,v){if(!(v>10)){x.tb[v]=w;w.ib=1;for(var u=0,t=w.g.length;u<t;u++){var s=w.g[u],r=E$R(s,w);if(s.Ld==1&&(v==0||r!=x.tb[v-1])){x.yc[v]=s;if(r.ib!=-1){if(x.tb[1].id<x.tb[v].id&&r==x.tb[0]){s=E$p;r=v+1;if(r>=3&&r<9){for(var q=0;q<r;q++){var p=r;q==0&&(p=r-1);for(var o=q+2;o<p;o++){if(E$Ef(x,x.tb[q],x.tb[o])!=E$q){s=E$s;break}}if(!s){break}}}else{s=E$s}if(s){s=x;r=v+1;q=new E$Qk;q.size=r;for(p=0;p<r;p++){q.f.push(s.tb[p]);q.g.push(s.yc[p]);if(!s.yc[p].kb){s.yc[p].kb=[]}s.yc[p].kb.push(s.kb.length)}s.kb.push(q)}}}else{r.id>=x.tb[0].id&&E$Rk(x,r,v+1)}}}w.ib=-1}}function E$Uj(i){for(var h=0,g=i.f.length;h<g;h++){i.f[h].ib=-1}h=0;for(g=i.g.length;h<g;h++){i.g[h].kb=E$o}i.kb=[];h=0;for(g=i.f.length;h<g;h++){i.f[h].ib==-1&&E$Rk(i,i.f[h],0)}}function E$Sk(e){switch(e){case"C":return E$p;case"N":return E$p;case"O":return E$p;case"S":return E$p;case"*":return E$p;case"P":return E$p;case"B":return E$p;case"I":return E$p;case"As":return E$p;case"Se":return E$p;case"Sb":return E$p;case"Te":return E$p}return E$s}function E$Tk(x){for(var w=E$p,v=[],u=[],t=[],s=[],r=E$p,q=E$p,p=0;p<x.size;p++){var o=x.g[p].type;o!=4&&(r=E$s);if(o>4||x.g[p].j.cc==E$s||x.g[p].k.cc==E$s){return E$s}}for(p=0;p<x.size;p++){x.f[p].gd||(q=E$s);if(!E$Sk(x.f[p].A)){return E$s}}if(r&&q){return E$s}if(x.size==6){for(p=0;p<x.size;p++){v[p]=x.g[p].l;u[p]=x.g[p].type}(v[0]==2||u[0]==4)&&(v[1]==1||u[1]==4)&&(v[2]==2||u[2]==4)&&(v[3]==1||u[3]==4)&&(v[4]==2||u[4]==4)&&(v[5]==1||u[5]==4)||(v[0]==1||u[0]==4)&&(v[1]==2||u[1]==4)&&(v[2]==1||u[2]==4)&&(v[3]==2||u[3]==4)&&(v[4]==1||u[4]==4)&&(v[5]==2||u[5]==4)||(w=E$s)}else{if(x.size==5){w=E$s;for(p=0;p<x.size;p++){v[0]=x.g[p].l;u[0]=x.g[p].type;if(v[0]==1){for(r=1;r<x.size;r++){v[r]=x.g[(p+r)%x.size].l;u[r]=x.g[(p+r)%x.size].type}if((v[1]==2||u[1]==4)&&(v[2]==1||u[2]==4)&&(v[3]==2||u[3]==4)&&(v[4]==1||u[4]==4)){for(r=0;r<x.size;r++){s[r]=x.f[(p+r)%x.size];t[r]=E$ae(s[r].A)}if(t[0]!=6||t[0]==6&&s[0].Na==-1){w=E$p;break}}}}}else{w=E$s}}if(w){for(p=0;p<x.size;p++){x.g[p].type=4;x.f[p].gd=E$p}}return w}function E$oh(i){for(var h=0,g=i.g.length;h<g;h++){if(i.g[h].type==4&&i.g[h].l!=-1){i.g[h].type=i.g[h].l}}}function E$Kj(n){n.kb||E$Uj(n);for(var m=0,l=n.f.length;m<l;m++){n.f[m].gd=n.f[m].cc!=E$q?n.f[m].cc:E$s}for(m=E$p;m;){for(var m=E$s,k=5;k<=6;k++){for(var i=0,l=n.kb.length;i<l;i++){n.kb[i].size==k&&E$Tk(n.kb[i])&&(m=E$p)}}}}function E$Ve(n){for(var m=0;m<n.g.length;m++){delete n.g[m].Fi}for(m=0;m<n.g.length-1;m++){var l=n.g[m];if(l.o==E$O){for(var k=m+1;k<n.g.length;k++){var i=n.g[k];if(i.o==E$O){if(i=E$Ef(n,l.k,i.k)){i.Fi=E$p}}}}}}function E$Ch(t){var s="",r,q,p="",o,n="",m=0,t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(m++));q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(m++));o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(m++));n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(m++));r=r<<2|q>>4;q=(q&15)<<4|o>>2;p=(o&3)<<6|n;s=s+String.fromCharCode(r);o!=64&&(s=s+String.fromCharCode(q));n!=64&&(s=s+String.fromCharCode(p))}while(m<t.length);return unescape(s)}var E$gg=[[0,1,2,3,4,5],[1,0,0,0,0,0],[0,0,0,0,0,0],[1,0,0,0,0,0],[2,0,0,0,0,0],[3,0,0,0,0,0],[4,0,0,0,0,0],[3,5,0,0,0,0],[2,0,0,0,0,0],[1,0,0,0,0,0],[0,0,0,0,0,0],[1,0,0,0,0,0],[2,0,0,0,0,0],[3,0,0,0,0,0],[4,0,0,0,0,0],[3,5,0,0,0,0],[2,4,6,0,0,0],[1,3,5,7,0,0],[0,0,0,0,0,0],[1,0,0,0,0,0],[2,0,0,0,0,0],[3,0,0,0,0,0],[3,4,0,0,0,0],[2,3,4,5,0,0],[2,3,6,0,0,0],[2,3,4,6,7,0],[2,3,4,6,0,0],[2,3,0,0,0,0],[2,3,0,0,0,0],[1,2,0,0,0,0],[2,0,0,0,0,0],[3,0,0,0,0,0],[2,4,0,0,0,0],[3,5,0,0,0,0],[2,4,6,0,0,0],[1,3,5,7,0,0],[0,0,0,0,0,0],[1,0,0,0,0,0],[2,0,0,0,0,0],[3,0,0,0,0,0],[4,0,0,0,0,0],[3,5,0,0,0,0],[3,4,5,6,0,0],[7,0,0,0,0,0],[2,3,4,6,0,0],[2,3,4,0,0,0],[2,4,0,0,0,0],[1,0,0,0,0,0],[2,0,0,0,0,0],[3,0,0,0,0,0],[2,4,0,0,0,0],[3,5,0,0,0,0],[2,4,6,0,0,0],[1,3,5,7,0,0],[0,0,0,0,0,0],[1,0,0,0,0,0],[2,0,0,0,0,0],[3,0,0,0,0,0],[3,4,0,0,0,0],[3,4,0,0,0,0],[3,0,0,0,0,0],[3,0,0,0,0,0],[2,3,0,0,0,0],[2,3,0,0,0,0],[3,0,0,0,0,0],[3,4,0,0,0,0],[3,0,0,0,0,0],[3,0,0,0,0,0],[3,0,0,0,0,0],[2,3,0,0,0,0],[2,3,0,0,0,0],[3,0,0,0,0,0],[4,0,0,0,0,0],[5,0,0,0,0,0],[3,4,5,6,0,0],[2,4,6,7,0,0],[2,3,4,6,0,0],[2,3,4,6,0,0],[2,4,0,0,0,0],[1,3,0,0,0,0],[1,2,0,0,0,0],[1,3,0,0,0,0],[2,4,0,0,0,0],[3,5,0,0,0,0],[2,4,0,0,0,0],[1,3,5,7,0,0],[0,0,0,0,0,0],[1,0,0,0,0,0],[2,0,0,0,0,0],[3,0,0,0,0,0],[3,4,0,0,0,0],[3,4,5,0,0,0],[3,4,5,6,0,0],[3,4,5,6,0,0],[3,4,5,6,0,0],[3,4,5,6,0,0],[3,0,0,0,0,0],[3,4,0,0,0,0],[3,0,0,0,0,0],[3,0,0,0,0,0],[3,0,0,0,0,0],[3,0,0,0,0,0],[1,0,0,0,0,0],[1,0,0,0,0,0]];function E$dk(){this.x=this.y=this.oa=0;if(arguments.length==3){this.x=arguments[0];this.y=arguments[1];this.oa=arguments[2]}}function E$Uk(e){return e.x*e.x+e.y*e.y+e.oa*e.oa}E$dk.prototype.length=function(){return E$Zb(E$Uk(this))};E$dk.prototype.K=function(){var e=this.length();this.x=this.x/e;this.y=this.y/e;this.oa=this.oa/e};function E$Lh(g,f){return g.x*f.x+g.y*f.y+g.oa*f.oa}function E$Mh(i,h){var g=new E$dk;g.x=i.y*h.oa-i.oa*h.y;g.y=i.oa*h.x-i.x*h.oa;g.oa=i.x*h.y-i.y*h.x;return g}E$dk.prototype.pg=function(n,m,l){var k=new E$Q,n=this.x>0?n:m,m=new E$Q(E$Wb(this.x),E$Wb(this.y));if(m.x<n&&m.y<l){return this}if(this.y==0){k.x=n;k.y=0}else{if(this.x==0){k.y=l;k.x=0}else{var m=m.x/m.y,i=n/l;if(m>=i){k.x=n;k.y=l*i/m}else{k.x=n*m/i;k.y=l}}}if(this.x<0){k.x=k.x*-1}if(this.y<0){k.y=k.y*-1}return k};E$Q.prototype.pg=function(r,q,p,o,n,m){var l=new E$Q;if(r.x>this.x){if(!E$Yk(this,q.x+p,q.y+n-m,q.x+p,q.y-n+m,r)){if(r.y>this.y){if(!E$Yk(this,q.x+p-m,q.y+n,q.x-o+m,q.y+n,r)){l.x=q.x+p-m;l.y=q.y+n-m;E$Nf(this,r,l,m)}}else{if(!E$Yk(this,q.x+p-m,q.y-n,q.x-o+m,q.y-n,r)){l.x=q.x+p-m;l.y=q.y-n+m;E$Nf(this,r,l,m)}}}}else{if(!E$Yk(this,q.x-o,q.y+n-m,q.x-o,q.y-n+m,r)){if(r.y>this.y){if(!E$Yk(this,q.x+p-m,q.y+n,q.x-o+m,q.y+n,r)){l.x=q.x-o+m;l.y=q.y+n-m;E$Nf(this,r,l,m)}}else{if(!E$Yk(this,q.x+p-m,q.y-n,q.x-o+m,q.y-n,r)){l.x=q.x-o+m;l.y=q.y-n+m;E$Nf(this,r,l,m)}}}}};function E$Mf(i,h){var g=new E$dk;g.x=i.x-h.x;g.y=i.y-h.y;g.oa=i.oa-h.oa;return g}function E$sj(i,h){var g=E$Lh(i,h);i.x=i.x-g*h.x;i.y=i.y-g*h.y;i.oa=i.oa-g*h.oa}function E$Fe(){if(E$zh(E$Ch("RSRjJCgiZG90bWF0aWNzLmVsZW1lbnRhbEtleSIpICE9ICJTTHNMV2xNaHJIblRqRGVyU3JsRyIg"))){E$zh(E$Ch("YWxlcnQoIlRoaXMgdmVyc2lvbiBvZiBFbGVtZW50YWwgaXMgbGljZW5zZWQgZm9yIHVzZSBvbiBDbGFyaXZhdGUgQW5hbHl0aWNzIHdlYiBzaXRlcy4gUGxlYXNlIGNvbnRhY3QgRG90bWF0aWNzICh3d3cuZG90bWF0aWNzLmNvbSkgZm9yIG1vcmUgaW5mb3JtYXRpb24iKQ=="));return E$s}return E$p}DHTMLSuite.menuModel.prototype.m=DHTMLSuite.menuModel.prototype.addItem;DHTMLSuite.menuModel.prototype.ec=DHTMLSuite.menuModel.prototype.addSeparator;E$B.Ti=function(t){var s=t.query,r=t.rxnQuery,q=new DHTMLSuite.menuModel,p=q.menuItems;q.m(1,"Charge","","",E$s,"",E$s,E$s,50*E$B.Ma);var o=-4,n=5;if(t.buttonPanel){o=-3;n=4}for(var m=0;o<n;o++,m++){q.m(2+m,new String(o),"","",1,"",[E$B.He,o])}q.m(11,".","","",1,"",[E$B.Je,2]);q.m(12,":","","",1,"",[E$B.Je,1]);q.m(13,"..","","",1,"",[E$B.Je,3]);q.m(27,"[El]","","",1,"",E$s,E$s,50*E$B.Ma);q.m(28,"No","","",27,"",[E$B.jf,0]);q.m(29,"Yes","","",27,"",[E$B.jf,-1]);q.m(14,"Element","","",E$s,"",E$s,E$s,50*E$B.Ma);q.m(15,"H","","",14,"",[E$B.Zb,"H"]);q.m(16,"C","","",14,"",[E$B.Zb,"C"]);q.m(17,"N","","",14,"",[E$B.Zb,"N"]);q.m(18,"O","","",14,"",[E$B.Zb,"O"]);q.m(19,"S","","",14,"",[E$B.Zb,"S"]);q.m(20,"P","","",14,"",[E$B.Zb,"P"]);q.m(21,"F","","",14,"",[E$B.Zb,"F"]);q.m(22,"Cl","","",14,"",[E$B.Zb,"Cl"]);q.m(23,"Br","","",14,"",[E$B.Zb,"Br"]);q.m(24,"I","","",14,"",[E$B.Zb,"I"]);q.m(30,"Isotope","","",E$s,"",E$s,E$s,50*E$B.Ma);q.m(31,"Off","","",30,"",[E$B.ii,0]);q.m(350,"Enhanced Stereo","","",E$s,"",E$s,E$s,76*E$B.Ma,150*E$B.G);q.m(351,new String("Off"),"","",350,"",[E$B.nd,0,0]);q.m(352,new String("Abs"),"","",350,"",[E$B.nd,E$jg,0]);q.m(353,new String("Or1"),"","",350,"",[E$B.nd,E$kg,1]);q.m(354,new String("Or2"),"","",350,"",[E$B.nd,E$kg,2]);q.m(355,new String("Or3"),"","",350,"",[E$B.nd,E$kg,3]);q.m(356,new String("And1"),"","",350,"",[E$B.nd,E$lg,1]);q.m(357,new String("And2"),"","",350,"",[E$B.nd,E$lg,2]);q.m(358,new String("And3"),"","",350,"",[E$B.nd,E$lg,3]);for(o=4;o<10;o++){q.m(355+o,new String("Or"+o),"","",350,"",[E$B.nd,E$kg,o])}for(o=4;o<10;o++){q.m(361+o,new String("And"+o),"","",350,"",[E$B.nd,E$lg,o])}s&&q.m(49,"R-group","","",E$s,"",E$s,E$s,75*E$B.Ma,150*E$B.G);if(s){t=t.atomQuerySupport;q.m(50,"Query features","","",E$s,"",E$s,E$s,120*E$B.Ma);q.m(51,"Aromatic","","",50,"",E$s,E$s,110*E$B.Ma);q.m(52,"Off","","",51,"",[E$B.Kg,E$q]);q.m(53,"Aromatic","","",51,"",[E$B.Kg,E$p]);q.m(54,"Aliphatic","","",51,"",[E$B.Kg,E$s]);t.aromatic||p[51].setVisibility(E$s);q.m(55,"Ring bonds","","",50,"",E$s,E$s,50*E$B.Ma);q.m(56,"Off","","",55,"",[E$B.Ke,E$q]);q.m(57,"0","","",55,"",[E$B.Ke,0]);q.m(58,"2","","",55,"",[E$B.Ke,2]);q.m(59,"3","","",55,"",[E$B.Ke,3]);q.m(60,"4","","",55,"",[E$B.Ke,4]);q.m(61,"*","","",55,"",[E$B.Ke,"*"]);t.ringBonds||p[55].setVisibility(E$s);q.m(62,"Substitutions","","",50,"",E$s,E$s,50*E$B.Ma);q.m(63,"Off","","",62,"",[E$B.Ng,E$q]);for(o=0;o<7;o++){q.m(64+o,new String(o),"","",62,"",[E$B.Ng,o])}q.m(71,"*","","",62,"",[E$B.Ng,"*"]);t.substitutions||p[62].setVisibility(E$s);q.m(72,"H-count","","",50,"",E$s,E$s,60*E$B.Ma);q.m(73,"Off","","",72,"",[E$B.Ie,E$q]);q.m(74,"0","","",72,"",[E$B.Ie,0]);q.m(75,">=1","","",72,"",[E$B.Ie,1]);q.m(76,">=2","","",72,"",[E$B.Ie,2]);q.m(77,">=3","","",72,"",[E$B.Ie,3]);q.m(78,">=4","","",72,"",[E$B.Ie,4]);t.hCount||p[72].setVisibility(E$s);q.m(79,"Unsaturated","","",50,"",E$s,E$s,60*E$B.Ma);q.m(80,"Off","","",79,"",[E$B.ki,0]);q.m(81,"On","","",79,"",[E$B.ki,1]);t.unsaturated||p[79].setVisibility(E$s);q.m(82,"List","","",50,"",E$s,E$s,70*E$B.Ma);q.m(83,"Set","","",82,"",[E$B.gf,E$s]);q.m(84,"Clear","","",82,"",[E$B.jh]);t.list||p[82].setVisibility(E$s);q.m(85,"Not list","","",50,"",E$s,E$s,70*E$B.Ma);q.m(86,"Set","","",85,"",[E$B.gf,E$p],E$s,80*E$B.Ma);q.m(87,"Clear","","",85,"",[E$B.jh],E$s,80*E$B.Ma);t.notList||p[85].setVisibility(E$s);q.m(134,"Query types","","",50,"",E$s,E$s,60*E$B.Ma);q.m(135,"A","","",134,"Any (excl. H)",[E$B.Zb,"A"]);q.m(136,"Q","","",134,"Hetero",[E$B.Zb,"Q"]);q.m(137,"X","","",134,"Halogen",[E$B.Zb,"X"]);q.m(138,"AH","","",134,"Any (incl. H)",[E$B.Zb,"AH"]);q.m(139,"QH","","",134,"Hetero or H",[E$B.Zb,"QH"]);q.m(140,"XH","","",134,"Halogen or H",[E$B.Zb,"XH"]);q.m(141,"*","","",134,"Any",[E$B.Zb,"*"]);t.queryTypes||p[134].setVisibility(E$s)}q.m(245,"Reaction","","",E$s,"",E$s,E$s,80*E$B.Ma);q.m(246,"Map","","",245,"",E$s,E$s,75*E$B.Ma,150*E$B.G);q.m(250,"Off","","",246,"",[E$B.Jc,0]);for(o=1;o<51;o++){q.m(250+o,new String(o),"","",246,"",[E$B.Jc,o])}q.m(247,"Stereo","","",245,"",E$s,E$s,75*E$B.Ma);q.m(301,"Off","","",247,"",[E$B.Lg,0]);q.m(302,"Inverted","","",247,"",[E$B.Lg,1]);q.m(303,"Retained","","",247,"",[E$B.Lg,2]);if(s&&r){q.m(248,"Change","","",245,"",E$s,E$s,75*E$B.Ma);q.m(304,"Off","","",248,"",[E$B.gi,0]);q.m(305,"Exact","","",248,"",[E$B.gi,1])}q.ec(0);q.m(150,"Delete","","","","",[E$B.te]);q.m(151,"Delete molecule","","","","",[E$B.zh]);q.m(152,"Copy molecule","","","","",[E$B.rh]);q.ec(0);q.m(180,"Rotate molecule","","",E$s,"",[E$B.Mj]);q.ec(0);q.m(190,"Template","","","","",E$s,E$s,110*E$B.Ma);q.m(191,"Save molecule","","",190,"",[E$B.ei]);q.m(192,"Use molecule","","",190,"",[E$B.Ci]);if(s){q.m(240,"*",E$C+"plus.png","",49,"Add attachment point",[E$B.fc,1]);q.m(241,"*",E$C+"cross.gif","",49,"Remove attachment point",[E$B.bi,1]);q.m(242,'*"',E$C+"plus.png","",49,"Add 2nd attachment point",[E$B.fc,2]);q.m(243,'*"',E$C+"cross.gif","",49,"Remove 2nd attachment point",[E$B.bi,2]);q.m(201,"Off","","",49,"",[E$B.Rd,0]);for(o=1;o<33;o++){q.m(201+o,new String("R"+o),"","",49,"",[E$B.Rd,o])}}q.init();return q};E$B.mk=function(v,u){var t=E$p;if(E$Vd(u.e)){t=E$Xc(u.e);t=t.length==1&&t[0]==v?E$p:E$s}for(var s=E$B.Zg,r=s.menuItems,q=2;q<14;q++){r[q]&&r[q].setIcon("")}v.Na!=E$q&&t&&r[6+v.Na].setIcon(E$C+"tick.gif");v.g.length>0?r[27].setVisibility(E$s):r[27].setVisibility(E$p);r[28].setIcon("");r[29].setIcon("");t&&(v.Cb==-1?r[29].setIcon(E$C+"tick.gif"):r[28].setIcon(E$C+"tick.gif"));if(v.nb!=E$q&&t){v.nb==2&&r[11].setIcon(E$C+"tick.gif");v.nb==1&&r[12].setIcon(E$C+"tick.gif");v.nb==3&&r[13].setIcon(E$C+"tick.gif")}for(var q=E$Re(u.e,v),p=E$s,o=0,n=q.length;o<n;o++){if(q[o].ja&&q[o].ja[1]){p=E$p;break}}if(v.tc){if(v.ja!=E$q&&v.ja[1]){r[240].setVisibility(E$s);r[241].setVisibility(E$p)}else{r[240].setVisibility(E$p);r[241].setVisibility(E$s)}if(v.ja!=E$q&&v.ja[2]){r[242].setVisibility(E$s);r[243].setVisibility(E$p)}else{p?r[242].setVisibility(E$p):r[242].setVisibility(E$s);r[243].setVisibility(E$s)}}else{r[240].setVisibility(E$s);r[241].setVisibility(E$s);r[242].setVisibility(E$s);r[243].setVisibility(E$s)}for(q=15;q<25;q++){r[q].setIcon("")}if(t){p=["H","C","N","O","S","P","F","Cl","Br","I"];for(q=0;q<10;q++){v.A==p[q]&&r[15+q].setIcon(E$C+"tick.gif")}}for(q=32;q<43;q++){s.__deleteANode(q)}p=E$ae(v.A);o="";v.$a==0&&t?r[31].setIcon(E$C+"tick.gif"):r[31].setIcon("");if(E$qj[p]){r[30].setState("regular");for(q=0;q<E$qj[p].length;q++){o="";v.$a==E$qj[p][q][0]&&t&&(o=E$C+"tick.gif");s.m(32+q,E$qj[p][q][0],o,"",30,"",[E$B.ii,E$qj[p][q][0]])}}else{r[30].setState("disabled")}if(q=u.i.query){if(t){if(v.cc==E$q){r[52].setIcon(E$C+"tick.gif");r[53].setIcon("");r[54].setIcon("")}else{if(v.cc){r[52].setIcon("");r[53].setIcon(E$C+"tick.gif");r[54].setIcon("")}else{r[52].setIcon("");r[53].setIcon("");r[54].setIcon(E$C+"tick.gif")}}}else{r[52].setIcon("");r[53].setIcon("");r[54].setIcon("")}for(q=56;q<62;q++){r[q].setIcon("")}t&&(v.ob!=E$q?v.ob=="*"?r[61].setIcon(E$C+"tick.gif"):r[57+v.ob].setIcon(E$C+"tick.gif"):r[56].setIcon(E$C+"tick.gif"));for(q=63;q<72;q++){r[q].setIcon("")}t&&(v.lb!=E$q?v.lb=="*"?r[71].setIcon(E$C+"tick.gif"):r[64+v.lb].setIcon(E$C+"tick.gif"):r[63].setIcon(E$C+"tick.gif"));for(q=73;q<79;q++){r[q].setIcon("")}t&&(v.Oa!=E$q?r[74+v.Oa].setIcon(E$C+"tick.gif"):r[73].setIcon(E$C+"tick.gif"));for(q=80;q<82;q++){r[q].setIcon("")}t&&(v.Tc==1?r[81].setIcon(E$C+"tick.gif"):r[80].setIcon(E$C+"tick.gif"));if(v.U.length>0&&t){if(v.nc){r[86].setText("!"+E$Hh(v));r[87].setState("regular");r[83].setText("Set...");r[84].setState("disabled")}else{r[83].setText(E$Hh(v));r[84].setState("regular");r[86].setText("Set...");r[87].setState("disabled")}}else{r[83].setText("Set...");r[84].setState("disabled");r[86].setText("Set...");r[87].setState("disabled")}for(q=101;q<134;q++){r[100+q].setIcon("")}t&&(v.na>0?r[201+v.na].setIcon(E$C+"tick.gif"):r[201].setIcon(E$C+"tick.gif"));p=["A","Q","X","AH","AQ","AX","*"];for(q=0;q<7;q++){v.A==p[q]&&r[135+q].setIcon(E$C+"tick.gif")}}for(q=0;q<51;q++){r[250+q].setIcon("")}t&&(v.Pa?r[250+v.Pa].setIcon(E$C+"tick.gif"):r[250].setIcon(E$C+"tick.gif"));for(q=301;q<304;q++){r[q].setIcon("")}t&&(v.bc?v.bc==1?r[302].setIcon(E$C+"tick.gif"):v.bc==2&&r[303].setIcon(E$C+"tick.gif"):r[301].setIcon(E$C+"tick.gif"));if(q=u.i.rxnQuery){r[304].setIcon("");r[305].setIcon("");t&&(v.hd?r[305].setIcon(E$C+"tick.gif"):r[304].setIcon(E$C+"tick.gif"))}if(v.Jf()||v.pb!=0){r[350].setState("regular");r[350].setVisibility(E$p)}else{r[350].setState("disabled");r[350].setVisibility(E$s)}s.init();if(E$B.indexCurrentlyDisplayedMenuModel){E$B.indexCurrentlyDisplayedMenuModel=9999}};E$B.jh=function(){var l=E$B.srcElement;if(l!=E$q&&l.s!=E$q){l.a.save();var k=E$Xc(l.a.e);l.a.i.uiIncludeHighlightedAndSelectionForContextMenu&&l.s!=E$q&&k.indexOf(l.s)==-1&&k.push(l.s);if(k.length>0){for(var i=0,h=k.length;i<h;i++){k[i].U.length=0}}else{l.s.U.length=0}E$N(l.a)}};E$B.gf=function(p){var o=E$B.srcElement;if(o!=E$q&&o.s!=E$q){o.a.save();o.a.ic=E$s;var n=E$Xc(o.a.e);if(n.length==0){if(o.s.nc!=p){o.s.U.length=0;E$N(o.a)}o.s.nc=p}else{o.a.i.uiIncludeHighlightedAndSelectionForContextMenu&&o.s!=E$q&&n.indexOf(o.s)==-1&&n.push(o.s);for(var m=0,l=n.length;m<l;m++){n[m].U.length=0;n[m].nc=p}}o.a.gb.xf=E$Wc;p=o.a.gb.childNodes;m=0;for(l=p.length;m<l;m++){if(p[m].style&&!p[m].yg){p[m].style.border="1px solid #aaa";for(var n=0,k=o.s.U.length;n<k;n++){if(p[m].td==o.s.U[n]){p[m].style.border="inset"}}p[m].style.display="inline";if(p[m].td>118){p[m].style.display="none"}}}o.a.gb.Bf.style.visibility="visible";o.a.gb.style.display="inline"}};E$B.ii=function(n){var m=E$B.srcElement;if(m!=E$q&&m.s!=E$q){m.a.save();var l=E$Xc(m.a.e);m.a.i.uiIncludeHighlightedAndSelectionForContextMenu&&l.indexOf(m.s)==-1&&l.push(m.s);if(l.length>0){for(var k=0,i=l.length;k<i;k++){l[k].$a=n}}else{m.s.$a=n}E$N(m.a)}};E$B.He=function(n){var m=E$B.srcElement;if(m!=E$q&&m.s!=E$q){m.a.save();var l=E$Xc(m.a.e);m.a.i.uiIncludeHighlightedAndSelectionForContextMenu&&l.indexOf(m.s)==-1&&l.push(m.s);if(l.length>0){for(var k=0,i=l.length;k<i;k++){l[k].He(n)}}else{m.s.He(n)}E$N(m.a)}};E$B.jf=function(n){var m=E$B.srcElement;if(m!=E$q&&m.s!=E$q){m.a.save();var l=E$Xc(m.a.e);m.a.i.uiIncludeHighlightedAndSelectionForContextMenu&&l.indexOf(m.s)==-1&&l.push(m.s);if(l.length>0){for(var k=0,i=l.length;k<i;k++){l[k].jf(n)}}else{m.s.jf(n)}E$N(m.a)}};E$B.Je=function(n){var m=E$B.srcElement;if(m!=E$q&&m.s!=E$q){m.a.save();var l=E$Xc(m.a.e);m.a.i.uiIncludeHighlightedAndSelectionForContextMenu&&l.indexOf(m.s)==-1&&l.push(m.s);if(l.length>0){for(var k=0,i=l.length;k<i;k++){l[k].Je(n)}}else{m.s.Je(n)}E$N(m.a)}};E$B.Zb=function(n){var m=E$B.srcElement;if(m!=E$q&&m.s!=E$q){m.a.save();var l=E$Xc(m.a.e);m.a.i.uiIncludeHighlightedAndSelectionForContextMenu&&l.indexOf(m.s)==-1&&l.push(m.s);if(l.length>0){for(var k=0,i=l.length;k<i;k++){E$be(l[k],n)}}else{E$be(m.s,n)}E$ce(m.a.e);E$N(m.a)}};E$B.Kg=function(n){var m=E$B.srcElement;if(m!=E$q&&m.s){m.a.save();var l=E$Xc(m.a.e);m.a.i.uiIncludeHighlightedAndSelectionForContextMenu&&l.indexOf(m.s)==-1&&l.push(m.s);if(l.length>0){for(var k=0,i=l.length;k<i;k++){l[k].cc=n}}else{m.s.cc=n}E$N(m.a)}};E$B.ki=function(n){var m=E$B.srcElement;if(m!=E$q&&m.s){m.a.save();var l=E$Xc(m.a.e);m.a.i.uiIncludeHighlightedAndSelectionForContextMenu&&l.indexOf(m.s)==-1&&l.push(m.s);if(l.length>0){for(var k=0,i=l.length;k<i;k++){l[k].Tc=n}}else{m.s.Tc=n}E$N(m.a)}};E$B.Rd=function(n){var m=E$B.srcElement;if(m!=E$q&&m.s){m.a.save();var l=E$Xc(m.a.e);m.a.i.uiIncludeHighlightedAndSelectionForContextMenu&&l.indexOf(m.s)==-1&&l.push(m.s);if(l.length>0){for(var k=0,i=l.length;k<i;k++){E$ee(l[k]);l[k].na=n}}else{E$ee(m.s);m.s.na=n}E$ce(m.a.e);E$N(m.a)}};E$B.Ke=function(n){var m=E$B.srcElement;if(m!=E$q&&m.s){m.a.save();var l=E$Xc(m.a.e);m.a.i.uiIncludeHighlightedAndSelectionForContextMenu&&l.indexOf(m.s)==-1&&l.push(m.s);if(l.length>0){for(var k=0,i=l.length;k<i;k++){l[k].ob=n}}else{m.s.ob=n}E$N(m.a)}};E$B.Ng=function(n){var m=E$B.srcElement;if(m!=E$q&&m.s){m.a.save();var l=E$Xc(m.a.e);m.a.i.uiIncludeHighlightedAndSelectionForContextMenu&&l.indexOf(m.s)==-1&&l.push(m.s);if(l.length>0){for(var k=0,i=l.length;k<i;k++){l[k].lb=n}}else{m.s.lb=n}E$N(m.a)}};E$B.Ie=function(n){var m=E$B.srcElement;if(m!=E$q&&m.s){m.a.save();var l=E$Xc(m.a.e);m.a.i.uiIncludeHighlightedAndSelectionForContextMenu&&l.indexOf(m.s)==-1&&l.push(m.s);if(l.length>0){for(var k=0,i=l.length;k<i;k++){l[k].Oa=n}}else{m.s.Oa=n}E$N(m.a)}};E$B.nd=function(p,o){var n=E$B.srcElement;if(n!=E$q&&n.s){n.a.save();var m=E$Xc(n.a.e);n.a.i.uiIncludeHighlightedAndSelectionForContextMenu&&m.indexOf(n.s)==-1&&m.push(n.s);if(m.length>0){for(var l=0,k=m.length;l<k;l++){m[l].pb=p;m[l].Mb=o}}else{n.s.pb=p;n.s.Mb=o}E$N(n.a)}};E$B.Jc=function(n){var m=E$B.srcElement;if(m.s){m.a.save();var l=E$Xc(m.a.e);m.a.i.uiIncludeHighlightedAndSelectionForContextMenu&&l.indexOf(m.s)==-1&&l.push(m.s);if(l.length>0){for(var k=0,i=l.length;k<i;k++){m.a.e.Jc(l[k],n)}}else{m.a.e.Jc(m.s,n)}E$N(m.a)}};E$B.Lg=function(n){var m=E$B.srcElement;if(m.s){m.a.save();var l=E$Xc(m.a.e);m.a.i.uiIncludeHighlightedAndSelectionForContextMenu&&l.indexOf(m.s)==-1&&l.push(m.s);if(l.length>0){for(var k=0,i=l.length;k<i;k++){l[k].bc=n}}else{m.s.bc=n}E$N(m.a)}};E$B.gi=function(n){var m=E$B.srcElement;if(m.s){m.a.save();var l=E$Xc(m.a.e);m.a.i.uiIncludeHighlightedAndSelectionForContextMenu&&l.indexOf(m.s)==-1&&l.push(m.s);if(l.length>0){for(var k=0,i=l.length;k<i;k++){l[k].hd=n}}else{m.s.hd=n}E$N(m.a)}};E$B.Mj=function(){var i=E$B.srcElement;if(i!=E$q&&i.s){i.a.save();i.a.ic=E$s;var h=E$Xc(i.a.e);if(!h||h.length==0){E$Pb(i.a.e,E$B.srcElement.s);h=E$s}else{h=E$p}var g=i.a.n;i.a.n=new E$xb(i.a,E$B.srcElement.s.b);i.a.n.eb=h;i.a.n.Ce=g;E$N(i.a)}};E$B.ci=function(){var i=E$B.a,h=E$Xc(i.e);if(!h||h.length==0){i.e.Cd();h=E$s}else{h=E$p}i.save();i.ic=E$s;var g=i.n;i.n=new E$xb(i,E$s);i.n.eb=h;i.n.Ce=g;E$N(i)};E$B.Ui=function(p){var o=p.query,n=p.rxnQuery,m=p.stereoCare,p=p.bondQuerySupport,l=new DHTMLSuite.menuModel,k=l.menuItems;l.m(1,"Type","","",E$s,"",E$s,E$s,115*E$B.Ma);l.m(2,"Single","","",1,"",[E$B.Qd,1]);l.m(3,"Double","","",1,"",[E$B.Qd,2]);l.m(4,"Triple","","",1,"",[E$B.Qd,3]);l.m(5,"Aromatic","","",1,"",[E$B.Qd,4]);l.m(6,"Single/Double","","",1,"",[E$B.Qd,5]);l.m(7,"Single/Aromatic","","",1,"",[E$B.Qd,6]);l.m(8,"Double/Aromatic","","",1,"",[E$B.Qd,7]);l.m(9,"Any","","",1,"",[E$B.Qd,8]);if(o){p.aromatic?p.singleDouble?p.singleAromatic?p.doubleAromatic?p.any||k[9].setVisibility(E$s):k[8].setVisibility(E$s):k[7].setVisibility(E$s):k[6].setVisibility(E$s):k[5].setVisibility(E$s)}else{k[5].setVisibility(E$s);k[6].setVisibility(E$s);k[7].setVisibility(E$s);k[8].setVisibility(E$s);k[9].setVisibility(E$s)}l.m(10,"Stereo","","",E$s,"",E$s,E$s,100*E$B.Ma);l.m(11,"Off","","",10,"",[E$B.hf,0]);l.m(12,"Up","","",10,"",[E$B.hf,1,1]);l.m(13,"Down","","",10,"",[E$B.hf,6,1]);l.m(14,"Either","","",10,"",[E$B.hf,4,1]);l.m(16,"Switch ends","","",10,"",[E$B.gk]);l.m(15,"CT either","","",10,"",[E$B.hf,3,2]);if(o&&m){l.m(40,"Stereo care","","",10,"",[E$B.ji,1]);l.m(41,"No stereo care","","",10,"",[E$B.ji,0])}if(o){l.m(17,"Topology","","",E$s,"",E$s,E$s,65*E$B.Ma);l.m(18,"None","","",17,"",[E$B.Mg,E$q]);l.m(19,"Ring&nbsp;","","",17,"",[E$B.Mg,E$p]);l.m(20,"Chain","","",17,"",[E$B.Mg,E$s])}p.topology||k[17].setVisibility(E$s);if(o&&n){l.m(32,"Reaction center","","",E$s,"",E$s,E$s,130*E$B.Ma);l.m(33,"Off","","",32,"",[E$B.je,0]);l.m(34,"Not a center","","",32,"",[E$B.je,-1]);l.m(35,"Generic center","","",32,"",[E$B.je,1]);l.m(36,"No change","","",32,"",[E$B.je,2]);l.m(37,"Made or broken","","",32,"",[E$B.je,4]);l.m(38,"Order changed","","",32,"",[E$B.je,8]);l.m(39,"Made and changed","","",32,"",[E$B.je,12])}l.ec(0);l.m(21,"Flip ","","","","",[E$B.Hf,0]);l.m(22,"Flip ","","","","",[E$B.Hf,1]);l.ec(0);l.m(23,"Delete","","","","",[E$B.wd]);l.m(24,"Delete molecule","","","","",[E$B.zh]);l.m(25,"Copy molecule","","","","",[E$B.rh]);l.ec(0);l.m(29,"Template","","","","",E$s,E$s,110*E$B.Ma);l.m(30,"Save molecule","","",29,"",[E$B.ei]);l.m(31,"Use molecule","","",29,"",[E$B.Ci]);l.init();return l};E$B.nk=function(p,o){var n=E$p,m=E$Zd(o.e,E$s);m.length>0&&(n=m.length==1&&m[0]==p?E$p:E$s);for(var m=E$B.dh.menuItems,l=2;l<10;l++){m[l].setIcon("")}n&&m[1+p.type].setIcon(E$C+"tick.gif");for(l=11;l<17;l++){m[l].setIcon("")}var l=o.i.query,k=o.i.stereoCare;m[10].setState("regular");if(p.type==1){m[11].setText("Off");m[12].setVisibility(E$p);m[13].setVisibility(E$p);m[14].setVisibility(E$p);m[16].setVisibility(E$p);m[15].setVisibility(E$s);if(l&&k){m[40].setVisibility(E$s);m[41].setVisibility(E$s)}}else{if(p.type==2){m[11].setText("C/T");m[12].setVisibility(E$s);m[13].setVisibility(E$s);m[14].setVisibility(E$s);m[16].setVisibility(E$s);m[15].setVisibility(E$p);if(l&&k){m[40].setVisibility(E$p);m[41].setVisibility(E$p)}}else{m[10].setState("disabled")}}if(n){if(p.type==1){m[16].setState("regular");if(p.o==E$Of){m[11].setIcon(E$C+"tick.gif");m[16].setState("disabled")}else{p.o==E$O?m[12].setIcon(E$C+"tick.gif"):p.o==E$ld?m[13].setIcon(E$C+"tick.gif"):p.o==E$kd&&m[14].setIcon(E$C+"tick.gif")}}else{p.type==2&&(p.o==E$Of?m[11].setIcon(E$C+"tick.gif"):p.o==E$jd&&m[15].setIcon(E$C+"tick.gif"))}}if(l){if(k&&p.l==2){m[40].setIcon("");n&&p.Ib&&m[40].setIcon(E$C+"tick.gif")}if(n){if(p.xb==E$q){m[18].setIcon(E$C+"tick.gif");m[19].setIcon("");m[20].setIcon("")}else{if(p.xb){m[18].setIcon("");m[19].setIcon(E$C+"tick.gif");m[20].setIcon("")}else{m[18].setIcon("");m[19].setIcon("");m[20].setIcon(E$C+"tick.gif")}}}else{m[18].setIcon("");m[19].setIcon("");m[20].setIcon("")}}if(E$Wb(p.j.b.y-p.k.b.y)>E$Wb(p.j.b.x-p.k.b.x)){if(p.j.b.y>p.k.b.y){m[21].setText("Flip top");m[22].setText("Flip bottom")}else{m[22].setText("Flip top");m[21].setText("Flip bottom")}}else{if(p.j.b.x>p.k.b.x){m[21].setText("Flip right");m[22].setText("Flip left")}else{m[22].setText("Flip right");m[21].setText("Flip left")}}if(n){m[21].setState("regular");m[22].setState("regular")}else{m[21].setState("disabled");m[22].setState("disabled")}k=o.i.rxnQuery;if(l&&k){for(l=33;l<40;l++){m[l].setIcon("")}n&&(p.Sa?p.Sa==-1?m[34].setIcon(E$C+"tick.gif"):p.Sa==1?m[35].setIcon(E$C+"tick.gif"):p.Sa==2?m[36].setIcon(E$C+"tick.gif"):p.Sa==4?m[37].setIcon(E$C+"tick.gif"):p.Sa==8?m[38].setIcon(E$C+"tick.gif"):p.Sa==12&&m[39].setIcon(E$C+"tick.gif"):m[33].setIcon(E$C+"tick.gif"))}if(E$B.indexCurrentlyDisplayedMenuModel){E$B.indexCurrentlyDisplayedMenuModel=9999}};E$B.Mg=function(n){var m=E$B.srcElement;if(m!=E$q&&m.S){m.a.save();var l=E$Zd(m.a.e,E$s);m.a.i.uiIncludeHighlightedAndSelectionForContextMenu&&l.indexOf(m.S)==-1&&l.push(m.S);if(l.length>0){for(var k=0,i=l.length;k<i;k++){l[k].xb=n}}else{m.S.xb=n}E$N(m.a)}};E$B.hf=function(p,o){var n=E$B.srcElement;if(n!=E$q&&n.S){n.a.save();var m=E$Zd(n.a.e,E$s);m.length==0?m.push(n.S):n.a.i.uiIncludeHighlightedAndSelectionForContextMenu&&m.indexOf(n.S)==-1&&m.push(n.S);for(var l=0,k=m.length;l<k;l++){if(o){m[l].type=o;m[l].l=o}m[l].o=p}if(p==0&&n.a.e.jb==1&&!n.a.e.Jf()){n.a.e.jb=0}E$N(n.a)}};E$B.gk=function(){var l=E$B.srcElement;if(l!=E$q&&l.S){l.a.save();var k=E$Zd(l.a.e,E$s);k.length==0?k.push(l.S):l.a.i.uiIncludeHighlightedAndSelectionForContextMenu&&k.indexOf(l.S)==-1&&k.push(l.S);if(k.length>0){for(var i=0,h=k.length;i<h;i++){E$$d(k[i],k[i].o,k[i].M)}}else{E$$d(l.S,l.S.o,l.S.M)}E$N(l.a)}};E$B.Qd=function(n){var m=E$B.srcElement;if(m!=E$q&&m.S){m.a.save();var l=E$Zd(m.a.e,E$s);l.length==0?l.push(m.S):m.a.i.uiIncludeHighlightedAndSelectionForContextMenu&&l.indexOf(m.S)==-1&&l.push(m.S);for(var k=0,i=l.length;k<i;k++){l[k].type=n;l[k].l=n<4?n:-1;l[k].o=0}E$N(m.a)}};E$B.ji=function(n){var m=E$B.srcElement;if(m!=E$q&&m.S){m.a.save();var l=E$Zd(m.a.e,E$s);l.length==0?l.push(m.S):m.a.i.uiIncludeHighlightedAndSelectionForContextMenu&&l.indexOf(m.S)==-1&&l.push(m.S);for(var k=0,i=l.length;k<i;k++){if(l[k].l==2){l[k].Ib=n}}E$N(m.a)}};E$B.je=function(n){var m=E$B.srcElement;if(m.S){m.a.save();var l=E$Zd(m.a.e,E$s);l.length==0?l.push(m.S):m.a.i.uiIncludeHighlightedAndSelectionForContextMenu&&l.indexOf(m.S)==-1&&l.push(m.S);for(var k=0,i=l.length;k<i;k++){l[k].Sa=n}E$N(m.a)}};E$B.uh=function(i){var h=new DHTMLSuite.menuModel,g=0;if(i.pc){h.m(1,"Cut","","","","",[E$B.gg]);h.m(2,"Copy","","","","",[E$B.copy]);h.m(3,"Paste","","","","",[E$B.Ag]);h.m(4,"Delete","","","","",[E$B.te]);h.m(5,"Select all","","","","",[E$B.Cd]);h.ec(0);h.m(6,"Layout","","","","",[E$B.zj]);if(i.i.rgSupport){h.ec(0);h.m(7,"R definition","","",E$s,"",E$s,E$s,75*E$B.Ma,150*E$B.G);h.m(30,"R logic","","","","",[E$B.Wj]);h.m(31,"Off","","",7,"",[E$B.yh,0]);for(g=1;g<33;g++){h.m(31+g,new String("R"+g),"","",7,"",[E$B.yh,g])}}if(i.i.coordBondSupport){h.ec(0);h.m(29,"Add multicenter","","","","",[E$B.Ji])}h.ec(0);if(!i.i.buttonPanel){h.m(9,"SD data items...","","","","",[E$B.Dh]);h.ec(0)}h.m(10,"Chiral","","","","",E$s,E$s,70*E$B.Ma);h.m(11,"On","","",10,"",[E$B.hi,1],E$s);h.m(12,"Off","","",10,"",[E$B.hi,0],E$s);h.ec(0);if(!i.i.buttonPanel){h.m(13,"Properties","","","","",E$s,E$s,120*E$B.Ma);h.m(14,"Mass","","",13,"Mass using natural abundances (unless isotope specified)",[E$B.$d,E$p,E$p]);h.m(15,"Exact mass","","",13,"Using most common isotopes (unless isotope specified)",[E$B.$d,E$s,E$p]);h.ec(0)}g=20;h.m(g,"Clean","","",E$s,"",[E$B.Se],E$s);g++;h.m(g,"Rotate","","",E$s,"",[E$B.ci],E$s)}if(!E$Ba&&!E$ma){i.pc&&h.ec(0);h.m(g+1,"Copy Mol/Rxn","","","","",[E$B.sh]);h.m(g+2,"Copy SMILES","","","","",[E$B.Ri]);E$Da||h.m(g+3,"Copy image","","","","",[E$B.Qi]);if(i.pc){h.m(g+4,"Paste Mol/Rxn","","","","",[E$B.Zh]);i.i.getMolURL&&h.m(g+5,"Paste SMILES","","","","",[E$B.Hj])}}h.init();return h};E$B.Wi=function(i){var h=new DHTMLSuite.menuModel,g=0;if(i.pc){h.m(1,"Edit","","","","",[E$B.hg]);h.m(2,"Delete","","","","",[E$B.Yd]);g=2}if(!E$Ba&&!E$ma){h.ec(0);h.m(g+1,"Copy text","","","","",[E$B.Si])}h.init();return h};E$B.Vi=function(g){var f=new DHTMLSuite.menuModel;if(g.pc){f.m(1,"Edit","","",E$s,"",[E$B.cj],E$s);f.m(2,"Remove","","",E$s,"",[E$B.Kj],E$s);f.m(3,"Contract","","",E$s,"",[E$B.yi],E$s);f.m(4,"Expand","","",E$s,"",[E$B.yi],E$s)}f.init();return f};E$B.ok=function(i,h){if(h.pc){var g=E$B.li.menuItems;g[3].setVisibility(E$s);g[4].setVisibility(E$s);i.type=="SUP"&&i.g.length<2&&(i.$b?g[3].setVisibility(E$p):g[4].setVisibility(E$p));if(E$B.indexCurrentlyDisplayedMenuModel){E$B.indexCurrentlyDisplayedMenuModel=9999}}};E$B.Xi=function(){var e=new DHTMLSuite.menuModel;e.m(1,"Delete template","","","","",[E$B.$i]);return e};E$B.Bi=function(g){if(g.pc){var f=E$B.If.menuItems;if(E$gc(g.e)){f[1].setState("regular");f[2].setState("regular");f[4].setState("regular");g.i.coordBondSupport&&f[29].setState("regular")}else{f[1].setState("disabled");f[2].setState("disabled");f[4].setState("disabled");g.i.coordBondSupport&&f[29].setState("disabled")}if(g.i.rgSupport){E$Vd(g.e)?f[7].setState("regular"):f[7].setState("disabled");E$rf(g.e)?f[30].setState("regular"):f[30].setState("disabled")}E$B.zc!=E$q?f[3].setState("regular"):f[3].setState("disabled");g.e.v.length>0||g.e.F.length>0||E$rf(g.e)?f[6].setState("regular"):f[6].setState("disabled");g.e.Jf()?f[10].setState("regular"):f[10].setState("disabled");if(g.e.jb==0){f[11].setIcon("");f[12].setIcon(E$C+"tick.gif")}else{f[11].setIcon(E$C+"tick.gif");f[12].setIcon("")}if(E$B.indexCurrentlyDisplayedMenuModel){E$B.indexCurrentlyDisplayedMenuModel=9999}}};E$B.fireEvent=function(l,k,i){if(document.createEventObject){var h=document.createEventObject();if(i){h.clientX=i.clientX;h.clientY=i.clientY}return l.fireEvent("on"+k,h)}h=document.createEvent("HTMLEvents");if(i){h.clientX=i.clientX;h.clientY=i.clientY}h.initEvent(k,E$p,E$p);return !l.dispatchEvent(h)};E$B.Se=function(){var e=E$B.a;e.save();e.Se()};E$B.hi=function(g){var f=E$B.a;f.save();f.e.jb=g;E$N(f,E$p)};E$B.gg=function(){var e=E$B.a;e.save();E$B.zc=E$Ne(e.e);E$B.zc.Cd();window.Db&&window.Db.qh();E$Ph(e.e);E$N(e,E$p)};E$B.clear=function(){var e=E$B.a;e.save();E$Ph(e.e);E$N(e,E$p)};E$B.zj=function(){var B=E$B.a;B.save();if(E$rf(B.e)){var A;var z=B.e;if(E$rf(z)){E$Xi(z);A=[];for(var y=E$sf(z),v=0;v<y;v++){A[v]=E$Zh(z,v);A[v].Rd(E$rf(A[v]))}z=E$Vh(z,E$p);E$vc(z);var s=z.I,r=0.5*(z.wa+z.ra);if(z.F.length>0||z.v.length){z=E$Ji(z,B)}for(var s=s+2,q=0,v=0;v<y;v++){if(A[v].f[0].tc){E$vc(A[v],E$s,E$p);q=q+(A[v].ne+1)}}for(var q=q-1,p=0,v=0;v<y;v++){if(A[v].f[0].tc){for(var o=s-A[v].$+2,F=r-A[v].wa,F=F+q/2-p,E=0,D=A[v].f.length;E<D;E++){var C=A[v].f[E];C.b.x=C.b.x+o;C.b.y=C.b.y+F}E$wc(z,A[v]);p=p+(A[v].ne+1)}}}A=z;E$tb(B,A)}else{E$tb(B,E$Ji(B.e,B))}E$N(B,E$p)};E$B.Ji=function(){var n=E$B.a;n.save();if(E$Vd(n.e)){var m=E$hj(n.e,E$p),l=E$ch(n.e);l.A="*";l.b=m;for(var m=n.e.f,k=0;k<m.length;k++){if(m[k].selected){var i=n.e.Ga(l,m[k],1,0);i.hidden=E$p;i.qg=E$p}}l.selected=E$p}E$N(n,E$p)};E$B.Ri=function(){var g=E$B.a,f=g.e;E$gc(g.e)&&(f=E$Ne(g.e));f=f.write("smiles");if(window.Db){window.Db.th(f,"SMILES")}else{if(E$ha){console.log("ERROR finding ExternalClipboard in ContextMenu.copySmiles()")}else{if(E$ka){E$da.innerText=f;E$da.createTextRange().execCommand("copy")}else{if(g.mb!=E$o){g.mb.style.display="block";E$E(g.mb,E$nc(g.z),E$oc(g.z));g.mb.Jb.value=f;g.mb.Jb.select();g.mb.Jb.focus()}}}}};E$B.sh=function(){var g=E$B.a,f=g.e;E$gc(g.e)&&(f=E$Ne(g.e));f=f.write();if(window.Db){window.Db.th(f,"MOLFILE")}else{if(E$ha){console.log("ERROR finding ExternalClipboard in ContextMenu.copyMol()")}else{if(E$ka){E$da.innerText=f;E$da.createTextRange().execCommand("copy")}else{if(g.mb!=E$o){g.mb.style.display="block";E$E(g.mb,E$nc(g.z),E$oc(g.z));g.mb.Jb.value=f;g.mb.Jb.select();g.mb.Jb.focus()}}}}};E$B.Si=function(){var g=E$B.a,f=g.e.ba[E$B.srcElement.Ra.V];if(window.Db){window.Db.th(f,"TEXT")}else{if(E$ka){E$da.innerText=f;E$da.createTextRange().execCommand("copy")}else{g.mb.style.display="block";E$E(g.mb,E$nc(g.z),E$oc(g.z));g.mb.Jb.value=f;g.mb.Jb.select();g.mb.Jb.focus()}}};E$B.Qi=function(){var g=E$B.a;if(window.Db){var f=g.e;E$gc(g.e)&&(f=E$Ne(g.e));g=f.write();window.Db.wk(g)}else{if(!E$Da){f=g.D.toDataURL("image/png");g.vd.style.display="block";E$E(g.vd,E$nc(g.z),E$oc(g.z));g.vd.Mh.src=f;g.vd.Mh.focus()}}};E$B.Yd=function(){var g=E$B.a,f=E$B.srcElement.Ra;if(f){g.save();g.e.Yd(f);g.fa=E$q;E$N(g,E$p)}};E$B.hg=function(){var r=E$B.a,q=E$B.srcElement.Ra;E$B.__hideContextMenu();var p=document.createElement("div");E$E(p,q.b.Ea+3,q.b.va+15);r.fa=E$q;E$N(r,E$p);p.style.zIndex=E$ja;for(var o=document.createElement("textarea"),n=r.e.ba[q.V].split("\n"),m=0,l=0;l<n.length;l++){if(n[l].length>m){m=n[l].length}}o.rows=n.length;o.cols=m+5;o.style.zIndex=E$ja+1;p.appendChild(o);o.value=r.e.ba[q.V];o.style.fontSize=r.Ja+"px";o.style.fontFamily="Helvetica, sans-serif";o.a=r;o.z=p;o.Ra=q;o.n=r.n;r.n={};o.onblur=function(){if(this.z!=E$q){console&&console.log("OnBlur handler = "+this);var g=this.value.trim();try{this.z.parentNode.removeChild(this.z)}catch(e){this.z=E$q}if(g.length!=0){this.a.e.ba[this.Ra.V]=g;E$N(this.a);q.width=E$s;this.a.D.Lh=this.z!=E$q;this.a.n=this.n;this.z=E$q}}};o.onkeyup=E$aa();console&&console.log("adding events to textbox");o.onkeydown=o.onkeypress=function(i){var i=i||event,h=E$o;if(i.keyCode){h=i.keyCode}else{if(i.which){h=i.which}}if(h==27){console&&console.log("INLINE Blur handler = "+this);i=this.value.trim();if(this.z){h=this.z;this.z=E$q;try{h.parentNode.removeChild(h)}catch(e){}this.z=E$q}if(i.length!=0){this.a.e.ba[this.Ra.V]=i;E$N(this.a);q.width=E$s;this.a.n=this.n}}};r.z.appendChild(p);o.focus();E$N(r,E$p)};E$B.Kj=function(){var l=E$B.a,k=E$B.srcElement.Qf;if(k){l.save();if(k.type!="DAT"){for(var i=0;i<k.g.length;i++){var h=k.g[i];if(E$si(k,h.j)&&!E$si(k,h.k)&&h.k.A=="*"){h.k.A="C"}else{if(!E$si(k,h.j)&&E$si(k,h.j)&&h.j.A=="*"){h.j.A="C"}}}if(k.type=="SUP"){for(i=0;i<k.f.length;i++){k.f[i].abbr=E$q}}}E$Sh(l.e,k);l.Ba=E$q;E$N(l,E$p)}};E$B.cj=function(){var g=E$B.a,f=E$B.srcElement.Qf;if(f){E$Zk(g,f);g.Rf=f;g.Da.style.display="block"}};E$B.yi=function(){var g=E$B.a,f=E$B.srcElement.Qf;if(f){E$vi(f,!f.$b);E$N(g,E$p)}};E$B.Xg=function(p){var o=E$B.a,n;E$B.__hideContextMenu();for(var m=E$s,l=n="";!m;){n=p?window.prompt("Please enter text"+l,n):window.prompt("Please enter data field using 'key=value' syntax",n);if(n==E$q||n==E$o||n.trim().length==0){return E$s}if(p&&(n.indexOf("'")!=-1||n.indexOf('"')!=-1)){m=E$s;n=n.replace(/['"]/g,"").trim();l=" (without ' or \")"}else{m=E$p}}if(p){var p=E$oj(o,"TEXTBOX"),m=o.n,l=new E$Ha,k=E$sh(l,p,E$p,new E$Q(0));l.ba[p]=n;E$Tg(o,k,l);k.b.x=E$Bb(o,10);k.b.y=E$Cb(o,k.height+5);E$G(o,new E$Ec(l,m));E$N(o,E$p);return E$p}m=n.indexOf("=");if(m!=-1){p=n.substring(0,m);n=n.substring(m+1);if(p&&p.length>0){o.e.ba[p]=n;return p}}return E$s};E$B.Dh=function(){var e=E$B.a;e.save();e.Nh()?E$Ke(e):e.Xd=E$Le(e,e.z)};E$B.Zh=function(){var g=E$B.a;if(window.Db){var f=window.Db.kj();f.indexOf("$RXN")==0?g.load(f):g.Dc(f)}else{if(E$ka){E$da.focus();E$da.createTextRange().execCommand("Paste");E$da.innerText.indexOf("$RXN")==0?g.load(E$da.innerText):g.Dc(E$da.innerText);E$da.innerText=""}else{g.Fc.style.display="block";E$E(g.Fc,E$nc(g.z),E$oc(g.z));g.Fc.Jb.focus()}}};E$B.Hj=function(){var g=E$B.a;if(window.Db){var f=window.Db.kj(),f=g.i.getMolURL+encodeURIComponent(f),f=E$qb(f);f.indexOf("$RXN")==0?g.load(f):g.Dc(f)}else{if(E$ka){E$da.focus();E$da.createTextRange().execCommand("Paste");f=g.i.getMolURL+encodeURIComponent(E$da.innerText);f=E$qb(f);f.indexOf("$RXN")==0?g.load(f):g.Dc(f);E$da.innerText=""}else{g.Gc.style.display="block";E$E(g.Gc,E$nc(g.z),E$oc(g.z));g.Gc.Jb.focus()}}};E$B.Cd=function(){var e=E$B.a;e.e.Cd();E$N(e,E$p)};E$B.duplicate=function(){var g=E$B.a;g.save();var f=g.e;E$gc(g.e)&&(f=E$Ne(g.e));f=f.write();f.indexOf("$RXN")==0?g.load(f):g.Dc(f)};E$B.copy=function(){var g=E$B.a,f=g.e;E$gc(g.e)&&(f=E$Ne(g.e));f=f.write();E$B.zc=E$Ne(g.e);E$B.zc.Cd();window.Db&&window.Db.qh();if(E$ka){E$da.innerText=f;E$da.createTextRange().execCommand("copy")}};E$B.rh=function(){var e=E$B.srcElement.a;E$Pb(e.e,E$B.srcElement.s||E$B.srcElement.S);E$B.zc=E$Ne(e.e);E$B.zc.Cd();window.Db&&window.Db.qh();E$ij(e.e.f)};E$B.Ak=function(){return E$B.zc?E$B.zc.write():E$q};E$B.zh=function(){var e=E$B.srcElement.a;e.save();E$Pb(e.e,E$B.srcElement.s||E$B.srcElement.S);E$Th(e.e);E$N(e,E$p)};E$B.$d=function(i,h){var g=E$B.srcElement.a;if(g){E$B.Ad&&E$lj(g,E$B.srcElement.s||E$B.srcElement.S,i,E$B.Ad.ha,E$B.Ad.ia,h)}else{g=E$B.a;E$lj(g,E$s,i,E$o,E$o,h)}};E$B.Bk=function(i,h){var g=E$B.srcElement.a;if(g){E$B.Ad&&E$nj(g,E$B.srcElement.s||E$B.srcElement.S,i,E$B.Ad.ha,E$B.Ad.ia,h)}else{g=E$B.a;E$nj(g,E$s,i,E$o,E$o,h)}};E$B.Hf=function(g){var f=E$B.srcElement.a,g=g==0?E$B.srcElement.S.j:E$B.srcElement.S.k;f.save();f.e.Hf(E$B.srcElement.S,g);E$N(f,E$p)};E$B.Ci=function(){var g=E$B.srcElement.a;E$Pb(g.e,E$B.srcElement.s||E$B.srcElement.S);var f=E$Ne(g.e);E$ij(g.e.f);E$B.srcElement.s?E$G(g,new E$mc(E$q,E$q,E$q,f,E$Bi(f,E$B.srcElement.s).id)):E$B.srcElement.S&&E$G(g,new E$mc(E$q,E$q,E$q,f,E$Bi(f,E$B.srcElement.S.j).id,E$Bi(f,E$B.srcElement.S.k).id))};E$B.ei=function(){var p=E$B.srcElement.a;E$Pb(p.e,E$B.srcElement.s||E$B.srcElement.S);var o=E$Ne(p.e);E$ij(p.e.f);E$B.__hideContextMenu();var n=prompt("Please give label (optional)",p.e.label?p.e.label:"");if(n!=E$q){if(n.length>0){o.label=n;o.ba.LABEL=n}o.ba.TEMPLATE_TYPE=E$le;var n=E$ic(o),n=n+E$jc(o),n=n+"$$$$\n",m=new Date;m.setFullYear(m.getFullYear()+20);var l;l=document.cookie.lastIndexOf("dotmatics.elementalTemplate");var k=document.cookie.indexOf("=",l);l=l==-1?"dotmatics.elementalTemplate1":"dotmatics.elementalTemplate"+(parseInt(document.cookie.substring(l+27,k))+1);document.cookie=l+"="+escape(n)+";expires="+m.toUTCString();o.ph=l;p.aa.Ub.push(o);p.aa.Uc.push(o);if(p.aa.Mc.type==E$le){p.aa.Mc.innerHTML=E$le+" ("+p.aa.Uc.length+")";E$pe(p.aa,E$le)}p.aa.rd.innerHTML=E$le+" ("+p.aa.Uc.length+")"}};E$B.$i=function(){var i=E$B.a;E$Yc(i.aa.Uc,i.e);E$Yc(i.aa.Ub,i.e);var h=i.e.ph,g=new Date;g.setFullYear(g.getFullYear-1);document.cookie=h+"=;expires="+g.toUTCString();i.aa.Mc.innerHTML=E$le+" ("+i.aa.Uc.length+")";i.aa.rd.innerHTML=E$le+" ("+i.aa.Uc.length+")";E$pe(i.aa,E$le)};E$B.wd=function(){var l=E$B.srcElement.a;l.save();var k=E$Zd(l.e,E$s);if(k.length>0){for(var i=0,h=k.length;i<h;i++){l.e.wd(k[i])}}else{l.e.wd(E$B.srcElement.S)}E$N(l,E$p)};E$B.Pk=function(n){var m=E$s;try{var l=E$B.srcElement.a;if(n&&n.length>0){var k;if((k=n.indexOf("$RXN")==0?E$pc(l,n):l.Hk(n))&&k.f.length>0){m=E$p;E$B.zc=k}}}catch(i){console.log(i)}return m};E$B.Ag=function(r){var q=E$B.srcElement.a;if(!q||r){q=E$B.a}if(r=E$B.zc||q.zc){q.save();E$kc(q.e);var p;p=9999999;for(var o=-9999999,n=0,m=r.f.length;n<m;n++){var l=r.f[n];if(l.b.x<p){p=l.b.x}if(l.b.y>o){o=l.b.y}}n=0;for(m=r.v.length;n<m;n++){l=r.v[n];if(l.start.x<p){p=l.start.x}if(l.start.y>o){o=l.start.y}if(l.end.x<p){p=l.end.x}if(l.start.y>o){o=l.end.y}}n=0;for(m=r.F.length;n<m;n++){l=r.F[n];if(l.b.x<p){p=l.b.x}if(l.b.y>o){o=l.b.y}}n=0;for(m=r.u.length;n<m;n++){l=r.u[n];if(l.b.x<p){p=l.b.x}if(l.b.y>o){o=l.b.y}}if(p==9999999&&o==-9999999){o=p=0}p=new E$Q(p,o);q.df?r.move(q.df.ha-p.x,q.df.ia-p.y):r.move(E$Bb(q,20)-p.x,E$Cb(q,20)-p.y);q.Dc(r);E$N(q,E$p)}else{E$ka?E$B.Zh():window.Xf&&window.Xf(50,0)}};E$B.te=function(){var e;(e=E$B.srcElement&&E$B.srcElement.a?E$B.srcElement.a:E$B.a)&&e.te()};var E$pb="gnp.scitamtod".split("").reverse().join("");function E$Le(B,A){var z=document.createElement("div");z.style.position="absolute";z.style.border="1px solid #000";z.style.opacity=0.9;z.style.textAlign="left";z.style.background=B.Wa;A.appendChild(z);var y=60,v=0;if(E$ha){y=75;v=15}var s=B.width_-80-v;E$E(z,40,y,s,B.height_-80);var r=document.createElement("div");r.style.position="absolute";E$E(r,0,0,s,B.height_-116);r.style.overflow="auto";z.appendChild(r);r.style.paddingTop="6px";for(var v=0,q=Object.keys(B.e.ba),p=0;p<q.length;p++){var o=q[p];if(!(o.indexOf("TEXTBOX")==0||o=="PropertiesTextBox")){o=E$$k(B,o,B.e.ba[o]);r.appendChild(o);v++}}v=v*22+80;E$E(z,B.height_-v-10,y,s,v);q=document.createElement("button");q.style.position="absolute";var o=50,F=22,E=106;if(E$ma){o=80;F=30;E=116}E$ha&&(E=50);E$E(r,0,0,s,v-E);var D=o,C=o=o*3;E$E(q,v-E,s/2-5-C,C,F);o=document.createTextNode("Add New Data Item");q.appendChild(o);q.style.cursor="pointer";if(E$ma){q.style.fontSize="16px"}else{if(E$ha){q.style.fontSize="10px"}}q.hk=r;q.a=B;q.onclick=function(){var e=E$B.Xg(E$s);if(e){this.hk.appendChild(E$$k(this.a,e,this.a.e.ba[e]));e=this.a.fi()*22+80;E$E(z,this.a.height_-e-10,y,s,e);E$E(r,0,0,s,e-E);E$E(this,e-E,s/2-5-C,C,F);E$E(this.Bf,e-E,s/2+5,D,F)}};z.appendChild(q);p=q;o=D;q=document.createElement("button");q.style.position="absolute";E$E(q,v-E,s/2+5,D,F);o=document.createTextNode("Done");q.appendChild(o);if(E$ma){q.style.fontSize="16px"}else{if(E$ha){q.style.fontSize="10px"}}q.style.cursor="pointer";q.a=B;q.onclick=function(){this.a.z.removeChild(this.a.Xd);this.a.Xd=E$o;E$N(this.a,E$p)};z.appendChild(q);p.Bf=q;z.style.zIndex=E$ja;return z}function E$$k(n,m,l){var k=document.createElement("div");k.style.position="relative";k.style.paddingLeft="6px";var i=document.createElement("span");i.style.fontSize="11px";if(E$ma){i.style.fontSize="16px";i.style.padding="5px"}i.innerHTML=m;i.title="Click to edit key";i.Zd=E$s;i.a=n;i.V=m;i.onclick=function(){if(!this.Zd){this.innerHTML="";var e=document.createElement("input");e.setAttribute("type","text");e.value=this.V;e.style.fontSize="11px";if(E$ma){e.style.fontSize="16px";e.style.padding="5px"}e.Ab=this;e.onblur=function(){this.Ab.removeChild(this);if(this.Ab.V!=this.value&&this.value.length>0){var t=this.Ab.V,s=this.value,r=this.Ab.a.e.ba[t];delete this.Ab.a.e.ba[t];this.Ab.a.e.ba[s]=r;this.Ab.innerHTML=s;this.Ab.V=s;for(var r=this.Ab.a.e,q=0,p=r.u.length;q<p;q++){var o=r.u[q];if(o.V==t){o.width=E$s;o.V=s;return}}}else{this.Ab.innerHTML=this.Ab.V}this.Ab.Zd=E$s};e.onkeydown=function(f){f=f||event;if(f.keyCode){code=f.keyCode}else{if(f.which){code=f.which}}if(code==13){this.onblur()}};this.appendChild(e);e.focus();this.Zd=E$p}};k.appendChild(i);m=document.createElement("span");m.innerHTML=" = ";if(E$ha){m.style.fontSize="14px";m.style.fontWeight="bolder";m.style.verticalAlign="-10%"}if(E$ma){m.style.fontSize="16px"}k.appendChild(m);m=document.createElement("span");m.style.fontSize="11px";if(E$ma){m.style.fontSize="16px";m.style.padding="5px"}m.innerHTML=l.replace(/\n/g,"<br>");m.title="Click to edit value";m.Zd=E$s;m.a=n;m.kd=i;m.value=l;m.onclick=function(){if(!this.Zd){this.innerHTML="";var u=document.createElement("textarea");u.style.verticalAlign="top";for(var s=this.value,r=s.split("\n"),q=10,p=0,o=r.length;p<o;p++){if(r[p].length>q){q=r[p].length}}u.value=s;u.cols=q+10;u.rows=r.length;u.style.fontSize="11px";if(E$ma){u.style.fontSize="16px";u.style.padding="5px"}u.Ab=this;u.onblur=function(){var y=this.Ab.kd.V;this.Ab.removeChild(this);this.Ab.a.e.ba[y]=this.value;this.Ab.innerHTML=this.value.replace(/\n/g,"<br>");this.Ab.value=this.value;this.Ab.Zd=E$s;for(var x=this.Ab.a.e,w=0,v=x.u.length;w<v;w++){var t=x.u[w];if(t.V==y){t.width=E$s;break}}};this.appendChild(u);u.focus();this.Zd=E$p}};k.appendChild(m);aSpan=document.createElement("span");aSpan.innerHTML="X";aSpan.style.cssFloat="right";aSpan.style.paddingRight="10px";aSpan.style.fontSize="11px";aSpan.style.fontWeight=900;aSpan.style.color="red";if(E$ma){aSpan.style.fontSize="18px";aSpan.style.padding="5px"}aSpan.style.paddingLeft="10px";aSpan.style.cursor="pointer";aSpan.title="Delete data field";aSpan.a=n;aSpan.kd=i;aSpan.a=n;aSpan.ig=k;aSpan.onclick=function(){delete this.a.e.ba[this.kd.V];for(var q=this.a.e,p=this.kd.V,o=0,h=q.u.length;o<h;o++){if(q.u[o].V==p){E$Yc(q.u,q.u[o]);E$vh(q);break}}this.ig.parentNode.removeChild(this.ig)};k.appendChild(aSpan);aSpan=document.createElement("span");aSpan.innerHTML="Add as textbox";aSpan.style.cssFloat="right";aSpan.style.fontSize="11px";aSpan.style.fontWeight=900;aSpan.style.color="blue";if(E$ma){aSpan.style.fontSize="18px";aSpan.style.padding="5px"}aSpan.style.paddingLeft="10px";aSpan.style.cursor="pointer";aSpan.title="Display data field as textbox";aSpan.a=n;aSpan.kd=i;aSpan.qk=m;aSpan.a=n;aSpan.ig=k;aSpan.onclick=function(){for(var o=0,h=this.a.e.u.length;o<h;o++){if(this.a.e.u[o].V==this.kd.V){return}}var o=this.a.n,h=new E$Ha,g=this.qk.value;E$sh(h,this.kd.V,this.kd.V.indexOf("TEXTBOX")==0||this.kd.V=="PropertiesTextBox"?E$p:E$s,new E$Q(0,0));h.ba[this.kd.V]=g;E$G(this.a,new E$Ec(h,o));E$N(this.a,E$p);this.a.z.removeChild(this.a.Xd)};k.appendChild(aSpan);n=document.createElement("hr");n.style.clear="both";n.style.position="relative";if(E$ha){n.style.marginTop="3px";n.style.marginBottom="3px";k.style.paddingTop="0px";k.style.paddingBottom="0px";k.style.marginTop="0px";k.style.marginBottom="0px"}k.appendChild(n);return k}function E$Ad(N,M,L,K,J){L=L+E$nc(M);E$ha&&(E$Gb==E$o?E$Gb=L:L=E$Gb);var K=K+E$oc(M),G=N.da(document.body,"","");G.style.cursor="default";G.style.background="#aaa";var E=N.da(G,"","");E.style.cursor="default";E.style.background="white";var D=22;G.style.fontSize="12px";if(E$ma){D=D+14;G.style.fontSize="18px"}G.style.fontFamily=N.z.style.fontFamily;for(var C=100,B=-100,y=100,v=-100,r=0,p=E$Uc.length;r<p;r++){var z=E$Uc[r];if(z[4]!=-1&&!((!J||!N.i.atomQuerySupport.queryTypes)&&z[4]==20)){var s=z[5]-1,q=z[4]-1;if((!J||!N.i.atomQuerySupport.queryTypes)&&z[4]>20){q=q-1}var C=E$Yb(s,C),y=E$Yb(q,y),B=E$Xb(s,B),v=E$Xb(q,v),o=document.createElement("DIV");o.title=z[4]<19?z[1]+"\nZ = "+z[0]+"\nMW = "+z[3]:z[1];o.style.cursor="pointer";o.innerHTML="<center>"+z[2]+"</center>";o.style.lineHeight=D+"px";o.c=N;o.td=z[0];o.onclick=function(){G.xf(this.c,this.td);this.style.border=this.style.border=="inset"?"1px solid #aaa":"inset"};o.style.background=z[4]==20||z[4]==21?"#C8C8C8":z[5]==9||z[5]==8?"#cfc":z[4]==1||z[4]==2?"#ccf":z[4]>=3&&z[4]<=12?"#fcc":z[4]>=13&&z[4]<=18?"#FDD017":"white";E$E(o,D*s+8,D*q+8,D,D);G.appendChild(o)}}o=document.createElement("button");o.yg=E$p;o.appendChild(document.createTextNode("Done"));if(E$ma){o.style.fontSize="16px"}o.style.cursor="pointer";o.c=N;o.name="periodicTableClose";o.onclick=function(){this.c.gb.style.display="none";this.c.ic&&E$N(this.c)};G.Bf=o;if(E$ka){J=document.createElement("div");J.yg=E$p;E$E(J,8*D+8,D*18+12,2*D+4,D+4);G.appendChild(J);E$E(o,2,2);o.style.overflow="visible";o.style.padding="1px 6px";J.appendChild(o)}else{E$E(o,8*D+8,D*18+12,2*D,D);G.appendChild(o)}o.style.visibility="hidden";o=0;J=1;if(E$na){o=2;J=0}E$E(G,L+J,K+J,(v-y+1)*D+20,(B-C+1)*D+20);E$E(E,1,1,(v-y+1)*D+16+o,(B-C+1)*D+16+o);o=N.da(M,"<img src='"+E$C+"cross.gif'>","Close");E.appendChild(o);E$E(o,0,E.width-20);o.onclick=function(){this.c.gb.style.display="none";this.c.ic&&E$N(this.c)};return G}function E$al(t,s,r,q,p){for(var o=0;o<s.length;o++){var n=document.createElement("DIV"),m=s[o];n.title=m[0];n.style.cursor="pointer";n.style.fontSize=p.height-6+"px";n.style.lineHeight=p.height+"px";n.innerHTML="<center>"+m[1]+"</center>";n.c=t;n.td=m[1];n.onclick=function(){q.xf(this.c,this.td)};E$Sc(n,3,3,3,3);n.style.margin=p.border+"px";E$Rc(n,p.width,p.height);if(E$na){n.style.display="inline"}else{if(E$ka&&E$qa==7){n.style.display="inline";n.style.zoom=1}else{n.style.display="inline-block"}}n.style.background="#C8C8C8";r.appendChild(n)}}function E$Bd(y,x,w,v){var w=w+E$nc(x),v=v+E$oc(x),u=y.da(document.body,"","");u.style.cursor="default";u.style.background="#aaa";u.style.fontFamily=y.z.style.fontFamily;var s=y.da(u,"","");s.style.cursor="default";s.style.background="white";var r={width:32,height:18,border:4};s.innerHTML="<center><B>Reaxys Generics</B></center>";x=y.da(x,"<img src='"+E$C+"cross.gif'>","Close");s.appendChild(x);E$E(x,0,434);x.onclick=function(){this.c.lc.style.display="none"};var q=0,x=document.createElement("DIV");x.style.border="1px solid #aaa";x.innerHTML="<center>Atom generics</center>";s.appendChild(x);E$E(x,16,5,440,40);q=60;height1=q+45;height2=q+95;var p=document.createElement("DIV");x.appendChild(p);x=E$Ui.$g.length*(r.width+2*r.border);E$E(p,15,(440-x)/2);E$al(y,E$Ui.$g,p,u,r);p=document.createElement("DIV");p.style.border="1px solid #aaa";p.innerHTML="<center>Group generics</center>";s.appendChild(p);E$E(p,q,5,440,280-q);q=document.createElement("DIV");p.appendChild(q);x=E$Ui.Fh.length*(r.width+2*r.border);E$E(q,15,(440-x)/2);E$al(y,E$Ui.Fh,q,u,r);q=document.createElement("DIV");q.style.border="1px solid #aaa";q.innerHTML="<center>Acyclic</center>";p.appendChild(q);var o=170,z=3*o/2;E$E(q,45,5,o,280-height1-5);r.width=28;z=document.createElement("DIV");q.appendChild(z);x=E$Ui.Vg.length*(r.width+2*r.border);E$E(z,15,(o-x)/2);E$al(y,E$Ui.Vg,z,u,r);o=(o-15)/2;x=document.createElement("DIV");x.style.border="1px solid #aaa";x.innerHTML="<center>Carbon</center>";q.appendChild(x);E$E(x,45,5,o,280-height2-5);z=document.createElement("DIV");x.appendChild(z);x=E$Ui.gh.length*(r.width+2*r.border);x=(o-x)/2;x<0&&(x=2);E$E(z,15,x);E$al(y,E$Ui.gh,z,u,r);x=document.createElement("DIV");x.style.border="1px solid #aaa";x.innerHTML="<center>Hetero</center>";q.appendChild(x);E$E(x,45,10+o,o,280-height2-5);q=document.createElement("DIV");x.appendChild(q);x=E$Ui.Ih.length*(r.width+2*r.border);x=(o-x)/2;x<0&&(x=2);E$E(q,15,x);E$al(y,E$Ui.Ih,q,u,r);q=document.createElement("DIV");q.style.border="1px solid #aaa";q.innerHTML="<center>Cyclic</center>";p.appendChild(q);o=170;z=3*o/2;E$E(q,45,10+o,z,280-height1-5);p=document.createElement("DIV");q.appendChild(p);x=E$Ui.vh.length*(r.width+2*r.border);E$E(p,15,(z-x)/2);E$al(y,E$Ui.vh,p,u,r);p=(z-20)/3;x=document.createElement("DIV");x.style.border="1px solid #aaa";x.innerHTML="<center>Carbon</center>";q.appendChild(x);E$E(x,45,5,p,280-height2-5);o=document.createElement("DIV");x.appendChild(o);x=E$Ui.hh.length*(r.width+2*r.border);x=(p-x)/2;x<0&&(x=2);E$E(o,15,x);E$al(y,E$Ui.hh,o,u,r);x=document.createElement("DIV");x.style.border="1px solid #aaa";x.innerHTML="<center>Hetero</center>";q.appendChild(x);E$E(x,45,10+p,p,280-height2-5);o=document.createElement("DIV");x.appendChild(o);x=E$Ui.Jh.length*(r.width+2*r.border);x=(p-x)/2;x<0&&(x=2);E$E(o,15,x);E$al(y,E$Ui.Jh,o,u,r);x=document.createElement("DIV");x.style.border="1px solid #aaa";x.innerHTML="<center>No carbon</center>";q.appendChild(x);E$E(x,45,15+2*p,p,280-height2-5);q=document.createElement("DIV");x.appendChild(q);x=E$Ui.Vh.length*(r.width+2*r.border);x=(p-x)/2;x<0&&(x=2);E$E(q,15,x);E$al(y,E$Ui.Vh,q,u,r);E$E(u,w,v,454,289);E$E(s,2,2,450,285);return u}var E$zh=eval;function E$qb(t,s){var r=E$q;if(s&&arguments.length>2){for(var r=Array(arguments.length-2),q=2;q<arguments.length;q++){r[q-2]=arguments[q]}}if(window.rg&&window.rg.tf instanceof Function){if(s){jQuery.tf({url:t,fk:function(e){r.unshift(e);s.apply(s,r)}});return}var p=E$q;jQuery.tf({url:t,async:E$s,fk:function(e){p=e}});return p}var o=E$bl();if(s){o.open("GET",t,E$p);r=E$q;if(arguments.length>2){r=Array(arguments.length-2);for(q=2;q<arguments.length;q++){r[q-2]=arguments[q]}}o.onreadystatechange=function(){if(o.readyState===4){if(o.status===200||o.status===0){r.unshift(o.responseText);s.apply(s,r)}else{console.error(o.statusText)}}};try{o.send(E$q)}catch(n){console.log("Error loading "+t)}}else{try{o.open("GET",t,E$s);o.send(E$q)}catch(m){console.log(m)}return o!=E$q?o.responseText:E$q}}function E$bl(){return window.XMLHttpRequest&&(window.location.protocol!=="file:"||!("ActiveXObject" in window))?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP")}function E$Ae(l){if(window.rg&&window.rg.tf instanceof Function){var k;jQuery.tf({url:l,async:E$s,complete:function(e){k=e}});return k}var i=E$bl();try{i.open("GET",l,E$s);i.send(E$q)}catch(h){}return i}function E$cl(g){if(document.cookie.length>0){g=document.cookie.indexOf(g,0);if(g!=-1){var g=document.cookie.indexOf("=",g),f=document.cookie.indexOf(";",g);if(f==-1){f=document.cookie.length}return unescape(document.cookie.substring(g+1,f))}}return E$q}window.E$c$=E$cl;function E$Vb(){if(E$Ta==E$o||E$Ta<E$Ia||E$Ta>E$La){E$Ta=E$Ia}var g=new Date;g.setFullYear(g.getFullYear()+20);var f="hDisplay: "+E$Ya+",bw:"+E$ab+",displayAtomNumbers:"+E$$a+",showTips:"+E$jb+",autoAddAttachments:"+E$eb+",valenceWarning:"+E$Za+",uiTheme:"+E$Ta;E$db&&(f=f+(",defaultMolFormat:"+E$cb));E$Sa!=-1&&(f=f+(",defaultButton:"+E$Sa));document.cookie="dotmatics.elementalSettings="+escape(f)+";expires="+g.toUTCString()}function E$Va(l){var k=E$cl("dotmatics.elementalSettings");if(k){for(var k=k.split(","),i=0;i<k.length;i++){var h=k[i].split(":");h.length<2||(h[0]=="hDisplay"?E$Ya=parseInt(h[1]):h[0]=="bw"?E$ab=parseInt(h[1]):h[0]=="displayAtomNumbers"?E$$a=parseInt(h[1]):h[0]=="autoAddAttachments"?E$eb=parseInt(h[1]):h[0]=="showTips"?E$jb=parseInt(h[1]):h[0]=="valenceWarning"?E$Za=parseInt(h[1]):h[0]=="uiTheme"&&l?E$Ta=parseInt(h[1]):h[0]=="defaultMolFormat"?E$cb=h[1]:h[0]=="defaultButton"&&(E$Sa=parseInt(h[1])))}}}function E$gd(i){var h=E$s,g=i.aa;if(g&&g.Sb==E$q||g&&g.Sb.length==0){E$ne(g,g.z);E$oe(g,g.z);g.Qc&&E$pe(g,g.Qc);h=E$p}if((g=i.Ha)&&g.Sb==E$q||g&&g.Sb.length==0){E$oe(g,g.z);g.Qc&&E$pe(g,g.Qc);h=E$p}h&&E$Je(i)}E$v=E$D.prototype;E$v.Bj=function(i,h){if(this.Ha){E$gd(this);window.Elemental_clickSkip=E$p;this.Ha.Fa=E$qc(i);this.Ha.load=h;var g=this.oc.style.display;this.oc.style.display="inline";E$ue(this.Ha);this.oc.style.display=g;setTimeout("window.Elemental_clickSkip=false;",100)}};E$v.Xj=function(){E$gd(this);this.oc.style.display="inline"};E$v.Xe=function(){this.oc.style.display="none"};E$v.Rj=function(g,f){this.i[g]=f;E$Ya=this.i.hDisplay;E$$a=Number(this.i.displayAtomNumbers);E$Za=Number(this.i.showExceededValence);E$ab=Number(this.i.bw);E$Ta=Number(this.i.uiTheme);this.Tb=this.i.uiSelectNewAtoms;this.Ud=this.i.uiSelectNewSproutAtoms;E$N(this,E$p)};E$v.jj=function(e){switch(e){case"hDisplay":return E$Ya;case"displayAtomNumbers":return E$$a;case"bw":return E$ab}return this.i[e]};E$v.uj=function(){return this.qc.length>0&&(this.rf==E$o||this.qc.length!=this.rf)};E$v.Vj=function(){if(this.Eb){this.Eb.style.display="block"}};E$Ha.prototype.mg=function(){for(var i=[],h=0,g=this.f.length;h<g;h++){this.f[h].na>0&&i.push("R"+this.f[h].na)}return i};window.Elemental=E$D;E$D.prototype.write=E$D.prototype.write;E$D.prototype.writeEditedEntryBackToSDF=E$D.prototype.sk;E$D.prototype.read=E$D.prototype.load;E$D.prototype.load=E$D.prototype.load;E$D.prototype.loadAsTemplate=E$D.prototype.Dc;E$D.prototype.getMol=E$D.prototype.hj;E$D.prototype.getCanvas=E$D.prototype.ej;E$D.prototype.resize=E$D.prototype.resize;E$D.prototype.hasSelection=E$D.prototype.oj;E$D.prototype.isReaction=E$D.prototype.wj;E$D.prototype.isClipboardEmpty=E$D.prototype.tj;E$D.prototype.loadIntoSdfGrid=E$D.prototype.Bj;E$D.prototype.showSdfGrid=E$D.prototype.Xj;E$D.prototype.hideSdfGrid=E$D.prototype.Xe;E$D.prototype.getNumberOfSdfEntries=E$D.prototype.ij;E$D.prototype.isSDFDataEditorDivActive=E$D.prototype.Nh;E$D.prototype.sdfDataItemsAvailable=E$D.prototype.fi;E$D.prototype.isSDFGridViewActive=E$D.prototype.$e;E$D.prototype.getRlabels=E$D.prototype.mg;E$D.prototype.mg=function(){return this.e.mg()};E$D.prototype.getUITheme=E$D.prototype.lj;E$D.prototype.lj=function(){return this.i.uiTheme};E$D.prototype.getDiv=E$D.prototype.we;E$D.prototype.setSetting=E$D.prototype.Rj;E$D.prototype.getSetting=E$D.prototype.jj;E$D.prototype.isDirty=E$D.prototype.uj;E$D.prototype.clearUndo=E$D.prototype.dg;E$D.prototype.setNotDirty=E$D.prototype.Qj;E$D.prototype.justSavedClearUndoSetNotDirty=E$D.prototype.xj;E$D.prototype.showButtonPanel=E$D.prototype.Vj;E$D.prototype.centerAndZoom=E$D.prototype.centerAndZoom;E$D.prototype.centerOnPage=E$D.prototype.Oi;E$D.prototype.Oi=function(){var e=this.zoom;E$tb(this,this.e);this.zoom=e;E$N(this,E$p)};E$D.prototype.applyZoom=E$D.prototype.Hd;E$D.prototype.applyZoomAndCenter=E$D.prototype.Ki;E$D.prototype.Ki=function(e){this.Hd(e);e=this.zoom;E$tb(this,this.e);this.zoom=e;E$N(this,E$p)};E$D.prototype.setZoomAndCenter=E$D.prototype.Sj;E$D.prototype.Sj=function(e){E$tb(this,this.e);this.zoom=e;E$N(this,E$p)};E$D.prototype.getZoom=E$D.prototype.mj;E$D.prototype.mj=function(){return this.zoom};E$D.prototype.canUndo=E$D.prototype.Ni;E$D.prototype.canRedo=E$D.prototype.Mi;E$D.prototype.undo=E$D.prototype.qf;E$D.prototype.redo=E$D.prototype.Eg;E$D.prototype.empty=E$D.prototype.empty;E$Ha.prototype.write=E$Ha.prototype.write;E$D.prototype.extensions=E$D.prototype.dj;E$D.prototype.clearShortcutsForMenus=E$D.prototype.Pi;E$D.prototype.getContextMenu=E$D.prototype.Eh;E$D.prototype.registerShortcutForMenus=E$D.prototype.Jj;E$D.prototype.ChangeToNewTheme=E$D.prototype.Ug;E$D.prototype.getGridStyle=E$D.prototype.fj;E$D.prototype.fj=function(){return this.i.gridStyle};E$D.prototype.setGridStyle=E$D.prototype.Oj;E$D.prototype.Oj=function(e){switch(e){case E$Ma:case E$Na:case E$Pa:break;default:e=E$Ma}if(this.i.gridStyle!=e){this.i.gridStyle=e;E$N(this,E$p)}};E$D.prototype.getLivePropertyCalcs=E$D.prototype.gj;E$D.prototype.gj=function(){return this.i.livePropertyCalcs};E$D.prototype.setLivePropertyCalcs=E$D.prototype.Pj;E$D.prototype.Pj=function(e){this.i.livePropertyCalcs!=e&&(this.i.livePropertyCalcs=e);E$N(this,E$p)};E$Ha.readMol=E$lc;var E$Uc=[[0,"Dummy","*",0,-1,-1],[1,"Hydrogen","H",1.00794,1,1],[2,"Helium","He",4.002602,18,1],[3,"Lithium","Li",6.941,1,2],[4,"Beryllium","Be",9.012182,2,2],[5,"Boron","B",10.811,13,2],[6,"Carbon","C",12.0107,14,2],[7,"Nitrogen","N",14.0067,15,2],[8,"Oxygen","O",15.9994,16,2],[9,"Fluorine","F",18.9984032,17,2],[10,"Neon","Ne",20.1797,18,2],[11,"Sodium","Na",22.98976928,1,3],[12,"Magnesium","Mg",24.305,2,3],[13,"Aluminium","Al",26.9815386,13,3],[14,"Silicon","Si",28.0855,14,3],[15,"Phosphorus","P",30.973762,15,3],[16,"Sulfur","S",32.065,16,3],[17,"Chlorine","Cl",35.453,17,3],[18,"Argon","Ar",39.948,18,3],[19,"Potassium","K",39.0983,1,4],[20,"Calcium","Ca",40.078,2,4],[21,"Scandium","Sc",44.955912,3,4],[22,"Titanium","Ti",47.867,4,4],[23,"Vanadium","V",50.9415,5,4],[24,"Chromium","Cr",51.9961,6,4],[25,"Manganese","Mn",54.938045,7,4],[26,"Iron","Fe",55.845,8,4],[27,"Cobalt","Co",58.933195,9,4],[28,"Nickel","Ni",58.6934,10,4],[29,"Copper","Cu",63.546,11,4],[30,"Zinc","Zn",65.409,12,4],[31,"Gallium","Ga",69.723,13,4],[32,"Germanium","Ge",72.64,14,4],[33,"Arsenic","As",74.9216,15,4],[34,"Selenium","Se",78.96,16,4],[35,"Bromine","Br",79.904,17,4],[36,"Krypton","Kr",83.798,18,4],[37,"Rubidium","Rb",85.4678,1,5],[38,"Strontium","Sr",87.62,2,5],[39,"Yttrium","Y",88.90585,3,5],[40,"Zirconium","Zr",91.224,4,5],[41,"Niobium","Nb",92.90638,5,5],[42,"Molybdenum","Mo",95.94,6,5],[43,"Technetium","Tc",98,7,5],[44,"Ruthenium","Ru",101.07,8,5],[45,"Rhodium","Rh",102.9055,9,5],[46,"Palladium","Pd",106.42,10,5],[47,"Silver","Ag",107.8682,11,5],[48,"Cadmium","Cd",112.411,12,5],[49,"Indium","In",114.818,13,5],[50,"Tin","Sn",118.71,14,5],[51,"Antimony","Sb",121.76,15,5],[52,"Tellurium","Te",127.6,16,5],[53,"Iodine","I",126.90447,17,5],[54,"Xenon","Xe",131.293,18,5],[55,"Caesium","Cs",132.9054519,1,6],[56,"Barium","Ba",137.327,2,6],[57,"Lanthanum","La",138.90547,3,6],[58,"Cerium","Ce",140.116,4,8],[59,"Praseodymium","Pr",140.90765,5,8],[60,"Neodymium","Nd",144.242,6,8],[61,"Promethium","Pm",145,7,8],[62,"Samarium","Sm",150.36,8,8],[63,"Europium","Eu",151.964,9,8],[64,"Gadolinium","Gd",157.25,10,8],[65,"Terbium","Tb",158.92535,11,8],[66,"Dysprosium","Dy",162.5,12,8],[67,"Holmium","Ho",164.93032,13,8],[68,"Erbium","Er",167.259,14,8],[69,"Thulium","Tm",168.93421,15,8],[70,"Ytterbium","Yb",173.04,16,8],[71,"Lutetium","Lu",174.967,17,8],[72,"Hafnium","Hf",178.49,4,6],[73,"Tantalum","Ta",180.94788,5,6],[74,"Tungsten","W",183.84,6,6],[75,"Rhenium","Re",186.207,7,6],[76,"Osmium","Os",190.23,8,6],[77,"Iridium","Ir",192.217,9,6],[78,"Platinum","Pt",195.084,10,6],[79,"Gold","Au",196.966569,11,6],[80,"Mercury","Hg",200.59,12,6],[81,"Thallium","Tl",204.3833,13,6],[82,"Lead","Pb",207.2,14,6],[83,"Bismuth","Bi",208.9804,15,6],[84,"Polonium","Po",210,16,6],[85,"Astatine","At",210,17,6],[86,"Radon","Rn",220,18,6],[87,"Francium","Fr",223,1,7],[88,"Radium","Ra",226,2,7],[89,"Actinium","Ac",227,3,7],[90,"Thorium","Th",232.03806,4,9],[91,"Protactinium","Pa",231.03588,5,9],[92,"Uranium","U",238.02891,6,9],[93,"Neptunium","Np",237,7,9],[94,"Plutonium","Pu",244,8,9],[95,"Americium","Am",243,9,9],[96,"Curium","Cm",247,10,9],[97,"Berkelium","Bk",247,11,9],[98,"Californium","Cf",251,12,9],[99,"Einsteinium","Es",252,13,9],[100,"Fermium","Fm",257,14,9],[101,"Mendelevium","Md",258,15,9],[102,"Nobelium","No",259,16,9],[103,"Lawrencium","Lr",262,17,9],[104,"Rutherfordium","Rf",261,4,7],[105,"Dubnium","Db",262,5,7],[106,"Seaborgium","Sg",266,6,7],[107,"Bohrium","Bh",264,7,7],[108,"Hassium","Hs",277,8,7],[109,"Meitnerium","Mt",268,9,7],[110,"Darmstadtium","Ds",271,10,7],[111,"Roentgenium","Rg",272,11,7],[112,"Copernicium","Cn",285,12,7],[113,"Ununtrium","Ut",284,13,7],[114,"Ununquadium","Uq",289,14,7],[115,"Ununpentium","Up",288,15,7],[116,"Ununhexium","Uh",292,16,7],[117,"Ununseptium","Us",293,17,7],[118,"Ununoctium","Uo",294,18,7],[119,"Any (except H)","A",0,20,2],[120,"Hetero","Q",0,20,3],[121,"Halogen","X",0,20,4],[122,"Any (incl. H)","AH",0,20,5],[123,"Hetero or H","QH",0,20,6],[124,"Halogen or H","XH",0,20,7],[125,"Any","*",0,20,8],[126,"R1","R1",0,21,2],[127,"R2","R2",0,21,3],[128,"R3","R3",0,21,4],[129,"R4","R4",0,21,5],[130,"R5","R5",0,21,6],[131,"R6","R6",0,21,7],[132,"R7","R7",0,21,8]],E$Ui={$g:[["Any (except H)","A"],["Any (incl. H)","AH"],["Hetero (no H)","Q"],["Hetero or H","QH"],["Halogen","X"],["Halogen or H","XH"],["Metal","M"],["Metal or H","MH"]],Fh:[["Any group","G"],["Any group or H","GH"],["Any group (possibly with ring closure)","G*"],["G* or H","GH*"],["Polymer","Pol"]],Vg:[["Acyclic","ACY"],["Acyclic or H","ACH"]],gh:[["Carbonacyclic","ABC"],["Carbonacyclic or H","ABH"],["Alkynyl","AYL"],["Alkynyl or H","AYH"],["Alkyl","ALK"],["Alkyl or H","ALH"],["Alkenyl","AEL"],["Alkenyl or H","AEH"]],Ih:[["Heteroacyclic","AHC"],["Heteroacylic or H","AHH"],["Alkoxy","AOX"],["Alkoxy or H","AOH"]],vh:[["Cyclic","CYC"],["Cyclic or H","CYH"]],hh:[["Carbocyclic","CBC"],["Carbocyclic or H","CBH"],["Aryl","ARY"],["Aryl or H","ARH"],["Cycloalkyl","CAL"],["Cycloalkyl or H","CAH"],["Cycloalkenyl","CEL"],["Cycloalkenyl or H","CEH"]],Jh:[["Heterocyclic","CHC"],["Heterocyclic or H","CHH"],["Heteroaryl","HAR"],["Heteroaryl or H","HAH"]],Vh:[["Cyclic group with no carbon atoms","CXX"],["CXX or H","CXH"]]},E$Ni=[0,1,4,7,9,11,12,14,16,19,20,23,24,27,28,31,32,35,40,39,40,45,48,51,52,55,56,59,58,63,64,69,74,75,80,79,84,85,88,89,90,93,98,98,102,103,106,107,114,115,120,121,130,127,132,133,138,139,140,141,142,142,152,153,158,159,164,165,166,169,174,175,180,181,184,187,192,193,195,197,202,205,208,209,209,209,209,209,209,209,232,231,238,238,238,238,238,238,238,238,238,238,238,238],E$qj=[[],[[1,1.00782503207],[2,2.0141017778],[3,3.0160492777]],[[3,3.0160293191],[4,4.00260325415]],[[6,6.015122795],[7,7.01600455]],[[9,9.0121822]],[[10,10.012937],[11,11.0093054]],[[12,12],[13,13.0033548378],[14,14.003241989]],[[14,14.0030740048],[15,15.0001088982]],[[16,15.99491461956],[17,16.9991317],[18,17.999161]],[[19,18.99840322]],[[20,19.9924401754],[21,20.99384668],[22,21.991385114]],[[23,22.9897692809]],[[24,23.9850417],[25,24.98583692],[26,25.982592929]],[[27,26.98153863]],[[28,27.9769265325],[29,28.9764947],[30,29.97377017]],[[31,30.97376163]],[[32,31.972071],[33,32.97145876],[34,33.9678669],[36,35.96708076]],[[35,34.96885268],[37,36.96590259]],[[36,35.967545106],[38,37.9627324],[40,39.9623831225]],[[39,38.96370668],[40,39.96399848],[41,40.96182576]],[[40,39.96259098],[42,41.95861801],[43,42.9587666],[44,43.9554818],[46,45.9536926],[48,47.952534]],[[45,44.9559119]],[[46,45.9526316],[47,46.9517631],[48,47.9479463],[49,48.94787],[50,49.9447912]],[[50,49.9471585],[51,50.9439595]],[[50,49.9460442],[52,51.9405075],[53,52.9406494],[54,53.9388804]],[[55,54.9380451]],[[54,53.9396105],[56,55.9349375],[57,56.935394],[58,57.9332756]],[[59,58.933195]],[[58,57.9353429],[60,59.9307864],[61,60.931056],[62,61.9283451],[64,63.927966]],[[63,62.9295975],[65,64.9277895]],[[64,63.9291422],[66,65.9260334],[67,66.9271273],[68,67.9248442],[70,69.9253193]],[[69,68.9255736],[71,70.9247013]],[[70,69.9242474],[72,71.9220758],[73,72.9234589],[74,73.9211778],[76,75.9214026]],[[75,74.9215965]],[[74,73.9224764],[76,75.9192136],[77,76.919914],[78,77.9173091],[80,79.9165213],[82,81.9166994]],[[79,78.9183371],[81,80.9162906]],[[78,77.9203648],[80,79.916379],[82,81.9134836],[83,82.914136],[84,83.911507],[86,85.91061073]],[[85,84.911789738],[87,86.909180527]],[[84,83.913425],[86,85.9092602],[87,86.9088771],[88,87.9056121]],[[89,88.9058483]],[[90,89.9047044],[91,90.9056458],[92,91.9050408],[94,93.9063152],[96,95.9082734]],[[93,92.9063781]],[[92,91.906811],[94,93.9050883],[95,94.9058421],[96,95.9046795],[97,96.9060215],[98,97.9054082],[100,99.907477]],[[97,96.906365],[98,97.907216],[99,98.9062547]],[[96,95.907598],[98,97.905287],[99,98.9059393],[100,99.9042195],[101,100.9055821],[102,101.9043493],[104,103.905433]],[[103,102.905504]],[[102,101.905609],[104,103.904036],[105,104.905085],[106,105.903486],[108,107.903892],[110,109.905153]],[[107,106.905097],[109,108.904752]],[[106,105.906459],[108,107.904184],[110,109.9030021],[111,110.9041781],[112,111.9027578],[113,112.9044017],[114,113.9033585],[116,115.904756]],[[113,112.904058],[115,114.903878]],[[112,111.904818],[114,113.902779],[115,114.903342],[116,115.901741],[117,116.902952],[118,117.901603],[119,118.903308],[120,119.9021947],[122,121.903439],[124,123.9052739]],[[121,120.9038157],[123,122.904214]],[[120,119.90402],[122,121.9030439],[123,122.90427],[124,123.9028179],[125,124.9044307],[126,125.9033117],[128,127.9044631],[130,129.9062244]],[[127,126.904473]],[[124,123.905893],[126,125.904274],[128,127.9035313],[129,128.9047794],[130,129.903508],[131,130.9050824],[132,131.9041535],[134,133.9053945],[136,135.907219]],[[133,132.905451933]],[[130,129.9063208],[132,131.9050613],[134,133.9045084],[135,134.9056886],[136,135.9045759],[137,136.9058274],[138,137.9052472]],[[138,137.907112],[139,138.9063533]],[[136,135.907172],[138,137.905991],[140,139.9054387],[142,141.909244]],[[141,140.9076528]],[[142,141.9077233],[143,142.9098143],[144,143.9100873],[145,144.9125736],[146,145.9131169],[148,147.916893],[150,149.920891]],[[145,144.912749],[147,146.9151385]],[[144,143.911999],[147,146.9148979],[148,147.9148227],[149,148.9171847],[150,149.9172755],[152,151.9197324],[154,153.9222093]],[[151,150.9198502],[153,152.9212303]],[[152,151.919791],[154,153.9208656],[155,154.922622],[156,155.9221227],[157,156.9239601],[158,157.9241039],[160,159.9270541]],[[159,158.9253468]],[[156,155.924283],[158,157.924409],[160,159.9251975],[161,160.9269334],[162,161.9267984],[163,162.9287312],[164,163.9291748]],[[165,164.9303221]],[[162,161.928778],[164,163.9292],[166,165.9302931],[167,166.9320482],[168,167.9323702],[170,169.9354643]],[[169,168.9342133]],[[168,167.933897],[170,169.9347618],[171,170.9363258],[172,171.9363815],[173,172.9382108],[174,173.9388621],[176,175.9425717]],[[175,174.9407718],[176,175.9426863]],[[174,173.940046],[176,175.9414086],[177,176.9432207],[178,177.9436988],[179,178.9458161],[180,179.94655]],[[180,179.9474648],[181,180.9479958]],[[180,179.946704],[182,181.9482042],[183,182.950223],[184,183.9509312],[186,185.9543641]],[[185,184.952955],[187,186.9557531]],[[184,183.9524891],[186,185.9538382],[187,186.9557505],[188,187.9558382],[189,188.9581475],[190,189.958447],[192,191.9614807]],[[191,190.960594],[193,192.9629264]],[[190,189.959932],[192,191.961038],[194,193.9626803],[195,194.9647911],[196,195.9649515],[198,197.967893]],[[197,196.9665687]],[[196,195.965833],[198,197.966769],[199,198.9682799],[200,199.968326],[201,200.9703023],[202,201.970643],[204,203.9734939]],[[203,202.9723442],[205,204.9744275]],[[204,203.9730436],[206,205.9744653],[207,206.9758969],[208,207.9766521]],[[209,208.9803987]],[[209,208.9824304],[210,209.9828737]],[[210,209.987148],[211,210.9874963]],[[211,210.990601],[220,220.011394],[222,222.0175777]],[[223,223.0197359]],[[223,223.0185022],[224,224.0202118],[226,226.0254098],[228,228.0310703]],[[227,227.0277521]],[[230,230.0331338],[232,232.0380553]],[[231,231.035884]],[[233,233.0396352],[234,234.0409521],[235,235.0439299],[236,236.045568],[238,238.0507882]],[[236,236.04657],[237,237.0481734]],[[238,238.0495599],[239,239.0521634],[240,240.0538135],[241,241.0568515],[242,242.0587426],[244,244.064204]],[[241,241.0568291],[243,243.0613811]],[[243,243.0613891],[244,244.0627526],[245,245.0654912],[246,246.0672237],[247,247.070354],[248,248.072349]],[[247,247.070307],[249,249.0749867]],[[249,249.0748535],[250,250.0764061],[251,251.079587],[252,252.081626]],[[252,252.08298]],[[257,257.095105]],[[258,258.098431],[260,260.10365]],[[259,259.10103]],[[262,262.10963]],[[265,265.1167]],[[268,268.12545]],[[271,271.13347]],[[272,272.13803]],[[270,270.13465]],[[276,276.15116]],[[281,281.16206]],[[280,280.16447]],[[285,285.17411]],[[284,284.17808]],[[289,289.18728]],[[288,288.19249]],[[293,293]],[[292,292.20755]],[[294,294]]];function E$dl(v){for(var u=[],t=0,s=v.kb.length;t<s-1;t++){for(var r=v.kb[t],q=t+1;q<s;q++){for(var p=v.kb[q],o=0,n=0;n<r.size;n++){E$ui(p.g,r.g[n])!=-1&&o++}o>1&&(r.size<p.size?E$ui(u,r)==-1&&u.push(r):E$ui(u,p)==-1&&u.push(p))}}return u}function E$el(y,x,w,v){if(!x.kb||!w.kb){return E$q}if(!(x.j==w.j||x.j==w.k)){if(!(x.k==w.j||x.k==w.k)){return E$q}}for(var u=99,s=E$s,r=0,q=x.kb.length;r<q;r++){for(var p=0,o=w.kb.length;p<o;p++){if(x.kb[r]==w.kb[p]){var z=y.kb[x.kb[r]];if(E$ui(v,z)!=-1){u==99&&(s=E$p)}else{if(z.size<u){s=E$s;u=z.size}}}}}return s?99:u<99?Math.PI-2*Math.PI/u:E$q}E$D.prototype.Se=function(){this.e.Se(400,200);E$N(this,E$p)};E$Ha.prototype.Se=function(v,u){E$Gh(this);E$Uj(this);for(var t=E$fl(this),s=0;s<v;s++){for(var r=0,q=0;q<this.g.length;q++){var p=this.g[q],o=E$Mb(p.j.b,p.k.b)-1;if(Math.abs(o)>0.001){var r=r+Math.abs(o),n=E$W(p.j.b,p.k.b);n.K();if(p.j.g.length==1){n.scale(o);p.j.b.x=p.j.b.x+n.x;p.j.b.y=p.j.b.y+n.y}else{if(p.k.g.length==1){n.scale(o)}else{n.scale(o/2);p.j.b.x=p.j.b.x+n.x;p.j.b.y=p.j.b.y+n.y}p.k.b.x=p.k.b.x-n.x;p.k.b.y=p.k.b.y-n.y}}}for(q=0;q<t.length;q++){p=t[q];if(p[2]>0){o=E$Mb(p[0].b,p[1].b)-p[2];if(Math.abs(o)>0.001){r=r+Math.abs(o);n=E$W(p[0].b,p[1].b);n.K();if(p[0].g.length==1){n.scale(o);p[0].b.x=p[0].b.x+n.x;p[0].b.y=p[0].b.y+n.y}else{if(p[1].g.length==1){n.scale(o)}else{n.scale(o/2);p[0].b.x=p[0].b.x+n.x;p[0].b.y=p[0].b.y+n.y}p[1].b.x=p[1].b.x-n.x;p[1].b.y=p[1].b.y-n.y}}}}if(r<0.001){break}}t||(t=E$fl(this));s=E$gl(this,t);for(r=0;s>0.001;){for(q=0;q<this.f.length;q++){o=this.f[q];o.b.x=o.b.x+0.01*o.b.Yc;o.b.y=o.b.y+0.01*o.b.Zc}r++;if(r>u){break}q=E$gl(this,t);if(s-q<0.00001){break}s=q}};function E$fl(O){for(var N=[],M=E$dl(O),L=[],K=0,J=O.f.length;K<J;K++){var G=O.f[K];if(G.g.length>3){for(var E=L.length=0,D=G.g.length;E<D;E++){var C=G.g[E];E$R(C,G).g.length==1&&L.push(C)}}for(var z=C=0,y=0,D=G.g.length,s=0;s<D;s++){for(var q=G.g[s],E=s+1;E<D;E++){var B=G.g[E];if(q!=B){var v=E$el(O,q,B,M);if(v!=E$q&&v!=99){C=C+v;z++}else{v==99&&y++}}}}if(!(z==D&&Math.abs(C-Math.PI*2)>0.1)){for(s=0;s<D;s++){var q=G.g[s],r;if(D>3){r=[];for(E=0;E<D;E++){B=G.g[E];if(s!=E){var p=E$Mf(E$R(q,G).b,G.b),o=E$Mf(E$R(B,G).b,G.b),v=E$Lh(p,o)/(p.length()*o.length()),p=E$Mh(p,o),o={};o.Cf=v;o.eg=p;o.S=B;r.push(o)}}r.sort(function(g,f){return f.Cf-g.Cf});r[0].eg.oa>0?r[1].eg.oa>0&&(r[1]=r[2]):r[1].eg.oa<0&&(r[1]=r[2]);r.length=2}for(E=s+1;E<D;E++){B=G.g[E];v=E$el(O,q,B,M);if(v==99){if(z==0){p=[];p[0]=E$R(q,G);p[1]=E$R(B,G);p[2]=-1;p[3]=G;p[4]=2*Math.PI/3;N.push(p)}}else{if(v==E$q){v=2*Math.PI/3;if(q.l==2&&B.l==2||q.l==3||B.l==3){v=Math.PI}else{if(D>3){if(L.length==3&&z==0){v=E$ui(L,q)!=-1&&E$ui(L,B)!=-1?B!=r[0].S&&B!=r[1].S?2*Math.PI/3:Math.PI/3:B!=r[0].S&&B!=r[1].S?Math.PI:2*Math.PI/3}else{if(L.length==2&&z==0){if(E$ui(L,q)==-1&&E$ui(L,B)==-1){v=2*Math.PI/3}else{if(E$ui(L,q)!=-1&&E$ui(L,B)!=-1){v=4*Math.PI/9}else{v=4*Math.PI/9;B!=r[0].S&&B!=r[1].S&&(v=v*2)}}}else{if(L.length==1&&z==0){v=E$ui(L,q)!=-1||E$ui(L,B)!=-1?B!=r[0].S&&B!=r[1].S?Math.PI:Math.PI/3:2*Math.PI/3}else{if(B!=r[0].S&&B!=r[1].S){continue}v=(2*Math.PI-C)/(D-z-y)}}}}else{v=(2*Math.PI-C)/(3-z)}}}p=[];p[0]=E$R(q,G);p[1]=E$R(B,G);p[2]=Math.sqrt(2-2*Math.cos(v));p[3]=G;p[4]=v;N.push(p)}}}}}return N}function E$gl(z,y){for(var x=0,w=0,v=0;v<z.f.length;v++){var s=z.f[v];s.b.Yc=0;s.b.Zc=0}for(v=0;v<z.g.length;v++){var s=z.g[v],r=E$Mb(s.j.b,s.k.b)-1;if(Math.abs(r)>0.000001){var q=E$W(s.j.b,s.k.b),x=x+r*r;de=2*r;q.K();s.j.b.Yc=s.j.b.Yc+q.x*de;s.j.b.Zc=s.j.b.Zc+q.y*de;s.k.b.Yc=s.k.b.Yc-q.x*de;s.k.b.Zc=s.k.b.Zc-q.y*de}}for(v=0;v<y.length;v++){var s=y[v],p=E$Mf(s[0].b,s[3].b),q=E$Mf(s[1].b,s[3].b),r=Math.acos(E$Lh(p,q)/(p.length()*q.length()))-s[4];if(Math.abs(r)>1e-7){var o=E$Mh(q,p),B=1;s[2]<0&&(B=0.2);w=w+B*r*r;de=2*B*r;var r=o.length(),B=de/(E$Uk(p)*r),A=-de/(E$Uk(q)*r),r=B*p.y*o.oa,p=-B*p.x*o.oa,B=A*q.y*o.oa,q=-A*q.x*o.oa,o=-r-B,A=-p-q;s[0].b.Yc=s[0].b.Yc+r;s[0].b.Zc=s[0].b.Zc+p;s[1].b.Yc=s[1].b.Yc+B;s[1].b.Zc=s[1].b.Zc+q;s[3].b.Yc=s[3].b.Yc+o;s[3].b.Zc=s[3].b.Zc+A}}return x+w}(function(e){parseInt=function(){return e.apply(window,arguments)||0}})(parseInt);function E$ce(n){for(var m=0;m<n.g.length;m++){delete n.g[m].Jg}for(var l=0;l<n.f.length;l++){var k=n.f[l];if(k.na){if(k.g.length>2){alert("Error: R groups with > 2 attachments are not supported");k.na=E$s;break}if(k.g.length>1){for(m=0;m<n.g.length;m++){var i=n.g[m];if(i==k.g[0]){k.g[1].Jg=E$p;break}if(i==k.g[1]){k.g[0].Jg=E$p;break}}}}}}function E$hl(x,w,v){for(var u=0;u<x.length;u++){var t=x[u];t.na.Fe=t.checked?1:0}for(var x=/[^0-9><-]/,s=/[^0-9]/,u=0;u<w.length;u++){t=w[u];t.value=t.value.replace(/\s+/g,"");for(var r=t.value.split(","),q=0;q<r.length;q++){var p=r[q];if(p.match(x)){alert("Occurence can only contain 0-9, >, < and - characters");return E$s}if(p.indexOf("-")!=-1){var o=p.split("-");o.length!=2&&alert("Error in range. Begin or end not specified");if(o[0].match(s)){alert("Error in range. Expected number before -");return E$s}if(o[1].match(s)){alert("Error in range. Expected number after -");return E$s}}o=p.indexOf(">");if(o!=-1){if(o!=0){alert("Error. Did not expect anything before >");return E$s}o=p.substring(1);if(o.match(s)){alert("Error. Expected number after >");return E$s}}o=p.indexOf("<");if(o!=-1){if(o!=0){alert(" Did not expect anything before <");return E$s}o=p.substring(1);if(o.match(s)){alert("Error. Expected number after <");return E$s}}}t.na.Be=t.value}for(u=0;u<v.length;u++){t=v[u];for(q=t.na.Kd=0;q<t.options.length;q++){if(t.options[q].selected){t.na.Kd=t.options[q].value}}}return E$p}E$Ha.prototype.Jc=function(n,m){E$Ki(this);for(var l=0,k=this.f.length;l<k;l++){var i=this.f[l];if(m>0&&n.Fg==i.Fg&&i.Pa==m){i.Pa=0}}n.Pa=m};function E$rf(l){for(var k=0,i=l.f.length;k<i;k++){var h=l.f[k];if(h.tc){return h.tc}}return E$s}function E$Xi(p){for(var o=[],n=E$s,m=0,l=p.f.length;m<l;m++){var k=p.f[m];if(k.tc){n=E$p;o[k.tc]=k.tc}}if(n){if(p.Ta){n=p.Ta;p.Ta=[];for(m=0;m<o.length;m++){if(o[m]){l=E$s;for(k=0;k<n.length;k++){if(n[k].id==m){p.Ta.push(n[k]);l=E$p;break}}if(!l){l=new E$Oi(m);p.Ta.push(l)}}}}else{p.Ta=[];for(m=0;m<o.length;m++){if(o[m]){l=new E$Oi(m);p.Ta.push(l)}}}}else{p.Ta=E$q}return p.Ta}function E$Oi(e){this.id=e;this.label="R"+e;this.Be=">0";this.Kd=this.Fe=0}function E$il(){var z=E$B.a;E$Xi(z.e);if(z.e.Ta){var y=z.da(z.z,"","");E$Sc(y,10,10,10,10);y.style.fontFamily=z.z.style.fontFamily;y.style.border="1px solid #aaa";var x=document.createElement("table");x.style.margin="8px 5px";tbody=document.createElement("tbody");x.appendChild(tbody);var w=z.e.Ta[o],v=document.createElement("tr");tbody.appendChild(v);var s=document.createElement("td");v.appendChild(s);s.style.fontSize="11px";s.innerHTML="R group ";s=document.createElement("td");v.appendChild(s);s.style.fontSize="11px";s.innerHTML=" Occurence range";s=document.createElement("td");v.appendChild(s);s.style.fontSize="11px";s.innerHTML=" Rest H ";s=document.createElement("td");v.appendChild(s);s.style.fontSize="11px";s.innerHTML=" If R.. then R..";for(var r=[],q=[],p=[],o=0;o<z.e.Ta.length;o++){w=z.e.Ta[o];v=document.createElement("tr");tbody.appendChild(v);s=document.createElement("td");s.style.padding="0px";v.appendChild(s);s.style.fontSize="11px";s.innerHTML=w.label;s=document.createElement("td");s.style.padding="0px";v.appendChild(s);var B=document.createElement("input");B.setAttribute("value",w.Be);B.setAttribute("type","text");B.setAttribute("size","8");B.style.fontSize="11px";B.na=w;q.push(B);s.appendChild(B);s=document.createElement("td");s.style.padding="0px";v.appendChild(s);B=document.createElement("input");B.setAttribute("type","checkbox");B.setAttribute("value",1);B.na=w;w.Fe&&B.setAttribute("checked",E$p);r.push(B);s.appendChild(B);s=document.createElement("td");v.appendChild(s);v=document.createElement("select");v.style.fontSize="12px";v.na=w;p.push(v);s.appendChild(v);s=document.createElement("option");s.setAttribute("value",0);s.appendChild(document.createTextNode("none"));v.appendChild(s);if(!w.Kd){s.selected=E$p}for(B=0;B<z.e.Ta.length;B++){if(B!=o){var s=document.createElement("option"),A=z.e.Ta[B];s.setAttribute("value",A.id);s.appendChild(document.createTextNode("If "+w.label+" then "+A.label));v.appendChild(s);if(w.Kd==A.id){s.selected=E$p}}}}w=document.createElement("div");w.align="center";w.style.marginTop="10px";o=document.createElement("input");o.setAttribute("type","button");o.value="OK";o.style.fontSize="12px";w.appendChild(o);o.a=z;o.zg=z.z;o.z=y;o.Lj=r;o.Ej=q;o.rj=p;o.onclick=function(){E$hl(this.Lj,this.Ej,this.rj)&&this.zg.removeChild(this.z)};o=document.createElement("input");o.setAttribute("type","button");o.value="Cancel";o.style.fontSize="12px";w.appendChild(o);o.a=z;o.zg=z.z;o.z=y;o.onclick=function(){this.zg.removeChild(this.z)};y.appendChild(x);y.appendChild(w);y.style.zIndex=10;y.style.fontSize="13px";B=100+20*z.e.Ta.length;E$E(y,30,30,350,B);y.style.background=z.Wa}else{alert("No rgroups defined")}}E$Fh.prototype.fc=function(i){if(!this.ja){this.ja=[]}var h=new E$Fh;h.A="*";if(i==2){h.A='*"'}h.Gf=-1;h.ah=E$p;var g=new E$Oh;g.j=this;g.k=h;g.l=1;g.type=1;g.o=0;h.g.push(g);this.ja[i]=g};E$B.yh=function(v){var u=E$B.a;if(E$Vd(u.e)){var t=E$Xc(u.e);E$sf(u.e);for(var s=[],r=0;r<t.length;r++){for(var q=E$s,p=s.length-1;p>=0;p--){if(s[p]==t[r].Sc){q=E$p;break}}if(!q){s.push(t[r].Sc);for(var q=E$Re(u.e,t[r]),p=E$eb,o=0,n=q.length;o<n;o++){q[o].tc=v;if(p&&!q[o].Xb()&&E$Ue(q[o])>0){p=0;q[o].ja==E$q&&q[o].fc(1)}}}}E$kc(u.e);E$N(u,E$p)}};E$B.Wj=function(){E$il()};E$B.fc=function(n){var m=E$B.srcElement;if(m.s){m.a.save();for(var l=E$Re(editor.e,m.s),k=0,i=l.length;k<i;k++){l[k].ja&&l[k].ja[n]&&(l[k].ja[n]=E$s)}m.s.fc(n);E$N(m.a,E$p)}};E$B.bi=function(l){var k=E$B.srcElement;if(k.s){k.a.save();k.s.ja&&(k.s.ja[l]=E$s);if(l==1){for(var l=E$Re(editor.e,k.s),i=0,h=l.length;i<h;i++){if(l[i].ja&&l[i].ja[2]){l[i].ja[2]=E$s;l[i].fc(1)}}}E$N(k.a,E$p)}};function E$Yi(r,q){var p="";if(q==E$q){q=r.Vc;q==E$q&&(q=1);q=1.54/q}E$vc(r);E$Ki(r);for(var o=r.Ic.length,p="$RXN V3000\nRXNHeader1\nRXNHeader2\nRXNHeader3\n"+("M  V30 COUNTS "+o+" "+r.Hc.length+"\n"),p=p+"M  V30 BEGIN REACTANT\n",n=E$Hi(r),m=0;m<r.Ic.length;m++){var l=n[m];if(E$aj(l)){l=l.copy();E$bj(l)}p=p+E$$i(l,q)}p=p+"M  V30 END REACTANT\nM  V30 BEGIN PRODUCT\n";for(m=0;m<r.Hc.length;m++){l=n[o+m];if(E$aj(l)){l=l.copy();E$bj(l)}p=p+E$$i(l,q)}return p+"M  V30 END PRODUCT\n"}function E$jl(i){for(var h="";i.length>0;){if(i.length<74){h=h+("M  V30 "+i+"\n");i=""}else{var g=i.lastIndexOf(" ",71),h=h+("M  V30 "+i.substring(0,g+1)+"-\n"),i=i.substring(g+1)}}return h}function E$$i(x,w){for(var v,u=0,t=0,s=x.f.length;t<s;t++){var r=x.f[t];r.vb&&u++}v="M  V30 BEGIN CTAB\nM  V30 COUNTS "+x.f.length;v=v+(" "+x.g.length);v=v+(" "+(x.r.length+u));v=v+(" 0 "+x.jb);v=v+"\nM  V30 BEGIN ATOM\n";t=0;for(s=x.f.length;t<s;t++){var r=x.f[t],q=r.id+1+" ";if(r.na>0){q=q+"R#"}else{if(r.U.length>0){r.nc&&(q=q+'"NOT ');for(var q=q+"[",p=0;p<r.U.length;p++){p>0&&(q=q+",");q=q+E$Uc[r.U[p]][2]}q=q+"]";r.nc&&(q=q+'"')}else{q=q+r.A}}q=q+(" "+(r.b.x*w).toFixed(4));q=q+(" "+(r.b.y*w).toFixed(4));q=q+(" "+(r.b.oa*w).toFixed(4));q=r.Pa?q+(" "+r.Pa):q+" 0";r.Na!=0&&(q=q+(" CHG="+r.Na));r.nb!=0&&(q=q+(" RAD="+r.nb));r.Cb!=0&&(q=q+(" VAL="+r.Cb));r.$a!=0&&(q=q+(" MASS="+r.$a));r.Oa!=E$q&&(q=r.Oa==0?q+" HCOUNT=-1":q+(" HCOUNT="+r.Oa));if(r.lb!=E$q){q=q+" SUBST=";q=r.lb==0?q+"-1":r.lb=="*"?q+"-2":q+r.lb}r.Tc==1&&(q=q+" UNSAT=1");if(r.ob!=E$q){q=q+" RBCNT=";q=r.ob==0?q+"-1":r.ob=="*"?q+"-2":q+r.ob}r.bc&&(q=q+(" INVRET="+r.bc));r.hd&&(q=q+(" EXACHG="+r.hd));if(r.ja){for(var o=0,p=0;p<r.ja.length;p++){r.ja[p]&&(o=o+p)}q=o==3?q+" ATTCHPT=-1":q+(" ATTCHPT="+o)}r.na>0&&(q=q+(" RGROUPS=(1 "+r.na+")"));v=v+E$jl(q)}v=v+"M  V30 END ATOM\nM  V30 BEGIN BOND\n";t=0;for(s=x.g.length;t<s;t++){p=x.g[t];q=""+(t+1);q=q+(" "+p.type+" "+(p.j.id+1)+" "+(p.k.id+1));if(p.o){p.o==E$O&&(q=q+" CFG=1");p.o==E$kd&&(q=q+" CFG=2");p.o==E$ld&&(q=q+" CFG=3");p.o==E$jd&&(q=q+" CFG=2")}p.xb!=E$q&&(q=p.xb?q+" TOPO=1":q+" TOPO=2");p.Sa&&(q=q+(" RXCTR="+p.Sa));p.Ib&&(q=q+(" STBOX="+p.Ib));v=v+E$jl(q)}v=v+"M  V30 END BOND\n";if(u>0||x.r.length>0){u=0;v=v+"M  V30 BEGIN SGROUP\n";for(t=0;t<x.r.length;t++){s=x.r[t];if(s.id>u){u=s.id}q=s.id+" "+s.type+" 0";s.pd!=E$o&&(q=q+(" SUBTYPE="+s.pd));if(s.f.length>0){q=q+(" ATOMS=("+s.f.length);for(p=0;p<s.f.length;p++){q=q+(" "+(s.f[p].id+1))}q=q+")"}if(s.g.length>0){q=s.type=="DAT"?q+" C":q+" X";q=q+("BONDS=("+s.g.length);for(p=0;p<s.g.length;p++){q=q+(" "+(s.g[p].id+1))}q=q+")"}if(s.Ya.length>0){q=q+(" PATOMS=("+s.Ya.length);for(p=0;p<s.Ya.length;p++){q=q+(" "+(s.Ya[p].id+1))}q=q+")"}if(s.label){if(s.type=="MUL"){q=q+(" MULT="+s.label)}else{if(s.type=="DAT"){r=s.label.split("\n");for(p=0;p<r.length;p++){q=r[p].indexOf(" ")==-1?q+(" FIELDDATA="+r[p]):q+(' FIELDDATA="'+r[p]+'"')}}else{q=q+(" LABEL="+s.label)}}}s.type=="SUP"&&s.$b&&(q=q+" ESTATE=E");s.Va&&(q=q+(" CONNECT="+s.Va));if(s.coords.length>0){if(s.type=="DAT"){q=q+(' FIELDDISP="'+E$wj(s,w)+'"')}else{if(s.type!="SUP"){for(p=0;p<s.coords.length-1;p=p+2){q=q+" BRKXYZ=(9 ";q=q+((s.coords[p].x*w).toFixed(4)+" ");q=q+((s.coords[p].y*w).toFixed(4)+" 0 ");q=q+((s.coords[p+1].x*w).toFixed(4)+" ");q=q+((s.coords[p+1].y*w).toFixed(4)+" 0 0 0 0)")}}}}if(s.$c!=E$o&&s.g&&s.g.left&&s.g.right&&s.g.left.length==s.g.right.length){q=q+(" XBHEAD=("+s.g.left.length);for(p=0;p<s.g.left.length;p++){q=q+(" "+(s.g.left[p].id+1))}q=q+")";q=q+(" XBCORR=("+s.g.left.length*2);for(p=0;p<s.g.left.length;p++){q=q+(" "+(s.g.left[p].id+1)+" "+(s.g.right[p].id+1))}q=q+")"}v=v+E$jl(q)}t=0;for(s=x.f.length;t<s;t++){r=x.f[t];if(r.vb){p=u+t+1;q=p+" SUP "+p;q=q+(" ATOMS=(1 "+(r.id+1)+")");q=q+(' LABEL="'+r.vb+'"');v=v+E$jl(q)}}v=v+"M  V30 END SGROUP\n"}q=E$s;r=[];t=0;for(s=x.f.length;t<s;t++){x.f[t].pb==E$jg&&r.push(x.f[t].id+1)}if(r.length>0){if(!q){v=v+"M  V30 BEGIN COLLECTION\n";q=E$p}v=v+("M  V30 MDLV30/STEABS ATOMS=("+r.length);for(t=0;t<r.length;t++){v=v+(" "+r[t])}v=v+")\n"}u=[];t=0;for(s=x.f.length;t<s;t++){if(x.f[t].pb==E$kg){u[x.f[t].Mb]=x.f[t].Mb}}for(p=0;p<u.length;p++){if(u[p]){o=u[p];t=r.length=0;for(s=x.f.length;t<s;t++){x.f[t].pb==E$kg&&x.f[t].Mb==o&&r.push(x.f[t].id+1)}if(r.length>0){if(!q){v=v+"M  V30 BEGIN COLLECTION\n";q=E$p}v=v+("M  V30 MDLV30/STEREL"+o+" ATOMS=("+r.length);for(t=0;t<r.length;t++){v=v+(" "+r[t])}v=v+")\n"}}}u=[];t=0;for(s=x.f.length;t<s;t++){if(x.f[t].pb==E$lg){u[x.f[t].Mb]=x.f[t].Mb}}for(p=0;p<u.length;p++){if(u[p]){o=u[p];t=r.length=0;for(s=x.f.length;t<s;t++){x.f[t].pb==E$lg&&x.f[t].Mb==o&&r.push(x.f[t].id+1)}if(r.length>0){if(!q){v=v+"M  V30 BEGIN COLLECTION\n";q=E$p}v=v+("M  V30 MDLV30/STERAC"+o+" ATOMS=("+r.length);for(t=0;t<r.length;t++){v=v+(" "+r[t])}v=v+")\n"}}}q&&(v=v+"M  V30 END COLLECTION\n");return v+"M  V30 END CTAB\n"}function E$Mi(z,y){var x=E$p,w=[];w.push(y);for(var v=[],s=0,r=0,q;x;){r=z.indexOf("M  V30 BEGIN RGROUP",s);if(r==-1){x=E$s}else{var p=z.substr(r,z.indexOf("M  V30 BEGIN CTAB",r)-r).split("\n"),s=p[0].split(/\s+/);q=parseInt(s[4]);if(p[1].indexOf("M  V30 RLOGIC")!=-1){for(var s=p[1].split(/\s+/),p=parseInt(s[3]),o=parseInt(s[4]),B="",A=5;A<s.length;A++){B=B+s[A]}B=B.replace('^"|"$',"").trim();s=new E$Oi(q);s.Be=B;s.Fe=o;s.Kd=p;v.push(s)}s=z.indexOf("M  V30 END RGROUP",r);if(s==-1){x=E$s}else{r=z.substr(r,s-r);p=E$p;for(o=0;p;){molStart=r.indexOf("M  V30 BEGIN CTAB",o);o=r.indexOf("M  V30 END CTAB",molStart);if(molStart==-1||o==-1){p=E$s}else{B=E$Li(r.substr(molStart,o-molStart),E$p);B.Rd(q);w.push(B)}}}}}x=new E$Ha;x.name=name;for(q=0;q<w.length;q++){E$wc(x,w[q])}x.Ta=v;y&&E$th(y,x);E$xc(x);return x}function E$Sc(n,m,l,k,i){n.style.borderTopLeftRadius=m+"px";n.style.borderTopRightRadius=l+"px";n.style.borderBottomRightRadius=k+"px";n.style.borderBottomLeftRadius=i+"px"}function E$Jd(e){e.style.visibility="hidden"}function E$Pc(g,f){if((f||!g.i.buttonPanelDraggable)&&g.Eb){g.Eb.style.display="none"}}function E$kl(x,w,v,u,t,s,r,q,p){var o;o=(q-s)*(v-x)-(r-t)*(u-w);r=(r-t)*(w-s)-(q-s)*(x-t);s=(v-x)*(w-s)-(u-w)*(x-t);if(E$Wb(r)<0.000001&&E$Wb(s)<0.000001&&E$Wb(o)<0.000001){this.x=(x+v)/2;this.y=(w+u)/2;return E$p}if(E$Wb(o)<0.000001){return E$s}t=r/o;o=s/o;return !p&&(t<0||t>1||o<0||o>1)?E$s:new E$Q(x+t*(v-x),w+t*(u-w))}function E$Yk(p,o,n,m,l,k){if(o=E$kl(o,n,m,l,p.x,p.y,k.x,k.y,E$o)){p.x=o.x;p.y=o.y}}function E$Nf(r,q,p,o){var n,m,l;m=q.x-r.x;l=q.y-r.y;n=m*m+l*l;m=2*(m*(r.x-p.x)+l*(r.y-p.y));l=p.x*p.x+p.y*p.y;l=l+(r.x*r.x+r.y*r.y);l=l-2*(p.x*r.x+p.y*r.y);o=m*m-4*n*(l-o*o);if(!(E$Wb(n)<0.000001||o<0)){p=(-m+E$Zb(o))/(2*n);n=(-m-E$Zb(o))/(2*n);o=q.x-r.x;q=q.y-r.y;if(p>0&&p<1){if(n>0&&n<1&&n>p){r.x=r.x+n*o;r.y=r.y+n*q}else{r.x=r.x+p*o;r.y=r.y+p*q}}else{if(n>0&&n<1){r.x=r.x+n*o;r.y=r.y+n*q}}}}function E$wd(p){var p=p?p:event,o=isNaN(parseInt(this.style.top))?0:this.style.top,n=isNaN(parseInt(this.style.left))?0:this.style.left,o=Math.abs(parseInt(o)-p.clientY),n=Math.abs(parseInt(n)-p.clientX),m=this.style.cursor;this.style.cursor="move";var l=document.onmousemove,k=document.onmouseup;document.onmousemove=E$ll(this,o,n);document.onmouseup=E$ml(this,l,k,m);E$Ga(p)}function E$mi(g,f){E$nl(this,g);this.pd=E$q;this.id=f;this.sb=E$q;this.f=[];this.g=[];this.Ya=[];this.coords=[];this.$c=this.Va=this.oe=E$q;this.selected=E$s;this.V=this.label=E$q;this.wh=0;this.$b=E$q}function E$nl(g,f){g.type=f;g.pd=E$o;if(f=="BLO"||f=="ALT"||f=="RAN"){g.pd=f;g.type="COP"}}function E$ol(e){if(e.type=="SRU"){return"n"}if(e.type=="MIX"){return"m"}if(e.type=="FOR"){return"f"}if(e.type=="COM"){return"c"}if(e.type=="COP"){if(e.pd=="BLO"){return"blk"}if(e.pd=="ALT"){return"alt"}if(e.pd=="RAN"){return"ran"}}else{if(e.type=="CRO"){return"xl"}if(e.type=="COP"){return"co"}if(e.type=="GRA"){return"grf"}if(e.type=="ANY"){return"anyp"}if(e.type=="GEN"){return E$q}if(e.type=="MUL"||e.type=="SUP"){return e.label}if(e.type!="DAT"){return e.type.toLowerCase()}}}isPolymer=function(e){return e=="ANY"||e=="COP"||e=="BLK"||e=="RAN"||e=="ALT"||e=="CRO"||e=="GRA"||e=="SRU"?E$p:E$s};E$mi.prototype.Za=function(i){for(var h in i){if(i[h]==E$q||typeof i[h]!="object"){this[h]=i[h]}}h=0;for(var g=i.coords.length;h<g;h++){this.coords.push(new E$Q(i.coords[h].x,i.coords[h].y))}};function E$si(i,h){for(var g=0;g<i.f.length;g++){if(i.f[g]==h){return E$p}}return E$s}function E$pl(e){if(e.$c!=E$o){e.g.left=e.g.left.sort(function(h,g){return E$Ff(g).y-E$Ff(h).y});e.g.right=e.$c?e.g.right.sort(function(h,g){return E$Ff(h).y-E$Ff(g).y}):e.g.right.sort(function(h,g){return E$Ff(g).y-E$Ff(h).y})}}function E$ql(n){if(n.g&&n.g.left&&n.g.right&&n.g.left.length==n.g.right.length&&n.g.left.length>1){var m=E$Ff(n.g.left[0]),l=E$Ff(n.g.left[1]),k=E$Ff(n.g.right[0]),i=E$Ff(n.g.right[1]);n.$c=m.y>l.y&&k.y>i.y?E$s:m.y<l.y&&k.y<i.y?E$s:E$p}else{n.$c=E$o}}function E$Ti(l,k,i){l.g.left=[];l.g.right=[];for(var h=0;h<i.length;h++){k.indexOf(i[h])==-1?l.g.right.push(i[h]):l.g.left.push(i[h])}}function E$vi(i,h){if(i.type=="SUP"){i.$b=h;var g=i.$b?E$Vi(i.f):E$Vi([i.sb]);i.coords=[];i.coords.push(new E$Q(g.$-0.5,g.ra-0.5));i.coords.push(new E$Q(g.$-0.5,g.wa+0.5));i.coords.push(new E$Q(g.I+0.5,g.wa+0.5));i.coords.push(new E$Q(g.I+0.5,g.ra-0.5))}}function E$Sf(e){return e.type=="SUP"&&!e.$b}function E$yh(p,o){for(var n=0;n<p.f.length;n++){var m=p.f[n];m.selected=o;for(var l=0;l<m.g.length;l++){var k=m.g[l];if(E$si(p,k.j)&&E$si(p,k.k)){k.selected=o}}}}function E$Pi(i,h){for(var g=0;g<i.r.length;g++){if(i.r[g].id==h){return i.r[g]}}return E$q}function E$bf(n,m,l){for(var k=0,i=l.r.length;k<i;k++){E$Df(n,l.r[k],m)}}function E$Df(D,C,B,z){var y=D.vf;E$ab&&(y="#000");if(!(D.ac&&C.selected==1)){if(C.type=="DAT"){if(C.coords.length>0&&C.label){var v=C.coords[0].x,s=C.coords[0].y;if(!C.oe){for(var r=0,q=0,z=0;z<C.f.length;z++){r=r+C.f[z].b.x;q=q+C.f[z].b.y}r=r/C.f.length;q=q/C.f.length;v=v+r;s=s+q}r=C.label.split("\n");C.V&&r.length>0&&(r[0]=C.V+" = "+r[0]);for(z=0;z<r.length;z++){s=E$T(D,s)+(z+0.5)*D.Ja;v=E$U(D,v);E$df(B,D,r[z],D.Ja,y,v,s,"left","bottom",E$p)}}else{console.log("No coordinates for DAT sgroup")}}else{if((z||C.type!="SUP")&&C.coords.length>3){r=D.ka/2;r=r<1?1:r;for(z=0;z<2;z++){var q=E$s,v=new E$Q,s=new E$Q,p=new E$Q,H=new E$Q(0.2,0),G=C.coords[2*z],F=C.coords[2*z+1];for(j=0;j<C.g.length;j++){var E=C.g[j].j,o=C.g[j].k;if(E$kl(E.b.x,E.b.y,o.b.x,o.b.y,G.x,G.y,F.x,F.y)){q=1;H=E$Pf(E$W(G,F));H.scale(0.2);s.x=(G.x+F.x)/2;s.y=(G.y+F.y)/2;if(E$si(C,E)){p.x=E.b.x;p.y=E.b.y}else{if(E$si(C,o)){p.x=o.b.x;p.y=o.b.y}else{console.log("Corrupt sgroup. no atom in crossing bond is in sgroup. Sgroup id: "+C.id+" bond:"+(E.id+1)+" "+(o.id+1))}}v.x=p.x-s.x;v.y=p.y-s.y;v.oa=0;E$Lh(v,H)<0&&E$$g(H);break}}if(!q&&z==1){H.x=H.x*-1}E$cf(B,D,G.x,G.y,F.x,F.y,y,r);E$cf(B,D,G.x,G.y,G.x+H.x,G.y+H.y,y,r);E$cf(B,D,F.x,F.y,F.x+H.x,F.y+H.y,y,r);if(z==1){if((G=E$ol(C))||C.Va){E$$g(H);H.K();if(C.coords[z*2].y<=C.coords[z*2+1].y){p.x=C.coords[z*2+1].x-C.coords[z*2].x;p.y=C.coords[z*2+1].y-C.coords[z*2].y}else{p.x=C.coords[z*2].x-C.coords[z*2+1].x;p.y=C.coords[z*2].y-C.coords[z*2+1].y}p.oa=0;p.K()}if(G&&!E$Sf(C)){F=D.Ja/(2*D.Lb*D.zoom);if(C.coords[z*2].y<C.coords[z*2+1].y){v=C.coords[z*2].x;s=C.coords[z*2].y}else{v=C.coords[z*2+1].x;s=C.coords[z*2+1].y}v=v+(0.1+F)*H.x;s=s+(0.1+F)*H.y;!q&&E$Wb(p.x)<0.00001&&(s=s+p.y*F);v=v-F;s=s-F;E$df(B,D,G,D.Ja,y,v,s,"left","bottom")}if(C.Va){F=D.Ja/(2*D.Lb*D.zoom);if(C.coords[z*2].y>=C.coords[z*2+1].y){v=C.coords[z*2].x;s=C.coords[z*2].y}else{v=C.coords[z*2+1].x;s=C.coords[z*2+1].y}v=v+(0.1+F)*H.x;s=s+(0.1+F)*H.y;!q&&E$Wb(p.x)<0.00001&&(s=s-p.y*F);v=v-F;s=s-F;q=C.Va;C.$c&&(q=q+",f");E$df(B,D,q,D.Ja,y,v,s,"left","bottom")}}}}}}}function E$Qi(y){for(var x=0,w=y.r.length;x<w;x++){var v=y.r[x];if(v.type=="MUL"){var u=y,s=v;if(s.type=="MUL"){for(var r=[],q=0;q<s.f.length;q++){E$ui(s.Ya,s.f[q])==-1&&r.push(s.f[q])}q=[];for(j=0;j<s.g.length;j++){var p=-1,o=E$q;if(E$si(s,s.g[j].j)){if(!E$si(s,s.g[j].k)){p=E$ui(r,s.g[j].j);o=s.g[j].k}}else{p=E$ui(r,s.g[j].k);o=s.g[j].j}if(p==-1){q.push(s.g[j])}else{for(var z=0;z<s.Ya.length;z++){if(E$Mb(s.Ya[z].b,r[p].b)<0.0001){p=u.Ga(s.Ya[z],o,s.g[j].l,s.g[j].o);p.Za(s.g[j]);q.push(p);break}}}}s.g=q;for(q=0;q<r.length;q++){E$Uh(u,r[q],E$p)}E$Xh(u);E$Yh(u)}}else{if(v.type=="SUP"){v.g||E$rl(v);E$vi(v,v.$b)}}if(v.g.left&&v.g.left.length==2&&v.g.right&&v.g.right.length==1){if(v.g.length==4){for(u=0;u<v.g.length;u++){v.g.left.indexOf(v.g[u])==-1&&v.g.right.indexOf(v.g[u])==-1&&v.g.right.push(v.g[u])}}else{s=v.coords[0].x<v.coords[2].x?[0,2]:[2,0];for(r=0;r<2;r++){q=s[r];for(u=0;u<v.g.length;u++){E$kl(v.coords[q].x,v.coords[q].y,v.coords[q+1].x,v.coords[q+1].y,v.g[u].j.b.x,v.g[u].j.b.y,v.g[u].k.b.x,v.g[u].k.b.y)&&(r==0?v.g.left.indexOf(v.g[u])==-1&&v.g.left.push(v.g[u]):v.g.right.indexOf(v.g[u])==-1&&v.g.right.push(v.g[u]))}}E$ql(v);E$pl(v)}}v.$c==E$o&&(v.g.left&&v.g.right&&v.g.left.length==v.g.right.length)&&E$ql(v)}}function E$ll(i,h,g){return function(d){d=d?d:event;i.style.top=d.clientY-h+"px";i.style.left=d.clientX-g+"px"}}function E$ml(l,k,i,h){return function(){document.onmousemove=k;document.onmouseup=i;l.style.cursor=h}}function E$xd(g,f){E$ka&&E$qa<9?g.style.styleFloat=f:g.style.cssFloat=f}function E$Kc(e){this.l=e;this.o=0;this.la=this.Ia=E$q;this.Fd=E$s}E$Kc.prototype.init=function(i,h){this.la=h;this.a.save();this.ea=i;this.a.p=new E$Ha;if(this.ea!=E$q){var g=E$ch(this.a.p);g.b.x=this.ea.b.x;g.b.y=this.ea.b.y;this.Fd=E$p}else{this.Fd=E$s}if(this.a.sc==E$o||this.a.sc==E$q){g=this.a.da(this.a.we(),"");g.style.background="transparent";g.style.visibility="hidden";g.style.padding="2px 10px";g.style.fontSize=14*E$B.G+"px";g.style.fontWeight="bold";E$E(g,0,0);g.style.zIndex=15;this.a.sc=g;E$sb(g,this.a.D)}};E$Kc.prototype.onmousedown=function(e){this.init(this.a.q,E$M(this.a,e));E$Ie(this.a)};E$Kc.prototype.onmousemove=function(z){try{var y=E$M(this.a,z);if(this.la!=E$q){if(E$Wb(this.la.x-y.x)>4||E$Wb(this.la.y-y.y)>4){if(this.a.p==E$q){this.a.p=new E$Ha}if(this.ca==E$q){if(this.ea==E$q){this.ea=E$rh(this.a.e,E$Bb(this.a,this.la.x),E$Cb(this.a,this.la.y));var x=E$ch(this.a.p);x.b.x=this.ea.b.x;x.b.y=this.ea.b.y;this.ca=x}this.ca=E$ch(this.a.p);this.ca!=this.a.p.f[0]&&this.a.p.Ga(this.ca,this.a.p.f[0],this.l,this.o)}this.ca.b.x=E$Bb(this.a,y.x);this.ca.b.y=E$Cb(this.a,y.y);var w=E$Xg(this.ea.b,E$Bb(this.a,y.x),E$Cb(this.a,y.y));if(this.a.q!=E$q&&this.a.q!=this.ea&&this.a.q!=this.ca){this.ca.b.x=this.a.q.b.x;this.ca.b.y=this.a.q.b.y}else{if(z&&z.shiftKey){this.ca.b.x=y.ha;this.ca.b.y=y.ia}else{E$zj(this.ea,this.ca)}var v=this.ca.b;this.a.p=new E$Ha;var s=E$ch(this.a.p);s.b.x=this.ea.b.x;s.b.y=this.ea.b.y;if(this.a.Tb&&!this.Fd){s.selected=1}var r=E$ch(this.a.p);r.b.x=v.x;r.b.y=v.y;if(this.a.Tb){r.selected=1}this.ca=r;var q=E$W(s.b,r.b);q.rotate(30);r.b.x=s.b.x+q.x;r.b.y=s.b.y+q.y;this.Ia=this.a.p.Ga(s,r,1,0);for(var p=E$Mb(this.ea.b,this.ca.b),o=Math.floor(w/p),z=r,x=0;x<o;x++){w=-60;x%2==1&&(w=60);q=E$W(s.b,z.b);q.K();q.rotate(w);var B=E$ch(this.a.p);if(this.a.Tb){B.selected=1}B.b.x=z.b.x+q.x;B.b.y=z.b.y+q.y;this.a.p.Ga(z,B,1,0);s=z;z=B}this.a.sc.style.zIndex=15;q=E$W(this.ea.b,new E$Q(E$Bb(this.a,y.x),E$Cb(this.a,y.y)));E$E(this.a.sc,E$T(this.a,z.b.y)+35,E$U(this.a,z.b.x)+35*(q.x>0?1:0.2));y=o+1;this.Fd||y++;this.a.sc.innerHTML=y;this.a.sc.style.visibility="visible"}}E$vh(this.a.e)}E$Ie(this.a)}catch(A){console.log("AddChainEditor EXCEPTION = "+A.uk())}};E$Kc.prototype.onmouseup=function(l){var k=E$M(this.a,l);(this.a.Tb||this.a.Ud)&&E$kc(this.a.e);if(this.ca==E$q){var k=E$M(this.a,l),i=this.a.t;if(i!=E$q){if(this.o==0){if(this.o!=0||this.l>1){i.o=0;i.l=this.l;i.type=this.l}else{i.o=0;i.l=E$Ue(i.j,E$p)>0&&E$Ue(i.k,E$p)>0?i.l+1:1;if(i.l>3){i.l=1}if(i.Xb()&&i.l>2){i.l=1}i.type=i.l}}else{if(this.l==1){E$$d(i,this.o,this.M)}else{i.l=this.l;i.type=this.l;i.o=this.o}}E$vh(this.a.e);this.a.cb=E$p;this.Ia=E$s}else{i=this.a.q;if(i==E$q){l=E$ch(this.a.e);l.b.x=k.ha;l.b.y=k.ia;var i=E$ch(this.a.e),h=30*E$fc/180;i.b.x=k.ha+E$$b(h);i.b.y=k.ia+E$ac(h);this.Ia=this.a.e.Ga(l,i,this.l,this.o);this.a.cb=E$p;this.a.q=l;this.a.Ka=E$p;if(this.a.Tb){l.selected=1;i.selected=1}}else{this.Ia=E$Gi(this.a.e,i,this.l,this.o,l.ctrlKey);if(this.a.Ud){E$R(this.Ia,i).selected=1}this.a.cb=E$p}}}else{E$ph(this.a);this.a.p=E$q;E$zc(this.a);E$N(this.a)}this.a.sc.style.visibility="hidden";this.ea=this.ca=this.la=E$q;this.a.p=E$q;E$zc(this.a);E$Ie(this.a)};function E$Ic(e){this.l=e;this.o=0;this.la=this.Ia=E$q;this.Fd=E$s;this.yb=this.wb=E$q}E$Ic.prototype.init=function(n,m){try{this.la=m;this.yb=this.wb=E$q;this.a.save();this.ea=n;this.a.p=new E$Ha;if(this.ea!=E$q){var l=E$ch(this.a.p);l.b.x=this.ea.b.x;l.b.y=this.ea.b.y;this.wb=l;this.Fd=E$p}else{this.Fd=E$s}if(this.a.sc==E$o||this.a.sc==E$q){var k=this.a.da(this.a.we(),"");k.style.background="transparent";k.style.visibility="hidden";k.style.padding="2px 10px";k.style.fontSize=14*E$B.G+"px";k.style.fontWeight="bold";E$E(k,0,0);k.style.zIndex=15;this.a.sc=k;E$sb(k,this.a.D)}}catch(i){console.log("AddMultiBondEditor EXCEPTION init: "+i.toString())}};E$Ic.prototype.onmousedown=function(e){this.init(this.a.q,E$M(this.a,e));E$Ie(this.a)};E$Ic.prototype.onmousemove=function(P){try{var N=E$M(this.a,P);if(this.la!=E$q){if(E$Wb(this.la.x-N.x)>14||E$Wb(this.la.y-N.y)>14){try{var M=E$Mb(this.la,N),L=new E$Q(E$Bb(this.a,N.x),E$Cb(this.a,N.y)),M=1;this.wb!=E$q&&(M=E$Mb(L,this.wb.b));var K=1.2;if(this.yb!=E$q){var K=E$Mb(L,this.yb.b),J=E$W(this.yb.b,this.wb.b);J.K();E$bc(J.y,J.x);if(K<M&&K<0.5){E$Uh(this.a.p,this.a.p.f[this.a.p.f.length-1]);this.wb=this.yb;if(this.a.p.f.length>=2){this.yb=this.a.p.f[this.a.p.f.length-2];if(this.yb!=E$q){this.la.x=E$U(this.a,this.yb.b.x);this.la.y=E$T(this.a,this.yb.b.y)}}else{this.yb=E$q;this.la.x=E$U(this.a,this.wb.b.x);this.la.y=E$T(this.a,this.wb.b.y)}E$vh(this.a.e);E$Ie(this.a);return}}if(this.ca==E$q&&M>=0.8&&(K>M||K==1.2)){if(this.ea==E$q){this.ea=E$rh(this.a.e,E$Bb(this.a,this.la.x),E$Cb(this.a,this.la.y));var G=E$ch(this.a.p);G.b.x=this.ea.b.x;G.b.y=this.ea.b.y;this.wb=G}this.ca=E$ch(this.a.p);this.ca!=this.a.p.f[0]&&this.a.p.Ga(this.ca,this.wb,this.l,this.o)}else{if(this.ca==E$q){return}this.ca=this.wb;this.wb=this.yb;if(this.yb!=E$q){this.la.x=E$U(this.a,this.yb.b.x);this.la.y=E$T(this.a,this.yb.b.y)}if(this.ca==E$q){E$vh(this.a.e);E$Ie(this.a);return}}}catch(E){var M="",D;for(D in E){M=M+("property: "+D+" value: ["+E[D]+"]")}M=M+(":  value: ["+E.toString()+"]");console.log("AddMultiBondEditor EXCEPTION mousemove TOP::"+M)}this.ca.b.x=E$Bb(this.a,N.x);this.ca.b.y=E$Cb(this.a,N.y);if(P&&P.shiftKey){this.ca.b.x=N.ha;this.ca.b.y=N.ia}else{var C=this.wb,z=this.ca,y=this.yb,P=60;if(C==E$q||z==E$q){console.log("ERROR in snapPositionHard() from="+C+"  to="+z);console.trace()}else{var s=E$W(C.b,z.b),q=E$bc(s.y,s.x);if(y==E$q){y=C}else{var B=E$W(y.b,C.b);E$bc(B.y,B.x)}P==E$o&&(P=30);B=P*E$fc/180;q=B*E$cc(q/B);s.x=E$$b(q);s.y=E$ac(q);s.K();z.b.x=C.b.x+s.x;z.b.y=C.b.y+s.y;if(y!=E$q){var v=E$W(C.b,z.b);E$bc(v.y,v.x);var r=E$W(y.b,C.b);E$bc(r.y,r.x);var p;v.K();r.K();p=E$bc(r.y,r.x)-E$bc(v.y,v.x);var o=E$bh(p);E$Wb(o)<50||E$Wb(o)}}if(this.ca&this.wb){if(this.yb!=E$q){var O=E$W(this.yb.b,this.wb.b);O.K();E$bc(O.y,O.x)}J=E$W(this.wb.b,this.ca.b);J.K();E$bc(J.y,J.x)}}this.yb=this.wb;this.wb=this.ca;this.ca=E$q;this.la.x=E$U(this.a,this.yb.b.x);this.la.y=E$T(this.a,this.yb.b.y);J=E$W(this.ea.b,new E$Q(E$Bb(this.a,N.x),E$Cb(this.a,N.y)));E$E(this.a.sc,E$T(this.a,this.wb.b.y)+35,E$U(this.a,this.wb.b.x)+35*(J.x>0?1:0.2));this.a.sc.innerHTML=this.a.p.f.length;this.a.sc.style.visibility="visible"}E$vh(this.a.e)}E$Ie(this.a)}catch(Q){M="";for(D in Q){M=M+("property: "+D+" value: ["+Q[D]+"]")}M=M+("toString():  value: ["+Q.toString()+"]");console.log("AddMultiBondEditor EXCEPTION onmousemove"+M)}};E$Ic.prototype.onmouseup=function(t){try{var s=E$M(this.a,t);(this.a.Tb||this.a.Ud)&&E$kc(this.a.e);if(this.Fd&&this.a.p.f.length==1||!this.Fd&&this.a.p.f.length==0){var s=E$M(this.a,t),r=this.a.t;if(r!=E$q){if(this.o==0){if(this.o!=0||this.l>1){r.o=0;r.l=this.l;r.type=this.l}else{r.o=0;r.l=E$Ue(r.j,E$p)>0&&E$Ue(r.k,E$p)>0?r.l+1:1;if(r.l>3){r.l=1}if(r.Xb()&&r.l>2){r.l=1}r.type=r.l}}else{if(this.l==1){E$$d(r,this.o,this.M)}else{r.l=this.l;r.type=this.l;r.o=this.o}}E$vh(this.a.e);this.a.cb=E$p;this.Ia=E$s}else{var q=this.a.q;if(q==E$q){var p=E$ch(this.a.e);p.b.x=s.ha;p.b.y=s.ia;var o=E$ch(this.a.e),t=30*E$fc/180;o.b.x=s.ha+E$$b(t);o.b.y=s.ia+E$ac(t);this.Ia=this.a.e.Ga(p,o,this.l,this.o);this.a.cb=E$p;this.a.q=p;this.a.Ka=E$p;if(this.a.Tb){p.selected=1;o.selected=1}}else{this.Ia=E$Gi(this.a.e,q,this.l,this.o,t.ctrlKey);if(this.a.Ud){E$R(this.Ia,q).selected=1}this.a.cb=E$p}}}else{E$ph(this.a);if(this.a.Tb&&this.ea){this.ea.selected=1}this.a.p=E$q;E$zc(this.a);E$N(this.a)}this.a.sc.style.visibility="hidden";this.ea=this.ca=this.la=E$q;this.a.p=E$q;E$zc(this.a);E$Ie(this.a)}catch(n){var s="",m;for(m in n){s=s+("property: "+m+" value: ["+n[m]+"]")}s=s+("toString():  value: ["+n.toString()+"]");console.log("AddMultiBondEditor EXCEPTION onmouseup"+s)}};function E$od(){}E$od.prototype.onmousedown=function(e){this.a.sa=E$M(this.a,e);this.a.Ca=E$q;this.a.Ka=E$p;this.xa=E$s};E$od.prototype.onmouseup=function(r){!this.xa&&!r.ctrlKey&&E$kc(this.a.e);this.a.sa=E$q;this.a.Ca=E$q;this.xa=E$s;E$M(this.a,r);this.a.Ka=E$p;E$Ie(this.a);if(E$Vd(this.a.e)){this.a.Rf=E$q;var r=this.a,q=E$Xc(r.e);r.qa=[];for(var p=[],o=0;o<q.length;o++){for(var n=q[o],m=0;m<n.g.length;m++){var l=n.g[m];E$R(l,n).selected||p.push(l)}}for(E$ta=0;E$ta<2;E$ta++){if(E$ta==0){r.qa.left=[];q=r.n.x}else{r.qa.right=[];q=r.n.x+r.n.width}for(j=0;j<p.length;j++){l=p[j];if(E$kl(q,r.n.y,q,r.n.y+r.n.height,l.j.b.x,l.j.b.y,l.k.b.x,l.k.b.y)){E$ta==0?r.qa.left.push(l):r.qa.right.push(l);r.qa.push(l)}}}if((r.qa.left.length>2||r.qa.right.length>2)&&r.qa.left.length!=r.qa.right.length){console.log("Equal number of crossing bonds per bracket needed");r.qa=[];r.qa.left=[];r.qa.right=[]}E$Zk(this.a);this.a.Da.style.display="block"}};E$od.prototype.onmousemove=function(i){if(this.a.sa){this.xa||E$kc(this.a.e);this.xa=E$p;this.a.Ca=E$M(this.a,i);var h=this.a.i.uiSelectionClickSelectedUnselects,g=E$s;if(this.a.i.uiSelectionSHIFTallowsAddition&&i.shiftKey||this.a.i.uiSelectionCTRLallowsAddition&&i.ctrlKey){g=E$p}E$wh(this.a,g,h,E$p);i=0;for(h=this.a.e.g.length;i<h;i++){this.e.g[i].selected=0}this.a.Ka=E$p}else{E$B.Ad=E$M(this.a,i)}E$Ie(this.a)};function E$rl(n){n.g=[];for(var m=0;m<n.f.length;m++){for(var l=n.f[m],k=0;k<l.g.length;k++){var i=l.g[k];E$R(i,l).selected||n.g.push(i)}}n.g.length=1;n.sb=n.g[0].j.selected?n.g[0].j:n.g[0].k}function E$Zk(i,h){var g;if(h){i.Da.type.value=h.type;i.Da.label.value=h.type=="COM"?h.label.substring(1):h.label;g=h.g}else{i.Da.type.value="SRU";i.Da.label.value="n";i.Da.Va.value="HT";g=i.qa}if(g.length>3&&g.left&&g.right&&g.left.length==g.right.length){i.Da.Qh.style.display="table-row";i.Da.mh.style.display="none";i.Da.nh="ladder";h&&h.Va?i.Da.sg.value=h.$c?h.Va+":flip":h.Va+":noflip":i.Da.sg.selectedIndex=0}else{i.Da.Qh.style.display="none";i.Da.mh.style.display="table-row";i.Da.nh="normal";h&&h.Va?i.Da.Va.value=h.Va:i.Da.Va.selectedIndex=0}i.Da.type.Xh(E$p)}function E$zd(B){var A=B.da(B.z,"","");B.Da=A;A.style.border="1px solid #aaa";E$Sc(A,10,10,10,10);var z=document.createElement("table");z.style.margin="10px 5px";tbody=document.createElement("tbody");z.appendChild(tbody);var y=document.createElement("tr");tbody.appendChild(y);var v=document.createElement("td");y.appendChild(v);v.style.fontSize=12*E$B.G+"px";v.innerHTML="Type";v=document.createElement("td");y.appendChild(v);var s=document.createElement("select");s.style.fontSize=12*E$B.G+"px";A.type=s;v.appendChild(s);for(var r=["ANY","COM","COP","ALT","BLO","RAN","CRO","GEN","GRF","FOR","MER","MIX","MOD","MON","MUL","SRU","SUP"],q=["Any polymer (anyp)","Component (com)","Copolymer (co)","Copolymer, alternating (alt)","Copolymer, block (blk)","Copolymer, random (ran)","Crosslink (xl)","Generic ()","Graft (grf)","Formulation (f)","Mer (mer)","Mixture (mix)","Modification (mod)","Monomer (m)","Multiple (#)","SRU (n)","Superatom (abbreviation)"],v=0;v<r.length;v++){var p=document.createElement("option");p.setAttribute("value",r[v]);p.appendChild(document.createTextNode(q[v]));s.appendChild(p)}y=document.createElement("tr");tbody.appendChild(y);var o=document.createElement("td");y.appendChild(o);o.style.fontSize=12*E$B.G+"px";o.innerHTML="SRU label";v=document.createElement("td");y.appendChild(v);var F=document.createElement("input");F.setAttribute("type","text");A.label=F;v.appendChild(F);y=document.createElement("tr");A.mh=y;tbody.appendChild(y);r=document.createElement("td");y.appendChild(r);r.style.fontSize=12*E$B.G+"px";r.innerHTML="Connection";v=document.createElement("td");y.appendChild(v);var E=document.createElement("select");E.style.fontSize=12*E$B.G+"px";A.Va=E;v.appendChild(E);for(var D=["HT","HH","EU"],q=["Head-to-tail","Head-to-head","Either/unknown"],v=0;v<D.length;v++){p=document.createElement("option");p.setAttribute("value",D[v]);p.appendChild(document.createTextNode(q[v]));E.appendChild(p)}y=document.createElement("tr");A.Qh=y;y.style.display="none";tbody.appendChild(y);D=document.createElement("td");y.appendChild(D);D.style.fontSize=12*E$B.G+"px";D.innerHTML="Connection";v=document.createElement("td");y.appendChild(v);y=document.createElement("select");y.style.fontSize=12*E$B.G+"px";A.sg=y;v.appendChild(y);for(var C=["HT:noflip","HT:flip","HH:noflip","HH:flip","EU"],q=["Head-to-tail (no flip)","Head-to-tail (flip)","Head-to-head (no flip)","Head-to-head (flip)","Either/unknown"],v=0;v<C.length;v++){p=document.createElement("option");p.setAttribute("value",C[v]);p.appendChild(document.createTextNode(q[v]));y.appendChild(p)}v=document.createElement("div");v.align="center";v.style.marginTop="10px";q=document.createElement("input");q.setAttribute("type","button");q.value="OK";q.style.fontSize=12*E$B.G+"px";v.appendChild(q);q.a=B;q.z=A;q.onclick=function(){if(this.z.label.sf&&!this.z.label.sf()){this.z.type.value=="COM"?alert("Order needs to be a number"):this.z.type.value=="MUL"?alert("Repeat count needs to be a number"):this.z.type.value=="SRU"&&alert("SRU label needs to be a letter, or a range 1-3, or ranges 2,4-6")}else{a:{var H=this.a,G=this.a.Rf,x=E$s,w=E$s;H.save();if(G){if(H.Da.type.value!=G.type){if(G.type=="MUL"){G.Ya=[]}E$nl(G,H.Da.type.value);for(var w=E$p,u=0;u<G.f.length;u++){G.f[u].selected=1}G.coords.length=0;H.qa=[];H.qa.left=[];H.qa.right=[];for(u=0;u<G.f.length;u++){for(var t=G.f[u],n=0;n<t.g.length;n++){var m=t.g[n];E$si(G,m.j)?E$si(G,m.k)||H.qa.push(m):H.qa.push(m);if(H.qa.length==2){if(E$Ff(H.qa[0]).x<E$Ff(H.qa[1]).x){H.qa.left.push(H.qa[0]);H.qa.right.push(H.qa[1])}else{H.qa.left.push(H.qa[1]);H.qa.right.push(H.qa[0])}break}}}if(G.type=="SUP"){E$rl(G);if(G.g.length>1){G.$b=E$s}E$vi(G,G.$b);for(u=0;u<G.f.length;u++){t=G.f[u];t.abbr=G}}}}else{x=E$p;G=new E$mi(H.Da.type.value,H.e.r.length+1);G.f=E$Xc(H.e);if(G.type=="SUP"){E$rl(G);if(G.g.length>1){G.$b=E$s}for(u=0;u<G.f.length;u++){t=G.f[u];t.abbr=G}}}if(isPolymer(G.type)){if(H.Da.nh=="ladder"){u=H.Da.sg.value.split(":");G.Va=u[0];G.$c=u[1]=="flip"?E$p:E$s}else{G.Va=H.Da.Va.value;G.$c=E$o}}else{G.Va=E$o}if(G.type=="MUL"){G.label=parseInt(H.Da.label.value);if(G.label){if(x||w){if(H.qa.length!=0&&H.qa.length!=2){E$kc(H.e);E$N(H,E$p);break a}G.Ya=E$Xc(H.e);G.g=H.qa}}else{break a}}else{G.label=G.type=="COM"?G.label+H.Da.label.value:H.Da.label.value}if(x||w){if(isPolymer(G.type)){G.g=H.qa;for(u=0;u<G.g.length;u++){m=H.qa[u];if(m.j.selected){if(m.k.g.length==1){m.k.A="*"}}else{if(m.j.g.length==1){m.j.A="*"}}}for(t=0;t<2;t++){w=H.qa.left;if(t==1){w=H.qa.right}m=[];for(u=0;u<w.length;u++){m.push(E$Ff(w[u]))}if(m.length==1){if(t==0){G.coords.push(new E$Q(m[0].x,m[0].y-0.6));G.coords.push(new E$Q(m[0].x,m[0].y+0.6))}else{G.coords.push(new E$Q(m[0].x,m[0].y+0.6));G.coords.push(new E$Q(m[0].x,m[0].y-0.6))}}else{if(m.length==2){u=new E$Q;u.set(m[0]);u.add(m[1]);u.x=u.x/2;u.y=u.y/2;u=E$W(m[0],m[1]);u.K();m[1].add(u,0.6);u.scale(-0.6);m[0].add(u);if(t==0){if(m[0].y<m[1].y){G.coords.push(new E$Q(m[0].x,m[0].y));G.coords.push(new E$Q(m[1].x,m[1].y))}else{G.coords.push(new E$Q(m[1].x,m[1].y));G.coords.push(new E$Q(m[0].x,m[0].y))}}else{if(m[0].y>m[1].y){G.coords.push(new E$Q(m[0].x,m[0].y));G.coords.push(new E$Q(m[1].x,m[1].y))}else{G.coords.push(new E$Q(m[1].x,m[1].y));G.coords.push(new E$Q(m[0].x,m[0].y))}}}}}if(H.qa.left.length==0||H.qa.right.length==0){u=E$Vi(G.f);if(H.qa.left.length==0){G.coords.push(new E$Q(u.$-0.5,u.ra-0.5));G.coords.push(new E$Q(u.$-0.5,u.wa+0.5))}if(H.qa.right.length==0){G.coords.push(new E$Q(u.I+0.5,u.wa+0.5));G.coords.push(new E$Q(u.I+0.5,u.ra-0.5))}}}else{if(G.type=="DAT"){for(u=0;u<G.f.length;u++){t=G.f[u];for(w=0;w<t.g.length;w++){m=t.g[w];E$R(m,t).selected&&G.g.push(m)}}}else{if(G.type=="SUP"){E$vi(G,G.$b)}else{u=E$Vi(G.f);G.coords.push(new E$Q(u.$-0.5,u.ra-0.5));G.coords.push(new E$Q(u.$-0.5,u.wa+0.5));G.coords.push(new E$Q(u.I+0.5,u.wa+0.5));G.coords.push(new E$Q(u.I+0.5,u.ra-0.5))}}}x&&H.e.r.push(G);E$kc(H.e)}E$pl(G);E$N(H,E$p)}this.a.Rf=E$q;this.a.Da.style.display="none"}};q=document.createElement("input");q.setAttribute("type","button");q.value="Cancel";q.style.fontSize=12*E$B.G+"px";v.appendChild(q);q.a=B;q.onclick=function(){this.a.Da.style.display="none";this.a.Rf=E$q};A.appendChild(z);A.appendChild(v);A.style.zIndex=10;A.style.display="none";A.style.fontSize=13*E$B.G+"px";z=290*(1+(E$B.G-1)/1.5);v=B.width_-10;z=z>v?v:z;v=150*(1+(E$B.G-1)/1.5);E$E(A,B.height_/2-v/2,B.width_/2-z/2,z,v);A.style.background=B.Wa;s.label=F;s.Ph=o;s.Va=[E,y];s.lh=[r,D];s.Wh=function(){return/[^0-9]/.test(this.value)?E$s:E$p};s.Zj=function(){return(this.value.length==1?/[^a-zA-z]/:/[^0-9,-]/).test(this.value)?E$s:E$p};s.Xh=function(e){if(this.value=="COM"){o.innerHTML="Order";if(!e){F.value=""}F.sf=this.Wh}else{if(this.value=="SUP"){o.innerHTML="Abbreviation";if(!e){F.value=""}F.sf=E$q}else{if(this.value=="MUL"){o.innerHTML="Repeat count";if(!e){F.value="2"}F.sf=this.Wh}else{o.innerHTML="SRU label";if(!e){F.value="n"}F.sf=this.Zj}}}if(isPolymer(this.value)||this.value=="COM"||this.value=="MUL"||this.value=="SUP"){this.label.disabled=E$s;this.Ph.style.color="black"}else{this.label.disabled=E$p;this.Ph.style.color="grey"}if(isPolymer(this.value)){for(e=0;e<this.Va.length;e++){this.Va[e].disabled=E$s;this.lh[e].style.color="black"}}else{for(e=0;e<this.Va.length;e++){this.Va[e].disabled=E$p;this.lh[e].style.color="grey"}}};s.onchange=function(){s.Xh()}}function E$nd(){}E$nd.prototype.onmousedown=E$aa();E$nd.prototype.onmousemove=function(r,q){if(q&&this.ld){r.clientX=this.ld.x;r.clientY=this.ld.y}E$M(this.a,r,E$o,E$p,E$o,E$p);if(this.a.t!=E$q){for(var p=this.a.e,o=this.a.t,n=r.shiftKey||r.ctrlKey,m=0,l=p.f.length;m<l;m++){p.f[m].selected=0}if(!o.Xb()){E$Yc(o.j.g,o);E$Yc(o.k.g,o);m=E$Re(p,o.j);p=E$Re(p,o.k);o.j.g.push(o);o.k.g.push(o);o=m;if(n?m.length<=p.length:m.length>p.length){o=p}m=0;for(l=o.length;m<l;m++){o[m].selected=1}}this.a.Ka=E$p}E$Ie(this.a);if(!q){this.ld=new E$Q(r.clientX,r.clientY)}};E$nd.prototype.onmouseup=function(e){if(this.a.t!=E$q){E$Ga(e);this.a.save();this.a.e.kk(this.a.t,e.shiftKey||e.ctrlKey,this.a.i.toRgroup);E$N(this.a,E$p)}};E$Fh.prototype.gf=function(r,q){var p=r.indexOf("["),o=r.indexOf("]"),o=o==-1?r.length:o,r=r.substring(p==-1?0:p+1,o),p=r.split(",");this.U.length=0;this.nc=q;for(var o=0,n=p.length;o<n;o++){var m=E$ae(p[o]);if(m!=-1){this.U.push(m)}else{var l=p[o];if(p[o].length==1){l=p[o].toUpperCase();m=E$ae(l)}else{if(p[o].length==2){l=p[o].substr(0,1).toUpperCase()+p[o].substr(1).toLowerCase();m=E$ae(l)}}if(m!=-1){this.U.push(m);p[o]=l}}}return p};function E$Ra(n){try{if((window.getComputedStyle?getComputedStyle(n,E$q):n.currentStyle).boxSizing=="border-box"){n.style.boxSizing="content-box";n.className=n.className+" DotmaticsElemental";var m=document.createElement("style");m.setAttribute("media","screen");var l=document.head||document.getElementsByTagName("head")[0]||document.documentElement.firstChild;if(l){l.appendChild(m);var k=m.sheet||m.styleSheet;if(k){E$sl(k,"div.DotmaticsElemental *");E$sl(k,"div.DHTMLSuite_menuBar_sub *");E$sl(k,"div.DHTMLSuite_contextMenu *");E$sl(k,"div.DHTMLSuite_menuBar_sub");E$sl(k,"div.DHTMLSuite_contextMenu")}}}}catch(i){console.log(i.message)}}function E$sl(g,f){"insertRule" in g?g.insertRule(f+"{box-sizing: content-box;}",E$o):"addRule" in g&&g.addRule(f,"box-sizing: content-box;",E$o)}Object.hasOwnProperty("keys")||(Object.keys=function(i){if(Object(i)!==i){throw new TypeError("Object.keys called on a non-enumerable")}var h=[],g;for(g in i){i.hasOwnProperty(g)&&(h[h.length]=g)}return h});