var platformAlerting=$("#platformAlerting").val();$("#sss_overlay").dialog({autoOpen:false,modal:true,draggable:false,dialogClass:"ui-dialog-sqc",width:"600",resizable:false,close:function(){$("#errorMessage").hide();$("#saveHistoryImageDisabled").hide();$("#saveHistoryButton").show();var b=$('select[id="sssSaveAlertType"] option:selected').val();$('select[id="sssSaveAlertType"]').val(b).attr("selected","selected").trigger("change");var a=$('select[id="sssSaveEmailFormat"] option:selected').val();$('select[id="sssSaveEmailFormat"]').val(a).attr("selected","selected").trigger("change");$(".CHEMsummImg").show()},create:function(){$("#emailAlertsCheckbox").change(function(){sssChangeEmailAlertFields()});var a=$(this).dialog("widget");if(platformAlerting=="true"){$(".ui-dialog-titlebar-close img:first()",a).remove();$(".ui-dialog-titlebar-close span:first()",a).removeClass();$(".ui-dialog-titlebar-close span.ui-button-text",a).text("");$(".ui-dialog-title",a).removeClass()}else{$(".ui-dialog-titlebar-close span:first()",a).removeClass().addClass("fa fa-times icon-clearnew dialog-close-adjust");$(".ui-dialog-titlebar-close span.ui-button-text",a).text("");$(".ui-dialog-titlebar-close",a).removeClass().addClass("dialog-close-transparent")}},open:function(){if(platformAlerting=="true"){$("#sss_overlay").height("auto");$("#sss_overlay").css("vertical-align","middle");$(".CHEMsummImg").hide();if($("#isDiidwChem").val()=="true"){$("#emailAlertsCheckbox").prop("checked",false);$("#emailAlertsCheckbox").prop("disabled",true);$("#sssSaveFreqType").prop("disabled",true);$("#emailAlertsNoResultsCheckbox").prop("disabled",true)}}else{var a=$("#sss_overlay").get(0).scrollHeight;$("#sss_overlay").height("scrollHeight + 20");$("#sss_overlay").css("overflow","auto");$("#sss_overlay").css("vertical-align","middle");$(".CHEMsummImg").hide()}},overlay:{opacity:0.1,background:"#C2C2C2"}});$("#sss_overlay_response").dialog({autoOpen:false,modal:true,draggable:false,width:"600",dialogClass:"ui-dialog-sqc",resizable:false,open:function(){var a=$("#sss_overlay_response").get(0).scrollHeight;if(platformAlerting=="true"){$("#sss_overlay_response").height("482")}else{$("#sss_overlay_response").height("auto");$("#sss_overlay_response").css("vertical-align","middle");$("#sss_overlay_response").css("overflow","hidden")}},overlay:{opacity:0.1,background:"#C2C2C2"},create:function(){var b=$(this).dialog("widget");if(platformAlerting=="true"){$(".ui-dialog-titlebar-close span:first()",b).removeClass();var a=$("#cancel_img").val();$(".ui-dialog-titlebar-close").append("<img src="+a+" id='closeImg' >");$(".ui-dialog-titlebar-close span.ui-button-text",b).text("");$(".ui-dialog-titlebar-close",b).removeClass().addClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only ui-dialog-titlebar-close");$(".ui-dialog-title",b).removeClass()}else{$(".ui-dialog-titlebar-close span:first()",b).removeClass();$(".ui-dialog-titlebar-close span.ui-button-text",b).text("");$(".ui-dialog-titlebar-close",b).removeClass().addClass("dialog-close-transparent")}}});if(platformAlerting=="true"){$("#sss_overlay").dialog({width:"400",height:"360"});$("#sss_overlay_response").dialog({width:"400",height:"500",dialogClass:"ui-dialog-sqc sss-alert-response"})}function sss_overlay(){$("#sss_overlay").dialog("open")}function modifySSSOverlayClose(a){$("#sss_overlay").dialog({close:function(){$(location).attr("href",a)}});$("#sss_overlay_response").dialog({close:function(){$(location).attr("href",a)}})}function sss_overlay_resp_close(){$("#sss_overlay_response").dialog("close");$("#sss_overlay").dialog("close")}function sssChangeEmailAlertFields(){var a=$("#emailAlertsCheckbox").is(":checked");if(a){$("#sssSaveEmailAddress").prop("disabled",false);$("#sssSaveAlertType").prop("disabled",false);$("#sssSaveEmailFormat").prop("disabled",false);$("#sssSaveFreqType").prop("disabled",false);$("#sssSaveEmailAddressLabel").removeClass("disabled");$("#sssSaveEmailFormatLabel").removeClass("disabled");$("#sssSaveAlertTypeLabel").removeClass("disabled");$("#sssSaveFreqType").css("background-color","#FFFFFF")}else{if(platformAlerting!="true"){$("#sssSaveEmailAddress").prop("disabled","disabled");$("#sssSaveFreqType").prop("disabled",false)}if(platformAlerting=="true"){$("#sssSaveFreqType").prop("disabled","disabled");$("#sssSaveFreqType").css("background-color","#EEEEEE")}$("#sssSaveAlertType").prop("disabled","disabled");$("#sssSaveEmailFormat").prop("disabled","disabled");$("#sssSaveEmailAddressLabel").addClass("disabled");$("#sssSaveEmailFormatLabel").addClass("disabled");$("#sssSaveAlertTypeLabel").addClass("disabled")}}function isValidEmail(a){var c=/^(([a-zA-Z0-9])(([a-zA-Z0-9])*(['\._-])?([a-zA-Z0-9]))*@(([a-zA-Z0-9\-])+(\.))+([a-zA-Z]{2,4})+( )*([,;])?( )*)+$/;a=$.trim(a);var b=new String(a);if(b.match(c)){return true}return false}function isValidHistoryName(a){var c=/(.*)([\\<>&\"])+(.*)/;var b=new String(a);if(b.match(c)){return false}return true}function isValidHistoryDesc(c){var b=/(.*)([\\<>])+(.*)/;var a=new String(c);if(a.match(b)){return false}return true}function checkSaveFields(){var b=true;var a=$('input:text[name="search_name"]').val();if(a.length<=0){$("#sssSaveErrorHistoryNameMissingDiv").show();$('input:text[name="search_name"]').css("border-bottom","3px solid  #DC0A0A");$("#sssSaveErrorHistoryNameInvalidDiv").hide();$("#sssSaveHistoryNamePlaceholderDiv").hide();b=false}else{if(!isValidHistoryName(a)){$("#sssSaveErrorHistoryNameInvalidDiv").show();$("#sssSaveErrorHistoryNameMissingDiv").hide();b=false}else{$("#sssSaveErrorHistoryNameMissingDiv").hide();$("#sssSaveErrorHistoryNameInvalidDiv").hide()}}var d=$('input:text[name="search_desc"]').val();if(d==" "){document.getElementById("searchDesc").required=false}if(!isValidHistoryDesc(d)){$("#sssSaveErrorHistoryDescInvalidDiv").show();b=false}else{$("#sssSaveErrorHistoryDescInvalidDiv").hide()}if($("#emailAlertsCheckbox").is(":checked")){var c=$('input:text[name="email_address"]').val();if(!isValidEmail(c)){$("#sssSaveErrorEmailDiv").show();return false}$("#sssSaveErrorEmailDiv").hide()}return b}function checkSearchName(){var b=true;var a=$('input:text[name="search_name"]').val();if(!isValidHistoryName(a)){$("#sssSaveErrorHistoryNameInvalidDiv").show();$("#searchName").addClass("inputText inputError");b=false}return b}function sss_add(a){if(checkSaveFields()){$("#sssSaveEmailAddress").prop("disabled",false);$("#sssSaveAlertType").prop("disabled",false);$("#sssSaveEmailFormat").prop("disabled",false);$("#sssSaveFreqType").prop("disabled",false);$("#saveHistoryButton").hide();$("#saveHistoryImageDisabled").show();$.ajax({type:"POST",url:a,data:$("#sss_overlay_form").serialize(),success:function(h){var g=h.Status;if(g=="Success"){$("#search_name").html(h.search_name);$("#search_desc").html(h.search_desc);var n=h.user_query_string;n=n.replace(/\&nbsp;/g," ");$("#user_query_string").html(n);if(h.alert_status=="On"){var b=$("#alertStatusOn").val();$("#alert_status").html(b)}else{var e=$("#alertStatusOff").val();$("#alert_status").html(e)}if(platformAlerting!="true"){var l=h.rss_url;if(location.protocol=="https:"){l=l.replace("http","https")}$("#rss_feed #rssURL").attr("href","javascript:openWindow('"+l+"','_WOK_RSS_')")}if(h.refinedBy!=null&&h.refinedBy!=""){$("#refinedBy").html($("#refinedByTag").text()+h.refinedBy);$("#refinedBy").show()}if(h.alert_status!=null&&h.alert_status.toLowerCase()=="on"){$("#email_address").html(h.email_address);var d=$("#sssSaveAlertType :selected").text();$("#alert_type").html(d);var p=$("#sssSaveEmailFormat :selected").text();$("#email_format").html(p);var m=$("#sssSaveFreqType :selected").text();var o=$("input#product").val();var c=$("input#diiWeekly").val();var j=$("input#diiMonthly").val();if(o=="DIIDW"){if(m=="Weekly"){$("#frequency").html(c)}else{$("#frequency").html(j)}}else{$("#frequency").html(m)}$("#confirmationAlertStatusDiv").show()}else{$("#alert_status").html($("#alertOffStatus").val());$("#confirmationAlertStatusDiv").hide()}$("#sss_overlay").dialog({close:function(){$("#errorMessage").hide();$("#saveHistoryImageDisabled").hide();$("#saveHistoryButton").show()}});var i=$('#sss_overlay_form input[name="searchIDToDelete"]').val();if(i!=null&&i!=""){$('#sss_overlay_form input[name="searchIDToDelete"]').remove()}$("#sss_overlay_response").dialog("open");$("#sss_overlay").dialog("close")}else{if(h.errorMessage=="DUPLICATE.SEARCH.NAME"){var k=$("#saveSearchVerifyOverwriteMessage").val();if(!confirm(k)){$("#saveHistoryButton").show();$("#saveHistoryImageDisabled").hide();return}processDupSearchName(h,a)}else{if(h.errorMessage=="OVER.MAX.GROUP.ALERTS.ALLOWED"){var k=$("#overMaxGroupAlertsAllowedMessage").val();alert(k);$("#sss_overlay").dialog("close");return}else{if(h.errorMessage=="OVER.MAX.ALLOWED.USER.QUERY.LENGTH"){var f=$("#overMaxAllowedUserQueryLength").val();alert(f);$("#sss_overlay").dialog("close");return}else{$("#errorMessage").show()}}}}$("#saveHistoryImageDisabled").hide();$("#saveHistoryButton").show()},error:function(b){$("#errorMessage").show();$("#saveHistoryImageDisabled").hide();$("#saveHistoryButton").show()}})}}function sss_add_platform_alerting(a){if(checkSearchName()){$("#sssSaveFreqType").prop("disabled",false);$("#saveHistoryButton").hide();$("#saveHistoryImageDisabled").show();$.ajax({type:"POST",url:a,data:$("#sss_overlay_form").serialize(),success:function(h){var g=h.Status;if(g=="Success"){$("#search_name").html(h.search_name);$("#search_desc").html(h.search_desc);$("#responseFrequency").html(h.frequency);var n=h.user_query_string;n=n.replace(/\&nbsp;/g," ");$("#user_query_string").html(n);if(h.alert_status=="On"){var b=$("#alertStatusOn").val();$("#alert_status").html(b)}else{var e=$("#alertStatusOff").val();$("#alert_status").html(e)}if(platformAlerting!="true"){var l=h.rss_url;if(location.protocol=="https:"){l=l.replace("http","https")}$("#rss_feed #rssURL").attr("href","javascript:openWindow('"+l+"','_WOK_RSS_')")}if(h.refinedBy!=null&&h.refinedBy!=""){$("#refinedBy").html($("#refinedByTag").text()+h.refinedBy);$("#refinedBy").show()}if(h.alert_status!=null&&h.alert_status.toLowerCase()=="on"){$("#email_address").html(h.email_address);var d=$("#sssSaveAlertType :selected").text();$("#alert_type").html(d);var p=$("#sssSaveEmailFormat :selected").text();$("#email_format").html(p);var m=$("#sssSaveFreqType :selected").text();var o=$("input#product").val();var c=$("input#diiWeekly").val();var j=$("input#diiMonthly").val();if(o=="DIIDW"){if(m=="Weekly"){$("#frequency").html(c)}else{$("#frequency").html(j)}}else{$("#frequency").html(m)}$("#confirmationAlertStatusDiv").show()}else{$("#alert_status").html($("#alertOffStatus").val());$("#confirmationAlertStatusDiv").hide()}$("#sss_overlay").dialog({close:function(){$("#errorMessage").hide();$("#saveHistoryImageDisabled").hide();$("#saveHistoryButton").show()}});var i=$('#sss_overlay_form input[name="searchIDToDelete"]').val();if(i!=null&&i!=""){$('#sss_overlay_form input[name="searchIDToDelete"]').remove()}$("#sss_overlay_response").dialog("open");$("#sss_overlay").dialog("close")}else{if(h.errorMessage=="DUPLICATE.SEARCH.NAME"){var k=$("#saveSearchVerifyOverwriteMessage").val();if(!confirm(k)){$("#saveHistoryButton").show();$("#saveHistoryImageDisabled").hide();return}processDupSearchNameInPlatform(h,a)}else{if(h.errorMessage=="OVER.MAX.GROUP.ALERTS.ALLOWED"){var k=$("#overMaxGroupAlertsAllowedMessage").val();alert(k);$("#sss_overlay").dialog("close");return}else{if(h.errorMessage=="OVER.MAX.ALLOWED.USER.QUERY.LENGTH"){var f=$("#overMaxAllowedUserQueryLength").val();alert(f);$("#sss_overlay").dialog("close");return}else{$("#errorMessage").show()}}}}$("#saveHistoryImageDisabled").hide();$("#saveHistoryButton").show()},error:function(b){$("#errorMessage").show();$("#saveHistoryImageDisabled").hide();$("#saveHistoryButton").show()}})}}function sss_add_local(a){$("#localSaveError").html("");$.ajax({type:"POST",url:a,success:function(c){var b=c.match(/errorMessage/gi);if(b!=null&&b.length>0){$("#localSaveError").html(c)}else{if(platformAlerting=="true"){$("#sss-local-download").addClass("download-box-hidden");$("#sss-local-download").removeClass("download-box-show");$("#sss_overlay").height("532");$("#showDownload").attr("showhide","hide")}$("#csiovldialog").dialog("close");go_to_url(a)}},error:function(b){if(!b.responseText){$(location).attr("href",a)}else{$("#localSaveError").html(b)}}})}function processDupSearchName(d,b){var a=d.searchIDToDelete;var c=$("#sss_overlay_form");c.append('<input type="hidden" name="searchIDToDelete" value="'+a+'" />');sss_add(b)}function processDupSearchNameInPlatform(d,b){var a=d.searchIDToDelete;var c=$("#sss_overlay_form");c.append('<input type="hidden" name="searchIDToDelete" value="'+a+'" />');sss_add_platform_alerting(b)}function FDtoggleShowHide(d){var a=$(d.currentTarget);var c=a.attr("showhide");var b=$("#sss-local-download");console.log(c);if(c==="hide"){b.addClass("download-box-show");b.removeClass("download-box-hidden");a.attr("showhide","show");$("#sss_overlay").height("650")}else{b.addClass("download-box-hidden");b.removeClass("download-box-show");a.attr("showhide","hide");$("#sss_overlay").height("532")}}var alertTypeSelector=$("#sssSaveAlertType");var htmlRestrictedTypes=["Full Record","Notify"];var fullRecordAlertOption=alertTypeSelector.find("option[value='Full Record']");var notifyOnlyAlertOption=alertTypeSelector.find("option[value='Notify Only']");if(fullRecordAlertOption.length>0&&notifyOnlyAlertOption.length>0){fullRecordAlertOption.remove();notifyOnlyAlertOption.remove();$("#sssSaveEmailFormat").change(function(b,a){if($(this).val()==="HTML"){fullRecordAlertOption.remove();notifyOnlyAlertOption.remove();if(htmlRestrictedTypes.includes(alertTypeSelector.find("option:selected").val())){fullRecordAlertOption.prop("selected",false);alertTypeSelector.find("option").first().prop("selected",true)}}else{alertTypeSelector.append(fullRecordAlertOption);alertTypeSelector.prepend(notifyOnlyAlertOption)}alertTypeSelector.select2()})}$(document).ready(function(){$("#searchName").focus(function(){$("#sssSaveErrorHistoryNameMissingDiv").hide();$('input:text[name="search_name"]').css("border-bottom","1px solid");$("#sssSaveHistoryNamePlaceholderDiv").show()})});function snowplowCall(d){var a=$(d).attr("id");var b=$("input[name=product]").val();var c="";switch(a){case"savehist":c="searchhistory-save_history-create_alert-click";break;case"openhist":c="searchhistory-open_saved_history-click";break;case"combineTop":case"combineBtm":c="searchhistory-combine-click";break;case"selectallTop":case"selectallBtm":c="searchhistory-select_all-click";break;case"deleteTop":case"deleteBtm":c="searchhistory-delete-click";break;case"saveHistoryButton":c="searchhistory-save_history-create_alert-save-click";break;case"savehistlocal":c="searchhistory-save_history-create_alert-download-click";break;case"editSet":c="searchhistory-edit_sets-click";break;case"hitCount":c="searchhistory-result_count-click";break;case"manageAlertsPage":c="alerting-manage-alerts-click";break;default:c=""}trackSnowplowEventSE(c,b)}function searchNameCheck(){var a=document.getElementById("searchName");var b=document.getElementById("saveHistoryButton");if(a.value.length>0){b.disabled=false}else{if(a.value.length===0){b.disabled=true}}};